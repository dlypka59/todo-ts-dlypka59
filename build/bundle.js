var V2=Object.defineProperty;var U2=(t,e,n)=>e in t?V2(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var M=(t,e,n)=>U2(t,typeof e!="symbol"?e+"":e,n);function H2(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Ee=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function m0(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function br(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var L1={exports:{}},hu={},D1={exports:{}},Oe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qa=Symbol.for("react.element"),q2=Symbol.for("react.portal"),j2=Symbol.for("react.fragment"),K2=Symbol.for("react.strict_mode"),z2=Symbol.for("react.profiler"),G2=Symbol.for("react.provider"),X2=Symbol.for("react.context"),Y2=Symbol.for("react.forward_ref"),Q2=Symbol.for("react.suspense"),J2=Symbol.for("react.memo"),Z2=Symbol.for("react.lazy"),Rm=Symbol.iterator;function eS(t){return t===null||typeof t!="object"?null:(t=Rm&&t[Rm]||t["@@iterator"],typeof t=="function"?t:null)}var F1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},$1=Object.assign,W1={};function Xs(t,e,n){this.props=t,this.context=e,this.refs=W1,this.updater=n||F1}Xs.prototype.isReactComponent={};Xs.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Xs.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function V1(){}V1.prototype=Xs.prototype;function y0(t,e,n){this.props=t,this.context=e,this.refs=W1,this.updater=n||F1}var v0=y0.prototype=new V1;v0.constructor=y0;$1(v0,Xs.prototype);v0.isPureReactComponent=!0;var _m=Array.isArray,U1=Object.prototype.hasOwnProperty,w0={current:null},H1={key:!0,ref:!0,__self:!0,__source:!0};function q1(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)U1.call(e,r)&&!H1.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Qa,type:t,key:s,ref:o,props:i,_owner:w0.current}}function tS(t,e){return{$$typeof:Qa,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function b0(t){return typeof t=="object"&&t!==null&&t.$$typeof===Qa}function nS(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Pm=/\/+/g;function Sf(t,e){return typeof t=="object"&&t!==null&&t.key!=null?nS(""+t.key):e.toString(36)}function Zc(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Qa:case q2:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Sf(o,0):r,_m(i)?(n="",t!=null&&(n=t.replace(Pm,"$&/")+"/"),Zc(i,e,n,"",function(c){return c})):i!=null&&(b0(i)&&(i=tS(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Pm,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",_m(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+Sf(s,a);o+=Zc(s,e,n,l,i)}else if(l=eS(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+Sf(s,a++),o+=Zc(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function yc(t,e,n){if(t==null)return t;var r=[],i=0;return Zc(t,r,"","",function(s){return e.call(n,s,i++)}),r}function rS(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Jt={current:null},el={transition:null},iS={ReactCurrentDispatcher:Jt,ReactCurrentBatchConfig:el,ReactCurrentOwner:w0};function j1(){throw Error("act(...) is not supported in production builds of React.")}Oe.Children={map:yc,forEach:function(t,e,n){yc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return yc(t,function(){e++}),e},toArray:function(t){return yc(t,function(e){return e})||[]},only:function(t){if(!b0(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Oe.Component=Xs;Oe.Fragment=j2;Oe.Profiler=z2;Oe.PureComponent=y0;Oe.StrictMode=K2;Oe.Suspense=Q2;Oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=iS;Oe.act=j1;Oe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=$1({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=w0.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)U1.call(e,l)&&!H1.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Qa,type:t.type,key:i,ref:s,props:r,_owner:o}};Oe.createContext=function(t){return t={$$typeof:X2,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:G2,_context:t},t.Consumer=t};Oe.createElement=q1;Oe.createFactory=function(t){var e=q1.bind(null,t);return e.type=t,e};Oe.createRef=function(){return{current:null}};Oe.forwardRef=function(t){return{$$typeof:Y2,render:t}};Oe.isValidElement=b0;Oe.lazy=function(t){return{$$typeof:Z2,_payload:{_status:-1,_result:t},_init:rS}};Oe.memo=function(t,e){return{$$typeof:J2,type:t,compare:e===void 0?null:e}};Oe.startTransition=function(t){var e=el.transition;el.transition={};try{t()}finally{el.transition=e}};Oe.unstable_act=j1;Oe.useCallback=function(t,e){return Jt.current.useCallback(t,e)};Oe.useContext=function(t){return Jt.current.useContext(t)};Oe.useDebugValue=function(){};Oe.useDeferredValue=function(t){return Jt.current.useDeferredValue(t)};Oe.useEffect=function(t,e){return Jt.current.useEffect(t,e)};Oe.useId=function(){return Jt.current.useId()};Oe.useImperativeHandle=function(t,e,n){return Jt.current.useImperativeHandle(t,e,n)};Oe.useInsertionEffect=function(t,e){return Jt.current.useInsertionEffect(t,e)};Oe.useLayoutEffect=function(t,e){return Jt.current.useLayoutEffect(t,e)};Oe.useMemo=function(t,e){return Jt.current.useMemo(t,e)};Oe.useReducer=function(t,e,n){return Jt.current.useReducer(t,e,n)};Oe.useRef=function(t){return Jt.current.useRef(t)};Oe.useState=function(t){return Jt.current.useState(t)};Oe.useSyncExternalStore=function(t,e,n){return Jt.current.useSyncExternalStore(t,e,n)};Oe.useTransition=function(){return Jt.current.useTransition()};Oe.version="18.3.1";D1.exports=Oe;var A=D1.exports;const Pe=m0(A),Fh=H2({__proto__:null,default:Pe},[A]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sS=A,oS=Symbol.for("react.element"),aS=Symbol.for("react.fragment"),cS=Object.prototype.hasOwnProperty,lS=sS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,uS={key:!0,ref:!0,__self:!0,__source:!0};function K1(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)cS.call(e,r)&&!uS.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:oS,type:t,key:s,ref:o,props:i,_owner:lS.current}}hu.Fragment=aS;hu.jsx=K1;hu.jsxs=K1;L1.exports=hu;var F=L1.exports,$h={},z1={exports:{}},En={},G1={exports:{}},X1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(C,V){var q=C.length;C.push(V);e:for(;0<q;){var G=q-1>>>1,Y=C[G];if(0<i(Y,V))C[G]=V,C[q]=Y,q=G;else break e}}function n(C){return C.length===0?null:C[0]}function r(C){if(C.length===0)return null;var V=C[0],q=C.pop();if(q!==V){C[0]=q;e:for(var G=0,Y=C.length,z=Y>>>1;G<z;){var K=2*(G+1)-1,oe=C[K],te=K+1,J=C[te];if(0>i(oe,q))te<Y&&0>i(J,oe)?(C[G]=J,C[te]=q,G=te):(C[G]=oe,C[K]=q,G=K);else if(te<Y&&0>i(J,q))C[G]=J,C[te]=q,G=te;else break e}}return V}function i(C,V){var q=C.sortIndex-V.sortIndex;return q!==0?q:C.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,f=3,h=!1,p=!1,g=!1,w=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(C){for(var V=n(c);V!==null;){if(V.callback===null)r(c);else if(V.startTime<=C)r(c),V.sortIndex=V.expirationTime,e(l,V);else break;V=n(c)}}function b(C){if(g=!1,y(C),!p)if(n(l)!==null)p=!0,H(x);else{var V=n(c);V!==null&&W(b,V.startTime-C)}}function x(C,V){p=!1,g&&(g=!1,v(S),S=-1),h=!0;var q=f;try{for(y(V),d=n(l);d!==null&&(!(d.expirationTime>V)||C&&!B());){var G=d.callback;if(typeof G=="function"){d.callback=null,f=d.priorityLevel;var Y=G(d.expirationTime<=V);V=t.unstable_now(),typeof Y=="function"?d.callback=Y:d===n(l)&&r(l),y(V)}else r(l);d=n(l)}if(d!==null)var z=!0;else{var K=n(c);K!==null&&W(b,K.startTime-V),z=!1}return z}finally{d=null,f=q,h=!1}}var I=!1,k=null,S=-1,P=5,R=-1;function B(){return!(t.unstable_now()-R<P)}function T(){if(k!==null){var C=t.unstable_now();R=C;var V=!0;try{V=k(!0,C)}finally{V?N():(I=!1,k=null)}}else I=!1}var N;if(typeof m=="function")N=function(){m(T)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,$=L.port2;L.port1.onmessage=T,N=function(){$.postMessage(null)}}else N=function(){w(T,0)};function H(C){k=C,I||(I=!0,N())}function W(C,V){S=w(function(){C(t.unstable_now())},V)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(C){C.callback=null},t.unstable_continueExecution=function(){p||h||(p=!0,H(x))},t.unstable_forceFrameRate=function(C){0>C||125<C?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<C?Math.floor(1e3/C):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(C){switch(f){case 1:case 2:case 3:var V=3;break;default:V=f}var q=f;f=V;try{return C()}finally{f=q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(C,V){switch(C){case 1:case 2:case 3:case 4:case 5:break;default:C=3}var q=f;f=C;try{return V()}finally{f=q}},t.unstable_scheduleCallback=function(C,V,q){var G=t.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?G+q:G):q=G,C){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=q+Y,C={id:u++,callback:V,priorityLevel:C,startTime:q,expirationTime:Y,sortIndex:-1},q>G?(C.sortIndex=q,e(c,C),n(l)===null&&C===n(c)&&(g?(v(S),S=-1):g=!0,W(b,q-G))):(C.sortIndex=Y,e(l,C),p||h||(p=!0,H(x))),C},t.unstable_shouldYield=B,t.unstable_wrapCallback=function(C){var V=f;return function(){var q=f;f=V;try{return C.apply(this,arguments)}finally{f=q}}}})(X1);G1.exports=X1;var dS=G1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fS=A,In=dS;function ee(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Y1=new Set,Ia={};function qi(t,e){Ms(t,e),Ms(t+"Capture",e)}function Ms(t,e){for(Ia[t]=e,t=0;t<e.length;t++)Y1.add(e[t])}var _r=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Wh=Object.prototype.hasOwnProperty,hS=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Om={},Am={};function pS(t){return Wh.call(Am,t)?!0:Wh.call(Om,t)?!1:hS.test(t)?Am[t]=!0:(Om[t]=!0,!1)}function gS(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function mS(t,e,n,r){if(e===null||typeof e>"u"||gS(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Zt(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Lt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Lt[t]=new Zt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Lt[e]=new Zt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Lt[t]=new Zt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Lt[t]=new Zt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Lt[t]=new Zt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Lt[t]=new Zt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Lt[t]=new Zt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Lt[t]=new Zt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Lt[t]=new Zt(t,5,!1,t.toLowerCase(),null,!1,!1)});var x0=/[\-:]([a-z])/g;function k0(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(x0,k0);Lt[e]=new Zt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(x0,k0);Lt[e]=new Zt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(x0,k0);Lt[e]=new Zt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Lt[t]=new Zt(t,1,!1,t.toLowerCase(),null,!1,!1)});Lt.xlinkHref=new Zt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Lt[t]=new Zt(t,1,!1,t.toLowerCase(),null,!0,!0)});function I0(t,e,n,r){var i=Lt.hasOwnProperty(e)?Lt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(mS(e,n,i,r)&&(n=null),r||i===null?pS(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Mr=fS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,vc=Symbol.for("react.element"),us=Symbol.for("react.portal"),ds=Symbol.for("react.fragment"),S0=Symbol.for("react.strict_mode"),Vh=Symbol.for("react.profiler"),Q1=Symbol.for("react.provider"),J1=Symbol.for("react.context"),E0=Symbol.for("react.forward_ref"),Uh=Symbol.for("react.suspense"),Hh=Symbol.for("react.suspense_list"),T0=Symbol.for("react.memo"),qr=Symbol.for("react.lazy"),Z1=Symbol.for("react.offscreen"),Nm=Symbol.iterator;function so(t){return t===null||typeof t!="object"?null:(t=Nm&&t[Nm]||t["@@iterator"],typeof t=="function"?t:null)}var ft=Object.assign,Ef;function Jo(t){if(Ef===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Ef=e&&e[1]||""}return`
`+Ef+t}var Tf=!1;function Rf(t,e){if(!t||Tf)return"";Tf=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Tf=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Jo(t):""}function yS(t){switch(t.tag){case 5:return Jo(t.type);case 16:return Jo("Lazy");case 13:return Jo("Suspense");case 19:return Jo("SuspenseList");case 0:case 2:case 15:return t=Rf(t.type,!1),t;case 11:return t=Rf(t.type.render,!1),t;case 1:return t=Rf(t.type,!0),t;default:return""}}function qh(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ds:return"Fragment";case us:return"Portal";case Vh:return"Profiler";case S0:return"StrictMode";case Uh:return"Suspense";case Hh:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case J1:return(t.displayName||"Context")+".Consumer";case Q1:return(t._context.displayName||"Context")+".Provider";case E0:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case T0:return e=t.displayName||null,e!==null?e:qh(t.type)||"Memo";case qr:e=t._payload,t=t._init;try{return qh(t(e))}catch{}}return null}function vS(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return qh(e);case 8:return e===S0?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function oi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function eb(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function wS(t){var e=eb(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function wc(t){t._valueTracker||(t._valueTracker=wS(t))}function tb(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=eb(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function kl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function jh(t,e){var n=e.checked;return ft({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Cm(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=oi(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function nb(t,e){e=e.checked,e!=null&&I0(t,"checked",e,!1)}function Kh(t,e){nb(t,e);var n=oi(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?zh(t,e.type,n):e.hasOwnProperty("defaultValue")&&zh(t,e.type,oi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Mm(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function zh(t,e,n){(e!=="number"||kl(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Zo=Array.isArray;function ks(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+oi(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Gh(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ee(91));return ft({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Bm(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ee(92));if(Zo(n)){if(1<n.length)throw Error(ee(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:oi(n)}}function rb(t,e){var n=oi(e.value),r=oi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Lm(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function ib(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Xh(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?ib(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var bc,sb=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(bc=bc||document.createElement("div"),bc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=bc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Sa(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var oa={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},bS=["Webkit","ms","Moz","O"];Object.keys(oa).forEach(function(t){bS.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),oa[e]=oa[t]})});function ob(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||oa.hasOwnProperty(t)&&oa[t]?(""+e).trim():e+"px"}function ab(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=ob(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var xS=ft({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Yh(t,e){if(e){if(xS[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ee(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ee(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ee(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ee(62))}}function Qh(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Jh=null;function R0(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Zh=null,Is=null,Ss=null;function Dm(t){if(t=ec(t)){if(typeof Zh!="function")throw Error(ee(280));var e=t.stateNode;e&&(e=vu(e),Zh(t.stateNode,t.type,e))}}function cb(t){Is?Ss?Ss.push(t):Ss=[t]:Is=t}function lb(){if(Is){var t=Is,e=Ss;if(Ss=Is=null,Dm(t),e)for(t=0;t<e.length;t++)Dm(e[t])}}function ub(t,e){return t(e)}function db(){}var _f=!1;function fb(t,e,n){if(_f)return t(e,n);_f=!0;try{return ub(t,e,n)}finally{_f=!1,(Is!==null||Ss!==null)&&(db(),lb())}}function Ea(t,e){var n=t.stateNode;if(n===null)return null;var r=vu(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ee(231,e,typeof n));return n}var ep=!1;if(_r)try{var oo={};Object.defineProperty(oo,"passive",{get:function(){ep=!0}}),window.addEventListener("test",oo,oo),window.removeEventListener("test",oo,oo)}catch{ep=!1}function kS(t,e,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var aa=!1,Il=null,Sl=!1,tp=null,IS={onError:function(t){aa=!0,Il=t}};function SS(t,e,n,r,i,s,o,a,l){aa=!1,Il=null,kS.apply(IS,arguments)}function ES(t,e,n,r,i,s,o,a,l){if(SS.apply(this,arguments),aa){if(aa){var c=Il;aa=!1,Il=null}else throw Error(ee(198));Sl||(Sl=!0,tp=c)}}function ji(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function hb(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Fm(t){if(ji(t)!==t)throw Error(ee(188))}function TS(t){var e=t.alternate;if(!e){if(e=ji(t),e===null)throw Error(ee(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Fm(i),t;if(s===r)return Fm(i),e;s=s.sibling}throw Error(ee(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(ee(189))}}if(n.alternate!==r)throw Error(ee(190))}if(n.tag!==3)throw Error(ee(188));return n.stateNode.current===n?t:e}function pb(t){return t=TS(t),t!==null?gb(t):null}function gb(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=gb(t);if(e!==null)return e;t=t.sibling}return null}var mb=In.unstable_scheduleCallback,$m=In.unstable_cancelCallback,RS=In.unstable_shouldYield,_S=In.unstable_requestPaint,yt=In.unstable_now,PS=In.unstable_getCurrentPriorityLevel,_0=In.unstable_ImmediatePriority,yb=In.unstable_UserBlockingPriority,El=In.unstable_NormalPriority,OS=In.unstable_LowPriority,vb=In.unstable_IdlePriority,pu=null,fr=null;function AS(t){if(fr&&typeof fr.onCommitFiberRoot=="function")try{fr.onCommitFiberRoot(pu,t,void 0,(t.current.flags&128)===128)}catch{}}var Zn=Math.clz32?Math.clz32:MS,NS=Math.log,CS=Math.LN2;function MS(t){return t>>>=0,t===0?32:31-(NS(t)/CS|0)|0}var xc=64,kc=4194304;function ea(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Tl(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=ea(a):(s&=o,s!==0&&(r=ea(s)))}else o=n&~i,o!==0?r=ea(o):s!==0&&(r=ea(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Zn(e),i=1<<n,r|=t[n],e&=~i;return r}function BS(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function LS(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Zn(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=BS(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function np(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function wb(){var t=xc;return xc<<=1,!(xc&4194240)&&(xc=64),t}function Pf(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ja(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Zn(e),t[e]=n}function DS(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Zn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function P0(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Zn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Ke=0;function bb(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var xb,O0,kb,Ib,Sb,rp=!1,Ic=[],Qr=null,Jr=null,Zr=null,Ta=new Map,Ra=new Map,zr=[],FS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Wm(t,e){switch(t){case"focusin":case"focusout":Qr=null;break;case"dragenter":case"dragleave":Jr=null;break;case"mouseover":case"mouseout":Zr=null;break;case"pointerover":case"pointerout":Ta.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ra.delete(e.pointerId)}}function ao(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=ec(e),e!==null&&O0(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function $S(t,e,n,r,i){switch(e){case"focusin":return Qr=ao(Qr,t,e,n,r,i),!0;case"dragenter":return Jr=ao(Jr,t,e,n,r,i),!0;case"mouseover":return Zr=ao(Zr,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Ta.set(s,ao(Ta.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Ra.set(s,ao(Ra.get(s)||null,t,e,n,r,i)),!0}return!1}function Eb(t){var e=ki(t.target);if(e!==null){var n=ji(e);if(n!==null){if(e=n.tag,e===13){if(e=hb(n),e!==null){t.blockedOn=e,Sb(t.priority,function(){kb(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function tl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=ip(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Jh=r,n.target.dispatchEvent(r),Jh=null}else return e=ec(n),e!==null&&O0(e),t.blockedOn=n,!1;e.shift()}return!0}function Vm(t,e,n){tl(t)&&n.delete(e)}function WS(){rp=!1,Qr!==null&&tl(Qr)&&(Qr=null),Jr!==null&&tl(Jr)&&(Jr=null),Zr!==null&&tl(Zr)&&(Zr=null),Ta.forEach(Vm),Ra.forEach(Vm)}function co(t,e){t.blockedOn===e&&(t.blockedOn=null,rp||(rp=!0,In.unstable_scheduleCallback(In.unstable_NormalPriority,WS)))}function _a(t){function e(i){return co(i,t)}if(0<Ic.length){co(Ic[0],t);for(var n=1;n<Ic.length;n++){var r=Ic[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Qr!==null&&co(Qr,t),Jr!==null&&co(Jr,t),Zr!==null&&co(Zr,t),Ta.forEach(e),Ra.forEach(e),n=0;n<zr.length;n++)r=zr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<zr.length&&(n=zr[0],n.blockedOn===null);)Eb(n),n.blockedOn===null&&zr.shift()}var Es=Mr.ReactCurrentBatchConfig,Rl=!0;function VS(t,e,n,r){var i=Ke,s=Es.transition;Es.transition=null;try{Ke=1,A0(t,e,n,r)}finally{Ke=i,Es.transition=s}}function US(t,e,n,r){var i=Ke,s=Es.transition;Es.transition=null;try{Ke=4,A0(t,e,n,r)}finally{Ke=i,Es.transition=s}}function A0(t,e,n,r){if(Rl){var i=ip(t,e,n,r);if(i===null)$f(t,e,r,_l,n),Wm(t,r);else if($S(i,t,e,n,r))r.stopPropagation();else if(Wm(t,r),e&4&&-1<FS.indexOf(t)){for(;i!==null;){var s=ec(i);if(s!==null&&xb(s),s=ip(t,e,n,r),s===null&&$f(t,e,r,_l,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else $f(t,e,r,null,n)}}var _l=null;function ip(t,e,n,r){if(_l=null,t=R0(r),t=ki(t),t!==null)if(e=ji(t),e===null)t=null;else if(n=e.tag,n===13){if(t=hb(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return _l=t,null}function Tb(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(PS()){case _0:return 1;case yb:return 4;case El:case OS:return 16;case vb:return 536870912;default:return 16}default:return 16}}var Xr=null,N0=null,nl=null;function Rb(){if(nl)return nl;var t,e=N0,n=e.length,r,i="value"in Xr?Xr.value:Xr.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return nl=i.slice(t,1<r?1-r:void 0)}function rl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Sc(){return!0}function Um(){return!1}function Tn(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Sc:Um,this.isPropagationStopped=Um,this}return ft(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Sc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Sc)},persist:function(){},isPersistent:Sc}),e}var Ys={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},C0=Tn(Ys),Za=ft({},Ys,{view:0,detail:0}),HS=Tn(Za),Of,Af,lo,gu=ft({},Za,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:M0,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==lo&&(lo&&t.type==="mousemove"?(Of=t.screenX-lo.screenX,Af=t.screenY-lo.screenY):Af=Of=0,lo=t),Of)},movementY:function(t){return"movementY"in t?t.movementY:Af}}),Hm=Tn(gu),qS=ft({},gu,{dataTransfer:0}),jS=Tn(qS),KS=ft({},Za,{relatedTarget:0}),Nf=Tn(KS),zS=ft({},Ys,{animationName:0,elapsedTime:0,pseudoElement:0}),GS=Tn(zS),XS=ft({},Ys,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),YS=Tn(XS),QS=ft({},Ys,{data:0}),qm=Tn(QS),JS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ZS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},eE={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function tE(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=eE[t])?!!e[t]:!1}function M0(){return tE}var nE=ft({},Za,{key:function(t){if(t.key){var e=JS[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=rl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?ZS[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:M0,charCode:function(t){return t.type==="keypress"?rl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?rl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),rE=Tn(nE),iE=ft({},gu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),jm=Tn(iE),sE=ft({},Za,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:M0}),oE=Tn(sE),aE=ft({},Ys,{propertyName:0,elapsedTime:0,pseudoElement:0}),cE=Tn(aE),lE=ft({},gu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),uE=Tn(lE),dE=[9,13,27,32],B0=_r&&"CompositionEvent"in window,ca=null;_r&&"documentMode"in document&&(ca=document.documentMode);var fE=_r&&"TextEvent"in window&&!ca,_b=_r&&(!B0||ca&&8<ca&&11>=ca),Km=" ",zm=!1;function Pb(t,e){switch(t){case"keyup":return dE.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ob(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var fs=!1;function hE(t,e){switch(t){case"compositionend":return Ob(e);case"keypress":return e.which!==32?null:(zm=!0,Km);case"textInput":return t=e.data,t===Km&&zm?null:t;default:return null}}function pE(t,e){if(fs)return t==="compositionend"||!B0&&Pb(t,e)?(t=Rb(),nl=N0=Xr=null,fs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return _b&&e.locale!=="ko"?null:e.data;default:return null}}var gE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!gE[t.type]:e==="textarea"}function Ab(t,e,n,r){cb(r),e=Pl(e,"onChange"),0<e.length&&(n=new C0("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var la=null,Pa=null;function mE(t){Ub(t,0)}function mu(t){var e=gs(t);if(tb(e))return t}function yE(t,e){if(t==="change")return e}var Nb=!1;if(_r){var Cf;if(_r){var Mf="oninput"in document;if(!Mf){var Xm=document.createElement("div");Xm.setAttribute("oninput","return;"),Mf=typeof Xm.oninput=="function"}Cf=Mf}else Cf=!1;Nb=Cf&&(!document.documentMode||9<document.documentMode)}function Ym(){la&&(la.detachEvent("onpropertychange",Cb),Pa=la=null)}function Cb(t){if(t.propertyName==="value"&&mu(Pa)){var e=[];Ab(e,Pa,t,R0(t)),fb(mE,e)}}function vE(t,e,n){t==="focusin"?(Ym(),la=e,Pa=n,la.attachEvent("onpropertychange",Cb)):t==="focusout"&&Ym()}function wE(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return mu(Pa)}function bE(t,e){if(t==="click")return mu(e)}function xE(t,e){if(t==="input"||t==="change")return mu(e)}function kE(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var tr=typeof Object.is=="function"?Object.is:kE;function Oa(t,e){if(tr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Wh.call(e,i)||!tr(t[i],e[i]))return!1}return!0}function Qm(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Jm(t,e){var n=Qm(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Qm(n)}}function Mb(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Mb(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Bb(){for(var t=window,e=kl();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=kl(t.document)}return e}function L0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function IE(t){var e=Bb(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Mb(n.ownerDocument.documentElement,n)){if(r!==null&&L0(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=Jm(n,s);var o=Jm(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var SE=_r&&"documentMode"in document&&11>=document.documentMode,hs=null,sp=null,ua=null,op=!1;function Zm(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;op||hs==null||hs!==kl(r)||(r=hs,"selectionStart"in r&&L0(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ua&&Oa(ua,r)||(ua=r,r=Pl(sp,"onSelect"),0<r.length&&(e=new C0("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=hs)))}function Ec(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ps={animationend:Ec("Animation","AnimationEnd"),animationiteration:Ec("Animation","AnimationIteration"),animationstart:Ec("Animation","AnimationStart"),transitionend:Ec("Transition","TransitionEnd")},Bf={},Lb={};_r&&(Lb=document.createElement("div").style,"AnimationEvent"in window||(delete ps.animationend.animation,delete ps.animationiteration.animation,delete ps.animationstart.animation),"TransitionEvent"in window||delete ps.transitionend.transition);function yu(t){if(Bf[t])return Bf[t];if(!ps[t])return t;var e=ps[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Lb)return Bf[t]=e[n];return t}var Db=yu("animationend"),Fb=yu("animationiteration"),$b=yu("animationstart"),Wb=yu("transitionend"),Vb=new Map,ey="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function li(t,e){Vb.set(t,e),qi(e,[t])}for(var Lf=0;Lf<ey.length;Lf++){var Df=ey[Lf],EE=Df.toLowerCase(),TE=Df[0].toUpperCase()+Df.slice(1);li(EE,"on"+TE)}li(Db,"onAnimationEnd");li(Fb,"onAnimationIteration");li($b,"onAnimationStart");li("dblclick","onDoubleClick");li("focusin","onFocus");li("focusout","onBlur");li(Wb,"onTransitionEnd");Ms("onMouseEnter",["mouseout","mouseover"]);Ms("onMouseLeave",["mouseout","mouseover"]);Ms("onPointerEnter",["pointerout","pointerover"]);Ms("onPointerLeave",["pointerout","pointerover"]);qi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));qi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));qi("onBeforeInput",["compositionend","keypress","textInput","paste"]);qi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));qi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));qi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ta="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),RE=new Set("cancel close invalid load scroll toggle".split(" ").concat(ta));function ty(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,ES(r,e,void 0,t),t.currentTarget=null}function Ub(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;ty(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;ty(i,a,c),s=l}}}if(Sl)throw t=tp,Sl=!1,tp=null,t}function rt(t,e){var n=e[dp];n===void 0&&(n=e[dp]=new Set);var r=t+"__bubble";n.has(r)||(Hb(e,t,2,!1),n.add(r))}function Ff(t,e,n){var r=0;e&&(r|=4),Hb(n,t,r,e)}var Tc="_reactListening"+Math.random().toString(36).slice(2);function Aa(t){if(!t[Tc]){t[Tc]=!0,Y1.forEach(function(n){n!=="selectionchange"&&(RE.has(n)||Ff(n,!1,t),Ff(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Tc]||(e[Tc]=!0,Ff("selectionchange",!1,e))}}function Hb(t,e,n,r){switch(Tb(e)){case 1:var i=VS;break;case 4:i=US;break;default:i=A0}n=i.bind(null,e,n,t),i=void 0,!ep||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function $f(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=ki(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}fb(function(){var c=s,u=R0(n),d=[];e:{var f=Vb.get(t);if(f!==void 0){var h=C0,p=t;switch(t){case"keypress":if(rl(n)===0)break e;case"keydown":case"keyup":h=rE;break;case"focusin":p="focus",h=Nf;break;case"focusout":p="blur",h=Nf;break;case"beforeblur":case"afterblur":h=Nf;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=Hm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=jS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=oE;break;case Db:case Fb:case $b:h=GS;break;case Wb:h=cE;break;case"scroll":h=HS;break;case"wheel":h=uE;break;case"copy":case"cut":case"paste":h=YS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=jm}var g=(e&4)!==0,w=!g&&t==="scroll",v=g?f!==null?f+"Capture":null:f;g=[];for(var m=c,y;m!==null;){y=m;var b=y.stateNode;if(y.tag===5&&b!==null&&(y=b,v!==null&&(b=Ea(m,v),b!=null&&g.push(Na(m,b,y)))),w)break;m=m.return}0<g.length&&(f=new h(f,p,null,n,u),d.push({event:f,listeners:g}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",h=t==="mouseout"||t==="pointerout",f&&n!==Jh&&(p=n.relatedTarget||n.fromElement)&&(ki(p)||p[Pr]))break e;if((h||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,h?(p=n.relatedTarget||n.toElement,h=c,p=p?ki(p):null,p!==null&&(w=ji(p),p!==w||p.tag!==5&&p.tag!==6)&&(p=null)):(h=null,p=c),h!==p)){if(g=Hm,b="onMouseLeave",v="onMouseEnter",m="mouse",(t==="pointerout"||t==="pointerover")&&(g=jm,b="onPointerLeave",v="onPointerEnter",m="pointer"),w=h==null?f:gs(h),y=p==null?f:gs(p),f=new g(b,m+"leave",h,n,u),f.target=w,f.relatedTarget=y,b=null,ki(u)===c&&(g=new g(v,m+"enter",p,n,u),g.target=y,g.relatedTarget=w,b=g),w=b,h&&p)t:{for(g=h,v=p,m=0,y=g;y;y=Qi(y))m++;for(y=0,b=v;b;b=Qi(b))y++;for(;0<m-y;)g=Qi(g),m--;for(;0<y-m;)v=Qi(v),y--;for(;m--;){if(g===v||v!==null&&g===v.alternate)break t;g=Qi(g),v=Qi(v)}g=null}else g=null;h!==null&&ny(d,f,h,g,!1),p!==null&&w!==null&&ny(d,w,p,g,!0)}}e:{if(f=c?gs(c):window,h=f.nodeName&&f.nodeName.toLowerCase(),h==="select"||h==="input"&&f.type==="file")var x=yE;else if(Gm(f))if(Nb)x=xE;else{x=wE;var I=vE}else(h=f.nodeName)&&h.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(x=bE);if(x&&(x=x(t,c))){Ab(d,x,n,u);break e}I&&I(t,f,c),t==="focusout"&&(I=f._wrapperState)&&I.controlled&&f.type==="number"&&zh(f,"number",f.value)}switch(I=c?gs(c):window,t){case"focusin":(Gm(I)||I.contentEditable==="true")&&(hs=I,sp=c,ua=null);break;case"focusout":ua=sp=hs=null;break;case"mousedown":op=!0;break;case"contextmenu":case"mouseup":case"dragend":op=!1,Zm(d,n,u);break;case"selectionchange":if(SE)break;case"keydown":case"keyup":Zm(d,n,u)}var k;if(B0)e:{switch(t){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else fs?Pb(t,n)&&(S="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(S="onCompositionStart");S&&(_b&&n.locale!=="ko"&&(fs||S!=="onCompositionStart"?S==="onCompositionEnd"&&fs&&(k=Rb()):(Xr=u,N0="value"in Xr?Xr.value:Xr.textContent,fs=!0)),I=Pl(c,S),0<I.length&&(S=new qm(S,t,null,n,u),d.push({event:S,listeners:I}),k?S.data=k:(k=Ob(n),k!==null&&(S.data=k)))),(k=fE?hE(t,n):pE(t,n))&&(c=Pl(c,"onBeforeInput"),0<c.length&&(u=new qm("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:c}),u.data=k))}Ub(d,e)})}function Na(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Pl(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Ea(t,n),s!=null&&r.unshift(Na(t,s,i)),s=Ea(t,e),s!=null&&r.push(Na(t,s,i))),t=t.return}return r}function Qi(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function ny(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=Ea(n,s),l!=null&&o.unshift(Na(n,l,a))):i||(l=Ea(n,s),l!=null&&o.push(Na(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var _E=/\r\n?/g,PE=/\u0000|\uFFFD/g;function ry(t){return(typeof t=="string"?t:""+t).replace(_E,`
`).replace(PE,"")}function Rc(t,e,n){if(e=ry(e),ry(t)!==e&&n)throw Error(ee(425))}function Ol(){}var ap=null,cp=null;function lp(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var up=typeof setTimeout=="function"?setTimeout:void 0,OE=typeof clearTimeout=="function"?clearTimeout:void 0,iy=typeof Promise=="function"?Promise:void 0,AE=typeof queueMicrotask=="function"?queueMicrotask:typeof iy<"u"?function(t){return iy.resolve(null).then(t).catch(NE)}:up;function NE(t){setTimeout(function(){throw t})}function Wf(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),_a(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);_a(e)}function ei(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function sy(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Qs=Math.random().toString(36).slice(2),ur="__reactFiber$"+Qs,Ca="__reactProps$"+Qs,Pr="__reactContainer$"+Qs,dp="__reactEvents$"+Qs,CE="__reactListeners$"+Qs,ME="__reactHandles$"+Qs;function ki(t){var e=t[ur];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Pr]||n[ur]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=sy(t);t!==null;){if(n=t[ur])return n;t=sy(t)}return e}t=n,n=t.parentNode}return null}function ec(t){return t=t[ur]||t[Pr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function gs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ee(33))}function vu(t){return t[Ca]||null}var fp=[],ms=-1;function ui(t){return{current:t}}function ot(t){0>ms||(t.current=fp[ms],fp[ms]=null,ms--)}function nt(t,e){ms++,fp[ms]=t.current,t.current=e}var ai={},jt=ui(ai),on=ui(!1),Bi=ai;function Bs(t,e){var n=t.type.contextTypes;if(!n)return ai;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function an(t){return t=t.childContextTypes,t!=null}function Al(){ot(on),ot(jt)}function oy(t,e,n){if(jt.current!==ai)throw Error(ee(168));nt(jt,e),nt(on,n)}function qb(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(ee(108,vS(t)||"Unknown",i));return ft({},n,r)}function Nl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ai,Bi=jt.current,nt(jt,t),nt(on,on.current),!0}function ay(t,e,n){var r=t.stateNode;if(!r)throw Error(ee(169));n?(t=qb(t,e,Bi),r.__reactInternalMemoizedMergedChildContext=t,ot(on),ot(jt),nt(jt,t)):ot(on),nt(on,n)}var Ir=null,wu=!1,Vf=!1;function jb(t){Ir===null?Ir=[t]:Ir.push(t)}function BE(t){wu=!0,jb(t)}function di(){if(!Vf&&Ir!==null){Vf=!0;var t=0,e=Ke;try{var n=Ir;for(Ke=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Ir=null,wu=!1}catch(i){throw Ir!==null&&(Ir=Ir.slice(t+1)),mb(_0,di),i}finally{Ke=e,Vf=!1}}return null}var ys=[],vs=0,Cl=null,Ml=0,An=[],Nn=0,Li=null,Er=1,Tr="";function vi(t,e){ys[vs++]=Ml,ys[vs++]=Cl,Cl=t,Ml=e}function Kb(t,e,n){An[Nn++]=Er,An[Nn++]=Tr,An[Nn++]=Li,Li=t;var r=Er;t=Tr;var i=32-Zn(r)-1;r&=~(1<<i),n+=1;var s=32-Zn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Er=1<<32-Zn(e)+i|n<<i|r,Tr=s+t}else Er=1<<s|n<<i|r,Tr=t}function D0(t){t.return!==null&&(vi(t,1),Kb(t,1,0))}function F0(t){for(;t===Cl;)Cl=ys[--vs],ys[vs]=null,Ml=ys[--vs],ys[vs]=null;for(;t===Li;)Li=An[--Nn],An[Nn]=null,Tr=An[--Nn],An[Nn]=null,Er=An[--Nn],An[Nn]=null}var bn=null,gn=null,ct=!1,Yn=null;function zb(t,e){var n=Ln(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function cy(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,bn=t,gn=ei(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,bn=t,gn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Li!==null?{id:Er,overflow:Tr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Ln(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,bn=t,gn=null,!0):!1;default:return!1}}function hp(t){return(t.mode&1)!==0&&(t.flags&128)===0}function pp(t){if(ct){var e=gn;if(e){var n=e;if(!cy(t,e)){if(hp(t))throw Error(ee(418));e=ei(n.nextSibling);var r=bn;e&&cy(t,e)?zb(r,n):(t.flags=t.flags&-4097|2,ct=!1,bn=t)}}else{if(hp(t))throw Error(ee(418));t.flags=t.flags&-4097|2,ct=!1,bn=t}}}function ly(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;bn=t}function _c(t){if(t!==bn)return!1;if(!ct)return ly(t),ct=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!lp(t.type,t.memoizedProps)),e&&(e=gn)){if(hp(t))throw Gb(),Error(ee(418));for(;e;)zb(t,e),e=ei(e.nextSibling)}if(ly(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ee(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){gn=ei(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}gn=null}}else gn=bn?ei(t.stateNode.nextSibling):null;return!0}function Gb(){for(var t=gn;t;)t=ei(t.nextSibling)}function Ls(){gn=bn=null,ct=!1}function $0(t){Yn===null?Yn=[t]:Yn.push(t)}var LE=Mr.ReactCurrentBatchConfig;function uo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ee(309));var r=n.stateNode}if(!r)throw Error(ee(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(ee(284));if(!n._owner)throw Error(ee(290,t))}return t}function Pc(t,e){throw t=Object.prototype.toString.call(e),Error(ee(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function uy(t){var e=t._init;return e(t._payload)}function Xb(t){function e(v,m){if(t){var y=v.deletions;y===null?(v.deletions=[m],v.flags|=16):y.push(m)}}function n(v,m){if(!t)return null;for(;m!==null;)e(v,m),m=m.sibling;return null}function r(v,m){for(v=new Map;m!==null;)m.key!==null?v.set(m.key,m):v.set(m.index,m),m=m.sibling;return v}function i(v,m){return v=ii(v,m),v.index=0,v.sibling=null,v}function s(v,m,y){return v.index=y,t?(y=v.alternate,y!==null?(y=y.index,y<m?(v.flags|=2,m):y):(v.flags|=2,m)):(v.flags|=1048576,m)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function a(v,m,y,b){return m===null||m.tag!==6?(m=Gf(y,v.mode,b),m.return=v,m):(m=i(m,y),m.return=v,m)}function l(v,m,y,b){var x=y.type;return x===ds?u(v,m,y.props.children,b,y.key):m!==null&&(m.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===qr&&uy(x)===m.type)?(b=i(m,y.props),b.ref=uo(v,m,y),b.return=v,b):(b=ul(y.type,y.key,y.props,null,v.mode,b),b.ref=uo(v,m,y),b.return=v,b)}function c(v,m,y,b){return m===null||m.tag!==4||m.stateNode.containerInfo!==y.containerInfo||m.stateNode.implementation!==y.implementation?(m=Xf(y,v.mode,b),m.return=v,m):(m=i(m,y.children||[]),m.return=v,m)}function u(v,m,y,b,x){return m===null||m.tag!==7?(m=Ai(y,v.mode,b,x),m.return=v,m):(m=i(m,y),m.return=v,m)}function d(v,m,y){if(typeof m=="string"&&m!==""||typeof m=="number")return m=Gf(""+m,v.mode,y),m.return=v,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case vc:return y=ul(m.type,m.key,m.props,null,v.mode,y),y.ref=uo(v,null,m),y.return=v,y;case us:return m=Xf(m,v.mode,y),m.return=v,m;case qr:var b=m._init;return d(v,b(m._payload),y)}if(Zo(m)||so(m))return m=Ai(m,v.mode,y,null),m.return=v,m;Pc(v,m)}return null}function f(v,m,y,b){var x=m!==null?m.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return x!==null?null:a(v,m,""+y,b);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case vc:return y.key===x?l(v,m,y,b):null;case us:return y.key===x?c(v,m,y,b):null;case qr:return x=y._init,f(v,m,x(y._payload),b)}if(Zo(y)||so(y))return x!==null?null:u(v,m,y,b,null);Pc(v,y)}return null}function h(v,m,y,b,x){if(typeof b=="string"&&b!==""||typeof b=="number")return v=v.get(y)||null,a(m,v,""+b,x);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case vc:return v=v.get(b.key===null?y:b.key)||null,l(m,v,b,x);case us:return v=v.get(b.key===null?y:b.key)||null,c(m,v,b,x);case qr:var I=b._init;return h(v,m,y,I(b._payload),x)}if(Zo(b)||so(b))return v=v.get(y)||null,u(m,v,b,x,null);Pc(m,b)}return null}function p(v,m,y,b){for(var x=null,I=null,k=m,S=m=0,P=null;k!==null&&S<y.length;S++){k.index>S?(P=k,k=null):P=k.sibling;var R=f(v,k,y[S],b);if(R===null){k===null&&(k=P);break}t&&k&&R.alternate===null&&e(v,k),m=s(R,m,S),I===null?x=R:I.sibling=R,I=R,k=P}if(S===y.length)return n(v,k),ct&&vi(v,S),x;if(k===null){for(;S<y.length;S++)k=d(v,y[S],b),k!==null&&(m=s(k,m,S),I===null?x=k:I.sibling=k,I=k);return ct&&vi(v,S),x}for(k=r(v,k);S<y.length;S++)P=h(k,v,S,y[S],b),P!==null&&(t&&P.alternate!==null&&k.delete(P.key===null?S:P.key),m=s(P,m,S),I===null?x=P:I.sibling=P,I=P);return t&&k.forEach(function(B){return e(v,B)}),ct&&vi(v,S),x}function g(v,m,y,b){var x=so(y);if(typeof x!="function")throw Error(ee(150));if(y=x.call(y),y==null)throw Error(ee(151));for(var I=x=null,k=m,S=m=0,P=null,R=y.next();k!==null&&!R.done;S++,R=y.next()){k.index>S?(P=k,k=null):P=k.sibling;var B=f(v,k,R.value,b);if(B===null){k===null&&(k=P);break}t&&k&&B.alternate===null&&e(v,k),m=s(B,m,S),I===null?x=B:I.sibling=B,I=B,k=P}if(R.done)return n(v,k),ct&&vi(v,S),x;if(k===null){for(;!R.done;S++,R=y.next())R=d(v,R.value,b),R!==null&&(m=s(R,m,S),I===null?x=R:I.sibling=R,I=R);return ct&&vi(v,S),x}for(k=r(v,k);!R.done;S++,R=y.next())R=h(k,v,S,R.value,b),R!==null&&(t&&R.alternate!==null&&k.delete(R.key===null?S:R.key),m=s(R,m,S),I===null?x=R:I.sibling=R,I=R);return t&&k.forEach(function(T){return e(v,T)}),ct&&vi(v,S),x}function w(v,m,y,b){if(typeof y=="object"&&y!==null&&y.type===ds&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case vc:e:{for(var x=y.key,I=m;I!==null;){if(I.key===x){if(x=y.type,x===ds){if(I.tag===7){n(v,I.sibling),m=i(I,y.props.children),m.return=v,v=m;break e}}else if(I.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===qr&&uy(x)===I.type){n(v,I.sibling),m=i(I,y.props),m.ref=uo(v,I,y),m.return=v,v=m;break e}n(v,I);break}else e(v,I);I=I.sibling}y.type===ds?(m=Ai(y.props.children,v.mode,b,y.key),m.return=v,v=m):(b=ul(y.type,y.key,y.props,null,v.mode,b),b.ref=uo(v,m,y),b.return=v,v=b)}return o(v);case us:e:{for(I=y.key;m!==null;){if(m.key===I)if(m.tag===4&&m.stateNode.containerInfo===y.containerInfo&&m.stateNode.implementation===y.implementation){n(v,m.sibling),m=i(m,y.children||[]),m.return=v,v=m;break e}else{n(v,m);break}else e(v,m);m=m.sibling}m=Xf(y,v.mode,b),m.return=v,v=m}return o(v);case qr:return I=y._init,w(v,m,I(y._payload),b)}if(Zo(y))return p(v,m,y,b);if(so(y))return g(v,m,y,b);Pc(v,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,m!==null&&m.tag===6?(n(v,m.sibling),m=i(m,y),m.return=v,v=m):(n(v,m),m=Gf(y,v.mode,b),m.return=v,v=m),o(v)):n(v,m)}return w}var Ds=Xb(!0),Yb=Xb(!1),Bl=ui(null),Ll=null,ws=null,W0=null;function V0(){W0=ws=Ll=null}function U0(t){var e=Bl.current;ot(Bl),t._currentValue=e}function gp(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ts(t,e){Ll=t,W0=ws=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(sn=!0),t.firstContext=null)}function Fn(t){var e=t._currentValue;if(W0!==t)if(t={context:t,memoizedValue:e,next:null},ws===null){if(Ll===null)throw Error(ee(308));ws=t,Ll.dependencies={lanes:0,firstContext:t}}else ws=ws.next=t;return e}var Ii=null;function H0(t){Ii===null?Ii=[t]:Ii.push(t)}function Qb(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,H0(e)):(n.next=i.next,i.next=n),e.interleaved=n,Or(t,r)}function Or(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var jr=!1;function q0(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Jb(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Rr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ti(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Fe&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Or(t,n)}return i=r.interleaved,i===null?(e.next=e,H0(r)):(e.next=i.next,i.next=e),r.interleaved=e,Or(t,n)}function il(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,P0(t,n)}}function dy(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Dl(t,e,n,r){var i=t.updateQueue;jr=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;o=0,u=c=l=null,a=s;do{var f=a.lane,h=a.eventTime;if((r&f)===f){u!==null&&(u=u.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,g=a;switch(f=e,h=n,g.tag){case 1:if(p=g.payload,typeof p=="function"){d=p.call(h,d,f);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=g.payload,f=typeof p=="function"?p.call(h,d,f):p,f==null)break e;d=ft({},d,f);break e;case 2:jr=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else h={eventTime:h,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=h,l=d):u=u.next=h,o|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(u===null&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Fi|=o,t.lanes=o,t.memoizedState=d}}function fy(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(ee(191,i));i.call(r)}}}var tc={},hr=ui(tc),Ma=ui(tc),Ba=ui(tc);function Si(t){if(t===tc)throw Error(ee(174));return t}function j0(t,e){switch(nt(Ba,e),nt(Ma,t),nt(hr,tc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Xh(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Xh(e,t)}ot(hr),nt(hr,e)}function Fs(){ot(hr),ot(Ma),ot(Ba)}function Zb(t){Si(Ba.current);var e=Si(hr.current),n=Xh(e,t.type);e!==n&&(nt(Ma,t),nt(hr,n))}function K0(t){Ma.current===t&&(ot(hr),ot(Ma))}var lt=ui(0);function Fl(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Uf=[];function z0(){for(var t=0;t<Uf.length;t++)Uf[t]._workInProgressVersionPrimary=null;Uf.length=0}var sl=Mr.ReactCurrentDispatcher,Hf=Mr.ReactCurrentBatchConfig,Di=0,dt=null,Et=null,Pt=null,$l=!1,da=!1,La=0,DE=0;function Ft(){throw Error(ee(321))}function G0(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!tr(t[n],e[n]))return!1;return!0}function X0(t,e,n,r,i,s){if(Di=s,dt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,sl.current=t===null||t.memoizedState===null?VE:UE,t=n(r,i),da){s=0;do{if(da=!1,La=0,25<=s)throw Error(ee(301));s+=1,Pt=Et=null,e.updateQueue=null,sl.current=HE,t=n(r,i)}while(da)}if(sl.current=Wl,e=Et!==null&&Et.next!==null,Di=0,Pt=Et=dt=null,$l=!1,e)throw Error(ee(300));return t}function Y0(){var t=La!==0;return La=0,t}function sr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pt===null?dt.memoizedState=Pt=t:Pt=Pt.next=t,Pt}function $n(){if(Et===null){var t=dt.alternate;t=t!==null?t.memoizedState:null}else t=Et.next;var e=Pt===null?dt.memoizedState:Pt.next;if(e!==null)Pt=e,Et=t;else{if(t===null)throw Error(ee(310));Et=t,t={memoizedState:Et.memoizedState,baseState:Et.baseState,baseQueue:Et.baseQueue,queue:Et.queue,next:null},Pt===null?dt.memoizedState=Pt=t:Pt=Pt.next=t}return Pt}function Da(t,e){return typeof e=="function"?e(t):e}function qf(t){var e=$n(),n=e.queue;if(n===null)throw Error(ee(311));n.lastRenderedReducer=t;var r=Et,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((Di&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,dt.lanes|=u,Fi|=u}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,tr(r,e.memoizedState)||(sn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,dt.lanes|=s,Fi|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function jf(t){var e=$n(),n=e.queue;if(n===null)throw Error(ee(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);tr(s,e.memoizedState)||(sn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function ex(){}function tx(t,e){var n=dt,r=$n(),i=e(),s=!tr(r.memoizedState,i);if(s&&(r.memoizedState=i,sn=!0),r=r.queue,Q0(ix.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Pt!==null&&Pt.memoizedState.tag&1){if(n.flags|=2048,Fa(9,rx.bind(null,n,r,i,e),void 0,null),Ot===null)throw Error(ee(349));Di&30||nx(n,e,i)}return i}function nx(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=dt.updateQueue,e===null?(e={lastEffect:null,stores:null},dt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function rx(t,e,n,r){e.value=n,e.getSnapshot=r,sx(e)&&ox(t)}function ix(t,e,n){return n(function(){sx(e)&&ox(t)})}function sx(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!tr(t,n)}catch{return!0}}function ox(t){var e=Or(t,1);e!==null&&er(e,t,1,-1)}function hy(t){var e=sr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Da,lastRenderedState:t},e.queue=t,t=t.dispatch=WE.bind(null,dt,t),[e.memoizedState,t]}function Fa(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=dt.updateQueue,e===null?(e={lastEffect:null,stores:null},dt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function ax(){return $n().memoizedState}function ol(t,e,n,r){var i=sr();dt.flags|=t,i.memoizedState=Fa(1|e,n,void 0,r===void 0?null:r)}function bu(t,e,n,r){var i=$n();r=r===void 0?null:r;var s=void 0;if(Et!==null){var o=Et.memoizedState;if(s=o.destroy,r!==null&&G0(r,o.deps)){i.memoizedState=Fa(e,n,s,r);return}}dt.flags|=t,i.memoizedState=Fa(1|e,n,s,r)}function py(t,e){return ol(8390656,8,t,e)}function Q0(t,e){return bu(2048,8,t,e)}function cx(t,e){return bu(4,2,t,e)}function lx(t,e){return bu(4,4,t,e)}function ux(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function dx(t,e,n){return n=n!=null?n.concat([t]):null,bu(4,4,ux.bind(null,e,t),n)}function J0(){}function fx(t,e){var n=$n();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&G0(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function hx(t,e){var n=$n();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&G0(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function px(t,e,n){return Di&21?(tr(n,e)||(n=wb(),dt.lanes|=n,Fi|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,sn=!0),t.memoizedState=n)}function FE(t,e){var n=Ke;Ke=n!==0&&4>n?n:4,t(!0);var r=Hf.transition;Hf.transition={};try{t(!1),e()}finally{Ke=n,Hf.transition=r}}function gx(){return $n().memoizedState}function $E(t,e,n){var r=ri(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},mx(t))yx(e,n);else if(n=Qb(t,e,n,r),n!==null){var i=Yt();er(n,t,r,i),vx(n,e,r)}}function WE(t,e,n){var r=ri(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(mx(t))yx(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,tr(a,o)){var l=e.interleaved;l===null?(i.next=i,H0(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=Qb(t,e,i,r),n!==null&&(i=Yt(),er(n,t,r,i),vx(n,e,r))}}function mx(t){var e=t.alternate;return t===dt||e!==null&&e===dt}function yx(t,e){da=$l=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function vx(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,P0(t,n)}}var Wl={readContext:Fn,useCallback:Ft,useContext:Ft,useEffect:Ft,useImperativeHandle:Ft,useInsertionEffect:Ft,useLayoutEffect:Ft,useMemo:Ft,useReducer:Ft,useRef:Ft,useState:Ft,useDebugValue:Ft,useDeferredValue:Ft,useTransition:Ft,useMutableSource:Ft,useSyncExternalStore:Ft,useId:Ft,unstable_isNewReconciler:!1},VE={readContext:Fn,useCallback:function(t,e){return sr().memoizedState=[t,e===void 0?null:e],t},useContext:Fn,useEffect:py,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,ol(4194308,4,ux.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ol(4194308,4,t,e)},useInsertionEffect:function(t,e){return ol(4,2,t,e)},useMemo:function(t,e){var n=sr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=sr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=$E.bind(null,dt,t),[r.memoizedState,t]},useRef:function(t){var e=sr();return t={current:t},e.memoizedState=t},useState:hy,useDebugValue:J0,useDeferredValue:function(t){return sr().memoizedState=t},useTransition:function(){var t=hy(!1),e=t[0];return t=FE.bind(null,t[1]),sr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=dt,i=sr();if(ct){if(n===void 0)throw Error(ee(407));n=n()}else{if(n=e(),Ot===null)throw Error(ee(349));Di&30||nx(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,py(ix.bind(null,r,s,t),[t]),r.flags|=2048,Fa(9,rx.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=sr(),e=Ot.identifierPrefix;if(ct){var n=Tr,r=Er;n=(r&~(1<<32-Zn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=La++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=DE++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},UE={readContext:Fn,useCallback:fx,useContext:Fn,useEffect:Q0,useImperativeHandle:dx,useInsertionEffect:cx,useLayoutEffect:lx,useMemo:hx,useReducer:qf,useRef:ax,useState:function(){return qf(Da)},useDebugValue:J0,useDeferredValue:function(t){var e=$n();return px(e,Et.memoizedState,t)},useTransition:function(){var t=qf(Da)[0],e=$n().memoizedState;return[t,e]},useMutableSource:ex,useSyncExternalStore:tx,useId:gx,unstable_isNewReconciler:!1},HE={readContext:Fn,useCallback:fx,useContext:Fn,useEffect:Q0,useImperativeHandle:dx,useInsertionEffect:cx,useLayoutEffect:lx,useMemo:hx,useReducer:jf,useRef:ax,useState:function(){return jf(Da)},useDebugValue:J0,useDeferredValue:function(t){var e=$n();return Et===null?e.memoizedState=t:px(e,Et.memoizedState,t)},useTransition:function(){var t=jf(Da)[0],e=$n().memoizedState;return[t,e]},useMutableSource:ex,useSyncExternalStore:tx,useId:gx,unstable_isNewReconciler:!1};function Gn(t,e){if(t&&t.defaultProps){e=ft({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function mp(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ft({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var xu={isMounted:function(t){return(t=t._reactInternals)?ji(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Yt(),i=ri(t),s=Rr(r,i);s.payload=e,n!=null&&(s.callback=n),e=ti(t,s,i),e!==null&&(er(e,t,i,r),il(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Yt(),i=ri(t),s=Rr(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=ti(t,s,i),e!==null&&(er(e,t,i,r),il(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Yt(),r=ri(t),i=Rr(n,r);i.tag=2,e!=null&&(i.callback=e),e=ti(t,i,r),e!==null&&(er(e,t,r,n),il(e,t,r))}};function gy(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Oa(n,r)||!Oa(i,s):!0}function wx(t,e,n){var r=!1,i=ai,s=e.contextType;return typeof s=="object"&&s!==null?s=Fn(s):(i=an(e)?Bi:jt.current,r=e.contextTypes,s=(r=r!=null)?Bs(t,i):ai),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=xu,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function my(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&xu.enqueueReplaceState(e,e.state,null)}function yp(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},q0(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Fn(s):(s=an(e)?Bi:jt.current,i.context=Bs(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(mp(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&xu.enqueueReplaceState(i,i.state,null),Dl(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function $s(t,e){try{var n="",r=e;do n+=yS(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Kf(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function vp(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var qE=typeof WeakMap=="function"?WeakMap:Map;function bx(t,e,n){n=Rr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Ul||(Ul=!0,_p=r),vp(t,e)},n}function xx(t,e,n){n=Rr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){vp(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){vp(t,e),typeof r!="function"&&(ni===null?ni=new Set([this]):ni.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function yy(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new qE;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=iT.bind(null,t,e,n),e.then(t,t))}function vy(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function wy(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Rr(-1,1),e.tag=2,ti(n,e,1))),n.lanes|=1),t)}var jE=Mr.ReactCurrentOwner,sn=!1;function Gt(t,e,n,r){e.child=t===null?Yb(e,null,n,r):Ds(e,t.child,n,r)}function by(t,e,n,r,i){n=n.render;var s=e.ref;return Ts(e,i),r=X0(t,e,n,r,s,i),n=Y0(),t!==null&&!sn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ar(t,e,i)):(ct&&n&&D0(e),e.flags|=1,Gt(t,e,r,i),e.child)}function xy(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!og(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,kx(t,e,s,r,i)):(t=ul(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Oa,n(o,r)&&t.ref===e.ref)return Ar(t,e,i)}return e.flags|=1,t=ii(s,r),t.ref=e.ref,t.return=e,e.child=t}function kx(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Oa(s,r)&&t.ref===e.ref)if(sn=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(sn=!0);else return e.lanes=t.lanes,Ar(t,e,i)}return wp(t,e,n,r,i)}function Ix(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},nt(xs,hn),hn|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,nt(xs,hn),hn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,nt(xs,hn),hn|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,nt(xs,hn),hn|=r;return Gt(t,e,i,n),e.child}function Sx(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function wp(t,e,n,r,i){var s=an(n)?Bi:jt.current;return s=Bs(e,s),Ts(e,i),n=X0(t,e,n,r,s,i),r=Y0(),t!==null&&!sn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ar(t,e,i)):(ct&&r&&D0(e),e.flags|=1,Gt(t,e,n,i),e.child)}function ky(t,e,n,r,i){if(an(n)){var s=!0;Nl(e)}else s=!1;if(Ts(e,i),e.stateNode===null)al(t,e),wx(e,n,r),yp(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Fn(c):(c=an(n)?Bi:jt.current,c=Bs(e,c));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&my(e,o,r,c),jr=!1;var f=e.memoizedState;o.state=f,Dl(e,r,o,i),l=e.memoizedState,a!==r||f!==l||on.current||jr?(typeof u=="function"&&(mp(e,n,u,r),l=e.memoizedState),(a=jr||gy(e,n,a,r,f,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Jb(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Gn(e.type,a),o.props=c,d=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Fn(l):(l=an(n)?Bi:jt.current,l=Bs(e,l));var h=n.getDerivedStateFromProps;(u=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==l)&&my(e,o,r,l),jr=!1,f=e.memoizedState,o.state=f,Dl(e,r,o,i);var p=e.memoizedState;a!==d||f!==p||on.current||jr?(typeof h=="function"&&(mp(e,n,h,r),p=e.memoizedState),(c=jr||gy(e,n,c,r,f,p,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),o.props=r,o.state=p,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return bp(t,e,n,r,s,i)}function bp(t,e,n,r,i,s){Sx(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&ay(e,n,!1),Ar(t,e,s);r=e.stateNode,jE.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Ds(e,t.child,null,s),e.child=Ds(e,null,a,s)):Gt(t,e,a,s),e.memoizedState=r.state,i&&ay(e,n,!0),e.child}function Ex(t){var e=t.stateNode;e.pendingContext?oy(t,e.pendingContext,e.pendingContext!==e.context):e.context&&oy(t,e.context,!1),j0(t,e.containerInfo)}function Iy(t,e,n,r,i){return Ls(),$0(i),e.flags|=256,Gt(t,e,n,r),e.child}var xp={dehydrated:null,treeContext:null,retryLane:0};function kp(t){return{baseLanes:t,cachePool:null,transitions:null}}function Tx(t,e,n){var r=e.pendingProps,i=lt.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),nt(lt,i&1),t===null)return pp(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Su(o,r,0,null),t=Ai(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=kp(n),e.memoizedState=xp,t):Z0(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return KE(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=ii(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=ii(a,s):(s=Ai(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?kp(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=xp,r}return s=t.child,t=s.sibling,r=ii(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Z0(t,e){return e=Su({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Oc(t,e,n,r){return r!==null&&$0(r),Ds(e,t.child,null,n),t=Z0(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function KE(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Kf(Error(ee(422))),Oc(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Su({mode:"visible",children:r.children},i,0,null),s=Ai(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Ds(e,t.child,null,o),e.child.memoizedState=kp(o),e.memoizedState=xp,s);if(!(e.mode&1))return Oc(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(ee(419)),r=Kf(s,r,void 0),Oc(t,e,o,r)}if(a=(o&t.childLanes)!==0,sn||a){if(r=Ot,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Or(t,i),er(r,t,i,-1))}return sg(),r=Kf(Error(ee(421))),Oc(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=sT.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,gn=ei(i.nextSibling),bn=e,ct=!0,Yn=null,t!==null&&(An[Nn++]=Er,An[Nn++]=Tr,An[Nn++]=Li,Er=t.id,Tr=t.overflow,Li=e),e=Z0(e,r.children),e.flags|=4096,e)}function Sy(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),gp(t.return,e,n)}function zf(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Rx(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Gt(t,e,r.children,n),r=lt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Sy(t,n,e);else if(t.tag===19)Sy(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(nt(lt,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Fl(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),zf(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Fl(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}zf(e,!0,n,null,s);break;case"together":zf(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function al(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ar(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Fi|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ee(153));if(e.child!==null){for(t=e.child,n=ii(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ii(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function zE(t,e,n){switch(e.tag){case 3:Ex(e),Ls();break;case 5:Zb(e);break;case 1:an(e.type)&&Nl(e);break;case 4:j0(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;nt(Bl,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(nt(lt,lt.current&1),e.flags|=128,null):n&e.child.childLanes?Tx(t,e,n):(nt(lt,lt.current&1),t=Ar(t,e,n),t!==null?t.sibling:null);nt(lt,lt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Rx(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),nt(lt,lt.current),r)break;return null;case 22:case 23:return e.lanes=0,Ix(t,e,n)}return Ar(t,e,n)}var _x,Ip,Px,Ox;_x=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Ip=function(){};Px=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Si(hr.current);var s=null;switch(n){case"input":i=jh(t,i),r=jh(t,r),s=[];break;case"select":i=ft({},i,{value:void 0}),r=ft({},r,{value:void 0}),s=[];break;case"textarea":i=Gh(t,i),r=Gh(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Ol)}Yh(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Ia.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Ia.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&rt("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};Ox=function(t,e,n,r){n!==r&&(e.flags|=4)};function fo(t,e){if(!ct)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function $t(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function GE(t,e,n){var r=e.pendingProps;switch(F0(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $t(e),null;case 1:return an(e.type)&&Al(),$t(e),null;case 3:return r=e.stateNode,Fs(),ot(on),ot(jt),z0(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(_c(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Yn!==null&&(Ap(Yn),Yn=null))),Ip(t,e),$t(e),null;case 5:K0(e);var i=Si(Ba.current);if(n=e.type,t!==null&&e.stateNode!=null)Px(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(ee(166));return $t(e),null}if(t=Si(hr.current),_c(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[ur]=e,r[Ca]=s,t=(e.mode&1)!==0,n){case"dialog":rt("cancel",r),rt("close",r);break;case"iframe":case"object":case"embed":rt("load",r);break;case"video":case"audio":for(i=0;i<ta.length;i++)rt(ta[i],r);break;case"source":rt("error",r);break;case"img":case"image":case"link":rt("error",r),rt("load",r);break;case"details":rt("toggle",r);break;case"input":Cm(r,s),rt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},rt("invalid",r);break;case"textarea":Bm(r,s),rt("invalid",r)}Yh(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Rc(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Rc(r.textContent,a,t),i=["children",""+a]):Ia.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&rt("scroll",r)}switch(n){case"input":wc(r),Mm(r,s,!0);break;case"textarea":wc(r),Lm(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Ol)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=ib(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[ur]=e,t[Ca]=r,_x(t,e,!1,!1),e.stateNode=t;e:{switch(o=Qh(n,r),n){case"dialog":rt("cancel",t),rt("close",t),i=r;break;case"iframe":case"object":case"embed":rt("load",t),i=r;break;case"video":case"audio":for(i=0;i<ta.length;i++)rt(ta[i],t);i=r;break;case"source":rt("error",t),i=r;break;case"img":case"image":case"link":rt("error",t),rt("load",t),i=r;break;case"details":rt("toggle",t),i=r;break;case"input":Cm(t,r),i=jh(t,r),rt("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=ft({},r,{value:void 0}),rt("invalid",t);break;case"textarea":Bm(t,r),i=Gh(t,r),rt("invalid",t);break;default:i=r}Yh(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?ab(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&sb(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Sa(t,l):typeof l=="number"&&Sa(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Ia.hasOwnProperty(s)?l!=null&&s==="onScroll"&&rt("scroll",t):l!=null&&I0(t,s,l,o))}switch(n){case"input":wc(t),Mm(t,r,!1);break;case"textarea":wc(t),Lm(t);break;case"option":r.value!=null&&t.setAttribute("value",""+oi(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?ks(t,!!r.multiple,s,!1):r.defaultValue!=null&&ks(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Ol)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return $t(e),null;case 6:if(t&&e.stateNode!=null)Ox(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(ee(166));if(n=Si(Ba.current),Si(hr.current),_c(e)){if(r=e.stateNode,n=e.memoizedProps,r[ur]=e,(s=r.nodeValue!==n)&&(t=bn,t!==null))switch(t.tag){case 3:Rc(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Rc(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[ur]=e,e.stateNode=r}return $t(e),null;case 13:if(ot(lt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ct&&gn!==null&&e.mode&1&&!(e.flags&128))Gb(),Ls(),e.flags|=98560,s=!1;else if(s=_c(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(ee(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(ee(317));s[ur]=e}else Ls(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;$t(e),s=!1}else Yn!==null&&(Ap(Yn),Yn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||lt.current&1?Tt===0&&(Tt=3):sg())),e.updateQueue!==null&&(e.flags|=4),$t(e),null);case 4:return Fs(),Ip(t,e),t===null&&Aa(e.stateNode.containerInfo),$t(e),null;case 10:return U0(e.type._context),$t(e),null;case 17:return an(e.type)&&Al(),$t(e),null;case 19:if(ot(lt),s=e.memoizedState,s===null)return $t(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)fo(s,!1);else{if(Tt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Fl(t),o!==null){for(e.flags|=128,fo(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return nt(lt,lt.current&1|2),e.child}t=t.sibling}s.tail!==null&&yt()>Ws&&(e.flags|=128,r=!0,fo(s,!1),e.lanes=4194304)}else{if(!r)if(t=Fl(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),fo(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!ct)return $t(e),null}else 2*yt()-s.renderingStartTime>Ws&&n!==1073741824&&(e.flags|=128,r=!0,fo(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=yt(),e.sibling=null,n=lt.current,nt(lt,r?n&1|2:n&1),e):($t(e),null);case 22:case 23:return ig(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?hn&1073741824&&($t(e),e.subtreeFlags&6&&(e.flags|=8192)):$t(e),null;case 24:return null;case 25:return null}throw Error(ee(156,e.tag))}function XE(t,e){switch(F0(e),e.tag){case 1:return an(e.type)&&Al(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Fs(),ot(on),ot(jt),z0(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return K0(e),null;case 13:if(ot(lt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ee(340));Ls()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ot(lt),null;case 4:return Fs(),null;case 10:return U0(e.type._context),null;case 22:case 23:return ig(),null;case 24:return null;default:return null}}var Ac=!1,Ht=!1,YE=typeof WeakSet=="function"?WeakSet:Set,le=null;function bs(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){gt(t,e,r)}else n.current=null}function Sp(t,e,n){try{n()}catch(r){gt(t,e,r)}}var Ey=!1;function QE(t,e){if(ap=Rl,t=Bb(),L0(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,d=t,f=null;t:for(;;){for(var h;d!==n||i!==0&&d.nodeType!==3||(a=o+i),d!==s||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(h=d.firstChild)!==null;)f=d,d=h;for(;;){if(d===t)break t;if(f===n&&++c===i&&(a=o),f===s&&++u===r&&(l=o),(h=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=h}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(cp={focusedElem:t,selectionRange:n},Rl=!1,le=e;le!==null;)if(e=le,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,le=t;else for(;le!==null;){e=le;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var g=p.memoizedProps,w=p.memoizedState,v=e.stateNode,m=v.getSnapshotBeforeUpdate(e.elementType===e.type?g:Gn(e.type,g),w);v.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var y=e.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ee(163))}}catch(b){gt(e,e.return,b)}if(t=e.sibling,t!==null){t.return=e.return,le=t;break}le=e.return}return p=Ey,Ey=!1,p}function fa(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Sp(e,n,s)}i=i.next}while(i!==r)}}function ku(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Ep(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Ax(t){var e=t.alternate;e!==null&&(t.alternate=null,Ax(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ur],delete e[Ca],delete e[dp],delete e[CE],delete e[ME])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Nx(t){return t.tag===5||t.tag===3||t.tag===4}function Ty(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Nx(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Tp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ol));else if(r!==4&&(t=t.child,t!==null))for(Tp(t,e,n),t=t.sibling;t!==null;)Tp(t,e,n),t=t.sibling}function Rp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Rp(t,e,n),t=t.sibling;t!==null;)Rp(t,e,n),t=t.sibling}var Ct=null,Xn=!1;function Lr(t,e,n){for(n=n.child;n!==null;)Cx(t,e,n),n=n.sibling}function Cx(t,e,n){if(fr&&typeof fr.onCommitFiberUnmount=="function")try{fr.onCommitFiberUnmount(pu,n)}catch{}switch(n.tag){case 5:Ht||bs(n,e);case 6:var r=Ct,i=Xn;Ct=null,Lr(t,e,n),Ct=r,Xn=i,Ct!==null&&(Xn?(t=Ct,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ct.removeChild(n.stateNode));break;case 18:Ct!==null&&(Xn?(t=Ct,n=n.stateNode,t.nodeType===8?Wf(t.parentNode,n):t.nodeType===1&&Wf(t,n),_a(t)):Wf(Ct,n.stateNode));break;case 4:r=Ct,i=Xn,Ct=n.stateNode.containerInfo,Xn=!0,Lr(t,e,n),Ct=r,Xn=i;break;case 0:case 11:case 14:case 15:if(!Ht&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Sp(n,e,o),i=i.next}while(i!==r)}Lr(t,e,n);break;case 1:if(!Ht&&(bs(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){gt(n,e,a)}Lr(t,e,n);break;case 21:Lr(t,e,n);break;case 22:n.mode&1?(Ht=(r=Ht)||n.memoizedState!==null,Lr(t,e,n),Ht=r):Lr(t,e,n);break;default:Lr(t,e,n)}}function Ry(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new YE),e.forEach(function(r){var i=oT.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Kn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Ct=a.stateNode,Xn=!1;break e;case 3:Ct=a.stateNode.containerInfo,Xn=!0;break e;case 4:Ct=a.stateNode.containerInfo,Xn=!0;break e}a=a.return}if(Ct===null)throw Error(ee(160));Cx(s,o,i),Ct=null,Xn=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){gt(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Mx(e,t),e=e.sibling}function Mx(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Kn(e,t),ir(t),r&4){try{fa(3,t,t.return),ku(3,t)}catch(g){gt(t,t.return,g)}try{fa(5,t,t.return)}catch(g){gt(t,t.return,g)}}break;case 1:Kn(e,t),ir(t),r&512&&n!==null&&bs(n,n.return);break;case 5:if(Kn(e,t),ir(t),r&512&&n!==null&&bs(n,n.return),t.flags&32){var i=t.stateNode;try{Sa(i,"")}catch(g){gt(t,t.return,g)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&nb(i,s),Qh(a,o);var c=Qh(a,s);for(o=0;o<l.length;o+=2){var u=l[o],d=l[o+1];u==="style"?ab(i,d):u==="dangerouslySetInnerHTML"?sb(i,d):u==="children"?Sa(i,d):I0(i,u,d,c)}switch(a){case"input":Kh(i,s);break;case"textarea":rb(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?ks(i,!!s.multiple,h,!1):f!==!!s.multiple&&(s.defaultValue!=null?ks(i,!!s.multiple,s.defaultValue,!0):ks(i,!!s.multiple,s.multiple?[]:"",!1))}i[Ca]=s}catch(g){gt(t,t.return,g)}}break;case 6:if(Kn(e,t),ir(t),r&4){if(t.stateNode===null)throw Error(ee(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(g){gt(t,t.return,g)}}break;case 3:if(Kn(e,t),ir(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{_a(e.containerInfo)}catch(g){gt(t,t.return,g)}break;case 4:Kn(e,t),ir(t);break;case 13:Kn(e,t),ir(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(ng=yt())),r&4&&Ry(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(Ht=(c=Ht)||u,Kn(e,t),Ht=c):Kn(e,t),ir(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(le=t,u=t.child;u!==null;){for(d=le=u;le!==null;){switch(f=le,h=f.child,f.tag){case 0:case 11:case 14:case 15:fa(4,f,f.return);break;case 1:bs(f,f.return);var p=f.stateNode;if(typeof p.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(g){gt(r,n,g)}}break;case 5:bs(f,f.return);break;case 22:if(f.memoizedState!==null){Py(d);continue}}h!==null?(h.return=f,le=h):Py(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{i=d.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=ob("display",o))}catch(g){gt(t,t.return,g)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(g){gt(t,t.return,g)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Kn(e,t),ir(t),r&4&&Ry(t);break;case 21:break;default:Kn(e,t),ir(t)}}function ir(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Nx(n)){var r=n;break e}n=n.return}throw Error(ee(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Sa(i,""),r.flags&=-33);var s=Ty(t);Rp(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Ty(t);Tp(t,a,o);break;default:throw Error(ee(161))}}catch(l){gt(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function JE(t,e,n){le=t,Bx(t)}function Bx(t,e,n){for(var r=(t.mode&1)!==0;le!==null;){var i=le,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Ac;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Ht;a=Ac;var c=Ht;if(Ac=o,(Ht=l)&&!c)for(le=i;le!==null;)o=le,l=o.child,o.tag===22&&o.memoizedState!==null?Oy(i):l!==null?(l.return=o,le=l):Oy(i);for(;s!==null;)le=s,Bx(s),s=s.sibling;le=i,Ac=a,Ht=c}_y(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,le=s):_y(t)}}function _y(t){for(;le!==null;){var e=le;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ht||ku(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ht)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Gn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&fy(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}fy(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&_a(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ee(163))}Ht||e.flags&512&&Ep(e)}catch(f){gt(e,e.return,f)}}if(e===t){le=null;break}if(n=e.sibling,n!==null){n.return=e.return,le=n;break}le=e.return}}function Py(t){for(;le!==null;){var e=le;if(e===t){le=null;break}var n=e.sibling;if(n!==null){n.return=e.return,le=n;break}le=e.return}}function Oy(t){for(;le!==null;){var e=le;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{ku(4,e)}catch(l){gt(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){gt(e,i,l)}}var s=e.return;try{Ep(e)}catch(l){gt(e,s,l)}break;case 5:var o=e.return;try{Ep(e)}catch(l){gt(e,o,l)}}}catch(l){gt(e,e.return,l)}if(e===t){le=null;break}var a=e.sibling;if(a!==null){a.return=e.return,le=a;break}le=e.return}}var ZE=Math.ceil,Vl=Mr.ReactCurrentDispatcher,eg=Mr.ReactCurrentOwner,Dn=Mr.ReactCurrentBatchConfig,Fe=0,Ot=null,xt=null,Bt=0,hn=0,xs=ui(0),Tt=0,$a=null,Fi=0,Iu=0,tg=0,ha=null,rn=null,ng=0,Ws=1/0,kr=null,Ul=!1,_p=null,ni=null,Nc=!1,Yr=null,Hl=0,pa=0,Pp=null,cl=-1,ll=0;function Yt(){return Fe&6?yt():cl!==-1?cl:cl=yt()}function ri(t){return t.mode&1?Fe&2&&Bt!==0?Bt&-Bt:LE.transition!==null?(ll===0&&(ll=wb()),ll):(t=Ke,t!==0||(t=window.event,t=t===void 0?16:Tb(t.type)),t):1}function er(t,e,n,r){if(50<pa)throw pa=0,Pp=null,Error(ee(185));Ja(t,n,r),(!(Fe&2)||t!==Ot)&&(t===Ot&&(!(Fe&2)&&(Iu|=n),Tt===4&&Gr(t,Bt)),cn(t,r),n===1&&Fe===0&&!(e.mode&1)&&(Ws=yt()+500,wu&&di()))}function cn(t,e){var n=t.callbackNode;LS(t,e);var r=Tl(t,t===Ot?Bt:0);if(r===0)n!==null&&$m(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&$m(n),e===1)t.tag===0?BE(Ay.bind(null,t)):jb(Ay.bind(null,t)),AE(function(){!(Fe&6)&&di()}),n=null;else{switch(bb(r)){case 1:n=_0;break;case 4:n=yb;break;case 16:n=El;break;case 536870912:n=vb;break;default:n=El}n=Hx(n,Lx.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Lx(t,e){if(cl=-1,ll=0,Fe&6)throw Error(ee(327));var n=t.callbackNode;if(Rs()&&t.callbackNode!==n)return null;var r=Tl(t,t===Ot?Bt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=ql(t,r);else{e=r;var i=Fe;Fe|=2;var s=Fx();(Ot!==t||Bt!==e)&&(kr=null,Ws=yt()+500,Oi(t,e));do try{nT();break}catch(a){Dx(t,a)}while(!0);V0(),Vl.current=s,Fe=i,xt!==null?e=0:(Ot=null,Bt=0,e=Tt)}if(e!==0){if(e===2&&(i=np(t),i!==0&&(r=i,e=Op(t,i))),e===1)throw n=$a,Oi(t,0),Gr(t,r),cn(t,yt()),n;if(e===6)Gr(t,r);else{if(i=t.current.alternate,!(r&30)&&!eT(i)&&(e=ql(t,r),e===2&&(s=np(t),s!==0&&(r=s,e=Op(t,s))),e===1))throw n=$a,Oi(t,0),Gr(t,r),cn(t,yt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(ee(345));case 2:wi(t,rn,kr);break;case 3:if(Gr(t,r),(r&130023424)===r&&(e=ng+500-yt(),10<e)){if(Tl(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Yt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=up(wi.bind(null,t,rn,kr),e);break}wi(t,rn,kr);break;case 4:if(Gr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Zn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=yt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*ZE(r/1960))-r,10<r){t.timeoutHandle=up(wi.bind(null,t,rn,kr),r);break}wi(t,rn,kr);break;case 5:wi(t,rn,kr);break;default:throw Error(ee(329))}}}return cn(t,yt()),t.callbackNode===n?Lx.bind(null,t):null}function Op(t,e){var n=ha;return t.current.memoizedState.isDehydrated&&(Oi(t,e).flags|=256),t=ql(t,e),t!==2&&(e=rn,rn=n,e!==null&&Ap(e)),t}function Ap(t){rn===null?rn=t:rn.push.apply(rn,t)}function eT(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!tr(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Gr(t,e){for(e&=~tg,e&=~Iu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Zn(e),r=1<<n;t[n]=-1,e&=~r}}function Ay(t){if(Fe&6)throw Error(ee(327));Rs();var e=Tl(t,0);if(!(e&1))return cn(t,yt()),null;var n=ql(t,e);if(t.tag!==0&&n===2){var r=np(t);r!==0&&(e=r,n=Op(t,r))}if(n===1)throw n=$a,Oi(t,0),Gr(t,e),cn(t,yt()),n;if(n===6)throw Error(ee(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,wi(t,rn,kr),cn(t,yt()),null}function rg(t,e){var n=Fe;Fe|=1;try{return t(e)}finally{Fe=n,Fe===0&&(Ws=yt()+500,wu&&di())}}function $i(t){Yr!==null&&Yr.tag===0&&!(Fe&6)&&Rs();var e=Fe;Fe|=1;var n=Dn.transition,r=Ke;try{if(Dn.transition=null,Ke=1,t)return t()}finally{Ke=r,Dn.transition=n,Fe=e,!(Fe&6)&&di()}}function ig(){hn=xs.current,ot(xs)}function Oi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,OE(n)),xt!==null)for(n=xt.return;n!==null;){var r=n;switch(F0(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Al();break;case 3:Fs(),ot(on),ot(jt),z0();break;case 5:K0(r);break;case 4:Fs();break;case 13:ot(lt);break;case 19:ot(lt);break;case 10:U0(r.type._context);break;case 22:case 23:ig()}n=n.return}if(Ot=t,xt=t=ii(t.current,null),Bt=hn=e,Tt=0,$a=null,tg=Iu=Fi=0,rn=ha=null,Ii!==null){for(e=0;e<Ii.length;e++)if(n=Ii[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Ii=null}return t}function Dx(t,e){do{var n=xt;try{if(V0(),sl.current=Wl,$l){for(var r=dt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}$l=!1}if(Di=0,Pt=Et=dt=null,da=!1,La=0,eg.current=null,n===null||n.return===null){Tt=1,$a=e,xt=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Bt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var h=vy(o);if(h!==null){h.flags&=-257,wy(h,o,a,s,e),h.mode&1&&yy(s,c,e),e=h,l=c;var p=e.updateQueue;if(p===null){var g=new Set;g.add(l),e.updateQueue=g}else p.add(l);break e}else{if(!(e&1)){yy(s,c,e),sg();break e}l=Error(ee(426))}}else if(ct&&a.mode&1){var w=vy(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),wy(w,o,a,s,e),$0($s(l,a));break e}}s=l=$s(l,a),Tt!==4&&(Tt=2),ha===null?ha=[s]:ha.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var v=bx(s,l,e);dy(s,v);break e;case 1:a=l;var m=s.type,y=s.stateNode;if(!(s.flags&128)&&(typeof m.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(ni===null||!ni.has(y)))){s.flags|=65536,e&=-e,s.lanes|=e;var b=xx(s,a,e);dy(s,b);break e}}s=s.return}while(s!==null)}Wx(n)}catch(x){e=x,xt===n&&n!==null&&(xt=n=n.return);continue}break}while(!0)}function Fx(){var t=Vl.current;return Vl.current=Wl,t===null?Wl:t}function sg(){(Tt===0||Tt===3||Tt===2)&&(Tt=4),Ot===null||!(Fi&268435455)&&!(Iu&268435455)||Gr(Ot,Bt)}function ql(t,e){var n=Fe;Fe|=2;var r=Fx();(Ot!==t||Bt!==e)&&(kr=null,Oi(t,e));do try{tT();break}catch(i){Dx(t,i)}while(!0);if(V0(),Fe=n,Vl.current=r,xt!==null)throw Error(ee(261));return Ot=null,Bt=0,Tt}function tT(){for(;xt!==null;)$x(xt)}function nT(){for(;xt!==null&&!RS();)$x(xt)}function $x(t){var e=Ux(t.alternate,t,hn);t.memoizedProps=t.pendingProps,e===null?Wx(t):xt=e,eg.current=null}function Wx(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=XE(n,e),n!==null){n.flags&=32767,xt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Tt=6,xt=null;return}}else if(n=GE(n,e,hn),n!==null){xt=n;return}if(e=e.sibling,e!==null){xt=e;return}xt=e=t}while(e!==null);Tt===0&&(Tt=5)}function wi(t,e,n){var r=Ke,i=Dn.transition;try{Dn.transition=null,Ke=1,rT(t,e,n,r)}finally{Dn.transition=i,Ke=r}return null}function rT(t,e,n,r){do Rs();while(Yr!==null);if(Fe&6)throw Error(ee(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ee(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(DS(t,s),t===Ot&&(xt=Ot=null,Bt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Nc||(Nc=!0,Hx(El,function(){return Rs(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Dn.transition,Dn.transition=null;var o=Ke;Ke=1;var a=Fe;Fe|=4,eg.current=null,QE(t,n),Mx(n,t),IE(cp),Rl=!!ap,cp=ap=null,t.current=n,JE(n),_S(),Fe=a,Ke=o,Dn.transition=s}else t.current=n;if(Nc&&(Nc=!1,Yr=t,Hl=i),s=t.pendingLanes,s===0&&(ni=null),AS(n.stateNode),cn(t,yt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Ul)throw Ul=!1,t=_p,_p=null,t;return Hl&1&&t.tag!==0&&Rs(),s=t.pendingLanes,s&1?t===Pp?pa++:(pa=0,Pp=t):pa=0,di(),null}function Rs(){if(Yr!==null){var t=bb(Hl),e=Dn.transition,n=Ke;try{if(Dn.transition=null,Ke=16>t?16:t,Yr===null)var r=!1;else{if(t=Yr,Yr=null,Hl=0,Fe&6)throw Error(ee(331));var i=Fe;for(Fe|=4,le=t.current;le!==null;){var s=le,o=s.child;if(le.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(le=c;le!==null;){var u=le;switch(u.tag){case 0:case 11:case 15:fa(8,u,s)}var d=u.child;if(d!==null)d.return=u,le=d;else for(;le!==null;){u=le;var f=u.sibling,h=u.return;if(Ax(u),u===c){le=null;break}if(f!==null){f.return=h,le=f;break}le=h}}}var p=s.alternate;if(p!==null){var g=p.child;if(g!==null){p.child=null;do{var w=g.sibling;g.sibling=null,g=w}while(g!==null)}}le=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,le=o;else e:for(;le!==null;){if(s=le,s.flags&2048)switch(s.tag){case 0:case 11:case 15:fa(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,le=v;break e}le=s.return}}var m=t.current;for(le=m;le!==null;){o=le;var y=o.child;if(o.subtreeFlags&2064&&y!==null)y.return=o,le=y;else e:for(o=m;le!==null;){if(a=le,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:ku(9,a)}}catch(x){gt(a,a.return,x)}if(a===o){le=null;break e}var b=a.sibling;if(b!==null){b.return=a.return,le=b;break e}le=a.return}}if(Fe=i,di(),fr&&typeof fr.onPostCommitFiberRoot=="function")try{fr.onPostCommitFiberRoot(pu,t)}catch{}r=!0}return r}finally{Ke=n,Dn.transition=e}}return!1}function Ny(t,e,n){e=$s(n,e),e=bx(t,e,1),t=ti(t,e,1),e=Yt(),t!==null&&(Ja(t,1,e),cn(t,e))}function gt(t,e,n){if(t.tag===3)Ny(t,t,n);else for(;e!==null;){if(e.tag===3){Ny(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ni===null||!ni.has(r))){t=$s(n,t),t=xx(e,t,1),e=ti(e,t,1),t=Yt(),e!==null&&(Ja(e,1,t),cn(e,t));break}}e=e.return}}function iT(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Yt(),t.pingedLanes|=t.suspendedLanes&n,Ot===t&&(Bt&n)===n&&(Tt===4||Tt===3&&(Bt&130023424)===Bt&&500>yt()-ng?Oi(t,0):tg|=n),cn(t,e)}function Vx(t,e){e===0&&(t.mode&1?(e=kc,kc<<=1,!(kc&130023424)&&(kc=4194304)):e=1);var n=Yt();t=Or(t,e),t!==null&&(Ja(t,e,n),cn(t,n))}function sT(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Vx(t,n)}function oT(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(ee(314))}r!==null&&r.delete(e),Vx(t,n)}var Ux;Ux=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||on.current)sn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return sn=!1,zE(t,e,n);sn=!!(t.flags&131072)}else sn=!1,ct&&e.flags&1048576&&Kb(e,Ml,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;al(t,e),t=e.pendingProps;var i=Bs(e,jt.current);Ts(e,n),i=X0(null,e,r,t,i,n);var s=Y0();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,an(r)?(s=!0,Nl(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,q0(e),i.updater=xu,e.stateNode=i,i._reactInternals=e,yp(e,r,t,n),e=bp(null,e,r,!0,s,n)):(e.tag=0,ct&&s&&D0(e),Gt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(al(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=cT(r),t=Gn(r,t),i){case 0:e=wp(null,e,r,t,n);break e;case 1:e=ky(null,e,r,t,n);break e;case 11:e=by(null,e,r,t,n);break e;case 14:e=xy(null,e,r,Gn(r.type,t),n);break e}throw Error(ee(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Gn(r,i),wp(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Gn(r,i),ky(t,e,r,i,n);case 3:e:{if(Ex(e),t===null)throw Error(ee(387));r=e.pendingProps,s=e.memoizedState,i=s.element,Jb(t,e),Dl(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=$s(Error(ee(423)),e),e=Iy(t,e,r,n,i);break e}else if(r!==i){i=$s(Error(ee(424)),e),e=Iy(t,e,r,n,i);break e}else for(gn=ei(e.stateNode.containerInfo.firstChild),bn=e,ct=!0,Yn=null,n=Yb(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ls(),r===i){e=Ar(t,e,n);break e}Gt(t,e,r,n)}e=e.child}return e;case 5:return Zb(e),t===null&&pp(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,lp(r,i)?o=null:s!==null&&lp(r,s)&&(e.flags|=32),Sx(t,e),Gt(t,e,o,n),e.child;case 6:return t===null&&pp(e),null;case 13:return Tx(t,e,n);case 4:return j0(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ds(e,null,r,n):Gt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Gn(r,i),by(t,e,r,i,n);case 7:return Gt(t,e,e.pendingProps,n),e.child;case 8:return Gt(t,e,e.pendingProps.children,n),e.child;case 12:return Gt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,nt(Bl,r._currentValue),r._currentValue=o,s!==null)if(tr(s.value,o)){if(s.children===i.children&&!on.current){e=Ar(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Rr(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),gp(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(ee(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),gp(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Gt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Ts(e,n),i=Fn(i),r=r(i),e.flags|=1,Gt(t,e,r,n),e.child;case 14:return r=e.type,i=Gn(r,e.pendingProps),i=Gn(r.type,i),xy(t,e,r,i,n);case 15:return kx(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Gn(r,i),al(t,e),e.tag=1,an(r)?(t=!0,Nl(e)):t=!1,Ts(e,n),wx(e,r,i),yp(e,r,i,n),bp(null,e,r,!0,t,n);case 19:return Rx(t,e,n);case 22:return Ix(t,e,n)}throw Error(ee(156,e.tag))};function Hx(t,e){return mb(t,e)}function aT(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ln(t,e,n,r){return new aT(t,e,n,r)}function og(t){return t=t.prototype,!(!t||!t.isReactComponent)}function cT(t){if(typeof t=="function")return og(t)?1:0;if(t!=null){if(t=t.$$typeof,t===E0)return 11;if(t===T0)return 14}return 2}function ii(t,e){var n=t.alternate;return n===null?(n=Ln(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ul(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")og(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ds:return Ai(n.children,i,s,e);case S0:o=8,i|=8;break;case Vh:return t=Ln(12,n,e,i|2),t.elementType=Vh,t.lanes=s,t;case Uh:return t=Ln(13,n,e,i),t.elementType=Uh,t.lanes=s,t;case Hh:return t=Ln(19,n,e,i),t.elementType=Hh,t.lanes=s,t;case Z1:return Su(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Q1:o=10;break e;case J1:o=9;break e;case E0:o=11;break e;case T0:o=14;break e;case qr:o=16,r=null;break e}throw Error(ee(130,t==null?t:typeof t,""))}return e=Ln(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Ai(t,e,n,r){return t=Ln(7,t,r,e),t.lanes=n,t}function Su(t,e,n,r){return t=Ln(22,t,r,e),t.elementType=Z1,t.lanes=n,t.stateNode={isHidden:!1},t}function Gf(t,e,n){return t=Ln(6,t,null,e),t.lanes=n,t}function Xf(t,e,n){return e=Ln(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function lT(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Pf(0),this.expirationTimes=Pf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Pf(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function ag(t,e,n,r,i,s,o,a,l){return t=new lT(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Ln(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},q0(s),t}function uT(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:us,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function qx(t){if(!t)return ai;t=t._reactInternals;e:{if(ji(t)!==t||t.tag!==1)throw Error(ee(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(an(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ee(171))}if(t.tag===1){var n=t.type;if(an(n))return qb(t,n,e)}return e}function jx(t,e,n,r,i,s,o,a,l){return t=ag(n,r,!0,t,i,s,o,a,l),t.context=qx(null),n=t.current,r=Yt(),i=ri(n),s=Rr(r,i),s.callback=e??null,ti(n,s,i),t.current.lanes=i,Ja(t,i,r),cn(t,r),t}function Eu(t,e,n,r){var i=e.current,s=Yt(),o=ri(i);return n=qx(n),e.context===null?e.context=n:e.pendingContext=n,e=Rr(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ti(i,e,o),t!==null&&(er(t,i,o,s),il(t,i,o)),o}function jl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Cy(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function cg(t,e){Cy(t,e),(t=t.alternate)&&Cy(t,e)}function dT(){return null}var Kx=typeof reportError=="function"?reportError:function(t){console.error(t)};function lg(t){this._internalRoot=t}Tu.prototype.render=lg.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ee(409));Eu(t,e,null,null)};Tu.prototype.unmount=lg.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;$i(function(){Eu(null,t,null,null)}),e[Pr]=null}};function Tu(t){this._internalRoot=t}Tu.prototype.unstable_scheduleHydration=function(t){if(t){var e=Ib();t={blockedOn:null,target:t,priority:e};for(var n=0;n<zr.length&&e!==0&&e<zr[n].priority;n++);zr.splice(n,0,t),n===0&&Eb(t)}};function ug(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ru(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function My(){}function fT(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=jl(o);s.call(c)}}var o=jx(e,r,t,0,null,!1,!1,"",My);return t._reactRootContainer=o,t[Pr]=o.current,Aa(t.nodeType===8?t.parentNode:t),$i(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=jl(l);a.call(c)}}var l=ag(t,0,!1,null,null,!1,!1,"",My);return t._reactRootContainer=l,t[Pr]=l.current,Aa(t.nodeType===8?t.parentNode:t),$i(function(){Eu(e,l,n,r)}),l}function _u(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=jl(o);a.call(l)}}Eu(e,o,t,i)}else o=fT(n,e,t,i,r);return jl(o)}xb=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ea(e.pendingLanes);n!==0&&(P0(e,n|1),cn(e,yt()),!(Fe&6)&&(Ws=yt()+500,di()))}break;case 13:$i(function(){var r=Or(t,1);if(r!==null){var i=Yt();er(r,t,1,i)}}),cg(t,1)}};O0=function(t){if(t.tag===13){var e=Or(t,134217728);if(e!==null){var n=Yt();er(e,t,134217728,n)}cg(t,134217728)}};kb=function(t){if(t.tag===13){var e=ri(t),n=Or(t,e);if(n!==null){var r=Yt();er(n,t,e,r)}cg(t,e)}};Ib=function(){return Ke};Sb=function(t,e){var n=Ke;try{return Ke=t,e()}finally{Ke=n}};Zh=function(t,e,n){switch(e){case"input":if(Kh(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=vu(r);if(!i)throw Error(ee(90));tb(r),Kh(r,i)}}}break;case"textarea":rb(t,n);break;case"select":e=n.value,e!=null&&ks(t,!!n.multiple,e,!1)}};ub=rg;db=$i;var hT={usingClientEntryPoint:!1,Events:[ec,gs,vu,cb,lb,rg]},ho={findFiberByHostInstance:ki,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},pT={bundleType:ho.bundleType,version:ho.version,rendererPackageName:ho.rendererPackageName,rendererConfig:ho.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Mr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=pb(t),t===null?null:t.stateNode},findFiberByHostInstance:ho.findFiberByHostInstance||dT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Cc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Cc.isDisabled&&Cc.supportsFiber)try{pu=Cc.inject(pT),fr=Cc}catch{}}En.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=hT;En.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ug(e))throw Error(ee(200));return uT(t,e,null,n)};En.createRoot=function(t,e){if(!ug(t))throw Error(ee(299));var n=!1,r="",i=Kx;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=ag(t,1,!1,null,null,n,!1,r,i),t[Pr]=e.current,Aa(t.nodeType===8?t.parentNode:t),new lg(e)};En.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ee(188)):(t=Object.keys(t).join(","),Error(ee(268,t)));return t=pb(e),t=t===null?null:t.stateNode,t};En.flushSync=function(t){return $i(t)};En.hydrate=function(t,e,n){if(!Ru(e))throw Error(ee(200));return _u(null,t,e,!0,n)};En.hydrateRoot=function(t,e,n){if(!ug(t))throw Error(ee(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=Kx;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=jx(e,null,t,1,n??null,i,!1,s,o),t[Pr]=e.current,Aa(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Tu(e)};En.render=function(t,e,n){if(!Ru(e))throw Error(ee(200));return _u(null,t,e,!1,n)};En.unmountComponentAtNode=function(t){if(!Ru(t))throw Error(ee(40));return t._reactRootContainer?($i(function(){_u(null,null,t,!1,function(){t._reactRootContainer=null,t[Pr]=null})}),!0):!1};En.unstable_batchedUpdates=rg;En.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Ru(n))throw Error(ee(200));if(t==null||t._reactInternals===void 0)throw Error(ee(38));return _u(t,e,n,!1,r)};En.version="18.3.1-next-f1338f8080-20240426";function zx(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(zx)}catch(t){console.error(t)}}zx(),z1.exports=En;var dg=z1.exports;const Mc=m0(dg);var By=dg;$h.createRoot=By.createRoot,$h.hydrateRoot=By.hydrateRoot;const Wa={black:"#000",white:"#fff"},Ji={300:"#e57373",400:"#ef5350",500:"#f44336",700:"#d32f2f",800:"#c62828"},Zi={50:"#f3e5f5",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",700:"#7b1fa2"},es={50:"#e3f2fd",200:"#90caf9",400:"#42a5f5",700:"#1976d2",800:"#1565c0"},ts={300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",700:"#0288d1",900:"#01579b"},ns={300:"#81c784",400:"#66bb6a",500:"#4caf50",700:"#388e3c",800:"#2e7d32",900:"#1b5e20"},po={300:"#ffb74d",400:"#ffa726",500:"#ff9800",700:"#f57c00",900:"#e65100"},gT={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"};function Wi(t){let e="https://mui.com/production-error/?code="+t;for(let n=1;n<arguments.length;n+=1)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified MUI error #"+t+"; visit "+e+" for the full message."}const mT=Object.freeze(Object.defineProperty({__proto__:null,default:Wi},Symbol.toStringTag,{value:"Module"})),Vs="$$material";function O(){return O=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},O.apply(null,arguments)}function ue(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.includes(r))continue;n[r]=t[r]}return n}function Gx(t){var e=Object.create(null);return function(n){return e[n]===void 0&&(e[n]=t(n)),e[n]}}var yT=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,vT=Gx(function(t){return yT.test(t)||t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)<91});function wT(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}function bT(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),t.nonce!==void 0&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var xT=function(){function t(n){var r=this;this._insertTag=function(i){var s;r.tags.length===0?r.insertionPoint?s=r.insertionPoint.nextSibling:r.prepend?s=r.container.firstChild:s=r.before:s=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(i,s),r.tags.push(i)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(r){r.forEach(this._insertTag)},e.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(bT(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var s=wT(i);try{s.insertRule(r,s.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(r));this.ctr++},e.flush=function(){this.tags.forEach(function(r){var i;return(i=r.parentNode)==null?void 0:i.removeChild(r)}),this.tags=[],this.ctr=0},t}(),Vt="-ms-",Kl="-moz-",We="-webkit-",Xx="comm",fg="rule",hg="decl",kT="@import",Yx="@keyframes",IT="@layer",ST=Math.abs,Pu=String.fromCharCode,ET=Object.assign;function TT(t,e){return Mt(t,0)^45?(((e<<2^Mt(t,0))<<2^Mt(t,1))<<2^Mt(t,2))<<2^Mt(t,3):0}function Qx(t){return t.trim()}function RT(t,e){return(t=e.exec(t))?t[0]:t}function Ve(t,e,n){return t.replace(e,n)}function Np(t,e){return t.indexOf(e)}function Mt(t,e){return t.charCodeAt(e)|0}function Va(t,e,n){return t.slice(e,n)}function ar(t){return t.length}function pg(t){return t.length}function Bc(t,e){return e.push(t),t}function _T(t,e){return t.map(e).join("")}var Ou=1,Us=1,Jx=0,dn=0,bt=0,Js="";function Au(t,e,n,r,i,s,o){return{value:t,root:e,parent:n,type:r,props:i,children:s,line:Ou,column:Us,length:o,return:""}}function go(t,e){return ET(Au("",null,null,"",null,null,0),t,{length:-t.length},e)}function PT(){return bt}function OT(){return bt=dn>0?Mt(Js,--dn):0,Us--,bt===10&&(Us=1,Ou--),bt}function xn(){return bt=dn<Jx?Mt(Js,dn++):0,Us++,bt===10&&(Us=1,Ou++),bt}function pr(){return Mt(Js,dn)}function dl(){return dn}function nc(t,e){return Va(Js,t,e)}function Ua(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Zx(t){return Ou=Us=1,Jx=ar(Js=t),dn=0,[]}function ek(t){return Js="",t}function fl(t){return Qx(nc(dn-1,Cp(t===91?t+2:t===40?t+1:t)))}function AT(t){for(;(bt=pr())&&bt<33;)xn();return Ua(t)>2||Ua(bt)>3?"":" "}function NT(t,e){for(;--e&&xn()&&!(bt<48||bt>102||bt>57&&bt<65||bt>70&&bt<97););return nc(t,dl()+(e<6&&pr()==32&&xn()==32))}function Cp(t){for(;xn();)switch(bt){case t:return dn;case 34:case 39:t!==34&&t!==39&&Cp(bt);break;case 40:t===41&&Cp(t);break;case 92:xn();break}return dn}function CT(t,e){for(;xn()&&t+bt!==57;)if(t+bt===84&&pr()===47)break;return"/*"+nc(e,dn-1)+"*"+Pu(t===47?t:xn())}function MT(t){for(;!Ua(pr());)xn();return nc(t,dn)}function BT(t){return ek(hl("",null,null,null,[""],t=Zx(t),0,[0],t))}function hl(t,e,n,r,i,s,o,a,l){for(var c=0,u=0,d=o,f=0,h=0,p=0,g=1,w=1,v=1,m=0,y="",b=i,x=s,I=r,k=y;w;)switch(p=m,m=xn()){case 40:if(p!=108&&Mt(k,d-1)==58){Np(k+=Ve(fl(m),"&","&\f"),"&\f")!=-1&&(v=-1);break}case 34:case 39:case 91:k+=fl(m);break;case 9:case 10:case 13:case 32:k+=AT(p);break;case 92:k+=NT(dl()-1,7);continue;case 47:switch(pr()){case 42:case 47:Bc(LT(CT(xn(),dl()),e,n),l);break;default:k+="/"}break;case 123*g:a[c++]=ar(k)*v;case 125*g:case 59:case 0:switch(m){case 0:case 125:w=0;case 59+u:v==-1&&(k=Ve(k,/\f/g,"")),h>0&&ar(k)-d&&Bc(h>32?Dy(k+";",r,n,d-1):Dy(Ve(k," ","")+";",r,n,d-2),l);break;case 59:k+=";";default:if(Bc(I=Ly(k,e,n,c,u,i,a,y,b=[],x=[],d),s),m===123)if(u===0)hl(k,e,I,I,b,s,d,a,x);else switch(f===99&&Mt(k,3)===110?100:f){case 100:case 108:case 109:case 115:hl(t,I,I,r&&Bc(Ly(t,I,I,0,0,i,a,y,i,b=[],d),x),i,x,d,a,r?b:x);break;default:hl(k,I,I,I,[""],x,0,a,x)}}c=u=h=0,g=v=1,y=k="",d=o;break;case 58:d=1+ar(k),h=p;default:if(g<1){if(m==123)--g;else if(m==125&&g++==0&&OT()==125)continue}switch(k+=Pu(m),m*g){case 38:v=u>0?1:(k+="\f",-1);break;case 44:a[c++]=(ar(k)-1)*v,v=1;break;case 64:pr()===45&&(k+=fl(xn())),f=pr(),u=d=ar(y=k+=MT(dl())),m++;break;case 45:p===45&&ar(k)==2&&(g=0)}}return s}function Ly(t,e,n,r,i,s,o,a,l,c,u){for(var d=i-1,f=i===0?s:[""],h=pg(f),p=0,g=0,w=0;p<r;++p)for(var v=0,m=Va(t,d+1,d=ST(g=o[p])),y=t;v<h;++v)(y=Qx(g>0?f[v]+" "+m:Ve(m,/&\f/g,f[v])))&&(l[w++]=y);return Au(t,e,n,i===0?fg:a,l,c,u)}function LT(t,e,n){return Au(t,e,n,Xx,Pu(PT()),Va(t,2,-2),0)}function Dy(t,e,n,r){return Au(t,e,n,hg,Va(t,0,r),Va(t,r+1,-1),r)}function _s(t,e){for(var n="",r=pg(t),i=0;i<r;i++)n+=e(t[i],i,t,e)||"";return n}function DT(t,e,n,r){switch(t.type){case IT:if(t.children.length)break;case kT:case hg:return t.return=t.return||t.value;case Xx:return"";case Yx:return t.return=t.value+"{"+_s(t.children,r)+"}";case fg:t.value=t.props.join(",")}return ar(n=_s(t.children,r))?t.return=t.value+"{"+n+"}":""}function FT(t){var e=pg(t);return function(n,r,i,s){for(var o="",a=0;a<e;a++)o+=t[a](n,r,i,s)||"";return o}}function $T(t){return function(e){e.root||(e=e.return)&&t(e)}}var WT=function(e,n,r){for(var i=0,s=0;i=s,s=pr(),i===38&&s===12&&(n[r]=1),!Ua(s);)xn();return nc(e,dn)},VT=function(e,n){var r=-1,i=44;do switch(Ua(i)){case 0:i===38&&pr()===12&&(n[r]=1),e[r]+=WT(dn-1,n,r);break;case 2:e[r]+=fl(i);break;case 4:if(i===44){e[++r]=pr()===58?"&\f":"",n[r]=e[r].length;break}default:e[r]+=Pu(i)}while(i=xn());return e},UT=function(e,n){return ek(VT(Zx(e),n))},Fy=new WeakMap,HT=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var n=e.value,r=e.parent,i=e.column===r.column&&e.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(e.props.length===1&&n.charCodeAt(0)!==58&&!Fy.get(r))&&!i){Fy.set(e,!0);for(var s=[],o=UT(n,s),a=r.props,l=0,c=0;l<o.length;l++)for(var u=0;u<a.length;u++,c++)e.props[c]=s[l]?o[l].replace(/&\f/g,a[u]):a[u]+" "+o[l]}}},qT=function(e){if(e.type==="decl"){var n=e.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(e.return="",e.value="")}};function tk(t,e){switch(TT(t,e)){case 5103:return We+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return We+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return We+t+Kl+t+Vt+t+t;case 6828:case 4268:return We+t+Vt+t+t;case 6165:return We+t+Vt+"flex-"+t+t;case 5187:return We+t+Ve(t,/(\w+).+(:[^]+)/,We+"box-$1$2"+Vt+"flex-$1$2")+t;case 5443:return We+t+Vt+"flex-item-"+Ve(t,/flex-|-self/,"")+t;case 4675:return We+t+Vt+"flex-line-pack"+Ve(t,/align-content|flex-|-self/,"")+t;case 5548:return We+t+Vt+Ve(t,"shrink","negative")+t;case 5292:return We+t+Vt+Ve(t,"basis","preferred-size")+t;case 6060:return We+"box-"+Ve(t,"-grow","")+We+t+Vt+Ve(t,"grow","positive")+t;case 4554:return We+Ve(t,/([^-])(transform)/g,"$1"+We+"$2")+t;case 6187:return Ve(Ve(Ve(t,/(zoom-|grab)/,We+"$1"),/(image-set)/,We+"$1"),t,"")+t;case 5495:case 3959:return Ve(t,/(image-set\([^]*)/,We+"$1$`$1");case 4968:return Ve(Ve(t,/(.+:)(flex-)?(.*)/,We+"box-pack:$3"+Vt+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+We+t+t;case 4095:case 3583:case 4068:case 2532:return Ve(t,/(.+)-inline(.+)/,We+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(ar(t)-1-e>6)switch(Mt(t,e+1)){case 109:if(Mt(t,e+4)!==45)break;case 102:return Ve(t,/(.+:)(.+)-([^]+)/,"$1"+We+"$2-$3$1"+Kl+(Mt(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~Np(t,"stretch")?tk(Ve(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(Mt(t,e+1)!==115)break;case 6444:switch(Mt(t,ar(t)-3-(~Np(t,"!important")&&10))){case 107:return Ve(t,":",":"+We)+t;case 101:return Ve(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+We+(Mt(t,14)===45?"inline-":"")+"box$3$1"+We+"$2$3$1"+Vt+"$2box$3")+t}break;case 5936:switch(Mt(t,e+11)){case 114:return We+t+Vt+Ve(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return We+t+Vt+Ve(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return We+t+Vt+Ve(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return We+t+Vt+t+t}return t}var jT=function(e,n,r,i){if(e.length>-1&&!e.return)switch(e.type){case hg:e.return=tk(e.value,e.length);break;case Yx:return _s([go(e,{value:Ve(e.value,"@","@"+We)})],i);case fg:if(e.length)return _T(e.props,function(s){switch(RT(s,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return _s([go(e,{props:[Ve(s,/:(read-\w+)/,":"+Kl+"$1")]})],i);case"::placeholder":return _s([go(e,{props:[Ve(s,/:(plac\w+)/,":"+We+"input-$1")]}),go(e,{props:[Ve(s,/:(plac\w+)/,":"+Kl+"$1")]}),go(e,{props:[Ve(s,/:(plac\w+)/,Vt+"input-$1")]})],i)}return""})}},KT=[jT],nk=function(e){var n=e.key;if(n==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(g){var w=g.getAttribute("data-emotion");w.indexOf(" ")!==-1&&(document.head.appendChild(g),g.setAttribute("data-s",""))})}var i=e.stylisPlugins||KT,s={},o,a=[];o=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(g){for(var w=g.getAttribute("data-emotion").split(" "),v=1;v<w.length;v++)s[w[v]]=!0;a.push(g)});var l,c=[HT,qT];{var u,d=[DT,$T(function(g){u.insert(g)})],f=FT(c.concat(i,d)),h=function(w){return _s(BT(w),f)};l=function(w,v,m,y){u=m,h(w?w+"{"+v.styles+"}":v.styles),y&&(p.inserted[v.name]=!0)}}var p={key:n,sheet:new xT({key:n,container:o,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:s,registered:{},insert:l};return p.sheet.hydrate(a),p},rk={exports:{}},ze={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var At=typeof Symbol=="function"&&Symbol.for,gg=At?Symbol.for("react.element"):60103,mg=At?Symbol.for("react.portal"):60106,Nu=At?Symbol.for("react.fragment"):60107,Cu=At?Symbol.for("react.strict_mode"):60108,Mu=At?Symbol.for("react.profiler"):60114,Bu=At?Symbol.for("react.provider"):60109,Lu=At?Symbol.for("react.context"):60110,yg=At?Symbol.for("react.async_mode"):60111,Du=At?Symbol.for("react.concurrent_mode"):60111,Fu=At?Symbol.for("react.forward_ref"):60112,$u=At?Symbol.for("react.suspense"):60113,zT=At?Symbol.for("react.suspense_list"):60120,Wu=At?Symbol.for("react.memo"):60115,Vu=At?Symbol.for("react.lazy"):60116,GT=At?Symbol.for("react.block"):60121,XT=At?Symbol.for("react.fundamental"):60117,YT=At?Symbol.for("react.responder"):60118,QT=At?Symbol.for("react.scope"):60119;function Rn(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case gg:switch(t=t.type,t){case yg:case Du:case Nu:case Mu:case Cu:case $u:return t;default:switch(t=t&&t.$$typeof,t){case Lu:case Fu:case Vu:case Wu:case Bu:return t;default:return e}}case mg:return e}}}function ik(t){return Rn(t)===Du}ze.AsyncMode=yg;ze.ConcurrentMode=Du;ze.ContextConsumer=Lu;ze.ContextProvider=Bu;ze.Element=gg;ze.ForwardRef=Fu;ze.Fragment=Nu;ze.Lazy=Vu;ze.Memo=Wu;ze.Portal=mg;ze.Profiler=Mu;ze.StrictMode=Cu;ze.Suspense=$u;ze.isAsyncMode=function(t){return ik(t)||Rn(t)===yg};ze.isConcurrentMode=ik;ze.isContextConsumer=function(t){return Rn(t)===Lu};ze.isContextProvider=function(t){return Rn(t)===Bu};ze.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===gg};ze.isForwardRef=function(t){return Rn(t)===Fu};ze.isFragment=function(t){return Rn(t)===Nu};ze.isLazy=function(t){return Rn(t)===Vu};ze.isMemo=function(t){return Rn(t)===Wu};ze.isPortal=function(t){return Rn(t)===mg};ze.isProfiler=function(t){return Rn(t)===Mu};ze.isStrictMode=function(t){return Rn(t)===Cu};ze.isSuspense=function(t){return Rn(t)===$u};ze.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Nu||t===Du||t===Mu||t===Cu||t===$u||t===zT||typeof t=="object"&&t!==null&&(t.$$typeof===Vu||t.$$typeof===Wu||t.$$typeof===Bu||t.$$typeof===Lu||t.$$typeof===Fu||t.$$typeof===XT||t.$$typeof===YT||t.$$typeof===QT||t.$$typeof===GT)};ze.typeOf=Rn;rk.exports=ze;var JT=rk.exports,sk=JT,ZT={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},eR={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},ok={};ok[sk.ForwardRef]=ZT;ok[sk.Memo]=eR;var tR=!0;function nR(t,e,n){var r="";return n.split(" ").forEach(function(i){t[i]!==void 0?e.push(t[i]+";"):r+=i+" "}),r}var ak=function(e,n,r){var i=e.key+"-"+n.name;(r===!1||tR===!1)&&e.registered[i]===void 0&&(e.registered[i]=n.styles)},ck=function(e,n,r){ak(e,n,r);var i=e.key+"-"+n.name;if(e.inserted[n.name]===void 0){var s=n;do e.insert(n===s?"."+i:"",s,e.sheet,!0),s=s.next;while(s!==void 0)}};function rR(t){for(var e=0,n,r=0,i=t.length;i>=4;++r,i-=4)n=t.charCodeAt(r)&255|(t.charCodeAt(++r)&255)<<8|(t.charCodeAt(++r)&255)<<16|(t.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,e=(n&65535)*1540483477+((n>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(i){case 3:e^=(t.charCodeAt(r+2)&255)<<16;case 2:e^=(t.charCodeAt(r+1)&255)<<8;case 1:e^=t.charCodeAt(r)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var iR={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},sR=/[A-Z]|^ms/g,oR=/_EMO_([^_]+?)_([^]*?)_EMO_/g,lk=function(e){return e.charCodeAt(1)===45},$y=function(e){return e!=null&&typeof e!="boolean"},Yf=Gx(function(t){return lk(t)?t:t.replace(sR,"-$&").toLowerCase()}),Wy=function(e,n){switch(e){case"animation":case"animationName":if(typeof n=="string")return n.replace(oR,function(r,i,s){return cr={name:i,styles:s,next:cr},i})}return iR[e]!==1&&!lk(e)&&typeof n=="number"&&n!==0?n+"px":n};function Ha(t,e,n){if(n==null)return"";var r=n;if(r.__emotion_styles!==void 0)return r;switch(typeof n){case"boolean":return"";case"object":{var i=n;if(i.anim===1)return cr={name:i.name,styles:i.styles,next:cr},i.name;var s=n;if(s.styles!==void 0){var o=s.next;if(o!==void 0)for(;o!==void 0;)cr={name:o.name,styles:o.styles,next:cr},o=o.next;var a=s.styles+";";return a}return aR(t,e,n)}case"function":{if(t!==void 0){var l=cr,c=n(t);return cr=l,Ha(t,e,c)}break}}var u=n;if(e==null)return u;var d=e[u];return d!==void 0?d:u}function aR(t,e,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=Ha(t,e,n[i])+";";else for(var s in n){var o=n[s];if(typeof o!="object"){var a=o;e!=null&&e[a]!==void 0?r+=s+"{"+e[a]+"}":$y(a)&&(r+=Yf(s)+":"+Wy(s,a)+";")}else if(Array.isArray(o)&&typeof o[0]=="string"&&(e==null||e[o[0]]===void 0))for(var l=0;l<o.length;l++)$y(o[l])&&(r+=Yf(s)+":"+Wy(s,o[l])+";");else{var c=Ha(t,e,o);switch(s){case"animation":case"animationName":{r+=Yf(s)+":"+c+";";break}default:r+=s+"{"+c+"}"}}}return r}var Vy=/label:\s*([^\s;\n{]+)\s*(;|$)/g,cr;function vg(t,e,n){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var r=!0,i="";cr=void 0;var s=t[0];if(s==null||s.raw===void 0)r=!1,i+=Ha(n,e,s);else{var o=s;i+=o[0]}for(var a=1;a<t.length;a++)if(i+=Ha(n,e,t[a]),r){var l=s;i+=l[a]}Vy.lastIndex=0;for(var c="",u;(u=Vy.exec(i))!==null;)c+="-"+u[1];var d=rR(i)+c;return{name:d,styles:i,next:cr}}var cR=function(e){return e()},uk=Fh.useInsertionEffect?Fh.useInsertionEffect:!1,lR=uk||cR,Uy=uk||A.useLayoutEffect,dk=A.createContext(typeof HTMLElement<"u"?nk({key:"css"}):null),uR=dk.Provider,fk=function(e){return A.forwardRef(function(n,r){var i=A.useContext(dk);return e(n,i,r)})},rc=A.createContext({}),Qf={exports:{}},Hy;function hk(){return Hy||(Hy=1,function(t){function e(){return t.exports=e=Object.assign?Object.assign.bind():function(n){for(var r=1;r<arguments.length;r++){var i=arguments[r];for(var s in i)({}).hasOwnProperty.call(i,s)&&(n[s]=i[s])}return n},t.exports.__esModule=!0,t.exports.default=t.exports,e.apply(null,arguments)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports}(Qf)),Qf.exports}hk();var dR=fk(function(t,e){var n=t.styles,r=vg([n],void 0,A.useContext(rc)),i=A.useRef();return Uy(function(){var s=e.key+"-global",o=new e.sheet.constructor({key:s,nonce:e.sheet.nonce,container:e.sheet.container,speedy:e.sheet.isSpeedy}),a=!1,l=document.querySelector('style[data-emotion="'+s+" "+r.name+'"]');return e.sheet.tags.length&&(o.before=e.sheet.tags[0]),l!==null&&(a=!0,l.setAttribute("data-emotion",s),o.hydrate([l])),i.current=[o,a],function(){o.flush()}},[e]),Uy(function(){var s=i.current,o=s[0],a=s[1];if(a){s[1]=!1;return}if(r.next!==void 0&&ck(e,r.next,!0),o.tags.length){var l=o.tags[o.tags.length-1].nextElementSibling;o.before=l,o.flush()}e.insert("",r,o,!1)},[e,r.name]),null});function ic(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return vg(e)}var Ki=function(){var e=ic.apply(void 0,arguments),n="animation-"+e.name;return{name:n,styles:"@keyframes "+n+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},fR=vT,hR=function(e){return e!=="theme"},qy=function(e){return typeof e=="string"&&e.charCodeAt(0)>96?fR:hR},jy=function(e,n,r){var i;if(n){var s=n.shouldForwardProp;i=e.__emotion_forwardProp&&s?function(o){return e.__emotion_forwardProp(o)&&s(o)}:s}return typeof i!="function"&&r&&(i=e.__emotion_forwardProp),i},pR=function(e){var n=e.cache,r=e.serialized,i=e.isStringTag;return ak(n,r,i),lR(function(){return ck(n,r,i)}),null},gR=function t(e,n){var r=e.__emotion_real===e,i=r&&e.__emotion_base||e,s,o;n!==void 0&&(s=n.label,o=n.target);var a=jy(e,n,r),l=a||qy(i),c=!l("as");return function(){var u=arguments,d=r&&e.__emotion_styles!==void 0?e.__emotion_styles.slice(0):[];if(s!==void 0&&d.push("label:"+s+";"),u[0]==null||u[0].raw===void 0)d.push.apply(d,u);else{d.push(u[0][0]);for(var f=u.length,h=1;h<f;h++)d.push(u[h],u[0][h])}var p=fk(function(g,w,v){var m=c&&g.as||i,y="",b=[],x=g;if(g.theme==null){x={};for(var I in g)x[I]=g[I];x.theme=A.useContext(rc)}typeof g.className=="string"?y=nR(w.registered,b,g.className):g.className!=null&&(y=g.className+" ");var k=vg(d.concat(b),w.registered,x);y+=w.key+"-"+k.name,o!==void 0&&(y+=" "+o);var S=c&&a===void 0?qy(m):l,P={};for(var R in g)c&&R==="as"||S(R)&&(P[R]=g[R]);return P.className=y,v&&(P.ref=v),A.createElement(A.Fragment,null,A.createElement(pR,{cache:w,serialized:k,isStringTag:typeof m=="string"}),A.createElement(m,P))});return p.displayName=s!==void 0?s:"Styled("+(typeof i=="string"?i:i.displayName||i.name||"Component")+")",p.defaultProps=e.defaultProps,p.__emotion_real=p,p.__emotion_base=i,p.__emotion_styles=d,p.__emotion_forwardProp=a,Object.defineProperty(p,"toString",{value:function(){return"."+o}}),p.withComponent=function(g,w){return t(g,O({},n,w,{shouldForwardProp:jy(p,w,!0)})).apply(void 0,d)},p}},mR=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],Mp=gR.bind();mR.forEach(function(t){Mp[t]=Mp(t)});let Bp;typeof document=="object"&&(Bp=nk({key:"css",prepend:!0}));function yR(t){const{injectFirst:e,children:n}=t;return e&&Bp?F.jsx(uR,{value:Bp,children:n}):n}function vR(t){return t==null||Object.keys(t).length===0}function pk(t){const{styles:e,defaultTheme:n={}}=t,r=typeof e=="function"?i=>e(vR(i)?n:i):e;return F.jsx(dR,{styles:r})}function wg(t,e){return Mp(t,e)}const gk=(t,e)=>{Array.isArray(t.__emotion_styles)&&(t.__emotion_styles=e(t.__emotion_styles))},wR=Object.freeze(Object.defineProperty({__proto__:null,GlobalStyles:pk,StyledEngineProvider:yR,ThemeContext:rc,css:ic,default:wg,internal_processStyles:gk,keyframes:Ki},Symbol.toStringTag,{value:"Module"}));function Sr(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function mk(t){if(A.isValidElement(t)||!Sr(t))return t;const e={};return Object.keys(t).forEach(n=>{e[n]=mk(t[n])}),e}function kn(t,e,n={clone:!0}){const r=n.clone?O({},t):t;return Sr(t)&&Sr(e)&&Object.keys(e).forEach(i=>{A.isValidElement(e[i])?r[i]=e[i]:Sr(e[i])&&Object.prototype.hasOwnProperty.call(t,i)&&Sr(t[i])?r[i]=kn(t[i],e[i],n):n.clone?r[i]=Sr(e[i])?mk(e[i]):e[i]:r[i]=e[i]}),r}const bR=Object.freeze(Object.defineProperty({__proto__:null,default:kn,isPlainObject:Sr},Symbol.toStringTag,{value:"Module"})),xR=["values","unit","step"],kR=t=>{const e=Object.keys(t).map(n=>({key:n,val:t[n]}))||[];return e.sort((n,r)=>n.val-r.val),e.reduce((n,r)=>O({},n,{[r.key]:r.val}),{})};function yk(t){const{values:e={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:r=5}=t,i=ue(t,xR),s=kR(e),o=Object.keys(s);function a(f){return`@media (min-width:${typeof e[f]=="number"?e[f]:f}${n})`}function l(f){return`@media (max-width:${(typeof e[f]=="number"?e[f]:f)-r/100}${n})`}function c(f,h){const p=o.indexOf(h);return`@media (min-width:${typeof e[f]=="number"?e[f]:f}${n}) and (max-width:${(p!==-1&&typeof e[o[p]]=="number"?e[o[p]]:h)-r/100}${n})`}function u(f){return o.indexOf(f)+1<o.length?c(f,o[o.indexOf(f)+1]):a(f)}function d(f){const h=o.indexOf(f);return h===0?a(o[1]):h===o.length-1?l(o[h]):c(f,o[o.indexOf(f)+1]).replace("@media","@media not all and")}return O({keys:o,values:s,up:a,down:l,between:c,only:u,not:d,unit:n},i)}const IR={borderRadius:4};function ga(t,e){return e?kn(t,e,{clone:!1}):t}const bg={xs:0,sm:600,md:900,lg:1200,xl:1536},Ky={keys:["xs","sm","md","lg","xl"],up:t=>`@media (min-width:${bg[t]}px)`};function Wn(t,e,n){const r=t.theme||{};if(Array.isArray(e)){const s=r.breakpoints||Ky;return e.reduce((o,a,l)=>(o[s.up(s.keys[l])]=n(e[l]),o),{})}if(typeof e=="object"){const s=r.breakpoints||Ky;return Object.keys(e).reduce((o,a)=>{if(Object.keys(s.values||bg).indexOf(a)!==-1){const l=s.up(a);o[l]=n(e[a],a)}else{const l=a;o[l]=e[l]}return o},{})}return n(e)}function SR(t={}){var e;return((e=t.keys)==null?void 0:e.reduce((r,i)=>{const s=t.up(i);return r[s]={},r},{}))||{}}function ER(t,e){return t.reduce((n,r)=>{const i=n[r];return(!i||Object.keys(i).length===0)&&delete n[r],n},e)}function TR(t,e){if(typeof t!="object")return{};const n={},r=Object.keys(e);return Array.isArray(t)?r.forEach((i,s)=>{s<t.length&&(n[i]=!0)}):r.forEach(i=>{t[i]!=null&&(n[i]=!0)}),n}function Uu({values:t,breakpoints:e,base:n}){const r=n||TR(t,e),i=Object.keys(r);if(i.length===0)return t;let s;return i.reduce((o,a,l)=>(Array.isArray(t)?(o[a]=t[l]!=null?t[l]:t[s],s=l):typeof t=="object"?(o[a]=t[a]!=null?t[a]:t[s],s=a):o[a]=t,o),{})}function ce(t){if(typeof t!="string")throw new Error(Wi(7));return t.charAt(0).toUpperCase()+t.slice(1)}const RR=Object.freeze(Object.defineProperty({__proto__:null,default:ce},Symbol.toStringTag,{value:"Module"}));function Hu(t,e,n=!0){if(!e||typeof e!="string")return null;if(t&&t.vars&&n){const r=`vars.${e}`.split(".").reduce((i,s)=>i&&i[s]?i[s]:null,t);if(r!=null)return r}return e.split(".").reduce((r,i)=>r&&r[i]!=null?r[i]:null,t)}function zl(t,e,n,r=n){let i;return typeof t=="function"?i=t(n):Array.isArray(t)?i=t[n]||r:i=Hu(t,n)||r,e&&(i=e(i,r,t)),i}function vt(t){const{prop:e,cssProperty:n=t.prop,themeKey:r,transform:i}=t,s=o=>{if(o[e]==null)return null;const a=o[e],l=o.theme,c=Hu(l,r)||{};return Wn(o,a,d=>{let f=zl(c,i,d);return d===f&&typeof d=="string"&&(f=zl(c,i,`${e}${d==="default"?"":ce(d)}`,d)),n===!1?f:{[n]:f}})};return s.propTypes={},s.filterProps=[e],s}function _R(t){const e={};return n=>(e[n]===void 0&&(e[n]=t(n)),e[n])}const PR={m:"margin",p:"padding"},OR={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},zy={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},AR=_R(t=>{if(t.length>2)if(zy[t])t=zy[t];else return[t];const[e,n]=t.split(""),r=PR[e],i=OR[n]||"";return Array.isArray(i)?i.map(s=>r+s):[r+i]}),xg=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],kg=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...xg,...kg];function sc(t,e,n,r){var i;const s=(i=Hu(t,e,!1))!=null?i:n;return typeof s=="number"?o=>typeof o=="string"?o:s*o:Array.isArray(s)?o=>typeof o=="string"?o:s[o]:typeof s=="function"?s:()=>{}}function vk(t){return sc(t,"spacing",8)}function oc(t,e){if(typeof e=="string"||e==null)return e;const n=Math.abs(e),r=t(n);return e>=0?r:typeof r=="number"?-r:`-${r}`}function NR(t,e){return n=>t.reduce((r,i)=>(r[i]=oc(e,n),r),{})}function CR(t,e,n,r){if(e.indexOf(n)===-1)return null;const i=AR(n),s=NR(i,r),o=t[n];return Wn(t,o,s)}function wk(t,e){const n=vk(t.theme);return Object.keys(t).map(r=>CR(t,e,r,n)).reduce(ga,{})}function ht(t){return wk(t,xg)}ht.propTypes={};ht.filterProps=xg;function pt(t){return wk(t,kg)}pt.propTypes={};pt.filterProps=kg;function MR(t=8){if(t.mui)return t;const e=vk({spacing:t}),n=(...r)=>(r.length===0?[1]:r).map(s=>{const o=e(s);return typeof o=="number"?`${o}px`:o}).join(" ");return n.mui=!0,n}function qu(...t){const e=t.reduce((r,i)=>(i.filterProps.forEach(s=>{r[s]=i}),r),{}),n=r=>Object.keys(r).reduce((i,s)=>e[s]?ga(i,e[s](r)):i,{});return n.propTypes={},n.filterProps=t.reduce((r,i)=>r.concat(i.filterProps),[]),n}function Cn(t){return typeof t!="number"?t:`${t}px solid`}function Un(t,e){return vt({prop:t,themeKey:"borders",transform:e})}const BR=Un("border",Cn),LR=Un("borderTop",Cn),DR=Un("borderRight",Cn),FR=Un("borderBottom",Cn),$R=Un("borderLeft",Cn),WR=Un("borderColor"),VR=Un("borderTopColor"),UR=Un("borderRightColor"),HR=Un("borderBottomColor"),qR=Un("borderLeftColor"),jR=Un("outline",Cn),KR=Un("outlineColor"),ju=t=>{if(t.borderRadius!==void 0&&t.borderRadius!==null){const e=sc(t.theme,"shape.borderRadius",4),n=r=>({borderRadius:oc(e,r)});return Wn(t,t.borderRadius,n)}return null};ju.propTypes={};ju.filterProps=["borderRadius"];qu(BR,LR,DR,FR,$R,WR,VR,UR,HR,qR,ju,jR,KR);const Ku=t=>{if(t.gap!==void 0&&t.gap!==null){const e=sc(t.theme,"spacing",8),n=r=>({gap:oc(e,r)});return Wn(t,t.gap,n)}return null};Ku.propTypes={};Ku.filterProps=["gap"];const zu=t=>{if(t.columnGap!==void 0&&t.columnGap!==null){const e=sc(t.theme,"spacing",8),n=r=>({columnGap:oc(e,r)});return Wn(t,t.columnGap,n)}return null};zu.propTypes={};zu.filterProps=["columnGap"];const Gu=t=>{if(t.rowGap!==void 0&&t.rowGap!==null){const e=sc(t.theme,"spacing",8),n=r=>({rowGap:oc(e,r)});return Wn(t,t.rowGap,n)}return null};Gu.propTypes={};Gu.filterProps=["rowGap"];const zR=vt({prop:"gridColumn"}),GR=vt({prop:"gridRow"}),XR=vt({prop:"gridAutoFlow"}),YR=vt({prop:"gridAutoColumns"}),QR=vt({prop:"gridAutoRows"}),JR=vt({prop:"gridTemplateColumns"}),ZR=vt({prop:"gridTemplateRows"}),e3=vt({prop:"gridTemplateAreas"}),t3=vt({prop:"gridArea"});qu(Ku,zu,Gu,zR,GR,XR,YR,QR,JR,ZR,e3,t3);function Ps(t,e){return e==="grey"?e:t}const n3=vt({prop:"color",themeKey:"palette",transform:Ps}),r3=vt({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:Ps}),i3=vt({prop:"backgroundColor",themeKey:"palette",transform:Ps});qu(n3,r3,i3);function pn(t){return t<=1&&t!==0?`${t*100}%`:t}const s3=vt({prop:"width",transform:pn}),Ig=t=>{if(t.maxWidth!==void 0&&t.maxWidth!==null){const e=n=>{var r,i;const s=((r=t.theme)==null||(r=r.breakpoints)==null||(r=r.values)==null?void 0:r[n])||bg[n];return s?((i=t.theme)==null||(i=i.breakpoints)==null?void 0:i.unit)!=="px"?{maxWidth:`${s}${t.theme.breakpoints.unit}`}:{maxWidth:s}:{maxWidth:pn(n)}};return Wn(t,t.maxWidth,e)}return null};Ig.filterProps=["maxWidth"];const o3=vt({prop:"minWidth",transform:pn}),a3=vt({prop:"height",transform:pn}),c3=vt({prop:"maxHeight",transform:pn}),l3=vt({prop:"minHeight",transform:pn});vt({prop:"size",cssProperty:"width",transform:pn});vt({prop:"size",cssProperty:"height",transform:pn});const u3=vt({prop:"boxSizing"});qu(s3,Ig,o3,a3,c3,l3,u3);const ac={border:{themeKey:"borders",transform:Cn},borderTop:{themeKey:"borders",transform:Cn},borderRight:{themeKey:"borders",transform:Cn},borderBottom:{themeKey:"borders",transform:Cn},borderLeft:{themeKey:"borders",transform:Cn},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:Cn},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:ju},color:{themeKey:"palette",transform:Ps},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:Ps},backgroundColor:{themeKey:"palette",transform:Ps},p:{style:pt},pt:{style:pt},pr:{style:pt},pb:{style:pt},pl:{style:pt},px:{style:pt},py:{style:pt},padding:{style:pt},paddingTop:{style:pt},paddingRight:{style:pt},paddingBottom:{style:pt},paddingLeft:{style:pt},paddingX:{style:pt},paddingY:{style:pt},paddingInline:{style:pt},paddingInlineStart:{style:pt},paddingInlineEnd:{style:pt},paddingBlock:{style:pt},paddingBlockStart:{style:pt},paddingBlockEnd:{style:pt},m:{style:ht},mt:{style:ht},mr:{style:ht},mb:{style:ht},ml:{style:ht},mx:{style:ht},my:{style:ht},margin:{style:ht},marginTop:{style:ht},marginRight:{style:ht},marginBottom:{style:ht},marginLeft:{style:ht},marginX:{style:ht},marginY:{style:ht},marginInline:{style:ht},marginInlineStart:{style:ht},marginInlineEnd:{style:ht},marginBlock:{style:ht},marginBlockStart:{style:ht},marginBlockEnd:{style:ht},displayPrint:{cssProperty:!1,transform:t=>({"@media print":{display:t}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:Ku},rowGap:{style:Gu},columnGap:{style:zu},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:pn},maxWidth:{style:Ig},minWidth:{transform:pn},height:{transform:pn},maxHeight:{transform:pn},minHeight:{transform:pn},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function d3(...t){const e=t.reduce((r,i)=>r.concat(Object.keys(i)),[]),n=new Set(e);return t.every(r=>n.size===Object.keys(r).length)}function f3(t,e){return typeof t=="function"?t(e):t}function bk(){function t(n,r,i,s){const o={[n]:r,theme:i},a=s[n];if(!a)return{[n]:r};const{cssProperty:l=n,themeKey:c,transform:u,style:d}=a;if(r==null)return null;if(c==="typography"&&r==="inherit")return{[n]:r};const f=Hu(i,c)||{};return d?d(o):Wn(o,r,p=>{let g=zl(f,u,p);return p===g&&typeof p=="string"&&(g=zl(f,u,`${n}${p==="default"?"":ce(p)}`,p)),l===!1?g:{[l]:g}})}function e(n){var r;const{sx:i,theme:s={}}=n||{};if(!i)return null;const o=(r=s.unstable_sxConfig)!=null?r:ac;function a(l){let c=l;if(typeof l=="function")c=l(s);else if(typeof l!="object")return l;if(!c)return null;const u=SR(s.breakpoints),d=Object.keys(u);let f=u;return Object.keys(c).forEach(h=>{const p=f3(c[h],s);if(p!=null)if(typeof p=="object")if(o[h])f=ga(f,t(h,p,s,o));else{const g=Wn({theme:s},p,w=>({[h]:w}));d3(g,p)?f[h]=e({sx:p,theme:s}):f=ga(f,g)}else f=ga(f,t(h,p,s,o))}),ER(d,f)}return Array.isArray(i)?i.map(a):a(i)}return e}const Zs=bk();Zs.filterProps=["sx"];function xk(t,e){const n=this;return n.vars&&typeof n.getColorSchemeSelector=="function"?{[n.getColorSchemeSelector(t).replace(/(\[[^\]]+\])/,"*:where($1)")]:e}:n.palette.mode===t?e:{}}const h3=["breakpoints","palette","spacing","shape"];function Xu(t={},...e){const{breakpoints:n={},palette:r={},spacing:i,shape:s={}}=t,o=ue(t,h3),a=yk(n),l=MR(i);let c=kn({breakpoints:a,direction:"ltr",components:{},palette:O({mode:"light"},r),spacing:l,shape:O({},IR,s)},o);return c.applyStyles=xk,c=e.reduce((u,d)=>kn(u,d),c),c.unstable_sxConfig=O({},ac,o==null?void 0:o.unstable_sxConfig),c.unstable_sx=function(d){return Zs({sx:d,theme:this})},c}const p3=Object.freeze(Object.defineProperty({__proto__:null,default:Xu,private_createBreakpoints:yk,unstable_applyStyles:xk},Symbol.toStringTag,{value:"Module"}));function g3(t){return Object.keys(t).length===0}function kk(t=null){const e=A.useContext(rc);return!e||g3(e)?t:e}const m3=Xu();function Sg(t=m3){return kk(t)}function y3({styles:t,themeId:e,defaultTheme:n={}}){const r=Sg(n),i=typeof t=="function"?t(e&&r[e]||r):t;return F.jsx(pk,{styles:i})}const v3=["sx"],w3=t=>{var e,n;const r={systemProps:{},otherProps:{}},i=(e=t==null||(n=t.theme)==null?void 0:n.unstable_sxConfig)!=null?e:ac;return Object.keys(t).forEach(s=>{i[s]?r.systemProps[s]=t[s]:r.otherProps[s]=t[s]}),r};function Yu(t){const{sx:e}=t,n=ue(t,v3),{systemProps:r,otherProps:i}=w3(n);let s;return Array.isArray(e)?s=[r,...e]:typeof e=="function"?s=(...o)=>{const a=e(...o);return Sr(a)?O({},r,a):r}:s=O({},r,e),O({},i,{sx:s})}const b3=Object.freeze(Object.defineProperty({__proto__:null,default:Zs,extendSxProp:Yu,unstable_createStyleFunctionSx:bk,unstable_defaultSxConfig:ac},Symbol.toStringTag,{value:"Module"})),Gy=t=>t,x3=()=>{let t=Gy;return{configure(e){t=e},generate(e){return t(e)},reset(){t=Gy}}},Eg=x3();function Ik(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=Ik(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function de(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=Ik(t))&&(r&&(r+=" "),r+=e);return r}const k3=["className","component"];function I3(t={}){const{themeId:e,defaultTheme:n,defaultClassName:r="MuiBox-root",generateClassName:i}=t,s=wg("div",{shouldForwardProp:a=>a!=="theme"&&a!=="sx"&&a!=="as"})(Zs);return A.forwardRef(function(l,c){const u=Sg(n),d=Yu(l),{className:f,component:h="div"}=d,p=ue(d,k3);return F.jsx(s,O({as:h,ref:c,className:de(f,i?i(r):r),theme:e&&u[e]||u},p))})}const S3={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function Te(t,e,n="Mui"){const r=S3[e];return r?`${n}-${r}`:`${Eg.generate(t)}-${e}`}function Ie(t,e,n="Mui"){const r={};return e.forEach(i=>{r[i]=Te(t,i,n)}),r}var Sk={exports:{}},Je={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tg=Symbol.for("react.transitional.element"),Rg=Symbol.for("react.portal"),Qu=Symbol.for("react.fragment"),Ju=Symbol.for("react.strict_mode"),Zu=Symbol.for("react.profiler"),ed=Symbol.for("react.consumer"),td=Symbol.for("react.context"),nd=Symbol.for("react.forward_ref"),rd=Symbol.for("react.suspense"),id=Symbol.for("react.suspense_list"),sd=Symbol.for("react.memo"),od=Symbol.for("react.lazy"),E3=Symbol.for("react.offscreen"),T3=Symbol.for("react.client.reference");function Hn(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case Tg:switch(t=t.type,t){case Qu:case Zu:case Ju:case rd:case id:return t;default:switch(t=t&&t.$$typeof,t){case td:case nd:case od:case sd:return t;case ed:return t;default:return e}}case Rg:return e}}}Je.ContextConsumer=ed;Je.ContextProvider=td;Je.Element=Tg;Je.ForwardRef=nd;Je.Fragment=Qu;Je.Lazy=od;Je.Memo=sd;Je.Portal=Rg;Je.Profiler=Zu;Je.StrictMode=Ju;Je.Suspense=rd;Je.SuspenseList=id;Je.isContextConsumer=function(t){return Hn(t)===ed};Je.isContextProvider=function(t){return Hn(t)===td};Je.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===Tg};Je.isForwardRef=function(t){return Hn(t)===nd};Je.isFragment=function(t){return Hn(t)===Qu};Je.isLazy=function(t){return Hn(t)===od};Je.isMemo=function(t){return Hn(t)===sd};Je.isPortal=function(t){return Hn(t)===Rg};Je.isProfiler=function(t){return Hn(t)===Zu};Je.isStrictMode=function(t){return Hn(t)===Ju};Je.isSuspense=function(t){return Hn(t)===rd};Je.isSuspenseList=function(t){return Hn(t)===id};Je.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Qu||t===Zu||t===Ju||t===rd||t===id||t===E3||typeof t=="object"&&t!==null&&(t.$$typeof===od||t.$$typeof===sd||t.$$typeof===td||t.$$typeof===ed||t.$$typeof===nd||t.$$typeof===T3||t.getModuleId!==void 0)};Je.typeOf=Hn;Sk.exports=Je;var Xy=Sk.exports;const R3=/^\s*function(?:\s|\s*\/\*.*\*\/\s*)+([^(\s/]*)\s*/;function Ek(t){const e=`${t}`.match(R3);return e&&e[1]||""}function Tk(t,e=""){return t.displayName||t.name||Ek(t)||e}function Yy(t,e,n){const r=Tk(e);return t.displayName||(r!==""?`${n}(${r})`:n)}function _3(t){if(t!=null){if(typeof t=="string")return t;if(typeof t=="function")return Tk(t,"Component");if(typeof t=="object")switch(t.$$typeof){case Xy.ForwardRef:return Yy(t,t.render,"ForwardRef");case Xy.Memo:return Yy(t,t.type,"memo");default:return}}}const P3=Object.freeze(Object.defineProperty({__proto__:null,default:_3,getFunctionName:Ek},Symbol.toStringTag,{value:"Module"})),O3=["ownerState"],A3=["variants"],N3=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function C3(t){return Object.keys(t).length===0}function M3(t){return typeof t=="string"&&t.charCodeAt(0)>96}function Jf(t){return t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"}const B3=Xu(),L3=t=>t&&t.charAt(0).toLowerCase()+t.slice(1);function Lc({defaultTheme:t,theme:e,themeId:n}){return C3(e)?t:e[n]||e}function D3(t){return t?(e,n)=>n[t]:null}function pl(t,e){let{ownerState:n}=e,r=ue(e,O3);const i=typeof t=="function"?t(O({ownerState:n},r)):t;if(Array.isArray(i))return i.flatMap(s=>pl(s,O({ownerState:n},r)));if(i&&typeof i=="object"&&Array.isArray(i.variants)){const{variants:s=[]}=i;let a=ue(i,A3);return s.forEach(l=>{let c=!0;typeof l.props=="function"?c=l.props(O({ownerState:n},r,n)):Object.keys(l.props).forEach(u=>{(n==null?void 0:n[u])!==l.props[u]&&r[u]!==l.props[u]&&(c=!1)}),c&&(Array.isArray(a)||(a=[a]),a.push(typeof l.style=="function"?l.style(O({ownerState:n},r,n)):l.style))}),a}return i}function F3(t={}){const{themeId:e,defaultTheme:n=B3,rootShouldForwardProp:r=Jf,slotShouldForwardProp:i=Jf}=t,s=o=>Zs(O({},o,{theme:Lc(O({},o,{defaultTheme:n,themeId:e}))}));return s.__mui_systemSx=!0,(o,a={})=>{gk(o,x=>x.filter(I=>!(I!=null&&I.__mui_systemSx)));const{name:l,slot:c,skipVariantsResolver:u,skipSx:d,overridesResolver:f=D3(L3(c))}=a,h=ue(a,N3),p=u!==void 0?u:c&&c!=="Root"&&c!=="root"||!1,g=d||!1;let w,v=Jf;c==="Root"||c==="root"?v=r:c?v=i:M3(o)&&(v=void 0);const m=wg(o,O({shouldForwardProp:v,label:w},h)),y=x=>typeof x=="function"&&x.__emotion_real!==x||Sr(x)?I=>pl(x,O({},I,{theme:Lc({theme:I.theme,defaultTheme:n,themeId:e})})):x,b=(x,...I)=>{let k=y(x);const S=I?I.map(y):[];l&&f&&S.push(B=>{const T=Lc(O({},B,{defaultTheme:n,themeId:e}));if(!T.components||!T.components[l]||!T.components[l].styleOverrides)return null;const N=T.components[l].styleOverrides,L={};return Object.entries(N).forEach(([$,H])=>{L[$]=pl(H,O({},B,{theme:T}))}),f(B,L)}),l&&!p&&S.push(B=>{var T;const N=Lc(O({},B,{defaultTheme:n,themeId:e})),L=N==null||(T=N.components)==null||(T=T[l])==null?void 0:T.variants;return pl({variants:L},O({},B,{theme:N}))}),g||S.push(s);const P=S.length-I.length;if(Array.isArray(x)&&P>0){const B=new Array(P).fill("");k=[...x,...B],k.raw=[...x.raw,...B]}const R=m(k,...S);return o.muiName&&(R.muiName=o.muiName),R};return m.withConfig&&(b.withConfig=m.withConfig),b}}const cc=F3();function Gl(t,e){const n=O({},e);return Object.keys(t).forEach(r=>{if(r.toString().match(/^(components|slots)$/))n[r]=O({},t[r],n[r]);else if(r.toString().match(/^(componentsProps|slotProps)$/)){const i=t[r]||{},s=e[r];n[r]={},!s||!Object.keys(s)?n[r]=i:!i||!Object.keys(i)?n[r]=s:(n[r]=O({},s),Object.keys(i).forEach(o=>{n[r][o]=Gl(i[o],s[o])}))}else n[r]===void 0&&(n[r]=t[r])}),n}const Nr=typeof window<"u"?A.useLayoutEffect:A.useEffect;function $3(t,e=Number.MIN_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER){return Math.max(e,Math.min(t,n))}const W3=Object.freeze(Object.defineProperty({__proto__:null,default:$3},Symbol.toStringTag,{value:"Module"}));function Lp(...t){return t.reduce((e,n)=>n==null?e:function(...i){e.apply(this,i),n.apply(this,i)},()=>{})}function _g(t,e=166){let n;function r(...i){const s=()=>{t.apply(this,i)};clearTimeout(n),n=setTimeout(s,e)}return r.clear=()=>{clearTimeout(n)},r}function V3(t,e){return()=>null}function ma(t,e){var n,r;return A.isValidElement(t)&&e.indexOf((n=t.type.muiName)!=null?n:(r=t.type)==null||(r=r._payload)==null||(r=r.value)==null?void 0:r.muiName)!==-1}function ln(t){return t&&t.ownerDocument||document}function ci(t){return ln(t).defaultView||window}function U3(t,e){return()=>null}function Xl(t,e){typeof t=="function"?t(e):t&&(t.current=e)}let Qy=0;function H3(t){const[e,n]=A.useState(t),r=t||e;return A.useEffect(()=>{e==null&&(Qy+=1,n(`mui-${Qy}`))},[e]),r}const Jy=Fh.useId;function ad(t){if(Jy!==void 0){const e=Jy();return t??e}return H3(t)}function q3(t,e,n,r,i){return null}function Yl({controlled:t,default:e,name:n,state:r="value"}){const{current:i}=A.useRef(t!==void 0),[s,o]=A.useState(e),a=i?t:s,l=A.useCallback(c=>{i||o(c)},[]);return[a,l]}function Ei(t){const e=A.useRef(t);return Nr(()=>{e.current=t}),A.useRef((...n)=>(0,e.current)(...n)).current}function Kt(...t){return A.useMemo(()=>t.every(e=>e==null)?null:e=>{t.forEach(n=>{Xl(n,e)})},t)}const Zy={};function j3(t,e){const n=A.useRef(Zy);return n.current===Zy&&(n.current=t(e)),n}const K3=[];function z3(t){A.useEffect(t,K3)}class cd{constructor(){this.currentId=null,this.clear=()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)},this.disposeEffect=()=>this.clear}static create(){return new cd}start(e,n){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,n()},e)}}function Rk(){const t=j3(cd.create).current;return z3(t.disposeEffect),t}let ld=!0,Dp=!1;const G3=new cd,X3={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function Y3(t){const{type:e,tagName:n}=t;return!!(n==="INPUT"&&X3[e]&&!t.readOnly||n==="TEXTAREA"&&!t.readOnly||t.isContentEditable)}function Q3(t){t.metaKey||t.altKey||t.ctrlKey||(ld=!0)}function Zf(){ld=!1}function J3(){this.visibilityState==="hidden"&&Dp&&(ld=!0)}function Z3(t){t.addEventListener("keydown",Q3,!0),t.addEventListener("mousedown",Zf,!0),t.addEventListener("pointerdown",Zf,!0),t.addEventListener("touchstart",Zf,!0),t.addEventListener("visibilitychange",J3,!0)}function e4(t){const{target:e}=t;try{return e.matches(":focus-visible")}catch{}return ld||Y3(e)}function _k(){const t=A.useCallback(i=>{i!=null&&Z3(i.ownerDocument)},[]),e=A.useRef(!1);function n(){return e.current?(Dp=!0,G3.start(100,()=>{Dp=!1}),e.current=!1,!0):!1}function r(i){return e4(i)?(e.current=!0,!0):!1}return{isFocusVisibleRef:e,onFocus:r,onBlur:n,ref:t}}function Pk(t){const e=t.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}function Re(t,e,n=void 0){const r={};return Object.keys(t).forEach(i=>{r[i]=t[i].reduce((s,o)=>{if(o){const a=e(o);a!==""&&s.push(a),n&&n[o]&&s.push(n[o])}return s},[]).join(" ")}),r}function Hs(t){return typeof t=="string"}function t4(t,e,n){return t===void 0||Hs(t)?e:O({},e,{ownerState:O({},e.ownerState,n)})}function Ok(t,e=[]){if(t===void 0)return{};const n={};return Object.keys(t).filter(r=>r.match(/^on[A-Z]/)&&typeof t[r]=="function"&&!e.includes(r)).forEach(r=>{n[r]=t[r]}),n}function ev(t){if(t===void 0)return{};const e={};return Object.keys(t).filter(n=>!(n.match(/^on[A-Z]/)&&typeof t[n]=="function")).forEach(n=>{e[n]=t[n]}),e}function n4(t){const{getSlotProps:e,additionalProps:n,externalSlotProps:r,externalForwardedProps:i,className:s}=t;if(!e){const h=de(n==null?void 0:n.className,s,i==null?void 0:i.className,r==null?void 0:r.className),p=O({},n==null?void 0:n.style,i==null?void 0:i.style,r==null?void 0:r.style),g=O({},n,i,r);return h.length>0&&(g.className=h),Object.keys(p).length>0&&(g.style=p),{props:g,internalRef:void 0}}const o=Ok(O({},i,r)),a=ev(r),l=ev(i),c=e(o),u=de(c==null?void 0:c.className,n==null?void 0:n.className,s,i==null?void 0:i.className,r==null?void 0:r.className),d=O({},c==null?void 0:c.style,n==null?void 0:n.style,i==null?void 0:i.style,r==null?void 0:r.style),f=O({},c,n,l,a);return u.length>0&&(f.className=u),Object.keys(d).length>0&&(f.style=d),{props:f,internalRef:c.ref}}function r4(t,e,n){return typeof t=="function"?t(e,n):t}const i4=["elementType","externalSlotProps","ownerState","skipResolvingSlotProps"];function qs(t){var e;const{elementType:n,externalSlotProps:r,ownerState:i,skipResolvingSlotProps:s=!1}=t,o=ue(t,i4),a=s?{}:r4(r,i),{props:l,internalRef:c}=n4(O({},o,{externalSlotProps:a})),u=Kt(c,a==null?void 0:a.ref,(e=t.additionalProps)==null?void 0:e.ref);return t4(n,O({},l,{ref:u}),i)}const Ak=A.createContext(null);function Nk(){return A.useContext(Ak)}const s4=typeof Symbol=="function"&&Symbol.for,o4=s4?Symbol.for("mui.nested"):"__THEME_NESTED__";function a4(t,e){return typeof e=="function"?e(t):O({},t,e)}function c4(t){const{children:e,theme:n}=t,r=Nk(),i=A.useMemo(()=>{const s=r===null?n:a4(r,n);return s!=null&&(s[o4]=r!==null),s},[n,r]);return F.jsx(Ak.Provider,{value:i,children:e})}const l4=["value"],Ck=A.createContext();function u4(t){let{value:e}=t,n=ue(t,l4);return F.jsx(Ck.Provider,O({value:e??!0},n))}const Mk=()=>{const t=A.useContext(Ck);return t??!1},Bk=A.createContext(void 0);function d4({value:t,children:e}){return F.jsx(Bk.Provider,{value:t,children:e})}function f4(t){const{theme:e,name:n,props:r}=t;if(!e||!e.components||!e.components[n])return r;const i=e.components[n];return i.defaultProps?Gl(i.defaultProps,r):!i.styleOverrides&&!i.variants?Gl(i,r):r}function h4({props:t,name:e}){const n=A.useContext(Bk);return f4({props:t,name:e,theme:{components:n}})}const tv={};function nv(t,e,n,r=!1){return A.useMemo(()=>{const i=t&&e[t]||e;if(typeof n=="function"){const s=n(i),o=t?O({},e,{[t]:s}):s;return r?()=>o:o}return t?O({},e,{[t]:n}):O({},e,n)},[t,e,n,r])}function p4(t){const{children:e,theme:n,themeId:r}=t,i=kk(tv),s=Nk()||tv,o=nv(r,i,n),a=nv(r,s,n,!0),l=o.direction==="rtl";return F.jsx(c4,{theme:a,children:F.jsx(rc.Provider,{value:o,children:F.jsx(u4,{value:l,children:F.jsx(d4,{value:o==null?void 0:o.components,children:e})})})})}function g4(t,e){return O({toolbar:{minHeight:56,[t.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[t.up("sm")]:{minHeight:64}}},e)}var wt={},Lk={exports:{}};(function(t){function e(n){return n&&n.__esModule?n:{default:n}}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports})(Lk);var ud=Lk.exports;const m4=br(mT),y4=br(W3);var Dk=ud;Object.defineProperty(wt,"__esModule",{value:!0});var mn=wt.alpha=Hk;wt.blend=_4;wt.colorChannel=void 0;var Fk=wt.darken=Og;wt.decomposeColor=Vn;wt.emphasize=qk;var v4=wt.getContrastRatio=I4;wt.getLuminance=Ql;wt.hexToRgb=Wk;wt.hslToRgb=Uk;var $k=wt.lighten=Ag;wt.private_safeAlpha=S4;wt.private_safeColorChannel=void 0;wt.private_safeDarken=E4;wt.private_safeEmphasize=R4;wt.private_safeLighten=T4;wt.recomposeColor=eo;wt.rgbToHex=k4;var rv=Dk(m4),w4=Dk(y4);function Pg(t,e=0,n=1){return(0,w4.default)(t,e,n)}function Wk(t){t=t.slice(1);const e=new RegExp(`.{1,${t.length>=6?2:1}}`,"g");let n=t.match(e);return n&&n[0].length===1&&(n=n.map(r=>r+r)),n?`rgb${n.length===4?"a":""}(${n.map((r,i)=>i<3?parseInt(r,16):Math.round(parseInt(r,16)/255*1e3)/1e3).join(", ")})`:""}function b4(t){const e=t.toString(16);return e.length===1?`0${e}`:e}function Vn(t){if(t.type)return t;if(t.charAt(0)==="#")return Vn(Wk(t));const e=t.indexOf("("),n=t.substring(0,e);if(["rgb","rgba","hsl","hsla","color"].indexOf(n)===-1)throw new Error((0,rv.default)(9,t));let r=t.substring(e+1,t.length-1),i;if(n==="color"){if(r=r.split(" "),i=r.shift(),r.length===4&&r[3].charAt(0)==="/"&&(r[3]=r[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(i)===-1)throw new Error((0,rv.default)(10,i))}else r=r.split(",");return r=r.map(s=>parseFloat(s)),{type:n,values:r,colorSpace:i}}const Vk=t=>{const e=Vn(t);return e.values.slice(0,3).map((n,r)=>e.type.indexOf("hsl")!==-1&&r!==0?`${n}%`:n).join(" ")};wt.colorChannel=Vk;const x4=(t,e)=>{try{return Vk(t)}catch{return t}};wt.private_safeColorChannel=x4;function eo(t){const{type:e,colorSpace:n}=t;let{values:r}=t;return e.indexOf("rgb")!==-1?r=r.map((i,s)=>s<3?parseInt(i,10):i):e.indexOf("hsl")!==-1&&(r[1]=`${r[1]}%`,r[2]=`${r[2]}%`),e.indexOf("color")!==-1?r=`${n} ${r.join(" ")}`:r=`${r.join(", ")}`,`${e}(${r})`}function k4(t){if(t.indexOf("#")===0)return t;const{values:e}=Vn(t);return`#${e.map((n,r)=>b4(r===3?Math.round(255*n):n)).join("")}`}function Uk(t){t=Vn(t);const{values:e}=t,n=e[0],r=e[1]/100,i=e[2]/100,s=r*Math.min(i,1-i),o=(c,u=(c+n/30)%12)=>i-s*Math.max(Math.min(u-3,9-u,1),-1);let a="rgb";const l=[Math.round(o(0)*255),Math.round(o(8)*255),Math.round(o(4)*255)];return t.type==="hsla"&&(a+="a",l.push(e[3])),eo({type:a,values:l})}function Ql(t){t=Vn(t);let e=t.type==="hsl"||t.type==="hsla"?Vn(Uk(t)).values:t.values;return e=e.map(n=>(t.type!=="color"&&(n/=255),n<=.03928?n/12.92:((n+.055)/1.055)**2.4)),Number((.2126*e[0]+.7152*e[1]+.0722*e[2]).toFixed(3))}function I4(t,e){const n=Ql(t),r=Ql(e);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}function Hk(t,e){return t=Vn(t),e=Pg(e),(t.type==="rgb"||t.type==="hsl")&&(t.type+="a"),t.type==="color"?t.values[3]=`/${e}`:t.values[3]=e,eo(t)}function S4(t,e,n){try{return Hk(t,e)}catch{return t}}function Og(t,e){if(t=Vn(t),e=Pg(e),t.type.indexOf("hsl")!==-1)t.values[2]*=1-e;else if(t.type.indexOf("rgb")!==-1||t.type.indexOf("color")!==-1)for(let n=0;n<3;n+=1)t.values[n]*=1-e;return eo(t)}function E4(t,e,n){try{return Og(t,e)}catch{return t}}function Ag(t,e){if(t=Vn(t),e=Pg(e),t.type.indexOf("hsl")!==-1)t.values[2]+=(100-t.values[2])*e;else if(t.type.indexOf("rgb")!==-1)for(let n=0;n<3;n+=1)t.values[n]+=(255-t.values[n])*e;else if(t.type.indexOf("color")!==-1)for(let n=0;n<3;n+=1)t.values[n]+=(1-t.values[n])*e;return eo(t)}function T4(t,e,n){try{return Ag(t,e)}catch{return t}}function qk(t,e=.15){return Ql(t)>.5?Og(t,e):Ag(t,e)}function R4(t,e,n){try{return qk(t,e)}catch{return t}}function _4(t,e,n,r=1){const i=(l,c)=>Math.round((l**(1/r)*(1-n)+c**(1/r)*n)**r),s=Vn(t),o=Vn(e),a=[i(s.values[0],o.values[0]),i(s.values[1],o.values[1]),i(s.values[2],o.values[2])];return eo({type:"rgb",values:a})}const P4=["mode","contrastThreshold","tonalOffset"],iv={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:Wa.white,default:Wa.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},eh={text:{primary:Wa.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:Wa.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function sv(t,e,n,r){const i=r.light||r,s=r.dark||r*1.5;t[e]||(t.hasOwnProperty(n)?t[e]=t[n]:e==="light"?t.light=$k(t.main,i):e==="dark"&&(t.dark=Fk(t.main,s)))}function O4(t="light"){return t==="dark"?{main:es[200],light:es[50],dark:es[400]}:{main:es[700],light:es[400],dark:es[800]}}function A4(t="light"){return t==="dark"?{main:Zi[200],light:Zi[50],dark:Zi[400]}:{main:Zi[500],light:Zi[300],dark:Zi[700]}}function N4(t="light"){return t==="dark"?{main:Ji[500],light:Ji[300],dark:Ji[700]}:{main:Ji[700],light:Ji[400],dark:Ji[800]}}function C4(t="light"){return t==="dark"?{main:ts[400],light:ts[300],dark:ts[700]}:{main:ts[700],light:ts[500],dark:ts[900]}}function M4(t="light"){return t==="dark"?{main:ns[400],light:ns[300],dark:ns[700]}:{main:ns[800],light:ns[500],dark:ns[900]}}function B4(t="light"){return t==="dark"?{main:po[400],light:po[300],dark:po[700]}:{main:"#ed6c02",light:po[500],dark:po[900]}}function L4(t){const{mode:e="light",contrastThreshold:n=3,tonalOffset:r=.2}=t,i=ue(t,P4),s=t.primary||O4(e),o=t.secondary||A4(e),a=t.error||N4(e),l=t.info||C4(e),c=t.success||M4(e),u=t.warning||B4(e);function d(g){return v4(g,eh.text.primary)>=n?eh.text.primary:iv.text.primary}const f=({color:g,name:w,mainShade:v=500,lightShade:m=300,darkShade:y=700})=>{if(g=O({},g),!g.main&&g[v]&&(g.main=g[v]),!g.hasOwnProperty("main"))throw new Error(Wi(11,w?` (${w})`:"",v));if(typeof g.main!="string")throw new Error(Wi(12,w?` (${w})`:"",JSON.stringify(g.main)));return sv(g,"light",m,r),sv(g,"dark",y,r),g.contrastText||(g.contrastText=d(g.main)),g},h={dark:eh,light:iv};return kn(O({common:O({},Wa),mode:e,primary:f({color:s,name:"primary"}),secondary:f({color:o,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:f({color:a,name:"error"}),warning:f({color:u,name:"warning"}),info:f({color:l,name:"info"}),success:f({color:c,name:"success"}),grey:gT,contrastThreshold:n,getContrastText:d,augmentColor:f,tonalOffset:r},h[e]),i)}const D4=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];function F4(t){return Math.round(t*1e5)/1e5}const ov={textTransform:"uppercase"},av='"Roboto", "Helvetica", "Arial", sans-serif';function $4(t,e){const n=typeof e=="function"?e(t):e,{fontFamily:r=av,fontSize:i=14,fontWeightLight:s=300,fontWeightRegular:o=400,fontWeightMedium:a=500,fontWeightBold:l=700,htmlFontSize:c=16,allVariants:u,pxToRem:d}=n,f=ue(n,D4),h=i/14,p=d||(v=>`${v/c*h}rem`),g=(v,m,y,b,x)=>O({fontFamily:r,fontWeight:v,fontSize:p(m),lineHeight:y},r===av?{letterSpacing:`${F4(b/m)}em`}:{},x,u),w={h1:g(s,96,1.167,-1.5),h2:g(s,60,1.2,-.5),h3:g(o,48,1.167,0),h4:g(o,34,1.235,.25),h5:g(o,24,1.334,0),h6:g(a,20,1.6,.15),subtitle1:g(o,16,1.75,.15),subtitle2:g(a,14,1.57,.1),body1:g(o,16,1.5,.15),body2:g(o,14,1.43,.15),button:g(a,14,1.75,.4,ov),caption:g(o,12,1.66,.4),overline:g(o,12,2.66,1,ov),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return kn(O({htmlFontSize:c,pxToRem:p,fontFamily:r,fontSize:i,fontWeightLight:s,fontWeightRegular:o,fontWeightMedium:a,fontWeightBold:l},w),f,{clone:!1})}const W4=.2,V4=.14,U4=.12;function at(...t){return[`${t[0]}px ${t[1]}px ${t[2]}px ${t[3]}px rgba(0,0,0,${W4})`,`${t[4]}px ${t[5]}px ${t[6]}px ${t[7]}px rgba(0,0,0,${V4})`,`${t[8]}px ${t[9]}px ${t[10]}px ${t[11]}px rgba(0,0,0,${U4})`].join(",")}const H4=["none",at(0,2,1,-1,0,1,1,0,0,1,3,0),at(0,3,1,-2,0,2,2,0,0,1,5,0),at(0,3,3,-2,0,3,4,0,0,1,8,0),at(0,2,4,-1,0,4,5,0,0,1,10,0),at(0,3,5,-1,0,5,8,0,0,1,14,0),at(0,3,5,-1,0,6,10,0,0,1,18,0),at(0,4,5,-2,0,7,10,1,0,2,16,1),at(0,5,5,-3,0,8,10,1,0,3,14,2),at(0,5,6,-3,0,9,12,1,0,3,16,2),at(0,6,6,-3,0,10,14,1,0,4,18,3),at(0,6,7,-4,0,11,15,1,0,4,20,3),at(0,7,8,-4,0,12,17,2,0,5,22,4),at(0,7,8,-4,0,13,19,2,0,5,24,4),at(0,7,9,-4,0,14,21,2,0,5,26,4),at(0,8,9,-5,0,15,22,2,0,6,28,5),at(0,8,10,-5,0,16,24,2,0,6,30,5),at(0,8,11,-5,0,17,26,2,0,6,32,5),at(0,9,11,-5,0,18,28,2,0,7,34,6),at(0,9,12,-6,0,19,29,2,0,7,36,6),at(0,10,13,-6,0,20,31,3,0,8,38,7),at(0,10,13,-6,0,21,33,3,0,8,40,7),at(0,10,14,-6,0,22,35,3,0,8,42,7),at(0,11,14,-7,0,23,36,3,0,9,44,8),at(0,11,15,-7,0,24,38,3,0,9,46,8)],q4=["duration","easing","delay"],j4={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},K4={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function cv(t){return`${Math.round(t)}ms`}function z4(t){if(!t)return 0;const e=t/36;return Math.round((4+15*e**.25+e/5)*10)}function G4(t){const e=O({},j4,t.easing),n=O({},K4,t.duration);return O({getAutoHeightDuration:z4,create:(i=["all"],s={})=>{const{duration:o=n.standard,easing:a=e.easeInOut,delay:l=0}=s;return ue(s,q4),(Array.isArray(i)?i:[i]).map(c=>`${c} ${typeof o=="string"?o:cv(o)} ${a} ${typeof l=="string"?l:cv(l)}`).join(",")}},t,{easing:e,duration:n})}const X4={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},Y4=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function Ng(t={},...e){const{mixins:n={},palette:r={},transitions:i={},typography:s={}}=t,o=ue(t,Y4);if(t.vars)throw new Error(Wi(18));const a=L4(r),l=Xu(t);let c=kn(l,{mixins:g4(l.breakpoints,n),palette:a,shadows:H4.slice(),typography:$4(a,s),transitions:G4(i),zIndex:O({},X4)});return c=kn(c,o),c=e.reduce((u,d)=>kn(u,d),c),c.unstable_sxConfig=O({},ac,o==null?void 0:o.unstable_sxConfig),c.unstable_sx=function(d){return Zs({sx:d,theme:this})},c}const Cg=Ng();function dd(){const t=Sg(Cg);return t[Vs]||t}var lc={},th={exports:{}},lv;function Q4(){return lv||(lv=1,function(t){function e(n,r){if(n==null)return{};var i={};for(var s in n)if({}.hasOwnProperty.call(n,s)){if(r.includes(s))continue;i[s]=n[s]}return i}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports}(th)),th.exports}const J4=br(wR),Z4=br(bR),e_=br(RR),t_=br(P3),n_=br(p3),r_=br(b3);var to=ud;Object.defineProperty(lc,"__esModule",{value:!0});var i_=lc.default=y_;lc.shouldForwardProp=gl;lc.systemDefaultTheme=void 0;var Pn=to(hk()),Fp=to(Q4()),uv=d_(J4),s_=Z4;to(e_);to(t_);var o_=to(n_),a_=to(r_);const c_=["ownerState"],l_=["variants"],u_=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function jk(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(jk=function(r){return r?n:e})(t)}function d_(t,e){if(t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var n=jk(e);if(n&&n.has(t))return n.get(t);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if(s!=="default"&&Object.prototype.hasOwnProperty.call(t,s)){var o=i?Object.getOwnPropertyDescriptor(t,s):null;o&&(o.get||o.set)?Object.defineProperty(r,s,o):r[s]=t[s]}return r.default=t,n&&n.set(t,r),r}function f_(t){return Object.keys(t).length===0}function h_(t){return typeof t=="string"&&t.charCodeAt(0)>96}function gl(t){return t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"}const p_=lc.systemDefaultTheme=(0,o_.default)(),g_=t=>t&&t.charAt(0).toLowerCase()+t.slice(1);function Dc({defaultTheme:t,theme:e,themeId:n}){return f_(e)?t:e[n]||e}function m_(t){return t?(e,n)=>n[t]:null}function ml(t,e){let{ownerState:n}=e,r=(0,Fp.default)(e,c_);const i=typeof t=="function"?t((0,Pn.default)({ownerState:n},r)):t;if(Array.isArray(i))return i.flatMap(s=>ml(s,(0,Pn.default)({ownerState:n},r)));if(i&&typeof i=="object"&&Array.isArray(i.variants)){const{variants:s=[]}=i;let a=(0,Fp.default)(i,l_);return s.forEach(l=>{let c=!0;typeof l.props=="function"?c=l.props((0,Pn.default)({ownerState:n},r,n)):Object.keys(l.props).forEach(u=>{(n==null?void 0:n[u])!==l.props[u]&&r[u]!==l.props[u]&&(c=!1)}),c&&(Array.isArray(a)||(a=[a]),a.push(typeof l.style=="function"?l.style((0,Pn.default)({ownerState:n},r,n)):l.style))}),a}return i}function y_(t={}){const{themeId:e,defaultTheme:n=p_,rootShouldForwardProp:r=gl,slotShouldForwardProp:i=gl}=t,s=o=>(0,a_.default)((0,Pn.default)({},o,{theme:Dc((0,Pn.default)({},o,{defaultTheme:n,themeId:e}))}));return s.__mui_systemSx=!0,(o,a={})=>{(0,uv.internal_processStyles)(o,x=>x.filter(I=>!(I!=null&&I.__mui_systemSx)));const{name:l,slot:c,skipVariantsResolver:u,skipSx:d,overridesResolver:f=m_(g_(c))}=a,h=(0,Fp.default)(a,u_),p=u!==void 0?u:c&&c!=="Root"&&c!=="root"||!1,g=d||!1;let w,v=gl;c==="Root"||c==="root"?v=r:c?v=i:h_(o)&&(v=void 0);const m=(0,uv.default)(o,(0,Pn.default)({shouldForwardProp:v,label:w},h)),y=x=>typeof x=="function"&&x.__emotion_real!==x||(0,s_.isPlainObject)(x)?I=>ml(x,(0,Pn.default)({},I,{theme:Dc({theme:I.theme,defaultTheme:n,themeId:e})})):x,b=(x,...I)=>{let k=y(x);const S=I?I.map(y):[];l&&f&&S.push(B=>{const T=Dc((0,Pn.default)({},B,{defaultTheme:n,themeId:e}));if(!T.components||!T.components[l]||!T.components[l].styleOverrides)return null;const N=T.components[l].styleOverrides,L={};return Object.entries(N).forEach(([$,H])=>{L[$]=ml(H,(0,Pn.default)({},B,{theme:T}))}),f(B,L)}),l&&!p&&S.push(B=>{var T;const N=Dc((0,Pn.default)({},B,{defaultTheme:n,themeId:e})),L=N==null||(T=N.components)==null||(T=T[l])==null?void 0:T.variants;return ml({variants:L},(0,Pn.default)({},B,{theme:N}))}),g||S.push(s);const P=S.length-I.length;if(Array.isArray(x)&&P>0){const B=new Array(P).fill("");k=[...x,...B],k.raw=[...x.raw,...B]}const R=m(k,...S);return o.muiName&&(R.muiName=o.muiName),R};return m.withConfig&&(b.withConfig=m.withConfig),b}}function Kk(t){return t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"}const en=t=>Kk(t)&&t!=="classes",ae=i_({themeId:Vs,defaultTheme:Cg,rootShouldForwardProp:en}),v_=["theme"];function w_(t){let{theme:e}=t,n=ue(t,v_);const r=e[Vs];return F.jsx(p4,O({},n,{themeId:r?Vs:void 0,theme:r||e}))}const dv=t=>{let e;return t<1?e=5.11916*t**2:e=4.5*Math.log(t+1)+2,(e/100).toFixed(2)};function _e(t){return h4(t)}function b_(t){return Te("MuiSvgIcon",t)}Ie("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const x_=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],k_=t=>{const{color:e,fontSize:n,classes:r}=t,i={root:["root",e!=="inherit"&&`color${ce(e)}`,`fontSize${ce(n)}`]};return Re(i,b_,r)},I_=ae("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.color!=="inherit"&&e[`color${ce(n.color)}`],e[`fontSize${ce(n.fontSize)}`]]}})(({theme:t,ownerState:e})=>{var n,r,i,s,o,a,l,c,u,d,f,h,p;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:e.hasSvgAsChild?void 0:"currentColor",flexShrink:0,transition:(n=t.transitions)==null||(r=n.create)==null?void 0:r.call(n,"fill",{duration:(i=t.transitions)==null||(i=i.duration)==null?void 0:i.shorter}),fontSize:{inherit:"inherit",small:((s=t.typography)==null||(o=s.pxToRem)==null?void 0:o.call(s,20))||"1.25rem",medium:((a=t.typography)==null||(l=a.pxToRem)==null?void 0:l.call(a,24))||"1.5rem",large:((c=t.typography)==null||(u=c.pxToRem)==null?void 0:u.call(c,35))||"2.1875rem"}[e.fontSize],color:(d=(f=(t.vars||t).palette)==null||(f=f[e.color])==null?void 0:f.main)!=null?d:{action:(h=(t.vars||t).palette)==null||(h=h.action)==null?void 0:h.active,disabled:(p=(t.vars||t).palette)==null||(p=p.action)==null?void 0:p.disabled,inherit:void 0}[e.color]}}),$p=A.forwardRef(function(e,n){const r=_e({props:e,name:"MuiSvgIcon"}),{children:i,className:s,color:o="inherit",component:a="svg",fontSize:l="medium",htmlColor:c,inheritViewBox:u=!1,titleAccess:d,viewBox:f="0 0 24 24"}=r,h=ue(r,x_),p=A.isValidElement(i)&&i.type==="svg",g=O({},r,{color:o,component:a,fontSize:l,instanceFontSize:e.fontSize,inheritViewBox:u,viewBox:f,hasSvgAsChild:p}),w={};u||(w.viewBox=f);const v=k_(g);return F.jsxs(I_,O({as:a,className:de(v.root,s),focusable:"false",color:c,"aria-hidden":d?void 0:!0,role:d?"img":void 0,ref:n},w,h,p&&i.props,{ownerState:g,children:[p?i.props.children:i,d?F.jsx("title",{children:d}):null]}))});$p.muiName="SvgIcon";function uc(t,e){function n(r,i){return F.jsx($p,O({"data-testid":`${e}Icon`,ref:i},r,{children:t}))}return n.muiName=$p.muiName,A.memo(A.forwardRef(n))}const S_={configure:t=>{Eg.configure(t)}},E_=Object.freeze(Object.defineProperty({__proto__:null,capitalize:ce,createChainedFunction:Lp,createSvgIcon:uc,debounce:_g,deprecatedPropType:V3,isMuiElement:ma,ownerDocument:ln,ownerWindow:ci,requirePropFactory:U3,setRef:Xl,unstable_ClassNameGenerator:S_,unstable_useEnhancedEffect:Nr,unstable_useId:ad,unsupportedProp:q3,useControlled:Yl,useEventCallback:Ei,useForkRef:Kt,useIsFocusVisible:_k},Symbol.toStringTag,{value:"Module"}));var Ye={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mg=Symbol.for("react.element"),Bg=Symbol.for("react.portal"),fd=Symbol.for("react.fragment"),hd=Symbol.for("react.strict_mode"),pd=Symbol.for("react.profiler"),gd=Symbol.for("react.provider"),md=Symbol.for("react.context"),T_=Symbol.for("react.server_context"),yd=Symbol.for("react.forward_ref"),vd=Symbol.for("react.suspense"),wd=Symbol.for("react.suspense_list"),bd=Symbol.for("react.memo"),xd=Symbol.for("react.lazy"),R_=Symbol.for("react.offscreen"),zk;zk=Symbol.for("react.module.reference");function qn(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case Mg:switch(t=t.type,t){case fd:case pd:case hd:case vd:case wd:return t;default:switch(t=t&&t.$$typeof,t){case T_:case md:case yd:case xd:case bd:case gd:return t;default:return e}}case Bg:return e}}}Ye.ContextConsumer=md;Ye.ContextProvider=gd;Ye.Element=Mg;Ye.ForwardRef=yd;Ye.Fragment=fd;Ye.Lazy=xd;Ye.Memo=bd;Ye.Portal=Bg;Ye.Profiler=pd;Ye.StrictMode=hd;Ye.Suspense=vd;Ye.SuspenseList=wd;Ye.isAsyncMode=function(){return!1};Ye.isConcurrentMode=function(){return!1};Ye.isContextConsumer=function(t){return qn(t)===md};Ye.isContextProvider=function(t){return qn(t)===gd};Ye.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===Mg};Ye.isForwardRef=function(t){return qn(t)===yd};Ye.isFragment=function(t){return qn(t)===fd};Ye.isLazy=function(t){return qn(t)===xd};Ye.isMemo=function(t){return qn(t)===bd};Ye.isPortal=function(t){return qn(t)===Bg};Ye.isProfiler=function(t){return qn(t)===pd};Ye.isStrictMode=function(t){return qn(t)===hd};Ye.isSuspense=function(t){return qn(t)===vd};Ye.isSuspenseList=function(t){return qn(t)===wd};Ye.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===fd||t===pd||t===hd||t===vd||t===wd||t===R_||typeof t=="object"&&t!==null&&(t.$$typeof===xd||t.$$typeof===bd||t.$$typeof===gd||t.$$typeof===md||t.$$typeof===yd||t.$$typeof===zk||t.getModuleId!==void 0)};Ye.typeOf=qn;function Wp(t,e){return Wp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},Wp(t,e)}function Gk(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,Wp(t,e)}const fv={disabled:!1},Jl=Pe.createContext(null);var __=function(e){return e.scrollTop},na="unmounted",bi="exited",xi="entering",cs="entered",Vp="exiting",xr=function(t){Gk(e,t);function e(r,i){var s;s=t.call(this,r,i)||this;var o=i,a=o&&!o.isMounting?r.enter:r.appear,l;return s.appearStatus=null,r.in?a?(l=bi,s.appearStatus=xi):l=cs:r.unmountOnExit||r.mountOnEnter?l=na:l=bi,s.state={status:l},s.nextCallback=null,s}e.getDerivedStateFromProps=function(i,s){var o=i.in;return o&&s.status===na?{status:bi}:null};var n=e.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(i){var s=null;if(i!==this.props){var o=this.state.status;this.props.in?o!==xi&&o!==cs&&(s=xi):(o===xi||o===cs)&&(s=Vp)}this.updateStatus(!1,s)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var i=this.props.timeout,s,o,a;return s=o=a=i,i!=null&&typeof i!="number"&&(s=i.exit,o=i.enter,a=i.appear!==void 0?i.appear:o),{exit:s,enter:o,appear:a}},n.updateStatus=function(i,s){if(i===void 0&&(i=!1),s!==null)if(this.cancelNextCallback(),s===xi){if(this.props.unmountOnExit||this.props.mountOnEnter){var o=this.props.nodeRef?this.props.nodeRef.current:Mc.findDOMNode(this);o&&__(o)}this.performEnter(i)}else this.performExit();else this.props.unmountOnExit&&this.state.status===bi&&this.setState({status:na})},n.performEnter=function(i){var s=this,o=this.props.enter,a=this.context?this.context.isMounting:i,l=this.props.nodeRef?[a]:[Mc.findDOMNode(this),a],c=l[0],u=l[1],d=this.getTimeouts(),f=a?d.appear:d.enter;if(!i&&!o||fv.disabled){this.safeSetState({status:cs},function(){s.props.onEntered(c)});return}this.props.onEnter(c,u),this.safeSetState({status:xi},function(){s.props.onEntering(c,u),s.onTransitionEnd(f,function(){s.safeSetState({status:cs},function(){s.props.onEntered(c,u)})})})},n.performExit=function(){var i=this,s=this.props.exit,o=this.getTimeouts(),a=this.props.nodeRef?void 0:Mc.findDOMNode(this);if(!s||fv.disabled){this.safeSetState({status:bi},function(){i.props.onExited(a)});return}this.props.onExit(a),this.safeSetState({status:Vp},function(){i.props.onExiting(a),i.onTransitionEnd(o.exit,function(){i.safeSetState({status:bi},function(){i.props.onExited(a)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(i,s){s=this.setNextCallback(s),this.setState(i,s)},n.setNextCallback=function(i){var s=this,o=!0;return this.nextCallback=function(a){o&&(o=!1,s.nextCallback=null,i(a))},this.nextCallback.cancel=function(){o=!1},this.nextCallback},n.onTransitionEnd=function(i,s){this.setNextCallback(s);var o=this.props.nodeRef?this.props.nodeRef.current:Mc.findDOMNode(this),a=i==null&&!this.props.addEndListener;if(!o||a){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var l=this.props.nodeRef?[this.nextCallback]:[o,this.nextCallback],c=l[0],u=l[1];this.props.addEndListener(c,u)}i!=null&&setTimeout(this.nextCallback,i)},n.render=function(){var i=this.state.status;if(i===na)return null;var s=this.props,o=s.children;s.in,s.mountOnEnter,s.unmountOnExit,s.appear,s.enter,s.exit,s.timeout,s.addEndListener,s.onEnter,s.onEntering,s.onEntered,s.onExit,s.onExiting,s.onExited,s.nodeRef;var a=ue(s,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return Pe.createElement(Jl.Provider,{value:null},typeof o=="function"?o(i,a):Pe.cloneElement(Pe.Children.only(o),a))},e}(Pe.Component);xr.contextType=Jl;xr.propTypes={};function rs(){}xr.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:rs,onEntering:rs,onEntered:rs,onExit:rs,onExiting:rs,onExited:rs};xr.UNMOUNTED=na;xr.EXITED=bi;xr.ENTERING=xi;xr.ENTERED=cs;xr.EXITING=Vp;function P_(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Lg(t,e){var n=function(s){return e&&A.isValidElement(s)?e(s):s},r=Object.create(null);return t&&A.Children.map(t,function(i){return i}).forEach(function(i){r[i.key]=n(i)}),r}function O_(t,e){t=t||{},e=e||{};function n(u){return u in e?e[u]:t[u]}var r=Object.create(null),i=[];for(var s in t)s in e?i.length&&(r[s]=i,i=[]):i.push(s);var o,a={};for(var l in e){if(r[l])for(o=0;o<r[l].length;o++){var c=r[l][o];a[r[l][o]]=n(c)}a[l]=n(l)}for(o=0;o<i.length;o++)a[i[o]]=n(i[o]);return a}function Ti(t,e,n){return n[e]!=null?n[e]:t.props[e]}function A_(t,e){return Lg(t.children,function(n){return A.cloneElement(n,{onExited:e.bind(null,n),in:!0,appear:Ti(n,"appear",t),enter:Ti(n,"enter",t),exit:Ti(n,"exit",t)})})}function N_(t,e,n){var r=Lg(t.children),i=O_(e,r);return Object.keys(i).forEach(function(s){var o=i[s];if(A.isValidElement(o)){var a=s in e,l=s in r,c=e[s],u=A.isValidElement(c)&&!c.props.in;l&&(!a||u)?i[s]=A.cloneElement(o,{onExited:n.bind(null,o),in:!0,exit:Ti(o,"exit",t),enter:Ti(o,"enter",t)}):!l&&a&&!u?i[s]=A.cloneElement(o,{in:!1}):l&&a&&A.isValidElement(c)&&(i[s]=A.cloneElement(o,{onExited:n.bind(null,o),in:c.props.in,exit:Ti(o,"exit",t),enter:Ti(o,"enter",t)}))}}),i}var C_=Object.values||function(t){return Object.keys(t).map(function(e){return t[e]})},M_={component:"div",childFactory:function(e){return e}},Dg=function(t){Gk(e,t);function e(r,i){var s;s=t.call(this,r,i)||this;var o=s.handleExited.bind(P_(s));return s.state={contextValue:{isMounting:!0},handleExited:o,firstRender:!0},s}var n=e.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},e.getDerivedStateFromProps=function(i,s){var o=s.children,a=s.handleExited,l=s.firstRender;return{children:l?A_(i,a):N_(i,o,a),firstRender:!1}},n.handleExited=function(i,s){var o=Lg(this.props.children);i.key in o||(i.props.onExited&&i.props.onExited(s),this.mounted&&this.setState(function(a){var l=O({},a.children);return delete l[i.key],{children:l}}))},n.render=function(){var i=this.props,s=i.component,o=i.childFactory,a=ue(i,["component","childFactory"]),l=this.state.contextValue,c=C_(this.state.children).map(o);return delete a.appear,delete a.enter,delete a.exit,s===null?Pe.createElement(Jl.Provider,{value:l},c):Pe.createElement(Jl.Provider,{value:l},Pe.createElement(s,a,c))},e}(Pe.Component);Dg.propTypes={};Dg.defaultProps=M_;const Xk=t=>t.scrollTop;function Zl(t,e){var n,r;const{timeout:i,easing:s,style:o={}}=t;return{duration:(n=o.transitionDuration)!=null?n:typeof i=="number"?i:i[e.mode]||0,easing:(r=o.transitionTimingFunction)!=null?r:typeof s=="object"?s[e.mode]:s,delay:o.transitionDelay}}function B_(t){return Te("MuiPaper",t)}Ie("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const L_=["className","component","elevation","square","variant"],D_=t=>{const{square:e,elevation:n,variant:r,classes:i}=t,s={root:["root",r,!e&&"rounded",r==="elevation"&&`elevation${n}`]};return Re(s,B_,i)},F_=ae("div",{name:"MuiPaper",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],!n.square&&e.rounded,n.variant==="elevation"&&e[`elevation${n.elevation}`]]}})(({theme:t,ownerState:e})=>{var n;return O({backgroundColor:(t.vars||t).palette.background.paper,color:(t.vars||t).palette.text.primary,transition:t.transitions.create("box-shadow")},!e.square&&{borderRadius:t.shape.borderRadius},e.variant==="outlined"&&{border:`1px solid ${(t.vars||t).palette.divider}`},e.variant==="elevation"&&O({boxShadow:(t.vars||t).shadows[e.elevation]},!t.vars&&t.palette.mode==="dark"&&{backgroundImage:`linear-gradient(${mn("#fff",dv(e.elevation))}, ${mn("#fff",dv(e.elevation))})`},t.vars&&{backgroundImage:(n=t.vars.overlays)==null?void 0:n[e.elevation]}))}),kd=A.forwardRef(function(e,n){const r=_e({props:e,name:"MuiPaper"}),{className:i,component:s="div",elevation:o=1,square:a=!1,variant:l="elevation"}=r,c=ue(r,L_),u=O({},r,{component:s,elevation:o,square:a,variant:l}),d=D_(u);return F.jsx(F_,O({as:s,ownerState:u,className:de(d.root,i),ref:n},c))});function $_(t){const{className:e,classes:n,pulsate:r=!1,rippleX:i,rippleY:s,rippleSize:o,in:a,onExited:l,timeout:c}=t,[u,d]=A.useState(!1),f=de(e,n.ripple,n.rippleVisible,r&&n.ripplePulsate),h={width:o,height:o,top:-(o/2)+s,left:-(o/2)+i},p=de(n.child,u&&n.childLeaving,r&&n.childPulsate);return!a&&!u&&d(!0),A.useEffect(()=>{if(!a&&l!=null){const g=setTimeout(l,c);return()=>{clearTimeout(g)}}},[l,a,c]),F.jsx("span",{className:f,style:h,children:F.jsx("span",{className:p})})}const On=Ie("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),W_=["center","classes","className"];let Id=t=>t,hv,pv,gv,mv;const Up=550,V_=80,U_=Ki(hv||(hv=Id`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`)),H_=Ki(pv||(pv=Id`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`)),q_=Ki(gv||(gv=Id`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`)),j_=ae("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),K_=ae($_,{name:"MuiTouchRipple",slot:"Ripple"})(mv||(mv=Id`
  opacity: 0;
  position: absolute;

  &.${0} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  &.${0} {
    animation-duration: ${0}ms;
  }

  & .${0} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${0} {
    opacity: 0;
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  & .${0} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${0};
    animation-duration: 2500ms;
    animation-timing-function: ${0};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`),On.rippleVisible,U_,Up,({theme:t})=>t.transitions.easing.easeInOut,On.ripplePulsate,({theme:t})=>t.transitions.duration.shorter,On.child,On.childLeaving,H_,Up,({theme:t})=>t.transitions.easing.easeInOut,On.childPulsate,q_,({theme:t})=>t.transitions.easing.easeInOut),z_=A.forwardRef(function(e,n){const r=_e({props:e,name:"MuiTouchRipple"}),{center:i=!1,classes:s={},className:o}=r,a=ue(r,W_),[l,c]=A.useState([]),u=A.useRef(0),d=A.useRef(null);A.useEffect(()=>{d.current&&(d.current(),d.current=null)},[l]);const f=A.useRef(!1),h=Rk(),p=A.useRef(null),g=A.useRef(null),w=A.useCallback(b=>{const{pulsate:x,rippleX:I,rippleY:k,rippleSize:S,cb:P}=b;c(R=>[...R,F.jsx(K_,{classes:{ripple:de(s.ripple,On.ripple),rippleVisible:de(s.rippleVisible,On.rippleVisible),ripplePulsate:de(s.ripplePulsate,On.ripplePulsate),child:de(s.child,On.child),childLeaving:de(s.childLeaving,On.childLeaving),childPulsate:de(s.childPulsate,On.childPulsate)},timeout:Up,pulsate:x,rippleX:I,rippleY:k,rippleSize:S},u.current)]),u.current+=1,d.current=P},[s]),v=A.useCallback((b={},x={},I=()=>{})=>{const{pulsate:k=!1,center:S=i||x.pulsate,fakeElement:P=!1}=x;if((b==null?void 0:b.type)==="mousedown"&&f.current){f.current=!1;return}(b==null?void 0:b.type)==="touchstart"&&(f.current=!0);const R=P?null:g.current,B=R?R.getBoundingClientRect():{width:0,height:0,left:0,top:0};let T,N,L;if(S||b===void 0||b.clientX===0&&b.clientY===0||!b.clientX&&!b.touches)T=Math.round(B.width/2),N=Math.round(B.height/2);else{const{clientX:$,clientY:H}=b.touches&&b.touches.length>0?b.touches[0]:b;T=Math.round($-B.left),N=Math.round(H-B.top)}if(S)L=Math.sqrt((2*B.width**2+B.height**2)/3),L%2===0&&(L+=1);else{const $=Math.max(Math.abs((R?R.clientWidth:0)-T),T)*2+2,H=Math.max(Math.abs((R?R.clientHeight:0)-N),N)*2+2;L=Math.sqrt($**2+H**2)}b!=null&&b.touches?p.current===null&&(p.current=()=>{w({pulsate:k,rippleX:T,rippleY:N,rippleSize:L,cb:I})},h.start(V_,()=>{p.current&&(p.current(),p.current=null)})):w({pulsate:k,rippleX:T,rippleY:N,rippleSize:L,cb:I})},[i,w,h]),m=A.useCallback(()=>{v({},{pulsate:!0})},[v]),y=A.useCallback((b,x)=>{if(h.clear(),(b==null?void 0:b.type)==="touchend"&&p.current){p.current(),p.current=null,h.start(0,()=>{y(b,x)});return}p.current=null,c(I=>I.length>0?I.slice(1):I),d.current=x},[h]);return A.useImperativeHandle(n,()=>({pulsate:m,start:v,stop:y}),[m,v,y]),F.jsx(j_,O({className:de(On.root,s.root,o),ref:g},a,{children:F.jsx(Dg,{component:null,exit:!0,children:l})}))});function G_(t){return Te("MuiButtonBase",t)}const X_=Ie("MuiButtonBase",["root","disabled","focusVisible"]),Y_=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],Q_=t=>{const{disabled:e,focusVisible:n,focusVisibleClassName:r,classes:i}=t,o=Re({root:["root",e&&"disabled",n&&"focusVisible"]},G_,i);return n&&r&&(o.root+=` ${r}`),o},J_=ae("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(t,e)=>e.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${X_.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),dc=A.forwardRef(function(e,n){const r=_e({props:e,name:"MuiButtonBase"}),{action:i,centerRipple:s=!1,children:o,className:a,component:l="button",disabled:c=!1,disableRipple:u=!1,disableTouchRipple:d=!1,focusRipple:f=!1,LinkComponent:h="a",onBlur:p,onClick:g,onContextMenu:w,onDragLeave:v,onFocus:m,onFocusVisible:y,onKeyDown:b,onKeyUp:x,onMouseDown:I,onMouseLeave:k,onMouseUp:S,onTouchEnd:P,onTouchMove:R,onTouchStart:B,tabIndex:T=0,TouchRippleProps:N,touchRippleRef:L,type:$}=r,H=ue(r,Y_),W=A.useRef(null),C=A.useRef(null),V=Kt(C,L),{isFocusVisibleRef:q,onFocus:G,onBlur:Y,ref:z}=_k(),[K,oe]=A.useState(!1);c&&K&&oe(!1),A.useImperativeHandle(i,()=>({focusVisible:()=>{oe(!0),W.current.focus()}}),[]);const[te,J]=A.useState(!1);A.useEffect(()=>{J(!0)},[]);const X=te&&!u&&!c;A.useEffect(()=>{K&&f&&!u&&te&&C.current.pulsate()},[u,f,K,te]);function ie(ye,He,Ze=d){return Ei(Br=>(He&&He(Br),!Ze&&C.current&&C.current[ye](Br),!0))}const ge=ie("start",I),ke=ie("stop",w),me=ie("stop",v),he=ie("stop",S),Be=ie("stop",ye=>{K&&ye.preventDefault(),k&&k(ye)}),we=ie("start",B),$e=ie("stop",P),Nt=ie("stop",R),Ne=ie("stop",ye=>{Y(ye),q.current===!1&&oe(!1),p&&p(ye)},!1),Me=Ei(ye=>{W.current||(W.current=ye.currentTarget),G(ye),q.current===!0&&(oe(!0),y&&y(ye)),m&&m(ye)}),E=()=>{const ye=W.current;return l&&l!=="button"&&!(ye.tagName==="A"&&ye.href)},j=A.useRef(!1),Q=Ei(ye=>{f&&!j.current&&K&&C.current&&ye.key===" "&&(j.current=!0,C.current.stop(ye,()=>{C.current.start(ye)})),ye.target===ye.currentTarget&&E()&&ye.key===" "&&ye.preventDefault(),b&&b(ye),ye.target===ye.currentTarget&&E()&&ye.key==="Enter"&&!c&&(ye.preventDefault(),g&&g(ye))}),pe=Ei(ye=>{f&&ye.key===" "&&C.current&&K&&!ye.defaultPrevented&&(j.current=!1,C.current.stop(ye,()=>{C.current.pulsate(ye)})),x&&x(ye),g&&ye.target===ye.currentTarget&&E()&&ye.key===" "&&!ye.defaultPrevented&&g(ye)});let fe=l;fe==="button"&&(H.href||H.to)&&(fe=h);const Le={};fe==="button"?(Le.type=$===void 0?"button":$,Le.disabled=c):(!H.href&&!H.to&&(Le.role="button"),c&&(Le["aria-disabled"]=c));const tn=Kt(n,z,W),Ue=O({},r,{centerRipple:s,component:l,disabled:c,disableRipple:u,disableTouchRipple:d,focusRipple:f,tabIndex:T,focusVisible:K}),be=Q_(Ue);return F.jsxs(J_,O({as:fe,className:de(be.root,a),ownerState:Ue,onBlur:Ne,onClick:g,onContextMenu:ke,onFocus:Me,onKeyDown:Q,onKeyUp:pe,onMouseDown:ge,onMouseLeave:Be,onMouseUp:he,onDragLeave:me,onTouchEnd:$e,onTouchMove:Nt,onTouchStart:we,ref:tn,tabIndex:c?-1:T,type:$},Le,H,{children:[o,X?F.jsx(z_,O({ref:V,center:s},N)):null]}))});function Z_(t){return Te("MuiIconButton",t)}const eP=Ie("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]),tP=["edge","children","className","color","disabled","disableFocusRipple","size"],nP=t=>{const{classes:e,disabled:n,color:r,edge:i,size:s}=t,o={root:["root",n&&"disabled",r!=="default"&&`color${ce(r)}`,i&&`edge${ce(i)}`,`size${ce(s)}`]};return Re(o,Z_,e)},rP=ae(dc,{name:"MuiIconButton",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.color!=="default"&&e[`color${ce(n.color)}`],n.edge&&e[`edge${ce(n.edge)}`],e[`size${ce(n.size)}`]]}})(({theme:t,ownerState:e})=>O({textAlign:"center",flex:"0 0 auto",fontSize:t.typography.pxToRem(24),padding:8,borderRadius:"50%",overflow:"visible",color:(t.vars||t).palette.action.active,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest})},!e.disableRipple&&{"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.hoverOpacity})`:mn(t.palette.action.active,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},e.edge==="start"&&{marginLeft:e.size==="small"?-3:-12},e.edge==="end"&&{marginRight:e.size==="small"?-3:-12}),({theme:t,ownerState:e})=>{var n;const r=(n=(t.vars||t).palette)==null?void 0:n[e.color];return O({},e.color==="inherit"&&{color:"inherit"},e.color!=="inherit"&&e.color!=="default"&&O({color:r==null?void 0:r.main},!e.disableRipple&&{"&:hover":O({},r&&{backgroundColor:t.vars?`rgba(${r.mainChannel} / ${t.vars.palette.action.hoverOpacity})`:mn(r.main,t.palette.action.hoverOpacity)},{"@media (hover: none)":{backgroundColor:"transparent"}})}),e.size==="small"&&{padding:5,fontSize:t.typography.pxToRem(18)},e.size==="large"&&{padding:12,fontSize:t.typography.pxToRem(28)},{[`&.${eP.disabled}`]:{backgroundColor:"transparent",color:(t.vars||t).palette.action.disabled}})}),iP=A.forwardRef(function(e,n){const r=_e({props:e,name:"MuiIconButton"}),{edge:i=!1,children:s,className:o,color:a="default",disabled:l=!1,disableFocusRipple:c=!1,size:u="medium"}=r,d=ue(r,tP),f=O({},r,{edge:i,color:a,disabled:l,disableFocusRipple:c,size:u}),h=nP(f);return F.jsx(rP,O({className:de(h.root,o),centerRipple:!0,focusRipple:!c,disabled:l,ref:n},d,{ownerState:f,children:s}))});function sP(t){return Te("MuiTypography",t)}Ie("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const oP=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],aP=t=>{const{align:e,gutterBottom:n,noWrap:r,paragraph:i,variant:s,classes:o}=t,a={root:["root",s,t.align!=="inherit"&&`align${ce(e)}`,n&&"gutterBottom",r&&"noWrap",i&&"paragraph"]};return Re(a,sP,o)},cP=ae("span",{name:"MuiTypography",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.variant&&e[n.variant],n.align!=="inherit"&&e[`align${ce(n.align)}`],n.noWrap&&e.noWrap,n.gutterBottom&&e.gutterBottom,n.paragraph&&e.paragraph]}})(({theme:t,ownerState:e})=>O({margin:0},e.variant==="inherit"&&{font:"inherit"},e.variant!=="inherit"&&t.typography[e.variant],e.align!=="inherit"&&{textAlign:e.align},e.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},e.gutterBottom&&{marginBottom:"0.35em"},e.paragraph&&{marginBottom:16})),yv={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},lP={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},uP=t=>lP[t]||t,Jn=A.forwardRef(function(e,n){const r=_e({props:e,name:"MuiTypography"}),i=uP(r.color),s=Yu(O({},r,{color:i})),{align:o="inherit",className:a,component:l,gutterBottom:c=!1,noWrap:u=!1,paragraph:d=!1,variant:f="body1",variantMapping:h=yv}=s,p=ue(s,oP),g=O({},s,{align:o,color:i,className:a,component:l,gutterBottom:c,noWrap:u,paragraph:d,variant:f,variantMapping:h}),w=l||(d?"p":h[f]||yv[f])||"span",v=aP(g);return F.jsx(cP,O({as:w,ref:n,ownerState:g,className:de(v.root,a)},p))});function dP(t){return Te("MuiAppBar",t)}Ie("MuiAppBar",["root","positionFixed","positionAbsolute","positionSticky","positionStatic","positionRelative","colorDefault","colorPrimary","colorSecondary","colorInherit","colorTransparent","colorError","colorInfo","colorSuccess","colorWarning"]);const fP=["className","color","enableColorOnDark","position"],hP=t=>{const{color:e,position:n,classes:r}=t,i={root:["root",`color${ce(e)}`,`position${ce(n)}`]};return Re(i,dP,r)},Fc=(t,e)=>t?`${t==null?void 0:t.replace(")","")}, ${e})`:e,pP=ae(kd,{name:"MuiAppBar",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`position${ce(n.position)}`],e[`color${ce(n.color)}`]]}})(({theme:t,ownerState:e})=>{const n=t.palette.mode==="light"?t.palette.grey[100]:t.palette.grey[900];return O({display:"flex",flexDirection:"column",width:"100%",boxSizing:"border-box",flexShrink:0},e.position==="fixed"&&{position:"fixed",zIndex:(t.vars||t).zIndex.appBar,top:0,left:"auto",right:0,"@media print":{position:"absolute"}},e.position==="absolute"&&{position:"absolute",zIndex:(t.vars||t).zIndex.appBar,top:0,left:"auto",right:0},e.position==="sticky"&&{position:"sticky",zIndex:(t.vars||t).zIndex.appBar,top:0,left:"auto",right:0},e.position==="static"&&{position:"static"},e.position==="relative"&&{position:"relative"},!t.vars&&O({},e.color==="default"&&{backgroundColor:n,color:t.palette.getContrastText(n)},e.color&&e.color!=="default"&&e.color!=="inherit"&&e.color!=="transparent"&&{backgroundColor:t.palette[e.color].main,color:t.palette[e.color].contrastText},e.color==="inherit"&&{color:"inherit"},t.palette.mode==="dark"&&!e.enableColorOnDark&&{backgroundColor:null,color:null},e.color==="transparent"&&O({backgroundColor:"transparent",color:"inherit"},t.palette.mode==="dark"&&{backgroundImage:"none"})),t.vars&&O({},e.color==="default"&&{"--AppBar-background":e.enableColorOnDark?t.vars.palette.AppBar.defaultBg:Fc(t.vars.palette.AppBar.darkBg,t.vars.palette.AppBar.defaultBg),"--AppBar-color":e.enableColorOnDark?t.vars.palette.text.primary:Fc(t.vars.palette.AppBar.darkColor,t.vars.palette.text.primary)},e.color&&!e.color.match(/^(default|inherit|transparent)$/)&&{"--AppBar-background":e.enableColorOnDark?t.vars.palette[e.color].main:Fc(t.vars.palette.AppBar.darkBg,t.vars.palette[e.color].main),"--AppBar-color":e.enableColorOnDark?t.vars.palette[e.color].contrastText:Fc(t.vars.palette.AppBar.darkColor,t.vars.palette[e.color].contrastText)},!["inherit","transparent"].includes(e.color)&&{backgroundColor:"var(--AppBar-background)"},{color:e.color==="inherit"?"inherit":"var(--AppBar-color)"},e.color==="transparent"&&{backgroundImage:"none",backgroundColor:"transparent",color:"inherit"}))}),gP=A.forwardRef(function(e,n){const r=_e({props:e,name:"MuiAppBar"}),{className:i,color:s="primary",enableColorOnDark:o=!1,position:a="fixed"}=r,l=ue(r,fP),c=O({},r,{color:s,position:a,enableColorOnDark:o}),u=hP(c);return F.jsx(pP,O({square:!0,component:"header",ownerState:c,elevation:4,className:de(u.root,i,a==="fixed"&&"mui-fixed"),ref:n},l))});function mP(t){return typeof t=="function"?t():t}const yP=A.forwardRef(function(e,n){const{children:r,container:i,disablePortal:s=!1}=e,[o,a]=A.useState(null),l=Kt(A.isValidElement(r)?r.ref:null,n);if(Nr(()=>{s||a(mP(i)||document.body)},[i,s]),Nr(()=>{if(o&&!s)return Xl(n,o),()=>{Xl(n,null)}},[n,o,s]),s){if(A.isValidElement(r)){const c={ref:l};return A.cloneElement(r,c)}return F.jsx(A.Fragment,{children:r})}return F.jsx(A.Fragment,{children:o&&dg.createPortal(r,o)})}),vP=["onChange","maxRows","minRows","style","value"];function $c(t){return parseInt(t,10)||0}const wP={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function bP(t){return t==null||Object.keys(t).length===0||t.outerHeightStyle===0&&!t.overflowing}const xP=A.forwardRef(function(e,n){const{onChange:r,maxRows:i,minRows:s=1,style:o,value:a}=e,l=ue(e,vP),{current:c}=A.useRef(a!=null),u=A.useRef(null),d=Kt(n,u),f=A.useRef(null),h=A.useRef(null),p=A.useCallback(()=>{const v=u.current,y=ci(v).getComputedStyle(v);if(y.width==="0px")return{outerHeightStyle:0,overflowing:!1};const b=h.current;b.style.width=y.width,b.value=v.value||e.placeholder||"x",b.value.slice(-1)===`
`&&(b.value+=" ");const x=y.boxSizing,I=$c(y.paddingBottom)+$c(y.paddingTop),k=$c(y.borderBottomWidth)+$c(y.borderTopWidth),S=b.scrollHeight;b.value="x";const P=b.scrollHeight;let R=S;s&&(R=Math.max(Number(s)*P,R)),i&&(R=Math.min(Number(i)*P,R)),R=Math.max(R,P);const B=R+(x==="border-box"?I+k:0),T=Math.abs(R-S)<=1;return{outerHeightStyle:B,overflowing:T}},[i,s,e.placeholder]),g=A.useCallback(()=>{const v=p();if(bP(v))return;const m=v.outerHeightStyle,y=u.current;f.current!==m&&(f.current=m,y.style.height=`${m}px`),y.style.overflow=v.overflowing?"hidden":""},[p]);Nr(()=>{const v=()=>{g()};let m;const y=_g(v),b=u.current,x=ci(b);x.addEventListener("resize",y);let I;return typeof ResizeObserver<"u"&&(I=new ResizeObserver(v),I.observe(b)),()=>{y.clear(),cancelAnimationFrame(m),x.removeEventListener("resize",y),I&&I.disconnect()}},[p,g]),Nr(()=>{g()});const w=v=>{c||g(),r&&r(v)};return F.jsxs(A.Fragment,{children:[F.jsx("textarea",O({value:a,onChange:w,ref:d,rows:s,style:o},l)),F.jsx("textarea",{"aria-hidden":!0,className:e.className,readOnly:!0,ref:h,tabIndex:-1,style:O({},wP.shadow,o,{paddingTop:0,paddingBottom:0})})]})});function no({props:t,states:e,muiFormControl:n}){return e.reduce((r,i)=>(r[i]=t[i],n&&typeof t[i]>"u"&&(r[i]=n[i]),r),{})}const Fg=A.createContext(void 0);function zi(){return A.useContext(Fg)}function Yk(t){return F.jsx(y3,O({},t,{defaultTheme:Cg,themeId:Vs}))}function vv(t){return t!=null&&!(Array.isArray(t)&&t.length===0)}function eu(t,e=!1){return t&&(vv(t.value)&&t.value!==""||e&&vv(t.defaultValue)&&t.defaultValue!=="")}function kP(t){return t.startAdornment}function IP(t){return Te("MuiInputBase",t)}const js=Ie("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]),SP=["aria-describedby","autoComplete","autoFocus","className","color","components","componentsProps","defaultValue","disabled","disableInjectingGlobalStyles","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","maxRows","minRows","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","size","slotProps","slots","startAdornment","type","value"],Sd=(t,e)=>{const{ownerState:n}=t;return[e.root,n.formControl&&e.formControl,n.startAdornment&&e.adornedStart,n.endAdornment&&e.adornedEnd,n.error&&e.error,n.size==="small"&&e.sizeSmall,n.multiline&&e.multiline,n.color&&e[`color${ce(n.color)}`],n.fullWidth&&e.fullWidth,n.hiddenLabel&&e.hiddenLabel]},Ed=(t,e)=>{const{ownerState:n}=t;return[e.input,n.size==="small"&&e.inputSizeSmall,n.multiline&&e.inputMultiline,n.type==="search"&&e.inputTypeSearch,n.startAdornment&&e.inputAdornedStart,n.endAdornment&&e.inputAdornedEnd,n.hiddenLabel&&e.inputHiddenLabel]},EP=t=>{const{classes:e,color:n,disabled:r,error:i,endAdornment:s,focused:o,formControl:a,fullWidth:l,hiddenLabel:c,multiline:u,readOnly:d,size:f,startAdornment:h,type:p}=t,g={root:["root",`color${ce(n)}`,r&&"disabled",i&&"error",l&&"fullWidth",o&&"focused",a&&"formControl",f&&f!=="medium"&&`size${ce(f)}`,u&&"multiline",h&&"adornedStart",s&&"adornedEnd",c&&"hiddenLabel",d&&"readOnly"],input:["input",r&&"disabled",p==="search"&&"inputTypeSearch",u&&"inputMultiline",f==="small"&&"inputSizeSmall",c&&"inputHiddenLabel",h&&"inputAdornedStart",s&&"inputAdornedEnd",d&&"readOnly"]};return Re(g,IP,e)},Td=ae("div",{name:"MuiInputBase",slot:"Root",overridesResolver:Sd})(({theme:t,ownerState:e})=>O({},t.typography.body1,{color:(t.vars||t).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${js.disabled}`]:{color:(t.vars||t).palette.text.disabled,cursor:"default"}},e.multiline&&O({padding:"4px 0 5px"},e.size==="small"&&{paddingTop:1}),e.fullWidth&&{width:"100%"})),Rd=ae("input",{name:"MuiInputBase",slot:"Input",overridesResolver:Ed})(({theme:t,ownerState:e})=>{const n=t.palette.mode==="light",r=O({color:"currentColor"},t.vars?{opacity:t.vars.opacity.inputPlaceholder}:{opacity:n?.42:.5},{transition:t.transitions.create("opacity",{duration:t.transitions.duration.shorter})}),i={opacity:"0 !important"},s=t.vars?{opacity:t.vars.opacity.inputPlaceholder}:{opacity:n?.42:.5};return O({font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":r,"&::-moz-placeholder":r,"&:-ms-input-placeholder":r,"&::-ms-input-placeholder":r,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${js.formControl} &`]:{"&::-webkit-input-placeholder":i,"&::-moz-placeholder":i,"&:-ms-input-placeholder":i,"&::-ms-input-placeholder":i,"&:focus::-webkit-input-placeholder":s,"&:focus::-moz-placeholder":s,"&:focus:-ms-input-placeholder":s,"&:focus::-ms-input-placeholder":s},[`&.${js.disabled}`]:{opacity:1,WebkitTextFillColor:(t.vars||t).palette.text.disabled},"&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}},e.size==="small"&&{paddingTop:1},e.multiline&&{height:"auto",resize:"none",padding:0,paddingTop:0},e.type==="search"&&{MozAppearance:"textfield"})}),TP=F.jsx(Yk,{styles:{"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}}),$g=A.forwardRef(function(e,n){var r;const i=_e({props:e,name:"MuiInputBase"}),{"aria-describedby":s,autoComplete:o,autoFocus:a,className:l,components:c={},componentsProps:u={},defaultValue:d,disabled:f,disableInjectingGlobalStyles:h,endAdornment:p,fullWidth:g=!1,id:w,inputComponent:v="input",inputProps:m={},inputRef:y,maxRows:b,minRows:x,multiline:I=!1,name:k,onBlur:S,onChange:P,onClick:R,onFocus:B,onKeyDown:T,onKeyUp:N,placeholder:L,readOnly:$,renderSuffix:H,rows:W,slotProps:C={},slots:V={},startAdornment:q,type:G="text",value:Y}=i,z=ue(i,SP),K=m.value!=null?m.value:Y,{current:oe}=A.useRef(K!=null),te=A.useRef(),J=A.useCallback(be=>{},[]),X=Kt(te,y,m.ref,J),[ie,ge]=A.useState(!1),ke=zi(),me=no({props:i,muiFormControl:ke,states:["color","disabled","error","hiddenLabel","size","required","filled"]});me.focused=ke?ke.focused:ie,A.useEffect(()=>{!ke&&f&&ie&&(ge(!1),S&&S())},[ke,f,ie,S]);const he=ke&&ke.onFilled,Be=ke&&ke.onEmpty,we=A.useCallback(be=>{eu(be)?he&&he():Be&&Be()},[he,Be]);Nr(()=>{oe&&we({value:K})},[K,we,oe]);const $e=be=>{if(me.disabled){be.stopPropagation();return}B&&B(be),m.onFocus&&m.onFocus(be),ke&&ke.onFocus?ke.onFocus(be):ge(!0)},Nt=be=>{S&&S(be),m.onBlur&&m.onBlur(be),ke&&ke.onBlur?ke.onBlur(be):ge(!1)},Ne=(be,...ye)=>{if(!oe){const He=be.target||te.current;if(He==null)throw new Error(Wi(1));we({value:He.value})}m.onChange&&m.onChange(be,...ye),P&&P(be,...ye)};A.useEffect(()=>{we(te.current)},[]);const Me=be=>{te.current&&be.currentTarget===be.target&&te.current.focus(),R&&R(be)};let E=v,j=m;I&&E==="input"&&(W?j=O({type:void 0,minRows:W,maxRows:W},j):j=O({type:void 0,maxRows:b,minRows:x},j),E=xP);const Q=be=>{we(be.animationName==="mui-auto-fill-cancel"?te.current:{value:"x"})};A.useEffect(()=>{ke&&ke.setAdornedStart(!!q)},[ke,q]);const pe=O({},i,{color:me.color||"primary",disabled:me.disabled,endAdornment:p,error:me.error,focused:me.focused,formControl:ke,fullWidth:g,hiddenLabel:me.hiddenLabel,multiline:I,size:me.size,startAdornment:q,type:G}),fe=EP(pe),Le=V.root||c.Root||Td,tn=C.root||u.root||{},Ue=V.input||c.Input||Rd;return j=O({},j,(r=C.input)!=null?r:u.input),F.jsxs(A.Fragment,{children:[!h&&TP,F.jsxs(Le,O({},tn,!Hs(Le)&&{ownerState:O({},pe,tn.ownerState)},{ref:n,onClick:Me},z,{className:de(fe.root,tn.className,l,$&&"MuiInputBase-readOnly"),children:[q,F.jsx(Fg.Provider,{value:null,children:F.jsx(Ue,O({ownerState:pe,"aria-invalid":me.error,"aria-describedby":s,autoComplete:o,autoFocus:a,defaultValue:d,disabled:me.disabled,id:w,onAnimationStart:Q,name:k,placeholder:L,readOnly:$,required:me.required,rows:W,value:K,onKeyDown:T,onKeyUp:N,type:G},j,!Hs(Ue)&&{as:E,ownerState:O({},pe,j.ownerState)},{ref:X,className:de(fe.input,j.className,$&&"MuiInputBase-readOnly"),onBlur:Nt,onChange:Ne,onFocus:$e}))}),p,H?H(O({},me,{startAdornment:q})):null]}))]})});function RP(t){return Te("MuiInput",t)}const mo=O({},js,Ie("MuiInput",["root","underline","input"]));function _P(t){return Te("MuiOutlinedInput",t)}const Dr=O({},js,Ie("MuiOutlinedInput",["root","notchedOutline","input"]));function PP(t){return Te("MuiFilledInput",t)}const hi=O({},js,Ie("MuiFilledInput",["root","underline","input"])),OP=uc(F.jsx("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),AP=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],NP={entering:{opacity:1},entered:{opacity:1}},Qk=A.forwardRef(function(e,n){const r=dd(),i={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{addEndListener:s,appear:o=!0,children:a,easing:l,in:c,onEnter:u,onEntered:d,onEntering:f,onExit:h,onExited:p,onExiting:g,style:w,timeout:v=i,TransitionComponent:m=xr}=e,y=ue(e,AP),b=A.useRef(null),x=Kt(b,a.ref,n),I=L=>$=>{if(L){const H=b.current;$===void 0?L(H):L(H,$)}},k=I(f),S=I((L,$)=>{Xk(L);const H=Zl({style:w,timeout:v,easing:l},{mode:"enter"});L.style.webkitTransition=r.transitions.create("opacity",H),L.style.transition=r.transitions.create("opacity",H),u&&u(L,$)}),P=I(d),R=I(g),B=I(L=>{const $=Zl({style:w,timeout:v,easing:l},{mode:"exit"});L.style.webkitTransition=r.transitions.create("opacity",$),L.style.transition=r.transitions.create("opacity",$),h&&h(L)}),T=I(p),N=L=>{s&&s(b.current,L)};return F.jsx(m,O({appear:o,in:c,nodeRef:b,onEnter:S,onEntered:P,onEntering:k,onExit:B,onExited:T,onExiting:R,addEndListener:N,timeout:v},y,{children:(L,$)=>A.cloneElement(a,O({style:O({opacity:0,visibility:L==="exited"&&!c?"hidden":void 0},NP[L],w,a.props.style),ref:x},$))}))});function CP(t){return Te("MuiBackdrop",t)}Ie("MuiBackdrop",["root","invisible"]);const MP=["children","className","component","components","componentsProps","invisible","open","slotProps","slots","TransitionComponent","transitionDuration"],BP=t=>{const{classes:e,invisible:n}=t;return Re({root:["root",n&&"invisible"]},CP,e)},LP=ae("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.invisible&&e.invisible]}})(({ownerState:t})=>O({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},t.invisible&&{backgroundColor:"transparent"})),Jk=A.forwardRef(function(e,n){var r,i,s;const o=_e({props:e,name:"MuiBackdrop"}),{children:a,className:l,component:c="div",components:u={},componentsProps:d={},invisible:f=!1,open:h,slotProps:p={},slots:g={},TransitionComponent:w=Qk,transitionDuration:v}=o,m=ue(o,MP),y=O({},o,{component:c,invisible:f}),b=BP(y),x=(r=p.root)!=null?r:d.root;return F.jsx(w,O({in:h,timeout:v},m,{children:F.jsx(LP,O({"aria-hidden":!0},x,{as:(i=(s=g.root)!=null?s:u.Root)!=null?i:c,className:de(b.root,l,x==null?void 0:x.className),ownerState:O({},y,x==null?void 0:x.ownerState),classes:b,ref:n,children:a}))}))}),DP=Ie("MuiBox",["root"]),FP=Ng(),$P=I3({themeId:Vs,defaultTheme:FP,defaultClassName:DP.root,generateClassName:Eg.generate});function WP(t){return Te("MuiButton",t)}const Wc=Ie("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]),VP=A.createContext({}),UP=A.createContext(void 0),HP=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"],qP=t=>{const{color:e,disableElevation:n,fullWidth:r,size:i,variant:s,classes:o}=t,a={root:["root",s,`${s}${ce(e)}`,`size${ce(i)}`,`${s}Size${ce(i)}`,`color${ce(e)}`,n&&"disableElevation",r&&"fullWidth"],label:["label"],startIcon:["icon","startIcon",`iconSize${ce(i)}`],endIcon:["icon","endIcon",`iconSize${ce(i)}`]},l=Re(a,WP,o);return O({},o,l)},Zk=t=>O({},t.size==="small"&&{"& > *:nth-of-type(1)":{fontSize:18}},t.size==="medium"&&{"& > *:nth-of-type(1)":{fontSize:20}},t.size==="large"&&{"& > *:nth-of-type(1)":{fontSize:22}}),jP=ae(dc,{shouldForwardProp:t=>en(t)||t==="classes",name:"MuiButton",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],e[`${n.variant}${ce(n.color)}`],e[`size${ce(n.size)}`],e[`${n.variant}Size${ce(n.size)}`],n.color==="inherit"&&e.colorInherit,n.disableElevation&&e.disableElevation,n.fullWidth&&e.fullWidth]}})(({theme:t,ownerState:e})=>{var n,r;const i=t.palette.mode==="light"?t.palette.grey[300]:t.palette.grey[800],s=t.palette.mode==="light"?t.palette.grey.A100:t.palette.grey[700];return O({},t.typography.button,{minWidth:64,padding:"6px 16px",borderRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create(["background-color","box-shadow","border-color","color"],{duration:t.transitions.duration.short}),"&:hover":O({textDecoration:"none",backgroundColor:t.vars?`rgba(${t.vars.palette.text.primaryChannel} / ${t.vars.palette.action.hoverOpacity})`:mn(t.palette.text.primary,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},e.variant==="text"&&e.color!=="inherit"&&{backgroundColor:t.vars?`rgba(${t.vars.palette[e.color].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:mn(t.palette[e.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},e.variant==="outlined"&&e.color!=="inherit"&&{border:`1px solid ${(t.vars||t).palette[e.color].main}`,backgroundColor:t.vars?`rgba(${t.vars.palette[e.color].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:mn(t.palette[e.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},e.variant==="contained"&&{backgroundColor:t.vars?t.vars.palette.Button.inheritContainedHoverBg:s,boxShadow:(t.vars||t).shadows[4],"@media (hover: none)":{boxShadow:(t.vars||t).shadows[2],backgroundColor:(t.vars||t).palette.grey[300]}},e.variant==="contained"&&e.color!=="inherit"&&{backgroundColor:(t.vars||t).palette[e.color].dark,"@media (hover: none)":{backgroundColor:(t.vars||t).palette[e.color].main}}),"&:active":O({},e.variant==="contained"&&{boxShadow:(t.vars||t).shadows[8]}),[`&.${Wc.focusVisible}`]:O({},e.variant==="contained"&&{boxShadow:(t.vars||t).shadows[6]}),[`&.${Wc.disabled}`]:O({color:(t.vars||t).palette.action.disabled},e.variant==="outlined"&&{border:`1px solid ${(t.vars||t).palette.action.disabledBackground}`},e.variant==="contained"&&{color:(t.vars||t).palette.action.disabled,boxShadow:(t.vars||t).shadows[0],backgroundColor:(t.vars||t).palette.action.disabledBackground})},e.variant==="text"&&{padding:"6px 8px"},e.variant==="text"&&e.color!=="inherit"&&{color:(t.vars||t).palette[e.color].main},e.variant==="outlined"&&{padding:"5px 15px",border:"1px solid currentColor"},e.variant==="outlined"&&e.color!=="inherit"&&{color:(t.vars||t).palette[e.color].main,border:t.vars?`1px solid rgba(${t.vars.palette[e.color].mainChannel} / 0.5)`:`1px solid ${mn(t.palette[e.color].main,.5)}`},e.variant==="contained"&&{color:t.vars?t.vars.palette.text.primary:(n=(r=t.palette).getContrastText)==null?void 0:n.call(r,t.palette.grey[300]),backgroundColor:t.vars?t.vars.palette.Button.inheritContainedBg:i,boxShadow:(t.vars||t).shadows[2]},e.variant==="contained"&&e.color!=="inherit"&&{color:(t.vars||t).palette[e.color].contrastText,backgroundColor:(t.vars||t).palette[e.color].main},e.color==="inherit"&&{color:"inherit",borderColor:"currentColor"},e.size==="small"&&e.variant==="text"&&{padding:"4px 5px",fontSize:t.typography.pxToRem(13)},e.size==="large"&&e.variant==="text"&&{padding:"8px 11px",fontSize:t.typography.pxToRem(15)},e.size==="small"&&e.variant==="outlined"&&{padding:"3px 9px",fontSize:t.typography.pxToRem(13)},e.size==="large"&&e.variant==="outlined"&&{padding:"7px 21px",fontSize:t.typography.pxToRem(15)},e.size==="small"&&e.variant==="contained"&&{padding:"4px 10px",fontSize:t.typography.pxToRem(13)},e.size==="large"&&e.variant==="contained"&&{padding:"8px 22px",fontSize:t.typography.pxToRem(15)},e.fullWidth&&{width:"100%"})},({ownerState:t})=>t.disableElevation&&{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${Wc.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${Wc.disabled}`]:{boxShadow:"none"}}),KP=ae("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.startIcon,e[`iconSize${ce(n.size)}`]]}})(({ownerState:t})=>O({display:"inherit",marginRight:8,marginLeft:-4},t.size==="small"&&{marginLeft:-2},Zk(t))),zP=ae("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.endIcon,e[`iconSize${ce(n.size)}`]]}})(({ownerState:t})=>O({display:"inherit",marginRight:-4,marginLeft:8},t.size==="small"&&{marginRight:-2},Zk(t))),Vc=A.forwardRef(function(e,n){const r=A.useContext(VP),i=A.useContext(UP),s=Gl(r,e),o=_e({props:s,name:"MuiButton"}),{children:a,color:l="primary",component:c="button",className:u,disabled:d=!1,disableElevation:f=!1,disableFocusRipple:h=!1,endIcon:p,focusVisibleClassName:g,fullWidth:w=!1,size:v="medium",startIcon:m,type:y,variant:b="text"}=o,x=ue(o,HP),I=O({},o,{color:l,component:c,disabled:d,disableElevation:f,disableFocusRipple:h,fullWidth:w,size:v,type:y,variant:b}),k=qP(I),S=m&&F.jsx(KP,{className:k.startIcon,ownerState:I,children:m}),P=p&&F.jsx(zP,{className:k.endIcon,ownerState:I,children:p}),R=i||"";return F.jsxs(jP,O({ownerState:I,className:de(r.className,k.root,u,R),component:c,disabled:d,focusRipple:!h,focusVisibleClassName:de(k.focusVisible,g),ref:n,type:y},x,{classes:k,children:[S,a,P]}))});function GP(t){return Te("PrivateSwitchBase",t)}Ie("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const XP=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],YP=t=>{const{classes:e,checked:n,disabled:r,edge:i}=t,s={root:["root",n&&"checked",r&&"disabled",i&&`edge${ce(i)}`],input:["input"]};return Re(s,GP,e)},QP=ae(dc)(({ownerState:t})=>O({padding:9,borderRadius:"50%"},t.edge==="start"&&{marginLeft:t.size==="small"?-3:-12},t.edge==="end"&&{marginRight:t.size==="small"?-3:-12})),JP=ae("input",{shouldForwardProp:en})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),ZP=A.forwardRef(function(e,n){const{autoFocus:r,checked:i,checkedIcon:s,className:o,defaultChecked:a,disabled:l,disableFocusRipple:c=!1,edge:u=!1,icon:d,id:f,inputProps:h,inputRef:p,name:g,onBlur:w,onChange:v,onFocus:m,readOnly:y,required:b=!1,tabIndex:x,type:I,value:k}=e,S=ue(e,XP),[P,R]=Yl({controlled:i,default:!!a,name:"SwitchBase",state:"checked"}),B=zi(),T=V=>{m&&m(V),B&&B.onFocus&&B.onFocus(V)},N=V=>{w&&w(V),B&&B.onBlur&&B.onBlur(V)},L=V=>{if(V.nativeEvent.defaultPrevented)return;const q=V.target.checked;R(q),v&&v(V,q)};let $=l;B&&typeof $>"u"&&($=B.disabled);const H=I==="checkbox"||I==="radio",W=O({},e,{checked:P,disabled:$,disableFocusRipple:c,edge:u}),C=YP(W);return F.jsxs(QP,O({component:"span",className:de(C.root,o),centerRipple:!0,focusRipple:!c,disabled:$,tabIndex:null,role:void 0,onFocus:T,onBlur:N,ownerState:W,ref:n},S,{children:[F.jsx(JP,O({autoFocus:r,checked:i,defaultChecked:a,className:C.input,disabled:$,id:H?f:void 0,name:g,onChange:L,readOnly:y,ref:p,required:b,ownerState:W,tabIndex:x,type:I},I==="checkbox"&&k===void 0?{}:{value:k},h)),P?s:d]}))}),e8=uc(F.jsx("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),t8=uc(F.jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),n8=uc(F.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");function r8(t){return Te("MuiCheckbox",t)}const nh=Ie("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),i8=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],s8=t=>{const{classes:e,indeterminate:n,color:r,size:i}=t,s={root:["root",n&&"indeterminate",`color${ce(r)}`,`size${ce(i)}`]},o=Re(s,r8,e);return O({},e,o)},o8=ae(ZP,{shouldForwardProp:t=>en(t)||t==="classes",name:"MuiCheckbox",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.indeterminate&&e.indeterminate,e[`size${ce(n.size)}`],n.color!=="default"&&e[`color${ce(n.color)}`]]}})(({theme:t,ownerState:e})=>O({color:(t.vars||t).palette.text.secondary},!e.disableRipple&&{"&:hover":{backgroundColor:t.vars?`rgba(${e.color==="default"?t.vars.palette.action.activeChannel:t.vars.palette[e.color].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:mn(e.color==="default"?t.palette.action.active:t.palette[e.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},e.color!=="default"&&{[`&.${nh.checked}, &.${nh.indeterminate}`]:{color:(t.vars||t).palette[e.color].main},[`&.${nh.disabled}`]:{color:(t.vars||t).palette.action.disabled}})),a8=F.jsx(t8,{}),c8=F.jsx(e8,{}),l8=F.jsx(n8,{}),u8=A.forwardRef(function(e,n){var r,i;const s=_e({props:e,name:"MuiCheckbox"}),{checkedIcon:o=a8,color:a="primary",icon:l=c8,indeterminate:c=!1,indeterminateIcon:u=l8,inputProps:d,size:f="medium",className:h}=s,p=ue(s,i8),g=c?u:l,w=c?u:o,v=O({},s,{color:a,indeterminate:c,size:f}),m=s8(v);return F.jsx(o8,O({type:"checkbox",inputProps:O({"data-indeterminate":c},d),icon:A.cloneElement(g,{fontSize:(r=g.props.fontSize)!=null?r:f}),checkedIcon:A.cloneElement(w,{fontSize:(i=w.props.fontSize)!=null?i:f}),ownerState:v,ref:n,className:de(m.root,h)},p,{classes:m}))}),d8=(t,e)=>O({WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",boxSizing:"border-box",WebkitTextSizeAdjust:"100%"},e&&!t.vars&&{colorScheme:t.palette.mode}),f8=t=>O({color:(t.vars||t).palette.text.primary},t.typography.body1,{backgroundColor:(t.vars||t).palette.background.default,"@media print":{backgroundColor:(t.vars||t).palette.common.white}}),h8=(t,e=!1)=>{var n;const r={};e&&t.colorSchemes&&Object.entries(t.colorSchemes).forEach(([o,a])=>{var l;r[t.getColorSchemeSelector(o).replace(/\s*&/,"")]={colorScheme:(l=a.palette)==null?void 0:l.mode}});let i=O({html:d8(t,e),"*, *::before, *::after":{boxSizing:"inherit"},"strong, b":{fontWeight:t.typography.fontWeightBold},body:O({margin:0},f8(t),{"&::backdrop":{backgroundColor:(t.vars||t).palette.background.default}})},r);const s=(n=t.components)==null||(n=n.MuiCssBaseline)==null?void 0:n.styleOverrides;return s&&(i=[i,s]),i};function p8(t){const e=_e({props:t,name:"MuiCssBaseline"}),{children:n,enableColorScheme:r=!1}=e;return F.jsxs(A.Fragment,{children:[F.jsx(Yk,{styles:i=>h8(i,r)}),n]})}function g8(t){const e=ln(t);return e.body===t?ci(t).innerWidth>e.documentElement.clientWidth:t.scrollHeight>t.clientHeight}function ya(t,e){e?t.setAttribute("aria-hidden","true"):t.removeAttribute("aria-hidden")}function wv(t){return parseInt(ci(t).getComputedStyle(t).paddingRight,10)||0}function m8(t){const n=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].indexOf(t.tagName)!==-1,r=t.tagName==="INPUT"&&t.getAttribute("type")==="hidden";return n||r}function bv(t,e,n,r,i){const s=[e,n,...r];[].forEach.call(t.children,o=>{const a=s.indexOf(o)===-1,l=!m8(o);a&&l&&ya(o,i)})}function rh(t,e){let n=-1;return t.some((r,i)=>e(r)?(n=i,!0):!1),n}function y8(t,e){const n=[],r=t.container;if(!e.disableScrollLock){if(g8(r)){const o=Pk(ln(r));n.push({value:r.style.paddingRight,property:"padding-right",el:r}),r.style.paddingRight=`${wv(r)+o}px`;const a=ln(r).querySelectorAll(".mui-fixed");[].forEach.call(a,l=>{n.push({value:l.style.paddingRight,property:"padding-right",el:l}),l.style.paddingRight=`${wv(l)+o}px`})}let s;if(r.parentNode instanceof DocumentFragment)s=ln(r).body;else{const o=r.parentElement,a=ci(r);s=(o==null?void 0:o.nodeName)==="HTML"&&a.getComputedStyle(o).overflowY==="scroll"?o:r}n.push({value:s.style.overflow,property:"overflow",el:s},{value:s.style.overflowX,property:"overflow-x",el:s},{value:s.style.overflowY,property:"overflow-y",el:s}),s.style.overflow="hidden"}return()=>{n.forEach(({value:s,el:o,property:a})=>{s?o.style.setProperty(a,s):o.style.removeProperty(a)})}}function v8(t){const e=[];return[].forEach.call(t.children,n=>{n.getAttribute("aria-hidden")==="true"&&e.push(n)}),e}class w8{constructor(){this.containers=void 0,this.modals=void 0,this.modals=[],this.containers=[]}add(e,n){let r=this.modals.indexOf(e);if(r!==-1)return r;r=this.modals.length,this.modals.push(e),e.modalRef&&ya(e.modalRef,!1);const i=v8(n);bv(n,e.mount,e.modalRef,i,!0);const s=rh(this.containers,o=>o.container===n);return s!==-1?(this.containers[s].modals.push(e),r):(this.containers.push({modals:[e],container:n,restore:null,hiddenSiblings:i}),r)}mount(e,n){const r=rh(this.containers,s=>s.modals.indexOf(e)!==-1),i=this.containers[r];i.restore||(i.restore=y8(i,n))}remove(e,n=!0){const r=this.modals.indexOf(e);if(r===-1)return r;const i=rh(this.containers,o=>o.modals.indexOf(e)!==-1),s=this.containers[i];if(s.modals.splice(s.modals.indexOf(e),1),this.modals.splice(r,1),s.modals.length===0)s.restore&&s.restore(),e.modalRef&&ya(e.modalRef,n),bv(s.container,e.mount,e.modalRef,s.hiddenSiblings,!1),this.containers.splice(i,1);else{const o=s.modals[s.modals.length-1];o.modalRef&&ya(o.modalRef,!1)}return r}isTopModal(e){return this.modals.length>0&&this.modals[this.modals.length-1]===e}}const b8=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function x8(t){const e=parseInt(t.getAttribute("tabindex")||"",10);return Number.isNaN(e)?t.contentEditable==="true"||(t.nodeName==="AUDIO"||t.nodeName==="VIDEO"||t.nodeName==="DETAILS")&&t.getAttribute("tabindex")===null?0:t.tabIndex:e}function k8(t){if(t.tagName!=="INPUT"||t.type!=="radio"||!t.name)return!1;const e=r=>t.ownerDocument.querySelector(`input[type="radio"]${r}`);let n=e(`[name="${t.name}"]:checked`);return n||(n=e(`[name="${t.name}"]`)),n!==t}function I8(t){return!(t.disabled||t.tagName==="INPUT"&&t.type==="hidden"||k8(t))}function S8(t){const e=[],n=[];return Array.from(t.querySelectorAll(b8)).forEach((r,i)=>{const s=x8(r);s===-1||!I8(r)||(s===0?e.push(r):n.push({documentOrder:i,tabIndex:s,node:r}))}),n.sort((r,i)=>r.tabIndex===i.tabIndex?r.documentOrder-i.documentOrder:r.tabIndex-i.tabIndex).map(r=>r.node).concat(e)}function E8(){return!0}function T8(t){const{children:e,disableAutoFocus:n=!1,disableEnforceFocus:r=!1,disableRestoreFocus:i=!1,getTabbable:s=S8,isEnabled:o=E8,open:a}=t,l=A.useRef(!1),c=A.useRef(null),u=A.useRef(null),d=A.useRef(null),f=A.useRef(null),h=A.useRef(!1),p=A.useRef(null),g=Kt(e.ref,p),w=A.useRef(null);A.useEffect(()=>{!a||!p.current||(h.current=!n)},[n,a]),A.useEffect(()=>{if(!a||!p.current)return;const y=ln(p.current);return p.current.contains(y.activeElement)||(p.current.hasAttribute("tabIndex")||p.current.setAttribute("tabIndex","-1"),h.current&&p.current.focus()),()=>{i||(d.current&&d.current.focus&&(l.current=!0,d.current.focus()),d.current=null)}},[a]),A.useEffect(()=>{if(!a||!p.current)return;const y=ln(p.current),b=k=>{w.current=k,!(r||!o()||k.key!=="Tab")&&y.activeElement===p.current&&k.shiftKey&&(l.current=!0,u.current&&u.current.focus())},x=()=>{const k=p.current;if(k===null)return;if(!y.hasFocus()||!o()||l.current){l.current=!1;return}if(k.contains(y.activeElement)||r&&y.activeElement!==c.current&&y.activeElement!==u.current)return;if(y.activeElement!==f.current)f.current=null;else if(f.current!==null)return;if(!h.current)return;let S=[];if((y.activeElement===c.current||y.activeElement===u.current)&&(S=s(p.current)),S.length>0){var P,R;const B=!!((P=w.current)!=null&&P.shiftKey&&((R=w.current)==null?void 0:R.key)==="Tab"),T=S[0],N=S[S.length-1];typeof T!="string"&&typeof N!="string"&&(B?N.focus():T.focus())}else k.focus()};y.addEventListener("focusin",x),y.addEventListener("keydown",b,!0);const I=setInterval(()=>{y.activeElement&&y.activeElement.tagName==="BODY"&&x()},50);return()=>{clearInterval(I),y.removeEventListener("focusin",x),y.removeEventListener("keydown",b,!0)}},[n,r,i,o,a,s]);const v=y=>{d.current===null&&(d.current=y.relatedTarget),h.current=!0,f.current=y.target;const b=e.props.onFocus;b&&b(y)},m=y=>{d.current===null&&(d.current=y.relatedTarget),h.current=!0};return F.jsxs(A.Fragment,{children:[F.jsx("div",{tabIndex:a?0:-1,onFocus:m,ref:c,"data-testid":"sentinelStart"}),A.cloneElement(e,{ref:g,onFocus:v}),F.jsx("div",{tabIndex:a?0:-1,onFocus:m,ref:u,"data-testid":"sentinelEnd"})]})}function R8(t){return typeof t=="function"?t():t}function _8(t){return t?t.props.hasOwnProperty("in"):!1}const P8=new w8;function O8(t){const{container:e,disableEscapeKeyDown:n=!1,disableScrollLock:r=!1,manager:i=P8,closeAfterTransition:s=!1,onTransitionEnter:o,onTransitionExited:a,children:l,onClose:c,open:u,rootRef:d}=t,f=A.useRef({}),h=A.useRef(null),p=A.useRef(null),g=Kt(p,d),[w,v]=A.useState(!u),m=_8(l);let y=!0;(t["aria-hidden"]==="false"||t["aria-hidden"]===!1)&&(y=!1);const b=()=>ln(h.current),x=()=>(f.current.modalRef=p.current,f.current.mount=h.current,f.current),I=()=>{i.mount(x(),{disableScrollLock:r}),p.current&&(p.current.scrollTop=0)},k=Ei(()=>{const H=R8(e)||b().body;i.add(x(),H),p.current&&I()}),S=A.useCallback(()=>i.isTopModal(x()),[i]),P=Ei(H=>{h.current=H,H&&(u&&S()?I():p.current&&ya(p.current,y))}),R=A.useCallback(()=>{i.remove(x(),y)},[y,i]);A.useEffect(()=>()=>{R()},[R]),A.useEffect(()=>{u?k():(!m||!s)&&R()},[u,R,m,s,k]);const B=H=>W=>{var C;(C=H.onKeyDown)==null||C.call(H,W),!(W.key!=="Escape"||W.which===229||!S())&&(n||(W.stopPropagation(),c&&c(W,"escapeKeyDown")))},T=H=>W=>{var C;(C=H.onClick)==null||C.call(H,W),W.target===W.currentTarget&&c&&c(W,"backdropClick")};return{getRootProps:(H={})=>{const W=Ok(t);delete W.onTransitionEnter,delete W.onTransitionExited;const C=O({},W,H);return O({role:"presentation"},C,{onKeyDown:B(C),ref:g})},getBackdropProps:(H={})=>{const W=H;return O({"aria-hidden":!0},W,{onClick:T(W),open:u})},getTransitionProps:()=>{const H=()=>{v(!1),o&&o()},W=()=>{v(!0),a&&a(),s&&R()};return{onEnter:Lp(H,l==null?void 0:l.props.onEnter),onExited:Lp(W,l==null?void 0:l.props.onExited)}},rootRef:g,portalRef:P,isTopModal:S,exited:w,hasTransition:m}}function A8(t){return Te("MuiModal",t)}Ie("MuiModal",["root","hidden","backdrop"]);const N8=["BackdropComponent","BackdropProps","classes","className","closeAfterTransition","children","container","component","components","componentsProps","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","onBackdropClick","onClose","onTransitionEnter","onTransitionExited","open","slotProps","slots","theme"],C8=t=>{const{open:e,exited:n,classes:r}=t;return Re({root:["root",!e&&n&&"hidden"],backdrop:["backdrop"]},A8,r)},M8=ae("div",{name:"MuiModal",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.open&&n.exited&&e.hidden]}})(({theme:t,ownerState:e})=>O({position:"fixed",zIndex:(t.vars||t).zIndex.modal,right:0,bottom:0,top:0,left:0},!e.open&&e.exited&&{visibility:"hidden"})),B8=ae(Jk,{name:"MuiModal",slot:"Backdrop",overridesResolver:(t,e)=>e.backdrop})({zIndex:-1}),Wg=A.forwardRef(function(e,n){var r,i,s,o,a,l;const c=_e({name:"MuiModal",props:e}),{BackdropComponent:u=B8,BackdropProps:d,className:f,closeAfterTransition:h=!1,children:p,container:g,component:w,components:v={},componentsProps:m={},disableAutoFocus:y=!1,disableEnforceFocus:b=!1,disableEscapeKeyDown:x=!1,disablePortal:I=!1,disableRestoreFocus:k=!1,disableScrollLock:S=!1,hideBackdrop:P=!1,keepMounted:R=!1,onBackdropClick:B,open:T,slotProps:N,slots:L}=c,$=ue(c,N8),H=O({},c,{closeAfterTransition:h,disableAutoFocus:y,disableEnforceFocus:b,disableEscapeKeyDown:x,disablePortal:I,disableRestoreFocus:k,disableScrollLock:S,hideBackdrop:P,keepMounted:R}),{getRootProps:W,getBackdropProps:C,getTransitionProps:V,portalRef:q,isTopModal:G,exited:Y,hasTransition:z}=O8(O({},H,{rootRef:n})),K=O({},H,{exited:Y}),oe=C8(K),te={};if(p.props.tabIndex===void 0&&(te.tabIndex="-1"),z){const{onEnter:he,onExited:Be}=V();te.onEnter=he,te.onExited=Be}const J=(r=(i=L==null?void 0:L.root)!=null?i:v.Root)!=null?r:M8,X=(s=(o=L==null?void 0:L.backdrop)!=null?o:v.Backdrop)!=null?s:u,ie=(a=N==null?void 0:N.root)!=null?a:m.root,ge=(l=N==null?void 0:N.backdrop)!=null?l:m.backdrop,ke=qs({elementType:J,externalSlotProps:ie,externalForwardedProps:$,getSlotProps:W,additionalProps:{ref:n,as:w},ownerState:K,className:de(f,ie==null?void 0:ie.className,oe==null?void 0:oe.root,!K.open&&K.exited&&(oe==null?void 0:oe.hidden))}),me=qs({elementType:X,externalSlotProps:ge,additionalProps:d,getSlotProps:he=>C(O({},he,{onClick:Be=>{B&&B(Be),he!=null&&he.onClick&&he.onClick(Be)}})),className:de(ge==null?void 0:ge.className,d==null?void 0:d.className,oe==null?void 0:oe.backdrop),ownerState:K});return!R&&!T&&(!z||Y)?null:F.jsx(yP,{ref:q,container:g,disablePortal:I,children:F.jsxs(J,O({},ke,{children:[!P&&u?F.jsx(X,O({},me)):null,F.jsx(T8,{disableEnforceFocus:b,disableAutoFocus:y,disableRestoreFocus:k,isEnabled:G,open:T,children:A.cloneElement(p,te)})]}))})});function L8(t){return Te("MuiDialog",t)}const ih=Ie("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]),eI=A.createContext({}),D8=["aria-describedby","aria-labelledby","BackdropComponent","BackdropProps","children","className","disableEscapeKeyDown","fullScreen","fullWidth","maxWidth","onBackdropClick","onClick","onClose","open","PaperComponent","PaperProps","scroll","TransitionComponent","transitionDuration","TransitionProps"],F8=ae(Jk,{name:"MuiDialog",slot:"Backdrop",overrides:(t,e)=>e.backdrop})({zIndex:-1}),$8=t=>{const{classes:e,scroll:n,maxWidth:r,fullWidth:i,fullScreen:s}=t,o={root:["root"],container:["container",`scroll${ce(n)}`],paper:["paper",`paperScroll${ce(n)}`,`paperWidth${ce(String(r))}`,i&&"paperFullWidth",s&&"paperFullScreen"]};return Re(o,L8,e)},W8=ae(Wg,{name:"MuiDialog",slot:"Root",overridesResolver:(t,e)=>e.root})({"@media print":{position:"absolute !important"}}),V8=ae("div",{name:"MuiDialog",slot:"Container",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.container,e[`scroll${ce(n.scroll)}`]]}})(({ownerState:t})=>O({height:"100%","@media print":{height:"auto"},outline:0},t.scroll==="paper"&&{display:"flex",justifyContent:"center",alignItems:"center"},t.scroll==="body"&&{overflowY:"auto",overflowX:"hidden",textAlign:"center","&::after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}})),U8=ae(kd,{name:"MuiDialog",slot:"Paper",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.paper,e[`scrollPaper${ce(n.scroll)}`],e[`paperWidth${ce(String(n.maxWidth))}`],n.fullWidth&&e.paperFullWidth,n.fullScreen&&e.paperFullScreen]}})(({theme:t,ownerState:e})=>O({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"}},e.scroll==="paper"&&{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"},e.scroll==="body"&&{display:"inline-block",verticalAlign:"middle",textAlign:"left"},!e.maxWidth&&{maxWidth:"calc(100% - 64px)"},e.maxWidth==="xs"&&{maxWidth:t.breakpoints.unit==="px"?Math.max(t.breakpoints.values.xs,444):`max(${t.breakpoints.values.xs}${t.breakpoints.unit}, 444px)`,[`&.${ih.paperScrollBody}`]:{[t.breakpoints.down(Math.max(t.breakpoints.values.xs,444)+32*2)]:{maxWidth:"calc(100% - 64px)"}}},e.maxWidth&&e.maxWidth!=="xs"&&{maxWidth:`${t.breakpoints.values[e.maxWidth]}${t.breakpoints.unit}`,[`&.${ih.paperScrollBody}`]:{[t.breakpoints.down(t.breakpoints.values[e.maxWidth]+32*2)]:{maxWidth:"calc(100% - 64px)"}}},e.fullWidth&&{width:"calc(100% - 64px)"},e.fullScreen&&{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${ih.paperScrollBody}`]:{margin:0,maxWidth:"100%"}})),xv=A.forwardRef(function(e,n){const r=_e({props:e,name:"MuiDialog"}),i=dd(),s={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{"aria-describedby":o,"aria-labelledby":a,BackdropComponent:l,BackdropProps:c,children:u,className:d,disableEscapeKeyDown:f=!1,fullScreen:h=!1,fullWidth:p=!1,maxWidth:g="sm",onBackdropClick:w,onClick:v,onClose:m,open:y,PaperComponent:b=kd,PaperProps:x={},scroll:I="paper",TransitionComponent:k=Qk,transitionDuration:S=s,TransitionProps:P}=r,R=ue(r,D8),B=O({},r,{disableEscapeKeyDown:f,fullScreen:h,fullWidth:p,maxWidth:g,scroll:I}),T=$8(B),N=A.useRef(),L=C=>{N.current=C.target===C.currentTarget},$=C=>{v&&v(C),N.current&&(N.current=null,w&&w(C),m&&m(C,"backdropClick"))},H=ad(a),W=A.useMemo(()=>({titleId:H}),[H]);return F.jsx(W8,O({className:de(T.root,d),closeAfterTransition:!0,components:{Backdrop:F8},componentsProps:{backdrop:O({transitionDuration:S,as:l},c)},disableEscapeKeyDown:f,onClose:m,open:y,ref:n,onClick:$,ownerState:B},R,{children:F.jsx(k,O({appear:!0,in:y,timeout:S,role:"presentation"},P,{children:F.jsx(V8,{className:de(T.container),onMouseDown:L,ownerState:B,children:F.jsx(U8,O({as:b,elevation:24,role:"dialog","aria-describedby":o,"aria-labelledby":H},x,{className:de(T.paper,x.className),ownerState:B,children:F.jsx(eI.Provider,{value:W,children:u})}))})}))}))});function H8(t){return Te("MuiDialogActions",t)}Ie("MuiDialogActions",["root","spacing"]);const q8=["className","disableSpacing"],j8=t=>{const{classes:e,disableSpacing:n}=t;return Re({root:["root",!n&&"spacing"]},H8,e)},K8=ae("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.disableSpacing&&e.spacing]}})(({ownerState:t})=>O({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto"},!t.disableSpacing&&{"& > :not(style) ~ :not(style)":{marginLeft:8}})),kv=A.forwardRef(function(e,n){const r=_e({props:e,name:"MuiDialogActions"}),{className:i,disableSpacing:s=!1}=r,o=ue(r,q8),a=O({},r,{disableSpacing:s}),l=j8(a);return F.jsx(K8,O({className:de(l.root,i),ownerState:a,ref:n},o))});function z8(t){return Te("MuiDialogContent",t)}Ie("MuiDialogContent",["root","dividers"]);function G8(t){return Te("MuiDialogTitle",t)}const X8=Ie("MuiDialogTitle",["root"]),Y8=["className","dividers"],Q8=t=>{const{classes:e,dividers:n}=t;return Re({root:["root",n&&"dividers"]},z8,e)},J8=ae("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.dividers&&e.dividers]}})(({theme:t,ownerState:e})=>O({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px"},e.dividers?{padding:"16px 24px",borderTop:`1px solid ${(t.vars||t).palette.divider}`,borderBottom:`1px solid ${(t.vars||t).palette.divider}`}:{[`.${X8.root} + &`]:{paddingTop:0}})),Iv=A.forwardRef(function(e,n){const r=_e({props:e,name:"MuiDialogContent"}),{className:i,dividers:s=!1}=r,o=ue(r,Y8),a=O({},r,{dividers:s}),l=Q8(a);return F.jsx(J8,O({className:de(l.root,i),ownerState:a,ref:n},o))});function Z8(t){return Te("MuiDialogContentText",t)}Ie("MuiDialogContentText",["root"]);const e6=["children","className"],t6=t=>{const{classes:e}=t,r=Re({root:["root"]},Z8,e);return O({},e,r)},n6=ae(Jn,{shouldForwardProp:t=>en(t)||t==="classes",name:"MuiDialogContentText",slot:"Root",overridesResolver:(t,e)=>e.root})({}),Sv=A.forwardRef(function(e,n){const r=_e({props:e,name:"MuiDialogContentText"}),{className:i}=r,s=ue(r,e6),o=t6(s);return F.jsx(n6,O({component:"p",variant:"body1",color:"text.secondary",ref:n,ownerState:s,className:de(o.root,i)},r,{classes:o}))}),r6=["className","id"],i6=t=>{const{classes:e}=t;return Re({root:["root"]},G8,e)},s6=ae(Jn,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(t,e)=>e.root})({padding:"16px 24px",flex:"0 0 auto"}),Ev=A.forwardRef(function(e,n){const r=_e({props:e,name:"MuiDialogTitle"}),{className:i,id:s}=r,o=ue(r,r6),a=r,l=i6(a),{titleId:c=s}=A.useContext(eI);return F.jsx(s6,O({component:"h2",className:de(l.root,i),ownerState:a,ref:n,variant:"h6",id:s??c},o))});function o6(t){return Te("MuiFab",t)}const Tv=Ie("MuiFab",["root","primary","secondary","extended","circular","focusVisible","disabled","colorInherit","sizeSmall","sizeMedium","sizeLarge","info","error","warning","success"]),a6=["children","className","color","component","disabled","disableFocusRipple","focusVisibleClassName","size","variant"],c6=t=>{const{color:e,variant:n,classes:r,size:i}=t,s={root:["root",n,`size${ce(i)}`,e==="inherit"?"colorInherit":e]},o=Re(s,o6,r);return O({},r,o)},l6=ae(dc,{name:"MuiFab",slot:"Root",shouldForwardProp:t=>en(t)||t==="classes",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],e[`size${ce(n.size)}`],n.color==="inherit"&&e.colorInherit,e[ce(n.size)],e[n.color]]}})(({theme:t,ownerState:e})=>{var n,r;return O({},t.typography.button,{minHeight:36,transition:t.transitions.create(["background-color","box-shadow","border-color"],{duration:t.transitions.duration.short}),borderRadius:"50%",padding:0,minWidth:0,width:56,height:56,zIndex:(t.vars||t).zIndex.fab,boxShadow:(t.vars||t).shadows[6],"&:active":{boxShadow:(t.vars||t).shadows[12]},color:t.vars?t.vars.palette.text.primary:(n=(r=t.palette).getContrastText)==null?void 0:n.call(r,t.palette.grey[300]),backgroundColor:(t.vars||t).palette.grey[300],"&:hover":{backgroundColor:(t.vars||t).palette.grey.A100,"@media (hover: none)":{backgroundColor:(t.vars||t).palette.grey[300]},textDecoration:"none"},[`&.${Tv.focusVisible}`]:{boxShadow:(t.vars||t).shadows[6]}},e.size==="small"&&{width:40,height:40},e.size==="medium"&&{width:48,height:48},e.variant==="extended"&&{borderRadius:48/2,padding:"0 16px",width:"auto",minHeight:"auto",minWidth:48,height:48},e.variant==="extended"&&e.size==="small"&&{width:"auto",padding:"0 8px",borderRadius:34/2,minWidth:34,height:34},e.variant==="extended"&&e.size==="medium"&&{width:"auto",padding:"0 16px",borderRadius:40/2,minWidth:40,height:40},e.color==="inherit"&&{color:"inherit"})},({theme:t,ownerState:e})=>O({},e.color!=="inherit"&&e.color!=="default"&&(t.vars||t).palette[e.color]!=null&&{color:(t.vars||t).palette[e.color].contrastText,backgroundColor:(t.vars||t).palette[e.color].main,"&:hover":{backgroundColor:(t.vars||t).palette[e.color].dark,"@media (hover: none)":{backgroundColor:(t.vars||t).palette[e.color].main}}}),({theme:t})=>({[`&.${Tv.disabled}`]:{color:(t.vars||t).palette.action.disabled,boxShadow:(t.vars||t).shadows[0],backgroundColor:(t.vars||t).palette.action.disabledBackground}})),tI=A.forwardRef(function(e,n){const r=_e({props:e,name:"MuiFab"}),{children:i,className:s,color:o="default",component:a="button",disabled:l=!1,disableFocusRipple:c=!1,focusVisibleClassName:u,size:d="large",variant:f="circular"}=r,h=ue(r,a6),p=O({},r,{color:o,component:a,disabled:l,disableFocusRipple:c,size:d,variant:f}),g=c6(p);return F.jsx(l6,O({className:de(g.root,s),component:a,disabled:l,focusRipple:!c,focusVisibleClassName:de(g.focusVisible,u),ownerState:p,ref:n},h,{classes:g,children:i}))}),u6=["disableUnderline","components","componentsProps","fullWidth","hiddenLabel","inputComponent","multiline","slotProps","slots","type"],d6=t=>{const{classes:e,disableUnderline:n}=t,i=Re({root:["root",!n&&"underline"],input:["input"]},PP,e);return O({},e,i)},f6=ae(Td,{shouldForwardProp:t=>en(t)||t==="classes",name:"MuiFilledInput",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[...Sd(t,e),!n.disableUnderline&&e.underline]}})(({theme:t,ownerState:e})=>{var n;const r=t.palette.mode==="light",i=r?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",s=r?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",o=r?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",a=r?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return O({position:"relative",backgroundColor:t.vars?t.vars.palette.FilledInput.bg:s,borderTopLeftRadius:(t.vars||t).shape.borderRadius,borderTopRightRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),"&:hover":{backgroundColor:t.vars?t.vars.palette.FilledInput.hoverBg:o,"@media (hover: none)":{backgroundColor:t.vars?t.vars.palette.FilledInput.bg:s}},[`&.${hi.focused}`]:{backgroundColor:t.vars?t.vars.palette.FilledInput.bg:s},[`&.${hi.disabled}`]:{backgroundColor:t.vars?t.vars.palette.FilledInput.disabledBg:a}},!e.disableUnderline&&{"&::after":{borderBottom:`2px solid ${(n=(t.vars||t).palette[e.color||"primary"])==null?void 0:n.main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${hi.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${hi.error}`]:{"&::before, &::after":{borderBottomColor:(t.vars||t).palette.error.main}},"&::before":{borderBottom:`1px solid ${t.vars?`rgba(${t.vars.palette.common.onBackgroundChannel} / ${t.vars.opacity.inputUnderline})`:i}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${hi.disabled}, .${hi.error}):before`]:{borderBottom:`1px solid ${(t.vars||t).palette.text.primary}`},[`&.${hi.disabled}:before`]:{borderBottomStyle:"dotted"}},e.startAdornment&&{paddingLeft:12},e.endAdornment&&{paddingRight:12},e.multiline&&O({padding:"25px 12px 8px"},e.size==="small"&&{paddingTop:21,paddingBottom:4},e.hiddenLabel&&{paddingTop:16,paddingBottom:17},e.hiddenLabel&&e.size==="small"&&{paddingTop:8,paddingBottom:9}))}),h6=ae(Rd,{name:"MuiFilledInput",slot:"Input",overridesResolver:Ed})(({theme:t,ownerState:e})=>O({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12},!t.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:t.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:t.palette.mode==="light"?null:"#fff",caretColor:t.palette.mode==="light"?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},t.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[t.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},e.size==="small"&&{paddingTop:21,paddingBottom:4},e.hiddenLabel&&{paddingTop:16,paddingBottom:17},e.startAdornment&&{paddingLeft:0},e.endAdornment&&{paddingRight:0},e.hiddenLabel&&e.size==="small"&&{paddingTop:8,paddingBottom:9},e.multiline&&{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0})),Vg=A.forwardRef(function(e,n){var r,i,s,o;const a=_e({props:e,name:"MuiFilledInput"}),{components:l={},componentsProps:c,fullWidth:u=!1,inputComponent:d="input",multiline:f=!1,slotProps:h,slots:p={},type:g="text"}=a,w=ue(a,u6),v=O({},a,{fullWidth:u,inputComponent:d,multiline:f,type:g}),m=d6(a),y={root:{ownerState:v},input:{ownerState:v}},b=h??c?kn(y,h??c):y,x=(r=(i=p.root)!=null?i:l.Root)!=null?r:f6,I=(s=(o=p.input)!=null?o:l.Input)!=null?s:h6;return F.jsx($g,O({slots:{root:x,input:I},componentsProps:b,fullWidth:u,inputComponent:d,multiline:f,ref:n,type:g},w,{classes:m}))});Vg.muiName="Input";function p6(t){return Te("MuiFormControl",t)}Ie("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const g6=["children","className","color","component","disabled","error","focused","fullWidth","hiddenLabel","margin","required","size","variant"],m6=t=>{const{classes:e,margin:n,fullWidth:r}=t,i={root:["root",n!=="none"&&`margin${ce(n)}`,r&&"fullWidth"]};return Re(i,p6,e)},y6=ae("div",{name:"MuiFormControl",slot:"Root",overridesResolver:({ownerState:t},e)=>O({},e.root,e[`margin${ce(t.margin)}`],t.fullWidth&&e.fullWidth)})(({ownerState:t})=>O({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top"},t.margin==="normal"&&{marginTop:16,marginBottom:8},t.margin==="dense"&&{marginTop:8,marginBottom:4},t.fullWidth&&{width:"100%"})),v6=A.forwardRef(function(e,n){const r=_e({props:e,name:"MuiFormControl"}),{children:i,className:s,color:o="primary",component:a="div",disabled:l=!1,error:c=!1,focused:u,fullWidth:d=!1,hiddenLabel:f=!1,margin:h="none",required:p=!1,size:g="medium",variant:w="outlined"}=r,v=ue(r,g6),m=O({},r,{color:o,component:a,disabled:l,error:c,fullWidth:d,hiddenLabel:f,margin:h,required:p,size:g,variant:w}),y=m6(m),[b,x]=A.useState(()=>{let N=!1;return i&&A.Children.forEach(i,L=>{if(!ma(L,["Input","Select"]))return;const $=ma(L,["Select"])?L.props.input:L;$&&kP($.props)&&(N=!0)}),N}),[I,k]=A.useState(()=>{let N=!1;return i&&A.Children.forEach(i,L=>{ma(L,["Input","Select"])&&(eu(L.props,!0)||eu(L.props.inputProps,!0))&&(N=!0)}),N}),[S,P]=A.useState(!1);l&&S&&P(!1);const R=u!==void 0&&!l?u:S;let B;const T=A.useMemo(()=>({adornedStart:b,setAdornedStart:x,color:o,disabled:l,error:c,filled:I,focused:R,fullWidth:d,hiddenLabel:f,size:g,onBlur:()=>{P(!1)},onEmpty:()=>{k(!1)},onFilled:()=>{k(!0)},onFocus:()=>{P(!0)},registerEffect:B,required:p,variant:w}),[b,o,l,c,I,R,d,f,B,p,g,w]);return F.jsx(Fg.Provider,{value:T,children:F.jsx(y6,O({as:a,ownerState:m,className:de(y.root,s),ref:n},v,{children:i}))})});function w6(t){return Te("MuiFormHelperText",t)}const Rv=Ie("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]);var _v;const b6=["children","className","component","disabled","error","filled","focused","margin","required","variant"],x6=t=>{const{classes:e,contained:n,size:r,disabled:i,error:s,filled:o,focused:a,required:l}=t,c={root:["root",i&&"disabled",s&&"error",r&&`size${ce(r)}`,n&&"contained",a&&"focused",o&&"filled",l&&"required"]};return Re(c,w6,e)},k6=ae("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.size&&e[`size${ce(n.size)}`],n.contained&&e.contained,n.filled&&e.filled]}})(({theme:t,ownerState:e})=>O({color:(t.vars||t).palette.text.secondary},t.typography.caption,{textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${Rv.disabled}`]:{color:(t.vars||t).palette.text.disabled},[`&.${Rv.error}`]:{color:(t.vars||t).palette.error.main}},e.size==="small"&&{marginTop:4},e.contained&&{marginLeft:14,marginRight:14})),I6=A.forwardRef(function(e,n){const r=_e({props:e,name:"MuiFormHelperText"}),{children:i,className:s,component:o="p"}=r,a=ue(r,b6),l=zi(),c=no({props:r,muiFormControl:l,states:["variant","size","disabled","error","filled","focused","required"]}),u=O({},r,{component:o,contained:c.variant==="filled"||c.variant==="outlined",variant:c.variant,size:c.size,disabled:c.disabled,error:c.error,filled:c.filled,focused:c.focused,required:c.required}),d=x6(u);return F.jsx(k6,O({as:o,ownerState:u,className:de(d.root,s),ref:n},a,{children:i===" "?_v||(_v=F.jsx("span",{className:"notranslate",children:"​"})):i}))});function S6(t){return Te("MuiFormLabel",t)}const va=Ie("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),E6=["children","className","color","component","disabled","error","filled","focused","required"],T6=t=>{const{classes:e,color:n,focused:r,disabled:i,error:s,filled:o,required:a}=t,l={root:["root",`color${ce(n)}`,i&&"disabled",s&&"error",o&&"filled",r&&"focused",a&&"required"],asterisk:["asterisk",s&&"error"]};return Re(l,S6,e)},R6=ae("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:({ownerState:t},e)=>O({},e.root,t.color==="secondary"&&e.colorSecondary,t.filled&&e.filled)})(({theme:t,ownerState:e})=>O({color:(t.vars||t).palette.text.secondary},t.typography.body1,{lineHeight:"1.4375em",padding:0,position:"relative",[`&.${va.focused}`]:{color:(t.vars||t).palette[e.color].main},[`&.${va.disabled}`]:{color:(t.vars||t).palette.text.disabled},[`&.${va.error}`]:{color:(t.vars||t).palette.error.main}})),_6=ae("span",{name:"MuiFormLabel",slot:"Asterisk",overridesResolver:(t,e)=>e.asterisk})(({theme:t})=>({[`&.${va.error}`]:{color:(t.vars||t).palette.error.main}})),P6=A.forwardRef(function(e,n){const r=_e({props:e,name:"MuiFormLabel"}),{children:i,className:s,component:o="label"}=r,a=ue(r,E6),l=zi(),c=no({props:r,muiFormControl:l,states:["color","required","focused","disabled","error","filled"]}),u=O({},r,{color:c.color||"primary",component:o,disabled:c.disabled,error:c.error,filled:c.filled,focused:c.focused,required:c.required}),d=T6(u);return F.jsxs(R6,O({as:o,ownerState:u,className:de(d.root,s),ref:n},a,{children:[i,c.required&&F.jsxs(_6,{ownerState:u,"aria-hidden":!0,className:d.asterisk,children:[" ","*"]})]}))}),Pv=A.createContext();function O6(t){return Te("MuiGrid",t)}const A6=[0,1,2,3,4,5,6,7,8,9,10],N6=["column-reverse","column","row-reverse","row"],C6=["nowrap","wrap-reverse","wrap"],yo=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12],qa=Ie("MuiGrid",["root","container","item","zeroMinWidth",...A6.map(t=>`spacing-xs-${t}`),...N6.map(t=>`direction-xs-${t}`),...C6.map(t=>`wrap-xs-${t}`),...yo.map(t=>`grid-xs-${t}`),...yo.map(t=>`grid-sm-${t}`),...yo.map(t=>`grid-md-${t}`),...yo.map(t=>`grid-lg-${t}`),...yo.map(t=>`grid-xl-${t}`)]),M6=["className","columns","columnSpacing","component","container","direction","item","rowSpacing","spacing","wrap","zeroMinWidth"];function Os(t){const e=parseFloat(t);return`${e}${String(t).replace(String(e),"")||"px"}`}function B6({theme:t,ownerState:e}){let n;return t.breakpoints.keys.reduce((r,i)=>{let s={};if(e[i]&&(n=e[i]),!n)return r;if(n===!0)s={flexBasis:0,flexGrow:1,maxWidth:"100%"};else if(n==="auto")s={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"};else{const o=Uu({values:e.columns,breakpoints:t.breakpoints.values}),a=typeof o=="object"?o[i]:o;if(a==null)return r;const l=`${Math.round(n/a*1e8)/1e6}%`;let c={};if(e.container&&e.item&&e.columnSpacing!==0){const u=t.spacing(e.columnSpacing);if(u!=="0px"){const d=`calc(${l} + ${Os(u)})`;c={flexBasis:d,maxWidth:d}}}s=O({flexBasis:l,flexGrow:0,maxWidth:l},c)}return t.breakpoints.values[i]===0?Object.assign(r,s):r[t.breakpoints.up(i)]=s,r},{})}function L6({theme:t,ownerState:e}){const n=Uu({values:e.direction,breakpoints:t.breakpoints.values});return Wn({theme:t},n,r=>{const i={flexDirection:r};return r.indexOf("column")===0&&(i[`& > .${qa.item}`]={maxWidth:"none"}),i})}function nI({breakpoints:t,values:e}){let n="";Object.keys(e).forEach(i=>{n===""&&e[i]!==0&&(n=i)});const r=Object.keys(t).sort((i,s)=>t[i]-t[s]);return r.slice(0,r.indexOf(n))}function D6({theme:t,ownerState:e}){const{container:n,rowSpacing:r}=e;let i={};if(n&&r!==0){const s=Uu({values:r,breakpoints:t.breakpoints.values});let o;typeof s=="object"&&(o=nI({breakpoints:t.breakpoints.values,values:s})),i=Wn({theme:t},s,(a,l)=>{var c;const u=t.spacing(a);return u!=="0px"?{marginTop:`-${Os(u)}`,[`& > .${qa.item}`]:{paddingTop:Os(u)}}:(c=o)!=null&&c.includes(l)?{}:{marginTop:0,[`& > .${qa.item}`]:{paddingTop:0}}})}return i}function F6({theme:t,ownerState:e}){const{container:n,columnSpacing:r}=e;let i={};if(n&&r!==0){const s=Uu({values:r,breakpoints:t.breakpoints.values});let o;typeof s=="object"&&(o=nI({breakpoints:t.breakpoints.values,values:s})),i=Wn({theme:t},s,(a,l)=>{var c;const u=t.spacing(a);return u!=="0px"?{width:`calc(100% + ${Os(u)})`,marginLeft:`-${Os(u)}`,[`& > .${qa.item}`]:{paddingLeft:Os(u)}}:(c=o)!=null&&c.includes(l)?{}:{width:"100%",marginLeft:0,[`& > .${qa.item}`]:{paddingLeft:0}}})}return i}function $6(t,e,n={}){if(!t||t<=0)return[];if(typeof t=="string"&&!Number.isNaN(Number(t))||typeof t=="number")return[n[`spacing-xs-${String(t)}`]];const r=[];return e.forEach(i=>{const s=t[i];Number(s)>0&&r.push(n[`spacing-${i}-${String(s)}`])}),r}const W6=ae("div",{name:"MuiGrid",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t,{container:r,direction:i,item:s,spacing:o,wrap:a,zeroMinWidth:l,breakpoints:c}=n;let u=[];r&&(u=$6(o,c,e));const d=[];return c.forEach(f=>{const h=n[f];h&&d.push(e[`grid-${f}-${String(h)}`])}),[e.root,r&&e.container,s&&e.item,l&&e.zeroMinWidth,...u,i!=="row"&&e[`direction-xs-${String(i)}`],a!=="wrap"&&e[`wrap-xs-${String(a)}`],...d]}})(({ownerState:t})=>O({boxSizing:"border-box"},t.container&&{display:"flex",flexWrap:"wrap",width:"100%"},t.item&&{margin:0},t.zeroMinWidth&&{minWidth:0},t.wrap!=="wrap"&&{flexWrap:t.wrap}),L6,D6,F6,B6);function V6(t,e){if(!t||t<=0)return[];if(typeof t=="string"&&!Number.isNaN(Number(t))||typeof t=="number")return[`spacing-xs-${String(t)}`];const n=[];return e.forEach(r=>{const i=t[r];if(Number(i)>0){const s=`spacing-${r}-${String(i)}`;n.push(s)}}),n}const U6=t=>{const{classes:e,container:n,direction:r,item:i,spacing:s,wrap:o,zeroMinWidth:a,breakpoints:l}=t;let c=[];n&&(c=V6(s,l));const u=[];l.forEach(f=>{const h=t[f];h&&u.push(`grid-${f}-${String(h)}`)});const d={root:["root",n&&"container",i&&"item",a&&"zeroMinWidth",...c,r!=="row"&&`direction-xs-${String(r)}`,o!=="wrap"&&`wrap-xs-${String(o)}`,...u]};return Re(d,O6,e)},Hp=A.forwardRef(function(e,n){const r=_e({props:e,name:"MuiGrid"}),{breakpoints:i}=dd(),s=Yu(r),{className:o,columns:a,columnSpacing:l,component:c="div",container:u=!1,direction:d="row",item:f=!1,rowSpacing:h,spacing:p=0,wrap:g="wrap",zeroMinWidth:w=!1}=s,v=ue(s,M6),m=h||p,y=l||p,b=A.useContext(Pv),x=u?a||12:b,I={},k=O({},v);i.keys.forEach(R=>{v[R]!=null&&(I[R]=v[R],delete k[R])});const S=O({},s,{columns:x,container:u,direction:d,item:f,rowSpacing:m,columnSpacing:y,wrap:g,zeroMinWidth:w,spacing:p},I,{breakpoints:i.keys}),P=U6(S);return F.jsx(Pv.Provider,{value:x,children:F.jsx(W6,O({ownerState:S,className:de(P.root,o),as:c,ref:n},k))})}),H6=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function qp(t){return`scale(${t}, ${t**2})`}const q6={entering:{opacity:1,transform:qp(1)},entered:{opacity:1,transform:"none"}},sh=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),rI=A.forwardRef(function(e,n){const{addEndListener:r,appear:i=!0,children:s,easing:o,in:a,onEnter:l,onEntered:c,onEntering:u,onExit:d,onExited:f,onExiting:h,style:p,timeout:g="auto",TransitionComponent:w=xr}=e,v=ue(e,H6),m=Rk(),y=A.useRef(),b=dd(),x=A.useRef(null),I=Kt(x,s.ref,n),k=$=>H=>{if($){const W=x.current;H===void 0?$(W):$(W,H)}},S=k(u),P=k(($,H)=>{Xk($);const{duration:W,delay:C,easing:V}=Zl({style:p,timeout:g,easing:o},{mode:"enter"});let q;g==="auto"?(q=b.transitions.getAutoHeightDuration($.clientHeight),y.current=q):q=W,$.style.transition=[b.transitions.create("opacity",{duration:q,delay:C}),b.transitions.create("transform",{duration:sh?q:q*.666,delay:C,easing:V})].join(","),l&&l($,H)}),R=k(c),B=k(h),T=k($=>{const{duration:H,delay:W,easing:C}=Zl({style:p,timeout:g,easing:o},{mode:"exit"});let V;g==="auto"?(V=b.transitions.getAutoHeightDuration($.clientHeight),y.current=V):V=H,$.style.transition=[b.transitions.create("opacity",{duration:V,delay:W}),b.transitions.create("transform",{duration:sh?V:V*.666,delay:sh?W:W||V*.333,easing:C})].join(","),$.style.opacity=0,$.style.transform=qp(.75),d&&d($)}),N=k(f),L=$=>{g==="auto"&&m.start(y.current||0,$),r&&r(x.current,$)};return F.jsx(w,O({appear:i,in:a,nodeRef:x,onEnter:P,onEntered:R,onEntering:S,onExit:T,onExited:N,onExiting:B,addEndListener:L,timeout:g==="auto"?null:g},v,{children:($,H)=>A.cloneElement(s,O({style:O({opacity:0,transform:qp(.75),visibility:$==="exited"&&!a?"hidden":void 0},q6[$],p,s.props.style),ref:I},H))}))});rI.muiSupportAuto=!0;const j6=["disableUnderline","components","componentsProps","fullWidth","inputComponent","multiline","slotProps","slots","type"],K6=t=>{const{classes:e,disableUnderline:n}=t,i=Re({root:["root",!n&&"underline"],input:["input"]},RP,e);return O({},e,i)},z6=ae(Td,{shouldForwardProp:t=>en(t)||t==="classes",name:"MuiInput",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[...Sd(t,e),!n.disableUnderline&&e.underline]}})(({theme:t,ownerState:e})=>{let r=t.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return t.vars&&(r=`rgba(${t.vars.palette.common.onBackgroundChannel} / ${t.vars.opacity.inputUnderline})`),O({position:"relative"},e.formControl&&{"label + &":{marginTop:16}},!e.disableUnderline&&{"&::after":{borderBottom:`2px solid ${(t.vars||t).palette[e.color].main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${mo.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${mo.error}`]:{"&::before, &::after":{borderBottomColor:(t.vars||t).palette.error.main}},"&::before":{borderBottom:`1px solid ${r}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${mo.disabled}, .${mo.error}):before`]:{borderBottom:`2px solid ${(t.vars||t).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${r}`}},[`&.${mo.disabled}:before`]:{borderBottomStyle:"dotted"}})}),G6=ae(Rd,{name:"MuiInput",slot:"Input",overridesResolver:Ed})({}),Ug=A.forwardRef(function(e,n){var r,i,s,o;const a=_e({props:e,name:"MuiInput"}),{disableUnderline:l,components:c={},componentsProps:u,fullWidth:d=!1,inputComponent:f="input",multiline:h=!1,slotProps:p,slots:g={},type:w="text"}=a,v=ue(a,j6),m=K6(a),b={root:{ownerState:{disableUnderline:l}}},x=p??u?kn(p??u,b):b,I=(r=(i=g.root)!=null?i:c.Root)!=null?r:z6,k=(s=(o=g.input)!=null?o:c.Input)!=null?s:G6;return F.jsx($g,O({slots:{root:I,input:k},slotProps:x,fullWidth:d,inputComponent:f,multiline:h,ref:n,type:w},v,{classes:m}))});Ug.muiName="Input";function X6(t){return Te("MuiInputLabel",t)}Ie("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const Y6=["disableAnimation","margin","shrink","variant","className"],Q6=t=>{const{classes:e,formControl:n,size:r,shrink:i,disableAnimation:s,variant:o,required:a}=t,l={root:["root",n&&"formControl",!s&&"animated",i&&"shrink",r&&r!=="normal"&&`size${ce(r)}`,o],asterisk:[a&&"asterisk"]},c=Re(l,X6,e);return O({},e,c)},J6=ae(P6,{shouldForwardProp:t=>en(t)||t==="classes",name:"MuiInputLabel",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{[`& .${va.asterisk}`]:e.asterisk},e.root,n.formControl&&e.formControl,n.size==="small"&&e.sizeSmall,n.shrink&&e.shrink,!n.disableAnimation&&e.animated,n.focused&&e.focused,e[n.variant]]}})(({theme:t,ownerState:e})=>O({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},e.formControl&&{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"},e.size==="small"&&{transform:"translate(0, 17px) scale(1)"},e.shrink&&{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"},!e.disableAnimation&&{transition:t.transitions.create(["color","transform","max-width"],{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut})},e.variant==="filled"&&O({zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},e.size==="small"&&{transform:"translate(12px, 13px) scale(1)"},e.shrink&&O({userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"},e.size==="small"&&{transform:"translate(12px, 4px) scale(0.75)"})),e.variant==="outlined"&&O({zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},e.size==="small"&&{transform:"translate(14px, 9px) scale(1)"},e.shrink&&{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}))),Z6=A.forwardRef(function(e,n){const r=_e({name:"MuiInputLabel",props:e}),{disableAnimation:i=!1,shrink:s,className:o}=r,a=ue(r,Y6),l=zi();let c=s;typeof c>"u"&&l&&(c=l.filled||l.focused||l.adornedStart);const u=no({props:r,muiFormControl:l,states:["size","variant","required","focused"]}),d=O({},r,{disableAnimation:i,formControl:l,shrink:c,size:u.size,variant:u.variant,required:u.required,focused:u.focused}),f=Q6(d);return F.jsx(J6,O({"data-shrink":c,ownerState:d,ref:n,className:de(f.root,o)},a,{classes:f}))});function eO(t){return Te("MuiLinearProgress",t)}Ie("MuiLinearProgress",["root","colorPrimary","colorSecondary","determinate","indeterminate","buffer","query","dashed","dashedColorPrimary","dashedColorSecondary","bar","barColorPrimary","barColorSecondary","bar1Indeterminate","bar1Determinate","bar1Buffer","bar2Indeterminate","bar2Buffer"]);const tO=["className","color","value","valueBuffer","variant"];let ro=t=>t,Ov,Av,Nv,Cv,Mv,Bv;const jp=4,nO=Ki(Ov||(Ov=ro`
  0% {
    left: -35%;
    right: 100%;
  }

  60% {
    left: 100%;
    right: -90%;
  }

  100% {
    left: 100%;
    right: -90%;
  }
`)),rO=Ki(Av||(Av=ro`
  0% {
    left: -200%;
    right: 100%;
  }

  60% {
    left: 107%;
    right: -8%;
  }

  100% {
    left: 107%;
    right: -8%;
  }
`)),iO=Ki(Nv||(Nv=ro`
  0% {
    opacity: 1;
    background-position: 0 -23px;
  }

  60% {
    opacity: 0;
    background-position: 0 -23px;
  }

  100% {
    opacity: 1;
    background-position: -200px -23px;
  }
`)),sO=t=>{const{classes:e,variant:n,color:r}=t,i={root:["root",`color${ce(r)}`,n],dashed:["dashed",`dashedColor${ce(r)}`],bar1:["bar",`barColor${ce(r)}`,(n==="indeterminate"||n==="query")&&"bar1Indeterminate",n==="determinate"&&"bar1Determinate",n==="buffer"&&"bar1Buffer"],bar2:["bar",n!=="buffer"&&`barColor${ce(r)}`,n==="buffer"&&`color${ce(r)}`,(n==="indeterminate"||n==="query")&&"bar2Indeterminate",n==="buffer"&&"bar2Buffer"]};return Re(i,eO,e)},Hg=(t,e)=>e==="inherit"?"currentColor":t.vars?t.vars.palette.LinearProgress[`${e}Bg`]:t.palette.mode==="light"?$k(t.palette[e].main,.62):Fk(t.palette[e].main,.5),oO=ae("span",{name:"MuiLinearProgress",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`color${ce(n.color)}`],e[n.variant]]}})(({ownerState:t,theme:e})=>O({position:"relative",overflow:"hidden",display:"block",height:4,zIndex:0,"@media print":{colorAdjust:"exact"},backgroundColor:Hg(e,t.color)},t.color==="inherit"&&t.variant!=="buffer"&&{backgroundColor:"none","&::before":{content:'""',position:"absolute",left:0,top:0,right:0,bottom:0,backgroundColor:"currentColor",opacity:.3}},t.variant==="buffer"&&{backgroundColor:"transparent"},t.variant==="query"&&{transform:"rotate(180deg)"})),aO=ae("span",{name:"MuiLinearProgress",slot:"Dashed",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.dashed,e[`dashedColor${ce(n.color)}`]]}})(({ownerState:t,theme:e})=>{const n=Hg(e,t.color);return O({position:"absolute",marginTop:0,height:"100%",width:"100%"},t.color==="inherit"&&{opacity:.3},{backgroundImage:`radial-gradient(${n} 0%, ${n} 16%, transparent 42%)`,backgroundSize:"10px 10px",backgroundPosition:"0 -23px"})},ic(Cv||(Cv=ro`
    animation: ${0} 3s infinite linear;
  `),iO)),cO=ae("span",{name:"MuiLinearProgress",slot:"Bar1",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.bar,e[`barColor${ce(n.color)}`],(n.variant==="indeterminate"||n.variant==="query")&&e.bar1Indeterminate,n.variant==="determinate"&&e.bar1Determinate,n.variant==="buffer"&&e.bar1Buffer]}})(({ownerState:t,theme:e})=>O({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left",backgroundColor:t.color==="inherit"?"currentColor":(e.vars||e).palette[t.color].main},t.variant==="determinate"&&{transition:`transform .${jp}s linear`},t.variant==="buffer"&&{zIndex:1,transition:`transform .${jp}s linear`}),({ownerState:t})=>(t.variant==="indeterminate"||t.variant==="query")&&ic(Mv||(Mv=ro`
      width: auto;
      animation: ${0} 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite;
    `),nO)),lO=ae("span",{name:"MuiLinearProgress",slot:"Bar2",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.bar,e[`barColor${ce(n.color)}`],(n.variant==="indeterminate"||n.variant==="query")&&e.bar2Indeterminate,n.variant==="buffer"&&e.bar2Buffer]}})(({ownerState:t,theme:e})=>O({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left"},t.variant!=="buffer"&&{backgroundColor:t.color==="inherit"?"currentColor":(e.vars||e).palette[t.color].main},t.color==="inherit"&&{opacity:.3},t.variant==="buffer"&&{backgroundColor:Hg(e,t.color),transition:`transform .${jp}s linear`}),({ownerState:t})=>(t.variant==="indeterminate"||t.variant==="query")&&ic(Bv||(Bv=ro`
      width: auto;
      animation: ${0} 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite;
    `),rO)),uO=A.forwardRef(function(e,n){const r=_e({props:e,name:"MuiLinearProgress"}),{className:i,color:s="primary",value:o,valueBuffer:a,variant:l="indeterminate"}=r,c=ue(r,tO),u=O({},r,{color:s,variant:l}),d=sO(u),f=Mk(),h={},p={bar1:{},bar2:{}};if((l==="determinate"||l==="buffer")&&o!==void 0){h["aria-valuenow"]=Math.round(o),h["aria-valuemin"]=0,h["aria-valuemax"]=100;let g=o-100;f&&(g=-g),p.bar1.transform=`translateX(${g}%)`}if(l==="buffer"&&a!==void 0){let g=(a||0)-100;f&&(g=-g),p.bar2.transform=`translateX(${g}%)`}return F.jsxs(oO,O({className:de(d.root,i),ownerState:u,role:"progressbar"},h,{ref:n},c,{children:[l==="buffer"?F.jsx(aO,{className:d.dashed,ownerState:u}):null,F.jsx(cO,{className:d.bar1,ownerState:u,style:p.bar1}),l==="determinate"?null:F.jsx(lO,{className:d.bar2,ownerState:u,style:p.bar2})]}))}),Ni=A.createContext({});function dO(t){return Te("MuiList",t)}Ie("MuiList",["root","padding","dense","subheader"]);const fO=["children","className","component","dense","disablePadding","subheader"],hO=t=>{const{classes:e,disablePadding:n,dense:r,subheader:i}=t;return Re({root:["root",!n&&"padding",r&&"dense",i&&"subheader"]},dO,e)},pO=ae("ul",{name:"MuiList",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.disablePadding&&e.padding,n.dense&&e.dense,n.subheader&&e.subheader]}})(({ownerState:t})=>O({listStyle:"none",margin:0,padding:0,position:"relative"},!t.disablePadding&&{paddingTop:8,paddingBottom:8},t.subheader&&{paddingTop:0})),iI=A.forwardRef(function(e,n){const r=_e({props:e,name:"MuiList"}),{children:i,className:s,component:o="ul",dense:a=!1,disablePadding:l=!1,subheader:c}=r,u=ue(r,fO),d=A.useMemo(()=>({dense:a}),[a]),f=O({},r,{component:o,dense:a,disablePadding:l}),h=hO(f);return F.jsx(Ni.Provider,{value:d,children:F.jsxs(pO,O({as:o,className:de(h.root,s),ref:n,ownerState:f},u,{children:[c,i]}))})});function gO(t){return Te("MuiListItem",t)}const ls=Ie("MuiListItem",["root","container","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","padding","button","secondaryAction","selected"]),mO=Ie("MuiListItemButton",["root","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","selected"]);function yO(t){return Te("MuiListItemSecondaryAction",t)}Ie("MuiListItemSecondaryAction",["root","disableGutters"]);const vO=["className"],wO=t=>{const{disableGutters:e,classes:n}=t;return Re({root:["root",e&&"disableGutters"]},yO,n)},bO=ae("div",{name:"MuiListItemSecondaryAction",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.disableGutters&&e.disableGutters]}})(({ownerState:t})=>O({position:"absolute",right:16,top:"50%",transform:"translateY(-50%)"},t.disableGutters&&{right:0})),sI=A.forwardRef(function(e,n){const r=_e({props:e,name:"MuiListItemSecondaryAction"}),{className:i}=r,s=ue(r,vO),o=A.useContext(Ni),a=O({},r,{disableGutters:o.disableGutters}),l=wO(a);return F.jsx(bO,O({className:de(l.root,i),ownerState:a,ref:n},s))});sI.muiName="ListItemSecondaryAction";const xO=["className"],kO=["alignItems","autoFocus","button","children","className","component","components","componentsProps","ContainerComponent","ContainerProps","dense","disabled","disableGutters","disablePadding","divider","focusVisibleClassName","secondaryAction","selected","slotProps","slots"],IO=(t,e)=>{const{ownerState:n}=t;return[e.root,n.dense&&e.dense,n.alignItems==="flex-start"&&e.alignItemsFlexStart,n.divider&&e.divider,!n.disableGutters&&e.gutters,!n.disablePadding&&e.padding,n.button&&e.button,n.hasSecondaryAction&&e.secondaryAction]},SO=t=>{const{alignItems:e,button:n,classes:r,dense:i,disabled:s,disableGutters:o,disablePadding:a,divider:l,hasSecondaryAction:c,selected:u}=t;return Re({root:["root",i&&"dense",!o&&"gutters",!a&&"padding",l&&"divider",s&&"disabled",n&&"button",e==="flex-start"&&"alignItemsFlexStart",c&&"secondaryAction",u&&"selected"],container:["container"]},gO,r)},EO=ae("div",{name:"MuiListItem",slot:"Root",overridesResolver:IO})(({theme:t,ownerState:e})=>O({display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left"},!e.disablePadding&&O({paddingTop:8,paddingBottom:8},e.dense&&{paddingTop:4,paddingBottom:4},!e.disableGutters&&{paddingLeft:16,paddingRight:16},!!e.secondaryAction&&{paddingRight:48}),!!e.secondaryAction&&{[`& > .${mO.root}`]:{paddingRight:48}},{[`&.${ls.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${ls.selected}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:mn(t.palette.primary.main,t.palette.action.selectedOpacity),[`&.${ls.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:mn(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},[`&.${ls.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity}},e.alignItems==="flex-start"&&{alignItems:"flex-start"},e.divider&&{borderBottom:`1px solid ${(t.vars||t).palette.divider}`,backgroundClip:"padding-box"},e.button&&{transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${ls.selected}:hover`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:mn(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:mn(t.palette.primary.main,t.palette.action.selectedOpacity)}}},e.hasSecondaryAction&&{paddingRight:48})),TO=ae("li",{name:"MuiListItem",slot:"Container",overridesResolver:(t,e)=>e.container})({position:"relative"}),RO=A.forwardRef(function(e,n){const r=_e({props:e,name:"MuiListItem"}),{alignItems:i="center",autoFocus:s=!1,button:o=!1,children:a,className:l,component:c,components:u={},componentsProps:d={},ContainerComponent:f="li",ContainerProps:{className:h}={},dense:p=!1,disabled:g=!1,disableGutters:w=!1,disablePadding:v=!1,divider:m=!1,focusVisibleClassName:y,secondaryAction:b,selected:x=!1,slotProps:I={},slots:k={}}=r,S=ue(r.ContainerProps,xO),P=ue(r,kO),R=A.useContext(Ni),B=A.useMemo(()=>({dense:p||R.dense||!1,alignItems:i,disableGutters:w}),[i,R.dense,p,w]),T=A.useRef(null);Nr(()=>{s&&T.current&&T.current.focus()},[s]);const N=A.Children.toArray(a),L=N.length&&ma(N[N.length-1],["ListItemSecondaryAction"]),$=O({},r,{alignItems:i,autoFocus:s,button:o,dense:B.dense,disabled:g,disableGutters:w,disablePadding:v,divider:m,hasSecondaryAction:L,selected:x}),H=SO($),W=Kt(T,n),C=k.root||u.Root||EO,V=I.root||d.root||{},q=O({className:de(H.root,V.className,l),disabled:g},P);let G=c||"li";return o&&(q.component=c||"div",q.focusVisibleClassName=de(ls.focusVisible,y),G=dc),L?(G=!q.component&&!c?"div":G,f==="li"&&(G==="li"?G="div":q.component==="li"&&(q.component="div")),F.jsx(Ni.Provider,{value:B,children:F.jsxs(TO,O({as:f,className:de(H.container,h),ref:W,ownerState:$},S,{children:[F.jsx(C,O({},V,!Hs(C)&&{as:G,ownerState:O({},$,V.ownerState)},q,{children:N})),N.pop()]}))})):F.jsx(Ni.Provider,{value:B,children:F.jsxs(C,O({},V,{as:G,ref:W},!Hs(C)&&{ownerState:O({},$,V.ownerState)},q,{children:[N,b&&F.jsx(sI,{children:b})]}))})});function _O(t){return Te("MuiListItemIcon",t)}Ie("MuiListItemIcon",["root","alignItemsFlexStart"]);const PO=["className"],OO=t=>{const{alignItems:e,classes:n}=t;return Re({root:["root",e==="flex-start"&&"alignItemsFlexStart"]},_O,n)},AO=ae("div",{name:"MuiListItemIcon",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.alignItems==="flex-start"&&e.alignItemsFlexStart]}})(({theme:t,ownerState:e})=>O({minWidth:56,color:(t.vars||t).palette.action.active,flexShrink:0,display:"inline-flex"},e.alignItems==="flex-start"&&{marginTop:8})),NO=A.forwardRef(function(e,n){const r=_e({props:e,name:"MuiListItemIcon"}),{className:i}=r,s=ue(r,PO),o=A.useContext(Ni),a=O({},r,{alignItems:o.alignItems}),l=OO(a);return F.jsx(AO,O({className:de(l.root,i),ownerState:a,ref:n},s))});function CO(t){return Te("MuiListItemText",t)}const Lv=Ie("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]),MO=["children","className","disableTypography","inset","primary","primaryTypographyProps","secondary","secondaryTypographyProps"],BO=t=>{const{classes:e,inset:n,primary:r,secondary:i,dense:s}=t;return Re({root:["root",n&&"inset",s&&"dense",r&&i&&"multiline"],primary:["primary"],secondary:["secondary"]},CO,e)},LO=ae("div",{name:"MuiListItemText",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{[`& .${Lv.primary}`]:e.primary},{[`& .${Lv.secondary}`]:e.secondary},e.root,n.inset&&e.inset,n.primary&&n.secondary&&e.multiline,n.dense&&e.dense]}})(({ownerState:t})=>O({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4},t.primary&&t.secondary&&{marginTop:6,marginBottom:6},t.inset&&{paddingLeft:56})),DO=A.forwardRef(function(e,n){const r=_e({props:e,name:"MuiListItemText"}),{children:i,className:s,disableTypography:o=!1,inset:a=!1,primary:l,primaryTypographyProps:c,secondary:u,secondaryTypographyProps:d}=r,f=ue(r,MO),{dense:h}=A.useContext(Ni);let p=l??i,g=u;const w=O({},r,{disableTypography:o,inset:a,primary:!!p,secondary:!!g,dense:h}),v=BO(w);return p!=null&&p.type!==Jn&&!o&&(p=F.jsx(Jn,O({variant:h?"body2":"body1",className:v.primary,component:c!=null&&c.variant?void 0:"span",display:"block"},c,{children:p}))),g!=null&&g.type!==Jn&&!o&&(g=F.jsx(Jn,O({variant:"body2",className:v.secondary,color:"text.secondary",display:"block"},d,{children:g}))),F.jsxs(LO,O({className:de(v.root,s),ownerState:w,ref:n},f,{children:[p,g]}))}),FO=["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"];function oh(t,e,n){return t===e?t.firstChild:e&&e.nextElementSibling?e.nextElementSibling:n?null:t.firstChild}function Dv(t,e,n){return t===e?n?t.firstChild:t.lastChild:e&&e.previousElementSibling?e.previousElementSibling:n?null:t.lastChild}function oI(t,e){if(e===void 0)return!0;let n=t.innerText;return n===void 0&&(n=t.textContent),n=n.trim().toLowerCase(),n.length===0?!1:e.repeating?n[0]===e.keys[0]:n.indexOf(e.keys.join(""))===0}function vo(t,e,n,r,i,s){let o=!1,a=i(t,e,e?n:!1);for(;a;){if(a===t.firstChild){if(o)return!1;o=!0}const l=r?!1:a.disabled||a.getAttribute("aria-disabled")==="true";if(!a.hasAttribute("tabindex")||!oI(a,s)||l)a=i(t,a,n);else return a.focus(),!0}return!1}const $O=A.forwardRef(function(e,n){const{actions:r,autoFocus:i=!1,autoFocusItem:s=!1,children:o,className:a,disabledItemsFocusable:l=!1,disableListWrap:c=!1,onKeyDown:u,variant:d="selectedMenu"}=e,f=ue(e,FO),h=A.useRef(null),p=A.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});Nr(()=>{i&&h.current.focus()},[i]),A.useImperativeHandle(r,()=>({adjustStyleForScrollbar:(y,{direction:b})=>{const x=!h.current.style.width;if(y.clientHeight<h.current.clientHeight&&x){const I=`${Pk(ln(y))}px`;h.current.style[b==="rtl"?"paddingLeft":"paddingRight"]=I,h.current.style.width=`calc(100% + ${I})`}return h.current}}),[]);const g=y=>{const b=h.current,x=y.key,I=ln(b).activeElement;if(x==="ArrowDown")y.preventDefault(),vo(b,I,c,l,oh);else if(x==="ArrowUp")y.preventDefault(),vo(b,I,c,l,Dv);else if(x==="Home")y.preventDefault(),vo(b,null,c,l,oh);else if(x==="End")y.preventDefault(),vo(b,null,c,l,Dv);else if(x.length===1){const k=p.current,S=x.toLowerCase(),P=performance.now();k.keys.length>0&&(P-k.lastTime>500?(k.keys=[],k.repeating=!0,k.previousKeyMatched=!0):k.repeating&&S!==k.keys[0]&&(k.repeating=!1)),k.lastTime=P,k.keys.push(S);const R=I&&!k.repeating&&oI(I,k);k.previousKeyMatched&&(R||vo(b,I,!1,l,oh,k))?y.preventDefault():k.previousKeyMatched=!1}u&&u(y)},w=Kt(h,n);let v=-1;A.Children.forEach(o,(y,b)=>{if(!A.isValidElement(y)){v===b&&(v+=1,v>=o.length&&(v=-1));return}y.props.disabled||(d==="selectedMenu"&&y.props.selected||v===-1)&&(v=b),v===b&&(y.props.disabled||y.props.muiSkipListHighlight||y.type.muiSkipListHighlight)&&(v+=1,v>=o.length&&(v=-1))});const m=A.Children.map(o,(y,b)=>{if(b===v){const x={};return s&&(x.autoFocus=!0),y.props.tabIndex===void 0&&d==="selectedMenu"&&(x.tabIndex=0),A.cloneElement(y,x)}return y});return F.jsx(iI,O({role:"menu",ref:w,className:a,onKeyDown:g,tabIndex:i?0:-1},f,{children:m}))});function WO(t){return Te("MuiPopover",t)}Ie("MuiPopover",["root","paper"]);const VO=["onEntering"],UO=["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","className","container","elevation","marginThreshold","open","PaperProps","slots","slotProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps","disableScrollLock"],HO=["slotProps"];function Fv(t,e){let n=0;return typeof e=="number"?n=e:e==="center"?n=t.height/2:e==="bottom"&&(n=t.height),n}function $v(t,e){let n=0;return typeof e=="number"?n=e:e==="center"?n=t.width/2:e==="right"&&(n=t.width),n}function Wv(t){return[t.horizontal,t.vertical].map(e=>typeof e=="number"?`${e}px`:e).join(" ")}function ah(t){return typeof t=="function"?t():t}const qO=t=>{const{classes:e}=t;return Re({root:["root"],paper:["paper"]},WO,e)},jO=ae(Wg,{name:"MuiPopover",slot:"Root",overridesResolver:(t,e)=>e.root})({}),aI=ae(kd,{name:"MuiPopover",slot:"Paper",overridesResolver:(t,e)=>e.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),KO=A.forwardRef(function(e,n){var r,i,s;const o=_e({props:e,name:"MuiPopover"}),{action:a,anchorEl:l,anchorOrigin:c={vertical:"top",horizontal:"left"},anchorPosition:u,anchorReference:d="anchorEl",children:f,className:h,container:p,elevation:g=8,marginThreshold:w=16,open:v,PaperProps:m={},slots:y,slotProps:b,transformOrigin:x={vertical:"top",horizontal:"left"},TransitionComponent:I=rI,transitionDuration:k="auto",TransitionProps:{onEntering:S}={},disableScrollLock:P=!1}=o,R=ue(o.TransitionProps,VO),B=ue(o,UO),T=(r=b==null?void 0:b.paper)!=null?r:m,N=A.useRef(),L=Kt(N,T.ref),$=O({},o,{anchorOrigin:c,anchorReference:d,elevation:g,marginThreshold:w,externalPaperSlotProps:T,transformOrigin:x,TransitionComponent:I,transitionDuration:k,TransitionProps:R}),H=qO($),W=A.useCallback(()=>{if(d==="anchorPosition")return u;const he=ah(l),we=(he&&he.nodeType===1?he:ln(N.current).body).getBoundingClientRect();return{top:we.top+Fv(we,c.vertical),left:we.left+$v(we,c.horizontal)}},[l,c.horizontal,c.vertical,u,d]),C=A.useCallback(he=>({vertical:Fv(he,x.vertical),horizontal:$v(he,x.horizontal)}),[x.horizontal,x.vertical]),V=A.useCallback(he=>{const Be={width:he.offsetWidth,height:he.offsetHeight},we=C(Be);if(d==="none")return{top:null,left:null,transformOrigin:Wv(we)};const $e=W();let Nt=$e.top-we.vertical,Ne=$e.left-we.horizontal;const Me=Nt+Be.height,E=Ne+Be.width,j=ci(ah(l)),Q=j.innerHeight-w,pe=j.innerWidth-w;if(w!==null&&Nt<w){const fe=Nt-w;Nt-=fe,we.vertical+=fe}else if(w!==null&&Me>Q){const fe=Me-Q;Nt-=fe,we.vertical+=fe}if(w!==null&&Ne<w){const fe=Ne-w;Ne-=fe,we.horizontal+=fe}else if(E>pe){const fe=E-pe;Ne-=fe,we.horizontal+=fe}return{top:`${Math.round(Nt)}px`,left:`${Math.round(Ne)}px`,transformOrigin:Wv(we)}},[l,d,W,C,w]),[q,G]=A.useState(v),Y=A.useCallback(()=>{const he=N.current;if(!he)return;const Be=V(he);Be.top!==null&&(he.style.top=Be.top),Be.left!==null&&(he.style.left=Be.left),he.style.transformOrigin=Be.transformOrigin,G(!0)},[V]);A.useEffect(()=>(P&&window.addEventListener("scroll",Y),()=>window.removeEventListener("scroll",Y)),[l,P,Y]);const z=(he,Be)=>{S&&S(he,Be),Y()},K=()=>{G(!1)};A.useEffect(()=>{v&&Y()}),A.useImperativeHandle(a,()=>v?{updatePosition:()=>{Y()}}:null,[v,Y]),A.useEffect(()=>{if(!v)return;const he=_g(()=>{Y()}),Be=ci(l);return Be.addEventListener("resize",he),()=>{he.clear(),Be.removeEventListener("resize",he)}},[l,v,Y]);let oe=k;k==="auto"&&!I.muiSupportAuto&&(oe=void 0);const te=p||(l?ln(ah(l)).body:void 0),J=(i=y==null?void 0:y.root)!=null?i:jO,X=(s=y==null?void 0:y.paper)!=null?s:aI,ie=qs({elementType:X,externalSlotProps:O({},T,{style:q?T.style:O({},T.style,{opacity:0})}),additionalProps:{elevation:g,ref:L},ownerState:$,className:de(H.paper,T==null?void 0:T.className)}),ge=qs({elementType:J,externalSlotProps:(b==null?void 0:b.root)||{},externalForwardedProps:B,additionalProps:{ref:n,slotProps:{backdrop:{invisible:!0}},container:te,open:v},ownerState:$,className:de(H.root,h)}),{slotProps:ke}=ge,me=ue(ge,HO);return F.jsx(J,O({},me,!Hs(J)&&{slotProps:ke,disableScrollLock:P},{children:F.jsx(I,O({appear:!0,in:v,onEntering:z,onExited:K,timeout:oe},R,{children:F.jsx(X,O({},ie,{children:f}))}))}))});function zO(t){return Te("MuiMenu",t)}Ie("MuiMenu",["root","paper","list"]);const GO=["onEntering"],XO=["autoFocus","children","className","disableAutoFocusItem","MenuListProps","onClose","open","PaperProps","PopoverClasses","transitionDuration","TransitionProps","variant","slots","slotProps"],YO={vertical:"top",horizontal:"right"},QO={vertical:"top",horizontal:"left"},JO=t=>{const{classes:e}=t;return Re({root:["root"],paper:["paper"],list:["list"]},zO,e)},ZO=ae(KO,{shouldForwardProp:t=>en(t)||t==="classes",name:"MuiMenu",slot:"Root",overridesResolver:(t,e)=>e.root})({}),e5=ae(aI,{name:"MuiMenu",slot:"Paper",overridesResolver:(t,e)=>e.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),t5=ae($O,{name:"MuiMenu",slot:"List",overridesResolver:(t,e)=>e.list})({outline:0}),n5=A.forwardRef(function(e,n){var r,i;const s=_e({props:e,name:"MuiMenu"}),{autoFocus:o=!0,children:a,className:l,disableAutoFocusItem:c=!1,MenuListProps:u={},onClose:d,open:f,PaperProps:h={},PopoverClasses:p,transitionDuration:g="auto",TransitionProps:{onEntering:w}={},variant:v="selectedMenu",slots:m={},slotProps:y={}}=s,b=ue(s.TransitionProps,GO),x=ue(s,XO),I=Mk(),k=O({},s,{autoFocus:o,disableAutoFocusItem:c,MenuListProps:u,onEntering:w,PaperProps:h,transitionDuration:g,TransitionProps:b,variant:v}),S=JO(k),P=o&&!c&&f,R=A.useRef(null),B=(C,V)=>{R.current&&R.current.adjustStyleForScrollbar(C,{direction:I?"rtl":"ltr"}),w&&w(C,V)},T=C=>{C.key==="Tab"&&(C.preventDefault(),d&&d(C,"tabKeyDown"))};let N=-1;A.Children.map(a,(C,V)=>{A.isValidElement(C)&&(C.props.disabled||(v==="selectedMenu"&&C.props.selected||N===-1)&&(N=V))});const L=(r=m.paper)!=null?r:e5,$=(i=y.paper)!=null?i:h,H=qs({elementType:m.root,externalSlotProps:y.root,ownerState:k,className:[S.root,l]}),W=qs({elementType:L,externalSlotProps:$,ownerState:k,className:S.paper});return F.jsx(ZO,O({onClose:d,anchorOrigin:{vertical:"bottom",horizontal:I?"right":"left"},transformOrigin:I?YO:QO,slots:{paper:L,root:m.root},slotProps:{root:H,paper:W},open:f,ref:n,transitionDuration:g,TransitionProps:O({onEntering:B},b),ownerState:k},x,{classes:p,children:F.jsx(t5,O({onKeyDown:T,actions:R,autoFocus:o&&(N===-1||c),autoFocusItem:P,variant:v},u,{className:de(S.list,u.className),children:a}))}))});function r5(t){return Te("MuiNativeSelect",t)}const qg=Ie("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),i5=["className","disabled","error","IconComponent","inputRef","variant"],s5=t=>{const{classes:e,variant:n,disabled:r,multiple:i,open:s,error:o}=t,a={select:["select",n,r&&"disabled",i&&"multiple",o&&"error"],icon:["icon",`icon${ce(n)}`,s&&"iconOpen",r&&"disabled"]};return Re(a,r5,e)},cI=({ownerState:t,theme:e})=>O({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":O({},e.vars?{backgroundColor:`rgba(${e.vars.palette.common.onBackgroundChannel} / 0.05)`}:{backgroundColor:e.palette.mode==="light"?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)"},{borderRadius:0}),"&::-ms-expand":{display:"none"},[`&.${qg.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(e.vars||e).palette.background.paper},"&&&":{paddingRight:24,minWidth:16}},t.variant==="filled"&&{"&&&":{paddingRight:32}},t.variant==="outlined"&&{borderRadius:(e.vars||e).shape.borderRadius,"&:focus":{borderRadius:(e.vars||e).shape.borderRadius},"&&&":{paddingRight:32}}),o5=ae("select",{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:en,overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.select,e[n.variant],n.error&&e.error,{[`&.${qg.multiple}`]:e.multiple}]}})(cI),lI=({ownerState:t,theme:e})=>O({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(e.vars||e).palette.action.active,[`&.${qg.disabled}`]:{color:(e.vars||e).palette.action.disabled}},t.open&&{transform:"rotate(180deg)"},t.variant==="filled"&&{right:7},t.variant==="outlined"&&{right:7}),a5=ae("svg",{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.icon,n.variant&&e[`icon${ce(n.variant)}`],n.open&&e.iconOpen]}})(lI),c5=A.forwardRef(function(e,n){const{className:r,disabled:i,error:s,IconComponent:o,inputRef:a,variant:l="standard"}=e,c=ue(e,i5),u=O({},e,{disabled:i,variant:l,error:s}),d=s5(u);return F.jsxs(A.Fragment,{children:[F.jsx(o5,O({ownerState:u,className:de(d.select,r),disabled:i,ref:a||n},c)),e.multiple?null:F.jsx(a5,{as:o,ownerState:u,className:d.icon})]})});var Vv;const l5=["children","classes","className","label","notched"],u5=ae("fieldset",{shouldForwardProp:en})({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),d5=ae("legend",{shouldForwardProp:en})(({ownerState:t,theme:e})=>O({float:"unset",width:"auto",overflow:"hidden"},!t.withLabel&&{padding:0,lineHeight:"11px",transition:e.transitions.create("width",{duration:150,easing:e.transitions.easing.easeOut})},t.withLabel&&O({display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:e.transitions.create("max-width",{duration:50,easing:e.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}},t.notched&&{maxWidth:"100%",transition:e.transitions.create("max-width",{duration:100,easing:e.transitions.easing.easeOut,delay:50})})));function f5(t){const{className:e,label:n,notched:r}=t,i=ue(t,l5),s=n!=null&&n!=="",o=O({},t,{notched:r,withLabel:s});return F.jsx(u5,O({"aria-hidden":!0,className:e,ownerState:o},i,{children:F.jsx(d5,{ownerState:o,children:s?F.jsx("span",{children:n}):Vv||(Vv=F.jsx("span",{className:"notranslate",children:"​"}))})}))}const h5=["components","fullWidth","inputComponent","label","multiline","notched","slots","type"],p5=t=>{const{classes:e}=t,r=Re({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},_P,e);return O({},e,r)},g5=ae(Td,{shouldForwardProp:t=>en(t)||t==="classes",name:"MuiOutlinedInput",slot:"Root",overridesResolver:Sd})(({theme:t,ownerState:e})=>{const n=t.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return O({position:"relative",borderRadius:(t.vars||t).shape.borderRadius,[`&:hover .${Dr.notchedOutline}`]:{borderColor:(t.vars||t).palette.text.primary},"@media (hover: none)":{[`&:hover .${Dr.notchedOutline}`]:{borderColor:t.vars?`rgba(${t.vars.palette.common.onBackgroundChannel} / 0.23)`:n}},[`&.${Dr.focused} .${Dr.notchedOutline}`]:{borderColor:(t.vars||t).palette[e.color].main,borderWidth:2},[`&.${Dr.error} .${Dr.notchedOutline}`]:{borderColor:(t.vars||t).palette.error.main},[`&.${Dr.disabled} .${Dr.notchedOutline}`]:{borderColor:(t.vars||t).palette.action.disabled}},e.startAdornment&&{paddingLeft:14},e.endAdornment&&{paddingRight:14},e.multiline&&O({padding:"16.5px 14px"},e.size==="small"&&{padding:"8.5px 14px"}))}),m5=ae(f5,{name:"MuiOutlinedInput",slot:"NotchedOutline",overridesResolver:(t,e)=>e.notchedOutline})(({theme:t})=>{const e=t.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:t.vars?`rgba(${t.vars.palette.common.onBackgroundChannel} / 0.23)`:e}}),y5=ae(Rd,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:Ed})(({theme:t,ownerState:e})=>O({padding:"16.5px 14px"},!t.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:t.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:t.palette.mode==="light"?null:"#fff",caretColor:t.palette.mode==="light"?null:"#fff",borderRadius:"inherit"}},t.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[t.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},e.size==="small"&&{padding:"8.5px 14px"},e.multiline&&{padding:0},e.startAdornment&&{paddingLeft:0},e.endAdornment&&{paddingRight:0})),jg=A.forwardRef(function(e,n){var r,i,s,o,a;const l=_e({props:e,name:"MuiOutlinedInput"}),{components:c={},fullWidth:u=!1,inputComponent:d="input",label:f,multiline:h=!1,notched:p,slots:g={},type:w="text"}=l,v=ue(l,h5),m=p5(l),y=zi(),b=no({props:l,muiFormControl:y,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),x=O({},l,{color:b.color||"primary",disabled:b.disabled,error:b.error,focused:b.focused,formControl:y,fullWidth:u,hiddenLabel:b.hiddenLabel,multiline:h,size:b.size,type:w}),I=(r=(i=g.root)!=null?i:c.Root)!=null?r:g5,k=(s=(o=g.input)!=null?o:c.Input)!=null?s:y5;return F.jsx($g,O({slots:{root:I,input:k},renderSuffix:S=>F.jsx(m5,{ownerState:x,className:m.notchedOutline,label:f!=null&&f!==""&&b.required?a||(a=F.jsxs(A.Fragment,{children:[f," ","*"]})):f,notched:typeof p<"u"?p:!!(S.startAdornment||S.filled||S.focused)}),fullWidth:u,inputComponent:d,multiline:h,ref:n,type:w},v,{classes:O({},m,{notchedOutline:null})}))});jg.muiName="Input";function v5(t){return Te("MuiSelect",t)}const wo=Ie("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]);var Uv;const w5=["aria-describedby","aria-label","autoFocus","autoWidth","children","className","defaultOpen","defaultValue","disabled","displayEmpty","error","IconComponent","inputRef","labelId","MenuProps","multiple","name","onBlur","onChange","onClose","onFocus","onOpen","open","readOnly","renderValue","SelectDisplayProps","tabIndex","type","value","variant"],b5=ae("div",{name:"MuiSelect",slot:"Select",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{[`&.${wo.select}`]:e.select},{[`&.${wo.select}`]:e[n.variant]},{[`&.${wo.error}`]:e.error},{[`&.${wo.multiple}`]:e.multiple}]}})(cI,{[`&.${wo.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),x5=ae("svg",{name:"MuiSelect",slot:"Icon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.icon,n.variant&&e[`icon${ce(n.variant)}`],n.open&&e.iconOpen]}})(lI),k5=ae("input",{shouldForwardProp:t=>Kk(t)&&t!=="classes",name:"MuiSelect",slot:"NativeInput",overridesResolver:(t,e)=>e.nativeInput})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function Hv(t,e){return typeof e=="object"&&e!==null?t===e:String(t)===String(e)}function I5(t){return t==null||typeof t=="string"&&!t.trim()}const S5=t=>{const{classes:e,variant:n,disabled:r,multiple:i,open:s,error:o}=t,a={select:["select",n,r&&"disabled",i&&"multiple",o&&"error"],icon:["icon",`icon${ce(n)}`,s&&"iconOpen",r&&"disabled"],nativeInput:["nativeInput"]};return Re(a,v5,e)},E5=A.forwardRef(function(e,n){var r;const{"aria-describedby":i,"aria-label":s,autoFocus:o,autoWidth:a,children:l,className:c,defaultOpen:u,defaultValue:d,disabled:f,displayEmpty:h,error:p=!1,IconComponent:g,inputRef:w,labelId:v,MenuProps:m={},multiple:y,name:b,onBlur:x,onChange:I,onClose:k,onFocus:S,onOpen:P,open:R,readOnly:B,renderValue:T,SelectDisplayProps:N={},tabIndex:L,value:$,variant:H="standard"}=e,W=ue(e,w5),[C,V]=Yl({controlled:$,default:d,name:"Select"}),[q,G]=Yl({controlled:R,default:u,name:"Select"}),Y=A.useRef(null),z=A.useRef(null),[K,oe]=A.useState(null),{current:te}=A.useRef(R!=null),[J,X]=A.useState(),ie=Kt(n,w),ge=A.useCallback(se=>{z.current=se,se&&oe(se)},[]),ke=K==null?void 0:K.parentNode;A.useImperativeHandle(ie,()=>({focus:()=>{z.current.focus()},node:Y.current,value:C}),[C]),A.useEffect(()=>{u&&q&&K&&!te&&(X(a?null:ke.clientWidth),z.current.focus())},[K,a]),A.useEffect(()=>{o&&z.current.focus()},[o]),A.useEffect(()=>{if(!v)return;const se=ln(z.current).getElementById(v);if(se){const xe=()=>{getSelection().isCollapsed&&z.current.focus()};return se.addEventListener("click",xe),()=>{se.removeEventListener("click",xe)}}},[v]);const me=(se,xe)=>{se?P&&P(xe):k&&k(xe),te||(X(a?null:ke.clientWidth),G(se))},he=se=>{se.button===0&&(se.preventDefault(),z.current.focus(),me(!0,se))},Be=se=>{me(!1,se)},we=A.Children.toArray(l),$e=se=>{const xe=we.find(mt=>mt.props.value===se.target.value);xe!==void 0&&(V(xe.props.value),I&&I(se,xe))},Nt=se=>xe=>{let mt;if(xe.currentTarget.hasAttribute("tabindex")){if(y){mt=Array.isArray(C)?C.slice():[];const rr=C.indexOf(se.props.value);rr===-1?mt.push(se.props.value):mt.splice(rr,1)}else mt=se.props.value;if(se.props.onClick&&se.props.onClick(xe),C!==mt&&(V(mt),I)){const rr=xe.nativeEvent||xe,Yi=new rr.constructor(rr.type,rr);Object.defineProperty(Yi,"target",{writable:!0,value:{value:mt,name:b}}),I(Yi,se)}y||me(!1,xe)}},Ne=se=>{B||[" ","ArrowUp","ArrowDown","Enter"].indexOf(se.key)!==-1&&(se.preventDefault(),me(!0,se))},Me=K!==null&&q,E=se=>{!Me&&x&&(Object.defineProperty(se,"target",{writable:!0,value:{value:C,name:b}}),x(se))};delete W["aria-invalid"];let j,Q;const pe=[];let fe=!1;(eu({value:C})||h)&&(T?j=T(C):fe=!0);const Le=we.map(se=>{if(!A.isValidElement(se))return null;let xe;if(y){if(!Array.isArray(C))throw new Error(Wi(2));xe=C.some(mt=>Hv(mt,se.props.value)),xe&&fe&&pe.push(se.props.children)}else xe=Hv(C,se.props.value),xe&&fe&&(Q=se.props.children);return A.cloneElement(se,{"aria-selected":xe?"true":"false",onClick:Nt(se),onKeyUp:mt=>{mt.key===" "&&mt.preventDefault(),se.props.onKeyUp&&se.props.onKeyUp(mt)},role:"option",selected:xe,value:void 0,"data-value":se.props.value})});fe&&(y?pe.length===0?j=null:j=pe.reduce((se,xe,mt)=>(se.push(xe),mt<pe.length-1&&se.push(", "),se),[]):j=Q);let tn=J;!a&&te&&K&&(tn=ke.clientWidth);let Ue;typeof L<"u"?Ue=L:Ue=f?null:0;const be=N.id||(b?`mui-component-select-${b}`:void 0),ye=O({},e,{variant:H,value:C,open:Me,error:p}),He=S5(ye),Ze=O({},m.PaperProps,(r=m.slotProps)==null?void 0:r.paper),Br=ad();return F.jsxs(A.Fragment,{children:[F.jsx(b5,O({ref:ge,tabIndex:Ue,role:"combobox","aria-controls":Br,"aria-disabled":f?"true":void 0,"aria-expanded":Me?"true":"false","aria-haspopup":"listbox","aria-label":s,"aria-labelledby":[v,be].filter(Boolean).join(" ")||void 0,"aria-describedby":i,onKeyDown:Ne,onMouseDown:f||B?null:he,onBlur:E,onFocus:S},N,{ownerState:ye,className:de(N.className,He.select,c),id:be,children:I5(j)?Uv||(Uv=F.jsx("span",{className:"notranslate",children:"​"})):j})),F.jsx(k5,O({"aria-invalid":p,value:Array.isArray(C)?C.join(","):C,name:b,ref:Y,"aria-hidden":!0,onChange:$e,tabIndex:-1,disabled:f,className:He.nativeInput,autoFocus:o,ownerState:ye},W)),F.jsx(x5,{as:g,className:He.icon,ownerState:ye}),F.jsx(n5,O({id:`menu-${b||""}`,anchorEl:ke,open:Me,onClose:Be,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},m,{MenuListProps:O({"aria-labelledby":v,role:"listbox","aria-multiselectable":y?"true":void 0,disableListWrap:!0,id:Br},m.MenuListProps),slotProps:O({},m.slotProps,{paper:O({},Ze,{style:O({minWidth:tn},Ze!=null?Ze.style:null)})}),children:Le}))]})}),T5=["autoWidth","children","classes","className","defaultOpen","displayEmpty","IconComponent","id","input","inputProps","label","labelId","MenuProps","multiple","native","onClose","onOpen","open","renderValue","SelectDisplayProps","variant"],R5=["root"],_5=t=>{const{classes:e}=t;return e},Kg={name:"MuiSelect",overridesResolver:(t,e)=>e.root,shouldForwardProp:t=>en(t)&&t!=="variant",slot:"Root"},P5=ae(Ug,Kg)(""),O5=ae(jg,Kg)(""),A5=ae(Vg,Kg)(""),uI=A.forwardRef(function(e,n){const r=_e({name:"MuiSelect",props:e}),{autoWidth:i=!1,children:s,classes:o={},className:a,defaultOpen:l=!1,displayEmpty:c=!1,IconComponent:u=OP,id:d,input:f,inputProps:h,label:p,labelId:g,MenuProps:w,multiple:v=!1,native:m=!1,onClose:y,onOpen:b,open:x,renderValue:I,SelectDisplayProps:k,variant:S="outlined"}=r,P=ue(r,T5),R=m?c5:E5,B=zi(),T=no({props:r,muiFormControl:B,states:["variant","error"]}),N=T.variant||S,L=O({},r,{variant:N,classes:o}),$=_5(L),H=ue($,R5),W=f||{standard:F.jsx(P5,{ownerState:L}),outlined:F.jsx(O5,{label:p,ownerState:L}),filled:F.jsx(A5,{ownerState:L})}[N],C=Kt(n,W.ref);return F.jsx(A.Fragment,{children:A.cloneElement(W,O({inputComponent:R,inputProps:O({children:s,error:T.error,IconComponent:u,variant:N,type:void 0,multiple:v},m?{id:d}:{autoWidth:i,defaultOpen:l,displayEmpty:c,labelId:g,MenuProps:w,onClose:y,onOpen:b,open:x,renderValue:I,SelectDisplayProps:O({id:d},k)},h,{classes:h?kn(H,h.classes):H},f?f.props.inputProps:{})},(v&&m||c)&&N==="outlined"?{notched:!0}:{},{ref:C,className:de(W.props.className,a,$.root)},!f&&{variant:N},P))})});uI.muiName="Select";function N5(t){return Te("MuiToolbar",t)}Ie("MuiToolbar",["root","gutters","regular","dense"]);const C5=["className","component","disableGutters","variant"],M5=t=>{const{classes:e,disableGutters:n,variant:r}=t;return Re({root:["root",!n&&"gutters",r]},N5,e)},B5=ae("div",{name:"MuiToolbar",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.disableGutters&&e.gutters,e[n.variant]]}})(({theme:t,ownerState:e})=>O({position:"relative",display:"flex",alignItems:"center"},!e.disableGutters&&{paddingLeft:t.spacing(2),paddingRight:t.spacing(2),[t.breakpoints.up("sm")]:{paddingLeft:t.spacing(3),paddingRight:t.spacing(3)}},e.variant==="dense"&&{minHeight:48}),({theme:t,ownerState:e})=>e.variant==="regular"&&t.mixins.toolbar),L5=A.forwardRef(function(e,n){const r=_e({props:e,name:"MuiToolbar"}),{className:i,component:s="div",disableGutters:o=!1,variant:a="regular"}=r,l=ue(r,C5),c=O({},r,{component:s,disableGutters:o,variant:a}),u=M5(c);return F.jsx(B5,O({as:s,className:de(u.root,i),ref:n,ownerState:c},l))});function D5(t){return Te("MuiTextField",t)}Ie("MuiTextField",["root"]);const F5=["autoComplete","autoFocus","children","className","color","defaultValue","disabled","error","FormHelperTextProps","fullWidth","helperText","id","InputLabelProps","inputProps","InputProps","inputRef","label","maxRows","minRows","multiline","name","onBlur","onChange","onFocus","placeholder","required","rows","select","SelectProps","type","value","variant"],$5={standard:Ug,filled:Vg,outlined:jg},W5=t=>{const{classes:e}=t;return Re({root:["root"]},D5,e)},V5=ae(v6,{name:"MuiTextField",slot:"Root",overridesResolver:(t,e)=>e.root})({}),qv=A.forwardRef(function(e,n){const r=_e({props:e,name:"MuiTextField"}),{autoComplete:i,autoFocus:s=!1,children:o,className:a,color:l="primary",defaultValue:c,disabled:u=!1,error:d=!1,FormHelperTextProps:f,fullWidth:h=!1,helperText:p,id:g,InputLabelProps:w,inputProps:v,InputProps:m,inputRef:y,label:b,maxRows:x,minRows:I,multiline:k=!1,name:S,onBlur:P,onChange:R,onFocus:B,placeholder:T,required:N=!1,rows:L,select:$=!1,SelectProps:H,type:W,value:C,variant:V="outlined"}=r,q=ue(r,F5),G=O({},r,{autoFocus:s,color:l,disabled:u,error:d,fullWidth:h,multiline:k,required:N,select:$,variant:V}),Y=W5(G),z={};V==="outlined"&&(w&&typeof w.shrink<"u"&&(z.notched=w.shrink),z.label=b),$&&((!H||!H.native)&&(z.id=void 0),z["aria-describedby"]=void 0);const K=ad(g),oe=p&&K?`${K}-helper-text`:void 0,te=b&&K?`${K}-label`:void 0,J=$5[V],X=F.jsx(J,O({"aria-describedby":oe,autoComplete:i,autoFocus:s,defaultValue:c,fullWidth:h,multiline:k,name:S,rows:L,maxRows:x,minRows:I,type:W,value:C,id:K,inputRef:y,onBlur:P,onChange:R,onFocus:B,placeholder:T,inputProps:v},z,m));return F.jsxs(V5,O({className:de(Y.root,a),disabled:u,error:d,fullWidth:h,ref:n,required:N,color:l,variant:V,ownerState:G},q,{children:[b!=null&&b!==""&&F.jsx(Z6,O({htmlFor:K,id:te},w,{children:b})),$?F.jsx(uI,O({"aria-describedby":oe,id:K,labelId:te,value:C,input:X},H,{children:o})):X,p&&F.jsx(I6,O({id:oe},f,{children:p}))]}))}),ja=t=>typeof t=="number"&&!isNaN(t),Ci=t=>typeof t=="string",yn=t=>typeof t=="function",yl=t=>Ci(t)||yn(t)?t:null,Kp=t=>A.isValidElement(t)||Ci(t)||yn(t)||ja(t);function U5(t,e,n){n===void 0&&(n=300);const{scrollHeight:r,style:i}=t;requestAnimationFrame(()=>{i.minHeight="initial",i.height=r+"px",i.transition=`all ${n}ms`,requestAnimationFrame(()=>{i.height="0",i.padding="0",i.margin="0",setTimeout(e,n)})})}function _d(t){let{enter:e,exit:n,appendPosition:r=!1,collapse:i=!0,collapseDuration:s=300}=t;return function(o){let{children:a,position:l,preventExitTransition:c,done:u,nodeRef:d,isIn:f,playToast:h}=o;const p=r?`${e}--${l}`:e,g=r?`${n}--${l}`:n,w=A.useRef(0);return A.useLayoutEffect(()=>{const v=d.current,m=p.split(" "),y=b=>{b.target===d.current&&(h(),v.removeEventListener("animationend",y),v.removeEventListener("animationcancel",y),w.current===0&&b.type!=="animationcancel"&&v.classList.remove(...m))};v.classList.add(...m),v.addEventListener("animationend",y),v.addEventListener("animationcancel",y)},[]),A.useEffect(()=>{const v=d.current,m=()=>{v.removeEventListener("animationend",m),i?U5(v,u,s):u()};f||(c?m():(w.current=1,v.className+=` ${g}`,v.addEventListener("animationend",m)))},[f]),Pe.createElement(Pe.Fragment,null,a)}}function jv(t,e){return t!=null?{content:t.content,containerId:t.props.containerId,id:t.props.toastId,theme:t.props.theme,type:t.props.type,data:t.props.data||{},isLoading:t.props.isLoading,icon:t.props.icon,status:e}:{}}const Xt=new Map;let Ka=[];const zp=new Set,H5=t=>zp.forEach(e=>e(t)),dI=()=>Xt.size>0;function fI(t,e){var n;if(e)return!((n=Xt.get(e))==null||!n.isToastActive(t));let r=!1;return Xt.forEach(i=>{i.isToastActive(t)&&(r=!0)}),r}function hI(t,e){Kp(t)&&(dI()||Ka.push({content:t,options:e}),Xt.forEach(n=>{n.buildToast(t,e)}))}function Kv(t,e){Xt.forEach(n=>{e!=null&&e!=null&&e.containerId?(e==null?void 0:e.containerId)===n.id&&n.toggle(t,e==null?void 0:e.id):n.toggle(t,e==null?void 0:e.id)})}function q5(t){const{subscribe:e,getSnapshot:n,setProps:r}=A.useRef(function(s){const o=s.containerId||1;return{subscribe(a){const l=function(u,d,f){let h=1,p=0,g=[],w=[],v=[],m=d;const y=new Map,b=new Set,x=()=>{v=Array.from(y.values()),b.forEach(S=>S())},I=S=>{w=S==null?[]:w.filter(P=>P!==S),x()},k=S=>{const{toastId:P,onOpen:R,updateId:B,children:T}=S.props,N=B==null;S.staleId&&y.delete(S.staleId),y.set(P,S),w=[...w,S.props.toastId].filter(L=>L!==S.staleId),x(),f(jv(S,N?"added":"updated")),N&&yn(R)&&R(A.isValidElement(T)&&T.props)};return{id:u,props:m,observe:S=>(b.add(S),()=>b.delete(S)),toggle:(S,P)=>{y.forEach(R=>{P!=null&&P!==R.props.toastId||yn(R.toggle)&&R.toggle(S)})},removeToast:I,toasts:y,clearQueue:()=>{p-=g.length,g=[]},buildToast:(S,P)=>{if((Y=>{let{containerId:z,toastId:K,updateId:oe}=Y;const te=z?z!==u:u!==1,J=y.has(K)&&oe==null;return te||J})(P))return;const{toastId:R,updateId:B,data:T,staleId:N,delay:L}=P,$=()=>{I(R)},H=B==null;H&&p++;const W={...m,style:m.toastStyle,key:h++,...Object.fromEntries(Object.entries(P).filter(Y=>{let[z,K]=Y;return K!=null})),toastId:R,updateId:B,data:T,closeToast:$,isIn:!1,className:yl(P.className||m.toastClassName),bodyClassName:yl(P.bodyClassName||m.bodyClassName),progressClassName:yl(P.progressClassName||m.progressClassName),autoClose:!P.isLoading&&(C=P.autoClose,V=m.autoClose,C===!1||ja(C)&&C>0?C:V),deleteToast(){const Y=y.get(R),{onClose:z,children:K}=Y.props;yn(z)&&z(A.isValidElement(K)&&K.props),f(jv(Y,"removed")),y.delete(R),p--,p<0&&(p=0),g.length>0?k(g.shift()):x()}};var C,V;W.closeButton=m.closeButton,P.closeButton===!1||Kp(P.closeButton)?W.closeButton=P.closeButton:P.closeButton===!0&&(W.closeButton=!Kp(m.closeButton)||m.closeButton);let q=S;A.isValidElement(S)&&!Ci(S.type)?q=A.cloneElement(S,{closeToast:$,toastProps:W,data:T}):yn(S)&&(q=S({closeToast:$,toastProps:W,data:T}));const G={content:q,props:W,staleId:N};m.limit&&m.limit>0&&p>m.limit&&H?g.push(G):ja(L)?setTimeout(()=>{k(G)},L):k(G)},setProps(S){m=S},setToggle:(S,P)=>{y.get(S).toggle=P},isToastActive:S=>w.some(P=>P===S),getSnapshot:()=>m.newestOnTop?v.reverse():v}}(o,s,H5);Xt.set(o,l);const c=l.observe(a);return Ka.forEach(u=>hI(u.content,u.options)),Ka=[],()=>{c(),Xt.delete(o)}},setProps(a){var l;(l=Xt.get(o))==null||l.setProps(a)},getSnapshot(){var a;return(a=Xt.get(o))==null?void 0:a.getSnapshot()}}}(t)).current;r(t);const i=A.useSyncExternalStore(e,n,n);return{getToastToRender:function(s){if(!i)return[];const o=new Map;return i.forEach(a=>{const{position:l}=a.props;o.has(l)||o.set(l,[]),o.get(l).push(a)}),Array.from(o,a=>s(a[0],a[1]))},isToastActive:fI,count:i==null?void 0:i.length}}function j5(t){const[e,n]=A.useState(!1),[r,i]=A.useState(!1),s=A.useRef(null),o=A.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:a,pauseOnHover:l,closeToast:c,onClick:u,closeOnClick:d}=t;var f,h;function p(){n(!0)}function g(){n(!1)}function w(y){const b=s.current;o.canDrag&&b&&(o.didMove=!0,e&&g(),o.delta=t.draggableDirection==="x"?y.clientX-o.start:y.clientY-o.start,o.start!==y.clientX&&(o.canCloseOnClick=!1),b.style.transform=`translate3d(${t.draggableDirection==="x"?`${o.delta}px, var(--y)`:`0, calc(${o.delta}px + var(--y))`},0)`,b.style.opacity=""+(1-Math.abs(o.delta/o.removalDistance)))}function v(){document.removeEventListener("pointermove",w),document.removeEventListener("pointerup",v);const y=s.current;if(o.canDrag&&o.didMove&&y){if(o.canDrag=!1,Math.abs(o.delta)>o.removalDistance)return i(!0),t.closeToast(),void t.collapseAll();y.style.transition="transform 0.2s, opacity 0.2s",y.style.removeProperty("transform"),y.style.removeProperty("opacity")}}(h=Xt.get((f={id:t.toastId,containerId:t.containerId,fn:n}).containerId||1))==null||h.setToggle(f.id,f.fn),A.useEffect(()=>{if(t.pauseOnFocusLoss)return document.hasFocus()||g(),window.addEventListener("focus",p),window.addEventListener("blur",g),()=>{window.removeEventListener("focus",p),window.removeEventListener("blur",g)}},[t.pauseOnFocusLoss]);const m={onPointerDown:function(y){if(t.draggable===!0||t.draggable===y.pointerType){o.didMove=!1,document.addEventListener("pointermove",w),document.addEventListener("pointerup",v);const b=s.current;o.canCloseOnClick=!0,o.canDrag=!0,b.style.transition="none",t.draggableDirection==="x"?(o.start=y.clientX,o.removalDistance=b.offsetWidth*(t.draggablePercent/100)):(o.start=y.clientY,o.removalDistance=b.offsetHeight*(t.draggablePercent===80?1.5*t.draggablePercent:t.draggablePercent)/100)}},onPointerUp:function(y){const{top:b,bottom:x,left:I,right:k}=s.current.getBoundingClientRect();y.nativeEvent.type!=="touchend"&&t.pauseOnHover&&y.clientX>=I&&y.clientX<=k&&y.clientY>=b&&y.clientY<=x?g():p()}};return a&&l&&(m.onMouseEnter=g,t.stacked||(m.onMouseLeave=p)),d&&(m.onClick=y=>{u&&u(y),o.canCloseOnClick&&c()}),{playToast:p,pauseToast:g,isRunning:e,preventExitTransition:r,toastRef:s,eventHandlers:m}}function K5(t){let{delay:e,isRunning:n,closeToast:r,type:i="default",hide:s,className:o,style:a,controlledProgress:l,progress:c,rtl:u,isIn:d,theme:f}=t;const h=s||l&&c===0,p={...a,animationDuration:`${e}ms`,animationPlayState:n?"running":"paused"};l&&(p.transform=`scaleX(${c})`);const g=de("Toastify__progress-bar",l?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${f}`,`Toastify__progress-bar--${i}`,{"Toastify__progress-bar--rtl":u}),w=yn(o)?o({rtl:u,type:i,defaultClassName:g}):de(g,o),v={[l&&c>=1?"onTransitionEnd":"onAnimationEnd"]:l&&c<1?null:()=>{d&&r()}};return Pe.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":h},Pe.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${f} Toastify__progress-bar--${i}`}),Pe.createElement("div",{role:"progressbar","aria-hidden":h?"true":"false","aria-label":"notification timer",className:w,style:p,...v}))}let z5=1;const pI=()=>""+z5++;function G5(t){return t&&(Ci(t.toastId)||ja(t.toastId))?t.toastId:pI()}function wa(t,e){return hI(t,e),e.toastId}function tu(t,e){return{...e,type:e&&e.type||t,toastId:G5(e)}}function Uc(t){return(e,n)=>wa(e,tu(t,n))}function De(t,e){return wa(t,tu("default",e))}De.loading=(t,e)=>wa(t,tu("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...e})),De.promise=function(t,e,n){let r,{pending:i,error:s,success:o}=e;i&&(r=Ci(i)?De.loading(i,n):De.loading(i.render,{...n,...i}));const a={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},l=(u,d,f)=>{if(d==null)return void De.dismiss(r);const h={type:u,...a,...n,data:f},p=Ci(d)?{render:d}:d;return r?De.update(r,{...h,...p}):De(p.render,{...h,...p}),f},c=yn(t)?t():t;return c.then(u=>l("success",o,u)).catch(u=>l("error",s,u)),c},De.success=Uc("success"),De.info=Uc("info"),De.error=Uc("error"),De.warning=Uc("warning"),De.warn=De.warning,De.dark=(t,e)=>wa(t,tu("default",{theme:"dark",...e})),De.dismiss=function(t){(function(e){var n;if(dI()){if(e==null||Ci(n=e)||ja(n))Xt.forEach(r=>{r.removeToast(e)});else if(e&&("containerId"in e||"id"in e)){const r=Xt.get(e.containerId);r?r.removeToast(e.id):Xt.forEach(i=>{i.removeToast(e.id)})}}else Ka=Ka.filter(r=>e!=null&&r.options.toastId!==e)})(t)},De.clearWaitingQueue=function(t){t===void 0&&(t={}),Xt.forEach(e=>{!e.props.limit||t.containerId&&e.id!==t.containerId||e.clearQueue()})},De.isActive=fI,De.update=function(t,e){e===void 0&&(e={});const n=((r,i)=>{var s;let{containerId:o}=i;return(s=Xt.get(o||1))==null?void 0:s.toasts.get(r)})(t,e);if(n){const{props:r,content:i}=n,s={delay:100,...r,...e,toastId:e.toastId||t,updateId:pI()};s.toastId!==t&&(s.staleId=t);const o=s.render||i;delete s.render,wa(o,s)}},De.done=t=>{De.update(t,{progress:1})},De.onChange=function(t){return zp.add(t),()=>{zp.delete(t)}},De.play=t=>Kv(!0,t),De.pause=t=>Kv(!1,t);const X5=typeof window<"u"?A.useLayoutEffect:A.useEffect,Hc=t=>{let{theme:e,type:n,isLoading:r,...i}=t;return Pe.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:e==="colored"?"currentColor":`var(--toastify-icon-color-${n})`,...i})},ch={info:function(t){return Pe.createElement(Hc,{...t},Pe.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function(t){return Pe.createElement(Hc,{...t},Pe.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function(t){return Pe.createElement(Hc,{...t},Pe.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function(t){return Pe.createElement(Hc,{...t},Pe.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return Pe.createElement("div",{className:"Toastify__spinner"})}},Y5=t=>{const{isRunning:e,preventExitTransition:n,toastRef:r,eventHandlers:i,playToast:s}=j5(t),{closeButton:o,children:a,autoClose:l,onClick:c,type:u,hideProgressBar:d,closeToast:f,transition:h,position:p,className:g,style:w,bodyClassName:v,bodyStyle:m,progressClassName:y,progressStyle:b,updateId:x,role:I,progress:k,rtl:S,toastId:P,deleteToast:R,isIn:B,isLoading:T,closeOnClick:N,theme:L}=t,$=de("Toastify__toast",`Toastify__toast-theme--${L}`,`Toastify__toast--${u}`,{"Toastify__toast--rtl":S},{"Toastify__toast--close-on-click":N}),H=yn(g)?g({rtl:S,position:p,type:u,defaultClassName:$}):de($,g),W=function(G){let{theme:Y,type:z,isLoading:K,icon:oe}=G,te=null;const J={theme:Y,type:z};return oe===!1||(yn(oe)?te=oe({...J,isLoading:K}):A.isValidElement(oe)?te=A.cloneElement(oe,J):K?te=ch.spinner():(X=>X in ch)(z)&&(te=ch[z](J))),te}(t),C=!!k||!l,V={closeToast:f,type:u,theme:L};let q=null;return o===!1||(q=yn(o)?o(V):A.isValidElement(o)?A.cloneElement(o,V):function(G){let{closeToast:Y,theme:z,ariaLabel:K="close"}=G;return Pe.createElement("button",{className:`Toastify__close-button Toastify__close-button--${z}`,type:"button",onClick:oe=>{oe.stopPropagation(),Y(oe)},"aria-label":K},Pe.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},Pe.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}(V)),Pe.createElement(h,{isIn:B,done:R,position:p,preventExitTransition:n,nodeRef:r,playToast:s},Pe.createElement("div",{id:P,onClick:c,"data-in":B,className:H,...i,style:w,ref:r},Pe.createElement("div",{...B&&{role:I},className:yn(v)?v({type:u}):de("Toastify__toast-body",v),style:m},W!=null&&Pe.createElement("div",{className:de("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!T})},W),Pe.createElement("div",null,a)),q,Pe.createElement(K5,{...x&&!C?{key:`pb-${x}`}:{},rtl:S,theme:L,delay:l,isRunning:e,isIn:B,closeToast:f,hide:d,type:u,style:b,className:y,controlledProgress:C,progress:k||0})))},Pd=function(t,e){return e===void 0&&(e=!1),{enter:`Toastify--animate Toastify__${t}-enter`,exit:`Toastify--animate Toastify__${t}-exit`,appendPosition:e}},Q5=_d(Pd("bounce",!0));_d(Pd("slide",!0));_d(Pd("zoom"));_d(Pd("flip"));const J5={position:"top-right",transition:Q5,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light"};function gI(t){let e={...J5,...t};const n=t.stacked,[r,i]=A.useState(!0),s=A.useRef(null),{getToastToRender:o,isToastActive:a,count:l}=q5(e),{className:c,style:u,rtl:d,containerId:f}=e;function h(g){const w=de("Toastify__toast-container",`Toastify__toast-container--${g}`,{"Toastify__toast-container--rtl":d});return yn(c)?c({position:g,rtl:d,defaultClassName:w}):de(w,yl(c))}function p(){n&&(i(!0),De.play())}return X5(()=>{if(n){var g;const w=s.current.querySelectorAll('[data-in="true"]'),v=12,m=(g=e.position)==null?void 0:g.includes("top");let y=0,b=0;Array.from(w).reverse().forEach((x,I)=>{const k=x;k.classList.add("Toastify__toast--stacked"),I>0&&(k.dataset.collapsed=`${r}`),k.dataset.pos||(k.dataset.pos=m?"top":"bot");const S=y*(r?.2:1)+(r?0:v*I);k.style.setProperty("--y",`${m?S:-1*S}px`),k.style.setProperty("--g",`${v}`),k.style.setProperty("--s",""+(1-(r?b:0))),y+=k.offsetHeight,b+=.025})}},[r,l,n]),Pe.createElement("div",{ref:s,className:"Toastify",id:f,onMouseEnter:()=>{n&&(i(!1),De.pause())},onMouseLeave:p},o((g,w)=>{const v=w.length?{...u}:{...u,pointerEvents:"none"};return Pe.createElement("div",{className:h(g),style:v,key:`container-${g}`},w.map(m=>{let{content:y,props:b}=m;return Pe.createElement(Y5,{...b,stacked:n,collapseAll:p,isIn:a(b.toastId,b.containerId),style:b.style,key:`toast-${b.key}`},y)}))}))}var zg={},lh={};const Z5=br(E_);var zv;function mI(){return zv||(zv=1,function(t){"use client";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return e.createSvgIcon}});var e=Z5}(lh)),lh}var eA=ud;Object.defineProperty(zg,"__esModule",{value:!0});var Gp=zg.default=void 0,tA=eA(mI()),nA=F;Gp=zg.default=(0,tA.default)((0,nA.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add");var Gg={},rA=ud;Object.defineProperty(Gg,"__esModule",{value:!0});var yI=Gg.default=void 0;oA(A);var iA=rA(mI()),sA=F;function vI(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(vI=function(r){return r?n:e})(t)}function oA(t,e){if(t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var n=vI(e);if(n&&n.has(t))return n.get(t);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if(s!=="default"&&Object.prototype.hasOwnProperty.call(t,s)){var o=i?Object.getOwnPropertyDescriptor(t,s):null;o&&(o.get||o.set)?Object.defineProperty(r,s,o):r[s]=t[s]}return r.default=t,n&&n.set(t,r),r}yI=Gg.default=(0,iA.default)((0,sA.jsx)("path",{d:"M12 1.27a11 11 0 00-3.48 21.46c.55.09.73-.28.73-.55v-1.84c-3.03.64-3.67-1.46-3.67-1.46-.55-1.29-1.28-1.65-1.28-1.65-.92-.65.1-.65.1-.65 1.1 0 1.73 1.1 1.73 1.1.92 1.65 2.57 1.2 3.21.92a2 2 0 01.64-1.47c-2.47-.27-5.04-1.19-5.04-5.5 0-1.1.46-2.1 1.2-2.84a3.76 3.76 0 010-2.93s.91-.28 3.11 1.1c1.8-.49 3.7-.49 5.5 0 2.1-1.38 3.02-1.1 3.02-1.1a3.76 3.76 0 010 2.93c.83.74 1.2 1.74 1.2 2.94 0 4.21-2.57 5.13-5.04 5.4.45.37.82.92.82 2.02v3.03c0 .27.1.64.73.55A11 11 0 0012 1.27"}),"GitHub");var Xg={exports:{}},aA=A;function wI(t,e,n){var r=typeof e=="function";aA.useEffect(function(){var i,s=!0,o=t(function(){return s});return Promise.resolve(o).then(function(a){i=a}),function(){s=!1,r&&e(i)}},r?n:e)}Xg.exports=wI;Xg.exports.useAsyncEffect=wI;var cA=Xg.exports;const lA=m0(cA),uA={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4},dA=({open:t,onClose:e})=>F.jsx(Wg,{open:t,onClose:e,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:F.jsxs($P,{sx:uA,className:"focusBorderNone",children:[F.jsx(Jn,{id:"modal-modal-title",variant:"h6",component:"h2",children:"ToDo requires the MetaNet Client"}),F.jsxs(Jn,{id:"modal-modal-description",sx:{mt:2},children:["If you don't have it yet, it can be downloaded on"," ",F.jsx("a",{href:"https://projectbabbage.com/desktop/res/MetaNet%20Client.exe",target:"_blank",rel:"noopener noreferrer",children:"Windows"}),","," ",F.jsx("a",{href:"https://projectbabbage.com/desktop/res/MetaNet%20Client.dmg",target:"_blank",rel:"noopener noreferrer",children:"macOS"}),", or"," ",F.jsx("a",{href:"https://projectbabbage.com/desktop/res/MetaNet%20Client.AppImage",target:"_blank",rel:"noopener noreferrer",children:"Linux"})]})]})}),Se=class Se{constructor(e=0,n=10,r="be"){M(this,"negative");M(this,"words");M(this,"length");M(this,"red");if(this.negative=0,this.words=[],this.length=0,this.red=null,e!==null){if((n==="le"||n==="be")&&(r=n,n=10),typeof e=="number"){this.initNumber(e,n,r);return}if(typeof e=="object"){this.initArray(e,r);return}n==="hex"&&(n=16),this.assert(n===(n|0)&&n>=2&&n<=36),e=e.toString().replace(/\s+/g,"");let i=0;e.startsWith("-")&&(i++,this.negative=1),i<e.length&&(n===16?this.parseHex(e,i,r):(this.parseBase(e,n,i),r==="le"&&this.initArray(this.toArray(),r)))}}static isBN(e){return e instanceof Se?!0:e!==null&&typeof e=="object"&&e.constructor.wordSize===Se.wordSize&&Array.isArray(e.words)}static max(e,n){return e.cmp(n)>0?e:n}static min(e,n){return e.cmp(n)<0?e:n}assert(e,n="Assertion failed"){if(!e)throw new Error(n)}initNumber(e,n,r){return e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[e&67108863],this.length=1):e<4503599627370496?(this.words=[e&67108863,e/67108864&67108863],this.length=2):(this.assert(e<=9007199254740991,"The number is larger than 2 ^ 53 (unsafe)"),this.words=[e&67108863,e/67108864&67108863,1],this.length=3),r!=="le"?this:(this.initArray(this.toArray(),r),this)}initArray(e,n){if(this.assert(typeof e.length=="number","The number must have a length"),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);let r=0;for(;r<this.length;r++)this.words[r]=0;let i,s,o=0;if(n==="be")for(r=e.length-1,i=0;r>=0;r-=3)s=e[r]|e[r-1]<<8|e[r-2]<<16,this.words[i]|=s<<o&67108863,this.words[i+1]=s>>>26-o&67108863,o+=24,o>=26&&(o-=26,i++);else if(n==="le")for(r=0,i=0;r<e.length;r+=3)s=e[r]|e[r+1]<<8|e[r+2]<<16,this.words[i]|=s<<o&67108863,this.words[i+1]=s>>>26-o&67108863,o+=24,o>=26&&(o-=26,i++);return this.strip()}parseHex4Bits(e,n){const r=e.charCodeAt(n);if(r>=48&&r<=57)return r-48;if(r>=65&&r<=70)return r-55;if(r>=97&&r<=102)return r-87;throw new Error("Invalid character in "+e)}parseHexByte(e,n,r){let i=this.parseHex4Bits(e,r);return r-1>=n&&(i|=this.parseHex4Bits(e,r-1)<<4),i}parseHex(e,n,r){this.length=Math.ceil((e.length-n)/6),this.words=new Array(this.length).fill(0);let i=0,s=0;const o=a=>{const l=this.parseHexByte(e,n,a)<<i;this.words[s]|=l&67108863,i>=18?(i-=18,s+=1,this.words[s]|=l>>>26):i+=8};if(r==="be")for(let a=e.length-1;a>=n;a-=2)o(a);else{const a=e.length-n;for(let l=a%2===0?n+1:n;l<e.length;l+=2)o(l)}return this.strip()}parseBaseWord(e,n,r,i){let s=0,o=0;const a=Math.min(e.length,r);for(let l=n;l<a;l++){const c=e.charCodeAt(l)-48;s*=i,c>=49?o=c-49+10:c>=17?o=c-17+10:o=c,this.assert(c>=0&&o<i,"Invalid character"),s+=o}return s}parseBase(e,n,r){this.words=[0],this.length=1;let i=0,s=1;for(;s<=67108863;s*=n)i++;i--,s=s/n|0;const o=e.length-r,a=o%i,l=Math.min(o,o-a)+r;let c=0,u=r;for(;u<l;u+=i)c=this.parseBaseWord(e,u,u+i,n),this.imuln(s),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(a!==0){let d=1;for(c=this.parseBaseWord(e,u,e.length,n),u=0;u<a;u++)d*=n;this.imuln(d),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}return this.strip()}copy(e){e.words=new Array(this.length);for(let n=0;n<this.length;n++)e.words[n]=this.words[n];e.length=this.length,e.negative=this.negative,e.red=this.red}static move(e,n){e.words=n.words,e.length=n.length,e.negative=n.negative,e.red=n.red}clone(){const e=new Se;return this.copy(e),e}expand(e){for(;this.length<e;)this.words[this.length++]=0;return this}strip(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this.normSign()}normSign(){return this.length===1&&this.words[0]===0&&(this.negative=0),this}inspect(){return(this.red!==null?"<BN-R: ":"<BN: ")+this.toString(16)+">"}toString(e=10,n=1){if(e===16||e==="hex")return this.toHexString(n);if(e===(e|0)&&e>=2&&e<=36)return this.toBaseString(e,n);throw new Error("Base should be between 2 and 36")}toHexString(e){let n="",r=0,i=0;for(let s=0;s<this.length;s++){const o=this.words[s],a=((o<<r|i)&16777215).toString(16);i=o>>>24-r&16777215,r+=2,r>=26&&(r-=26,s--),i!==0||s!==this.length-1?n=Se.zeros[6-a.length]+a+n:n=a+n}if(i!==0&&(n=i.toString(16)+n),e===0&&n==="0")return"";for(;n.length%e!==0&&e!==0;)n="0"+n;return this.negative!==0&&(n="-"+n),n}toBaseString(e,n){const r=Se.groupSizes[e],i=Se.groupBases[e];let s="",o=this.clone();for(o.negative=0;!o.isZero();){const a=o.modrn(i).toString(e);o=o.idivn(i),o.isZero()?s=a+s:s=Se.zeros[r-a.length]+a+s}for(this.isZero()&&(s="0"+s);s.length%n!==0;)s="0"+s;return this.negative!==0&&(s="-"+s),s}toNumber(){let e=this.words[0];if(this.length===2)e+=this.words[1]*67108864;else if(this.length===3&&this.words[2]===1)e+=4503599627370496+this.words[1]*67108864;else if(this.length>2)throw new Error("Number can only safely store up to 53 bits");return this.negative!==0?-e:e}toJSON(){return this.toString(16)}toArrayLikeLE(e,n){let r=0,i=0;for(let s=0,o=0;s<this.length;s++){const a=this.words[s]<<o|i;e[r++]=a&255,r<e.length&&(e[r++]=a>>8&255),r<e.length&&(e[r++]=a>>16&255),o===6?(r<e.length&&(e[r++]=a>>24&255),i=0,o=0):(i=a>>>24,o+=2)}if(r<e.length)for(e[r++]=i;r<e.length;)e[r++]=0}toArrayLikeBE(e,n){let r=e.length-1,i=0;for(let s=0,o=0;s<this.length;s++){const a=this.words[s]<<o|i;e[r--]=a&255,r>=0&&(e[r--]=a>>8&255),r>=0&&(e[r--]=a>>16&255),o===6?(r>=0&&(e[r--]=a>>24&255),i=0,o=0):(i=a>>>24,o+=2)}if(r>=0)for(e[r--]=i;r>=0;)e[r--]=0}toArray(e="be",n){this.strip();const r=this.byteLength(),i=n??Math.max(1,r);this.assert(r<=i,"byte array longer than desired length"),this.assert(i>0,"Requested array length <= 0");const s=new Array(i);return e==="le"?this.toArrayLikeLE(s,r):this.toArrayLikeBE(s,r),s}countWordBits(e){if(typeof Math.clz32=="function")return 32-Math.clz32(e);let n=e,r=0;return n>=4096&&(r+=13,n>>>=13),n>=64&&(r+=7,n>>>=7),n>=8&&(r+=4,n>>>=4),n>=2&&(r+=2,n>>>=2),r+n}zeroWordBits(e){if(e===0)return 26;let n=e,r=0;return n&8191||(r+=13,n>>>=13),n&127||(r+=7,n>>>=7),n&15||(r+=4,n>>>=4),n&3||(r+=2,n>>>=2),n&1||r++,r}bitLength(){const e=this.words[this.length-1],n=this.countWordBits(e);return(this.length-1)*26+n}static toBitArray(e){const n=new Array(e.bitLength());for(let r=0;r<n.length;r++){const i=r/26|0,s=r%26;n[r]=e.words[i]>>>s&1}return n}toBitArray(){return Se.toBitArray(this)}zeroBits(){if(this.isZero())return 0;let e=0;for(let n=0;n<this.length;n++){const r=this.zeroWordBits(this.words[n]);if(e+=r,r!==26)break}return e}byteLength(){return Math.ceil(this.bitLength()/8)}toTwos(e){return this.negative!==0?this.abs().inotn(e).iaddn(1):this.clone()}fromTwos(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()}isNeg(){return this.negative!==0}neg(){return this.clone().ineg()}ineg(){return this.isZero()||(this.negative^=1),this}iuor(e){for(;this.length<e.length;)this.words[this.length++]=0;for(let n=0;n<e.length;n++)this.words[n]=this.words[n]|e.words[n];return this.strip()}ior(e){return this.assert((this.negative|e.negative)===0),this.iuor(e)}or(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)}uor(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)}iuand(e){const n=Math.min(this.length,e.length);for(let r=0;r<n;r++)this.words[r]=this.words[r]&e.words[r];return this.length=n,this.strip()}iand(e){return this.assert((this.negative|e.negative)===0),this.iuand(e)}and(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)}uand(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)}iuxor(e){if(this.length>e.length)for(let n=0;n<e.length;n++)this.words[n]=this.words[n]^e.words[n];else{for(let n=0;n<this.length;n++)this.words[n]=this.words[n]^e.words[n];for(let n=this.length;n<e.length;n++)this.words[n]=e.words[n];this.length=e.length}return this.strip()}ixor(e){return this.assert((this.negative|e.negative)===0,"Neither number can be negative"),this.iuxor(e)}xor(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)}uxor(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)}inotn(e){this.assert(typeof e=="number"&&e>=0,"The width needs to be a number greater than zero");let n=Math.ceil(e/26)|0;const r=e%26;this.expand(n),r>0&&n--;let i=0;for(;i<n;i++)this.words[i]=~this.words[i]&67108863;return r>0&&(this.words[i]=~this.words[i]&67108863>>26-r),this.strip()}notn(e){return this.clone().inotn(e)}setn(e,n){this.assert(typeof e=="number"&&e>=0);const r=e/26|0,i=e%26;return this.expand(r+1),n===1||n===!0?this.words[r]=this.words[r]|1<<i:this.words[r]=this.words[r]&~(1<<i),this.strip()}iadd(e){let n;if(this.negative!==0&&e.negative===0)return this.negative=0,n=this.isub(e),this.negative^=1,this.normSign();if(this.negative===0&&e.negative!==0)return e.negative=0,n=this.isub(e),e.negative=1,n.normSign();let r,i;this.length>e.length?(r=this,i=e):(r=e,i=this);let s=0,o=0;for(;o<i.length;o++)n=(r.words[o]|0)+(i.words[o]|0)+s,this.words[o]=n&67108863,s=n>>>26;for(;s!==0&&o<r.length;o++)n=(r.words[o]|0)+s,this.words[o]=n&67108863,s=n>>>26;if(this.length=r.length,s!==0)this.words[this.length]=s,this.length++;else if(r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this}add(e){let n;return e.negative!==0&&this.negative===0?(e.negative=0,n=this.sub(e),e.negative^=1,n):e.negative===0&&this.negative!==0?(this.negative=0,n=e.sub(this),this.negative=1,n):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)}isub(e){let n;if(e.negative!==0)return e.negative=0,n=this.iadd(e),e.negative=1,n.normSign();if(this.negative!==0)return this.negative=0,this.iadd(e),this.negative=1,this.normSign();const r=this.cmp(e);if(r===0)return this.negative=0,this.length=1,this.words[0]=0,this;let i,s;r>0?(i=this,s=e):(i=e,s=this);let o=0,a=0;for(;a<s.length;a++)n=(i.words[a]|0)-(s.words[a]|0)+o,o=n>>26,this.words[a]=n&67108863;for(;o!==0&&a<i.length;a++)n=(i.words[a]|0)+o,o=n>>26,this.words[a]=n&67108863;if(o===0&&a<i.length&&i!==this)for(;a<i.length;a++)this.words[a]=i.words[a];return this.length=Math.max(this.length,a),i!==this&&(this.negative=1),this.strip()}sub(e){return this.clone().isub(e)}smallMulTo(e,n,r){r.negative=n.negative^e.negative;let i=e.length+n.length|0;r.length=i,i=i-1|0;let s=e.words[0]|0,o=n.words[0]|0,a=s*o;const l=a&67108863;let c=a/67108864|0;r.words[0]=l;let u=1;for(;u<i;u++){let d=c>>>26,f=c&67108863;const h=Math.min(u,n.length-1);for(let p=Math.max(0,u-e.length+1);p<=h;p++){const g=u-p|0;s=e.words[g]|0,o=n.words[p]|0,a=s*o+f,d+=a/67108864|0,f=a&67108863}r.words[u]=f|0,c=d|0}return c!==0?r.words[u]=c|0:r.length--,r.strip()}comb10MulTo(e,n,r){const i=e.words,s=n.words,o=r.words;let a=0,l,c,u;const d=i[0]|0,f=d&8191,h=d>>>13,p=i[1]|0,g=p&8191,w=p>>>13,v=i[2]|0,m=v&8191,y=v>>>13,b=i[3]|0,x=b&8191,I=b>>>13,k=i[4]|0,S=k&8191,P=k>>>13,R=i[5]|0,B=R&8191,T=R>>>13,N=i[6]|0,L=N&8191,$=N>>>13,H=i[7]|0,W=H&8191,C=H>>>13,V=i[8]|0,q=V&8191,G=V>>>13,Y=i[9]|0,z=Y&8191,K=Y>>>13,oe=s[0]|0,te=oe&8191,J=oe>>>13,X=s[1]|0,ie=X&8191,ge=X>>>13,ke=s[2]|0,me=ke&8191,he=ke>>>13,Be=s[3]|0,we=Be&8191,$e=Be>>>13,Nt=s[4]|0,Ne=Nt&8191,Me=Nt>>>13,E=s[5]|0,j=E&8191,Q=E>>>13,pe=s[6]|0,fe=pe&8191,Le=pe>>>13,tn=s[7]|0,Ue=tn&8191,be=tn>>>13,ye=s[8]|0,He=ye&8191,Ze=ye>>>13,Br=s[9]|0,se=Br&8191,xe=Br>>>13;r.negative=e.negative^n.negative,r.length=19,l=Math.imul(f,te),c=Math.imul(f,J),c=c+Math.imul(h,te)|0,u=Math.imul(h,J);let mt=(a+l|0)+((c&8191)<<13)|0;a=(u+(c>>>13)|0)+(mt>>>26)|0,mt&=67108863,l=Math.imul(g,te),c=Math.imul(g,J),c=c+Math.imul(w,te)|0,u=Math.imul(w,J),l=l+Math.imul(f,ie)|0,c=c+Math.imul(f,ge)|0,c=c+Math.imul(h,ie)|0,u=u+Math.imul(h,ge)|0;let rr=(a+l|0)+((c&8191)<<13)|0;a=(u+(c>>>13)|0)+(rr>>>26)|0,rr&=67108863,l=Math.imul(m,te),c=Math.imul(m,J),c=c+Math.imul(y,te)|0,u=Math.imul(y,J),l=l+Math.imul(g,ie)|0,c=c+Math.imul(g,ge)|0,c=c+Math.imul(w,ie)|0,u=u+Math.imul(w,ge)|0,l=l+Math.imul(f,me)|0,c=c+Math.imul(f,he)|0,c=c+Math.imul(h,me)|0,u=u+Math.imul(h,he)|0;let Yi=(a+l|0)+((c&8191)<<13)|0;a=(u+(c>>>13)|0)+(Yi>>>26)|0,Yi&=67108863,l=Math.imul(x,te),c=Math.imul(x,J),c=c+Math.imul(I,te)|0,u=Math.imul(I,J),l=l+Math.imul(m,ie)|0,c=c+Math.imul(m,ge)|0,c=c+Math.imul(y,ie)|0,u=u+Math.imul(y,ge)|0,l=l+Math.imul(g,me)|0,c=c+Math.imul(g,he)|0,c=c+Math.imul(w,me)|0,u=u+Math.imul(w,he)|0,l=l+Math.imul(f,we)|0,c=c+Math.imul(f,$e)|0,c=c+Math.imul(h,we)|0,u=u+Math.imul(h,$e)|0;let cf=(a+l|0)+((c&8191)<<13)|0;a=(u+(c>>>13)|0)+(cf>>>26)|0,cf&=67108863,l=Math.imul(S,te),c=Math.imul(S,J),c=c+Math.imul(P,te)|0,u=Math.imul(P,J),l=l+Math.imul(x,ie)|0,c=c+Math.imul(x,ge)|0,c=c+Math.imul(I,ie)|0,u=u+Math.imul(I,ge)|0,l=l+Math.imul(m,me)|0,c=c+Math.imul(m,he)|0,c=c+Math.imul(y,me)|0,u=u+Math.imul(y,he)|0,l=l+Math.imul(g,we)|0,c=c+Math.imul(g,$e)|0,c=c+Math.imul(w,we)|0,u=u+Math.imul(w,$e)|0,l=l+Math.imul(f,Ne)|0,c=c+Math.imul(f,Me)|0,c=c+Math.imul(h,Ne)|0,u=u+Math.imul(h,Me)|0;let lf=(a+l|0)+((c&8191)<<13)|0;a=(u+(c>>>13)|0)+(lf>>>26)|0,lf&=67108863,l=Math.imul(B,te),c=Math.imul(B,J),c=c+Math.imul(T,te)|0,u=Math.imul(T,J),l=l+Math.imul(S,ie)|0,c=c+Math.imul(S,ge)|0,c=c+Math.imul(P,ie)|0,u=u+Math.imul(P,ge)|0,l=l+Math.imul(x,me)|0,c=c+Math.imul(x,he)|0,c=c+Math.imul(I,me)|0,u=u+Math.imul(I,he)|0,l=l+Math.imul(m,we)|0,c=c+Math.imul(m,$e)|0,c=c+Math.imul(y,we)|0,u=u+Math.imul(y,$e)|0,l=l+Math.imul(g,Ne)|0,c=c+Math.imul(g,Me)|0,c=c+Math.imul(w,Ne)|0,u=u+Math.imul(w,Me)|0,l=l+Math.imul(f,j)|0,c=c+Math.imul(f,Q)|0,c=c+Math.imul(h,j)|0,u=u+Math.imul(h,Q)|0;let uf=(a+l|0)+((c&8191)<<13)|0;a=(u+(c>>>13)|0)+(uf>>>26)|0,uf&=67108863,l=Math.imul(L,te),c=Math.imul(L,J),c=c+Math.imul($,te)|0,u=Math.imul($,J),l=l+Math.imul(B,ie)|0,c=c+Math.imul(B,ge)|0,c=c+Math.imul(T,ie)|0,u=u+Math.imul(T,ge)|0,l=l+Math.imul(S,me)|0,c=c+Math.imul(S,he)|0,c=c+Math.imul(P,me)|0,u=u+Math.imul(P,he)|0,l=l+Math.imul(x,we)|0,c=c+Math.imul(x,$e)|0,c=c+Math.imul(I,we)|0,u=u+Math.imul(I,$e)|0,l=l+Math.imul(m,Ne)|0,c=c+Math.imul(m,Me)|0,c=c+Math.imul(y,Ne)|0,u=u+Math.imul(y,Me)|0,l=l+Math.imul(g,j)|0,c=c+Math.imul(g,Q)|0,c=c+Math.imul(w,j)|0,u=u+Math.imul(w,Q)|0,l=l+Math.imul(f,fe)|0,c=c+Math.imul(f,Le)|0,c=c+Math.imul(h,fe)|0,u=u+Math.imul(h,Le)|0;let df=(a+l|0)+((c&8191)<<13)|0;a=(u+(c>>>13)|0)+(df>>>26)|0,df&=67108863,l=Math.imul(W,te),c=Math.imul(W,J),c=c+Math.imul(C,te)|0,u=Math.imul(C,J),l=l+Math.imul(L,ie)|0,c=c+Math.imul(L,ge)|0,c=c+Math.imul($,ie)|0,u=u+Math.imul($,ge)|0,l=l+Math.imul(B,me)|0,c=c+Math.imul(B,he)|0,c=c+Math.imul(T,me)|0,u=u+Math.imul(T,he)|0,l=l+Math.imul(S,we)|0,c=c+Math.imul(S,$e)|0,c=c+Math.imul(P,we)|0,u=u+Math.imul(P,$e)|0,l=l+Math.imul(x,Ne)|0,c=c+Math.imul(x,Me)|0,c=c+Math.imul(I,Ne)|0,u=u+Math.imul(I,Me)|0,l=l+Math.imul(m,j)|0,c=c+Math.imul(m,Q)|0,c=c+Math.imul(y,j)|0,u=u+Math.imul(y,Q)|0,l=l+Math.imul(g,fe)|0,c=c+Math.imul(g,Le)|0,c=c+Math.imul(w,fe)|0,u=u+Math.imul(w,Le)|0,l=l+Math.imul(f,Ue)|0,c=c+Math.imul(f,be)|0,c=c+Math.imul(h,Ue)|0,u=u+Math.imul(h,be)|0;let ff=(a+l|0)+((c&8191)<<13)|0;a=(u+(c>>>13)|0)+(ff>>>26)|0,ff&=67108863,l=Math.imul(q,te),c=Math.imul(q,J),c=c+Math.imul(G,te)|0,u=Math.imul(G,J),l=l+Math.imul(W,ie)|0,c=c+Math.imul(W,ge)|0,c=c+Math.imul(C,ie)|0,u=u+Math.imul(C,ge)|0,l=l+Math.imul(L,me)|0,c=c+Math.imul(L,he)|0,c=c+Math.imul($,me)|0,u=u+Math.imul($,he)|0,l=l+Math.imul(B,we)|0,c=c+Math.imul(B,$e)|0,c=c+Math.imul(T,we)|0,u=u+Math.imul(T,$e)|0,l=l+Math.imul(S,Ne)|0,c=c+Math.imul(S,Me)|0,c=c+Math.imul(P,Ne)|0,u=u+Math.imul(P,Me)|0,l=l+Math.imul(x,j)|0,c=c+Math.imul(x,Q)|0,c=c+Math.imul(I,j)|0,u=u+Math.imul(I,Q)|0,l=l+Math.imul(m,fe)|0,c=c+Math.imul(m,Le)|0,c=c+Math.imul(y,fe)|0,u=u+Math.imul(y,Le)|0,l=l+Math.imul(g,Ue)|0,c=c+Math.imul(g,be)|0,c=c+Math.imul(w,Ue)|0,u=u+Math.imul(w,be)|0,l=l+Math.imul(f,He)|0,c=c+Math.imul(f,Ze)|0,c=c+Math.imul(h,He)|0,u=u+Math.imul(h,Ze)|0;let hf=(a+l|0)+((c&8191)<<13)|0;a=(u+(c>>>13)|0)+(hf>>>26)|0,hf&=67108863,l=Math.imul(z,te),c=Math.imul(z,J),c=c+Math.imul(K,te)|0,u=Math.imul(K,J),l=l+Math.imul(q,ie)|0,c=c+Math.imul(q,ge)|0,c=c+Math.imul(G,ie)|0,u=u+Math.imul(G,ge)|0,l=l+Math.imul(W,me)|0,c=c+Math.imul(W,he)|0,c=c+Math.imul(C,me)|0,u=u+Math.imul(C,he)|0,l=l+Math.imul(L,we)|0,c=c+Math.imul(L,$e)|0,c=c+Math.imul($,we)|0,u=u+Math.imul($,$e)|0,l=l+Math.imul(B,Ne)|0,c=c+Math.imul(B,Me)|0,c=c+Math.imul(T,Ne)|0,u=u+Math.imul(T,Me)|0,l=l+Math.imul(S,j)|0,c=c+Math.imul(S,Q)|0,c=c+Math.imul(P,j)|0,u=u+Math.imul(P,Q)|0,l=l+Math.imul(x,fe)|0,c=c+Math.imul(x,Le)|0,c=c+Math.imul(I,fe)|0,u=u+Math.imul(I,Le)|0,l=l+Math.imul(m,Ue)|0,c=c+Math.imul(m,be)|0,c=c+Math.imul(y,Ue)|0,u=u+Math.imul(y,be)|0,l=l+Math.imul(g,He)|0,c=c+Math.imul(g,Ze)|0,c=c+Math.imul(w,He)|0,u=u+Math.imul(w,Ze)|0,l=l+Math.imul(f,se)|0,c=c+Math.imul(f,xe)|0,c=c+Math.imul(h,se)|0,u=u+Math.imul(h,xe)|0;let pf=(a+l|0)+((c&8191)<<13)|0;a=(u+(c>>>13)|0)+(pf>>>26)|0,pf&=67108863,l=Math.imul(z,ie),c=Math.imul(z,ge),c=c+Math.imul(K,ie)|0,u=Math.imul(K,ge),l=l+Math.imul(q,me)|0,c=c+Math.imul(q,he)|0,c=c+Math.imul(G,me)|0,u=u+Math.imul(G,he)|0,l=l+Math.imul(W,we)|0,c=c+Math.imul(W,$e)|0,c=c+Math.imul(C,we)|0,u=u+Math.imul(C,$e)|0,l=l+Math.imul(L,Ne)|0,c=c+Math.imul(L,Me)|0,c=c+Math.imul($,Ne)|0,u=u+Math.imul($,Me)|0,l=l+Math.imul(B,j)|0,c=c+Math.imul(B,Q)|0,c=c+Math.imul(T,j)|0,u=u+Math.imul(T,Q)|0,l=l+Math.imul(S,fe)|0,c=c+Math.imul(S,Le)|0,c=c+Math.imul(P,fe)|0,u=u+Math.imul(P,Le)|0,l=l+Math.imul(x,Ue)|0,c=c+Math.imul(x,be)|0,c=c+Math.imul(I,Ue)|0,u=u+Math.imul(I,be)|0,l=l+Math.imul(m,He)|0,c=c+Math.imul(m,Ze)|0,c=c+Math.imul(y,He)|0,u=u+Math.imul(y,Ze)|0,l=l+Math.imul(g,se)|0,c=c+Math.imul(g,xe)|0,c=c+Math.imul(w,se)|0,u=u+Math.imul(w,xe)|0;let gf=(a+l|0)+((c&8191)<<13)|0;a=(u+(c>>>13)|0)+(gf>>>26)|0,gf&=67108863,l=Math.imul(z,me),c=Math.imul(z,he),c=c+Math.imul(K,me)|0,u=Math.imul(K,he),l=l+Math.imul(q,we)|0,c=c+Math.imul(q,$e)|0,c=c+Math.imul(G,we)|0,u=u+Math.imul(G,$e)|0,l=l+Math.imul(W,Ne)|0,c=c+Math.imul(W,Me)|0,c=c+Math.imul(C,Ne)|0,u=u+Math.imul(C,Me)|0,l=l+Math.imul(L,j)|0,c=c+Math.imul(L,Q)|0,c=c+Math.imul($,j)|0,u=u+Math.imul($,Q)|0,l=l+Math.imul(B,fe)|0,c=c+Math.imul(B,Le)|0,c=c+Math.imul(T,fe)|0,u=u+Math.imul(T,Le)|0,l=l+Math.imul(S,Ue)|0,c=c+Math.imul(S,be)|0,c=c+Math.imul(P,Ue)|0,u=u+Math.imul(P,be)|0,l=l+Math.imul(x,He)|0,c=c+Math.imul(x,Ze)|0,c=c+Math.imul(I,He)|0,u=u+Math.imul(I,Ze)|0,l=l+Math.imul(m,se)|0,c=c+Math.imul(m,xe)|0,c=c+Math.imul(y,se)|0,u=u+Math.imul(y,xe)|0;let mf=(a+l|0)+((c&8191)<<13)|0;a=(u+(c>>>13)|0)+(mf>>>26)|0,mf&=67108863,l=Math.imul(z,we),c=Math.imul(z,$e),c=c+Math.imul(K,we)|0,u=Math.imul(K,$e),l=l+Math.imul(q,Ne)|0,c=c+Math.imul(q,Me)|0,c=c+Math.imul(G,Ne)|0,u=u+Math.imul(G,Me)|0,l=l+Math.imul(W,j)|0,c=c+Math.imul(W,Q)|0,c=c+Math.imul(C,j)|0,u=u+Math.imul(C,Q)|0,l=l+Math.imul(L,fe)|0,c=c+Math.imul(L,Le)|0,c=c+Math.imul($,fe)|0,u=u+Math.imul($,Le)|0,l=l+Math.imul(B,Ue)|0,c=c+Math.imul(B,be)|0,c=c+Math.imul(T,Ue)|0,u=u+Math.imul(T,be)|0,l=l+Math.imul(S,He)|0,c=c+Math.imul(S,Ze)|0,c=c+Math.imul(P,He)|0,u=u+Math.imul(P,Ze)|0,l=l+Math.imul(x,se)|0,c=c+Math.imul(x,xe)|0,c=c+Math.imul(I,se)|0,u=u+Math.imul(I,xe)|0;let yf=(a+l|0)+((c&8191)<<13)|0;a=(u+(c>>>13)|0)+(yf>>>26)|0,yf&=67108863,l=Math.imul(z,Ne),c=Math.imul(z,Me),c=c+Math.imul(K,Ne)|0,u=Math.imul(K,Me),l=l+Math.imul(q,j)|0,c=c+Math.imul(q,Q)|0,c=c+Math.imul(G,j)|0,u=u+Math.imul(G,Q)|0,l=l+Math.imul(W,fe)|0,c=c+Math.imul(W,Le)|0,c=c+Math.imul(C,fe)|0,u=u+Math.imul(C,Le)|0,l=l+Math.imul(L,Ue)|0,c=c+Math.imul(L,be)|0,c=c+Math.imul($,Ue)|0,u=u+Math.imul($,be)|0,l=l+Math.imul(B,He)|0,c=c+Math.imul(B,Ze)|0,c=c+Math.imul(T,He)|0,u=u+Math.imul(T,Ze)|0,l=l+Math.imul(S,se)|0,c=c+Math.imul(S,xe)|0,c=c+Math.imul(P,se)|0,u=u+Math.imul(P,xe)|0;let vf=(a+l|0)+((c&8191)<<13)|0;a=(u+(c>>>13)|0)+(vf>>>26)|0,vf&=67108863,l=Math.imul(z,j),c=Math.imul(z,Q),c=c+Math.imul(K,j)|0,u=Math.imul(K,Q),l=l+Math.imul(q,fe)|0,c=c+Math.imul(q,Le)|0,c=c+Math.imul(G,fe)|0,u=u+Math.imul(G,Le)|0,l=l+Math.imul(W,Ue)|0,c=c+Math.imul(W,be)|0,c=c+Math.imul(C,Ue)|0,u=u+Math.imul(C,be)|0,l=l+Math.imul(L,He)|0,c=c+Math.imul(L,Ze)|0,c=c+Math.imul($,He)|0,u=u+Math.imul($,Ze)|0,l=l+Math.imul(B,se)|0,c=c+Math.imul(B,xe)|0,c=c+Math.imul(T,se)|0,u=u+Math.imul(T,xe)|0;let wf=(a+l|0)+((c&8191)<<13)|0;a=(u+(c>>>13)|0)+(wf>>>26)|0,wf&=67108863,l=Math.imul(z,fe),c=Math.imul(z,Le),c=c+Math.imul(K,fe)|0,u=Math.imul(K,Le),l=l+Math.imul(q,Ue)|0,c=c+Math.imul(q,be)|0,c=c+Math.imul(G,Ue)|0,u=u+Math.imul(G,be)|0,l=l+Math.imul(W,He)|0,c=c+Math.imul(W,Ze)|0,c=c+Math.imul(C,He)|0,u=u+Math.imul(C,Ze)|0,l=l+Math.imul(L,se)|0,c=c+Math.imul(L,xe)|0,c=c+Math.imul($,se)|0,u=u+Math.imul($,xe)|0;let bf=(a+l|0)+((c&8191)<<13)|0;a=(u+(c>>>13)|0)+(bf>>>26)|0,bf&=67108863,l=Math.imul(z,Ue),c=Math.imul(z,be),c=c+Math.imul(K,Ue)|0,u=Math.imul(K,be),l=l+Math.imul(q,He)|0,c=c+Math.imul(q,Ze)|0,c=c+Math.imul(G,He)|0,u=u+Math.imul(G,Ze)|0,l=l+Math.imul(W,se)|0,c=c+Math.imul(W,xe)|0,c=c+Math.imul(C,se)|0,u=u+Math.imul(C,xe)|0;let xf=(a+l|0)+((c&8191)<<13)|0;a=(u+(c>>>13)|0)+(xf>>>26)|0,xf&=67108863,l=Math.imul(z,He),c=Math.imul(z,Ze),c=c+Math.imul(K,He)|0,u=Math.imul(K,Ze),l=l+Math.imul(q,se)|0,c=c+Math.imul(q,xe)|0,c=c+Math.imul(G,se)|0,u=u+Math.imul(G,xe)|0;let kf=(a+l|0)+((c&8191)<<13)|0;a=(u+(c>>>13)|0)+(kf>>>26)|0,kf&=67108863,l=Math.imul(z,se),c=Math.imul(z,xe),c=c+Math.imul(K,se)|0,u=Math.imul(K,xe);let If=(a+l|0)+((c&8191)<<13)|0;return a=(u+(c>>>13)|0)+(If>>>26)|0,If&=67108863,o[0]=mt,o[1]=rr,o[2]=Yi,o[3]=cf,o[4]=lf,o[5]=uf,o[6]=df,o[7]=ff,o[8]=hf,o[9]=pf,o[10]=gf,o[11]=mf,o[12]=yf,o[13]=vf,o[14]=wf,o[15]=bf,o[16]=xf,o[17]=kf,o[18]=If,a!==0&&(o[19]=a,r.length++),r}bigMulTo(e,n,r){r.negative=n.negative^e.negative,r.length=e.length+n.length;let i=0,s=0,o=0;for(;o<r.length-1;o++){let a=s;s=0;let l=i&67108863;const c=Math.min(o,n.length-1);for(let u=Math.max(0,o-e.length+1);u<=c;u++){const d=o-u,f=e.words[d]|0,h=n.words[u]|0,p=f*h;let g=p&67108863;a=a+(p/67108864|0)|0,g=g+l|0,l=g&67108863,a=a+(g>>>26)|0,s+=a>>>26,a&=67108863}r.words[o]=l,i=a,a=s}return i!==0?r.words[o]=i:r.length--,r.strip()}mulTo(e,n){let r;const i=this.length+e.length;return this.length===10&&e.length===10?r=this.comb10MulTo(this,e,n):i<63?r=this.smallMulTo(this,e,n):r=this.bigMulTo(this,e,n),r}mul(e){const n=new Se;return n.words=new Array(this.length+e.length),this.mulTo(e,n)}imul(e){return this.clone().mulTo(e,this)}imuln(e){const n=e<0;n&&(e=-e),this.assert(typeof e=="number"),this.assert(e<67108864);let r=0,i=0;for(;i<this.length;i++){const s=(this.words[i]|0)*e,o=(s&67108863)+(r&67108863);r>>=26,r+=s/67108864|0,r+=o>>>26,this.words[i]=o&67108863}return r!==0&&(this.words[i]=r,this.length++),n?this.ineg():this}muln(e){return this.clone().imuln(e)}sqr(){return this.mul(this)}isqr(){return this.imul(this.clone())}pow(e){const n=Se.toBitArray(e);if(n.length===0)return new Se(1);let r=this,i=0;for(;i<n.length&&n[i]===0;i++,r=r.sqr());if(++i<n.length)for(let s=r.sqr();i<n.length;i++,s=s.sqr())n[i]!==0&&(r=r.mul(s));return r}iushln(e){this.assert(typeof e=="number"&&e>=0);const n=e%26,r=(e-n)/26,i=67108863>>>26-n<<26-n;let s;if(n!==0){let o=0;for(s=0;s<this.length;s++){const a=this.words[s]&i,l=(this.words[s]|0)-a<<n;this.words[s]=l|o,o=a>>>26-n}o!==0&&(this.words[s]=o,this.length++)}if(r!==0){for(s=this.length-1;s>=0;s--)this.words[s+r]=this.words[s];for(s=0;s<r;s++)this.words[s]=0;this.length+=r}return this.strip()}ishln(e){return this.assert(this.negative===0),this.iushln(e)}iushrn(e,n,r){this.assert(typeof e=="number"&&e>=0);let i;typeof n=="number"&&n!==0?i=(n-n%26)/26:i=0;const s=e%26,o=Math.min((e-s)/26,this.length),a=67108863^67108863>>>s<<s,l=r;i-=o,i=Math.max(0,i);let c=0;if(typeof l<"u"){for(;c<o;c++)l.words[c]=this.words[c];l.length=o}if(o!==0)if(this.length>o)for(this.length-=o,c=0;c<this.length;c++)this.words[c]=this.words[c+o];else this.words[0]=0,this.length=1;let u=0;for(c=this.length-1;c>=0&&(u!==0||c>=i);c--){const d=this.words[c]|0;this.words[c]=u<<26-s|d>>>s,u=d&a}return l!=null&&u!==0&&(l.words[l.length++]=u),this.length===0&&(this.words[0]=0,this.length=1),this.strip()}ishrn(e,n,r){return this.assert(this.negative===0),this.iushrn(e,n,r)}shln(e){return this.clone().ishln(e)}ushln(e){return this.clone().iushln(e)}shrn(e){return this.clone().ishrn(e)}ushrn(e){return this.clone().iushrn(e)}testn(e){this.assert(typeof e=="number"&&e>=0);const n=e%26,r=(e-n)/26,i=1<<n;return this.length<=r?!1:!!(this.words[r]&i)}imaskn(e){this.assert(typeof e=="number"&&e>=0);const n=e%26;let r=(e-n)/26;if(this.assert(this.negative===0,"imaskn works only with positive numbers"),this.length<=r)return this;if(n!==0&&r++,this.length=Math.min(r,this.length),n!==0){const i=67108863^67108863>>>n<<n;this.words[this.length-1]&=i}return this.strip()}maskn(e){return this.clone().imaskn(e)}iaddn(e){return this.assert(typeof e=="number"),this.assert(e<67108864,"num is too large"),e<0?this.isubn(-e):this.negative!==0?this.length===1&&(this.words[0]|0)<=e?(this.words[0]=e-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)}_iaddn(e){this.words[0]+=e;let n=0;for(;n<this.length&&this.words[n]>=67108864;n++)this.words[n]-=67108864,n===this.length-1?this.words[n+1]=1:this.words[n+1]++;return this.length=Math.max(this.length,n+1),this}isubn(e){if(this.assert(typeof e=="number"),this.assert(e<67108864),e<0)return this.iaddn(-e);if(this.negative!==0)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(let n=0;n<this.length&&this.words[n]<0;n++)this.words[n]+=67108864,this.words[n+1]-=1;return this.strip()}addn(e){return this.clone().iaddn(e)}subn(e){return this.clone().isubn(e)}iabs(){return this.negative=0,this}abs(){return this.clone().iabs()}_ishlnsubmul(e,n,r){const i=e.length+r;let s;this.expand(i);let o,a=0;for(s=0;s<e.length;s++){o=(this.words[s+r]|0)+a;const l=(e.words[s]|0)*n;o-=l&67108863,a=(o>>26)-(l/67108864|0),this.words[s+r]=o&67108863}for(;s<this.length-r;s++)o=(this.words[s+r]|0)+a,a=o>>26,this.words[s+r]=o&67108863;if(a===0)return this.strip();for(this.assert(a===-1,"carry must be -1"),a=0,s=0;s<this.length;s++)o=-(this.words[s]|0)+a,a=o>>26,this.words[s]=o&67108863;return this.negative=1,this.strip()}wordDiv(e,n){let r=this.length-e.length,i=this.clone(),s=e,o=s.words[s.length-1]|0;r=26-this.countWordBits(o),r!==0&&(s=s.ushln(r),i.iushln(r),o=s.words[s.length-1]|0);const l=i.length-s.length;let c;if(n!=="mod"){c=new Se,c.length=l+1,c.words=new Array(c.length);for(let d=0;d<c.length;d++)c.words[d]=0}const u=i.clone()._ishlnsubmul(s,1,l);u.negative===0&&(i=u,typeof c<"u"&&(c.words[l]=1));for(let d=l-1;d>=0;d--){let f=(i.words[s.length+d]|0)*67108864+(i.words[s.length+d-1]|0);for(f=Math.min(f/o|0,67108863),i._ishlnsubmul(s,f,d);i.negative!==0;)f--,i.negative=0,i._ishlnsubmul(s,1,d),i.isZero()||(i.negative^=1);typeof c<"u"&&(c.words[d]=f)}return typeof c<"u"&&c.strip(),i.strip(),n!=="div"&&r!==0&&i.iushrn(r),{div:c??null,mod:i}}divmod(e,n,r){if(this.assert(!e.isZero()),this.isZero())return{div:new Se(0),mod:new Se(0)};let i,s,o;return this.negative!==0&&e.negative===0?(o=this.neg().divmod(e,n),n!=="mod"&&(i=o.div.neg()),n!=="div"&&(s=o.mod.neg(),r===!0&&s.negative!==0&&s.iadd(e)),{div:i,mod:s}):this.negative===0&&e.negative!==0?(o=this.divmod(e.neg(),n),n!=="mod"&&(i=o.div.neg()),{div:i,mod:o.mod}):this.negative&e.negative?(o=this.neg().divmod(e.neg(),n),n!=="div"&&(s=o.mod.neg(),r===!0&&s.negative!==0&&s.isub(e)),{div:o.div,mod:s}):e.length>this.length||this.cmp(e)<0?{div:new Se(0),mod:this}:e.length===1?n==="div"?{div:this.divn(e.words[0]),mod:null}:n==="mod"?{div:null,mod:new Se(this.modrn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new Se(this.modrn(e.words[0]))}:this.wordDiv(e,n)}div(e){return this.divmod(e,"div",!1).div}mod(e){return this.divmod(e,"mod",!1).mod}umod(e){return this.divmod(e,"mod",!0).mod}divRound(e){const n=this.divmod(e);if(n.mod.isZero())return n.div;const r=n.div.negative!==0?n.mod.isub(e):n.mod,i=e.ushrn(1),s=e.andln(1),o=r.cmp(i);return o<0||s===1&&o===0?n.div:n.div.negative!==0?n.div.isubn(1):n.div.iaddn(1)}modrn(e){const n=e<0;n&&(e=-e),this.assert(e<=67108863);const r=(1<<26)%e;let i=0;for(let s=this.length-1;s>=0;s--)i=(r*i+(this.words[s]|0))%e;return n?-i:i}idivn(e){const n=e<0;n&&(e=-e),this.assert(e<=67108863);let r=0;for(let i=this.length-1;i>=0;i--){const s=(this.words[i]|0)+r*67108864;this.words[i]=s/e|0,r=s%e}return this.strip(),n?this.ineg():this}divn(e){return this.clone().idivn(e)}egcd(e){this.assert(e.negative===0,"p must not be negative"),this.assert(!e.isZero(),"p must not be zero");let n=this;const r=e.clone();n.negative!==0?n=n.umod(e):n=n.clone();const i=new Se(1),s=new Se(0),o=new Se(0),a=new Se(1);let l=0;for(;n.isEven()&&r.isEven();)n.iushrn(1),r.iushrn(1),++l;const c=r.clone(),u=n.clone();for(;!n.isZero();){let d=0,f=1;for(;!(n.words[0]&f)&&d<26;++d,f<<=1);if(d>0)for(n.iushrn(d);d-- >0;)(i.isOdd()||s.isOdd())&&(i.iadd(c),s.isub(u)),i.iushrn(1),s.iushrn(1);let h=0,p=1;for(;!(r.words[0]&p)&&h<26;++h,p<<=1);if(h>0)for(r.iushrn(h);h-- >0;)(o.isOdd()||a.isOdd())&&(o.iadd(c),a.isub(u)),o.iushrn(1),a.iushrn(1);n.cmp(r)>=0?(n.isub(r),i.isub(o),s.isub(a)):(r.isub(n),o.isub(i),a.isub(s))}return{a:o,b:a,gcd:r.iushln(l)}}_invmp(e){this.assert(e.negative===0,"p must not be negative"),this.assert(!e.isZero(),"p must not be zero");let n=this;const r=e.clone();n.negative!==0?n=n.umod(e):n=n.clone();const i=new Se(1),s=new Se(0),o=r.clone();for(;n.cmpn(1)>0&&r.cmpn(1)>0;){let l=0,c=1;for(;!(n.words[0]&c)&&l<26;++l,c<<=1);if(l>0)for(n.iushrn(l);l-- >0;)i.isOdd()&&i.iadd(o),i.iushrn(1);let u=0,d=1;for(;!(r.words[0]&d)&&u<26;++u,d<<=1);if(u>0)for(r.iushrn(u);u-- >0;)s.isOdd()&&s.iadd(o),s.iushrn(1);n.cmp(r)>=0?(n.isub(r),i.isub(s)):(r.isub(n),s.isub(i))}let a;return n.cmpn(1)===0?a=i:a=s,a.cmpn(0)<0&&a.iadd(e),a}gcd(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();let n=this.clone(),r=e.clone();n.negative=0,r.negative=0;let i=0;for(;n.isEven()&&r.isEven();i++)n.iushrn(1),r.iushrn(1);do{for(;n.isEven();)n.iushrn(1);for(;r.isEven();)r.iushrn(1);const s=n.cmp(r);if(s<0){const o=n;n=r,r=o}else if(s===0||r.cmpn(1)===0)break;n.isub(r)}while(!0);return r.iushln(i)}invm(e){return this.egcd(e).a.umod(e)}isEven(){return(this.words[0]&1)===0}isOdd(){return(this.words[0]&1)===1}andln(e){return this.words[0]&e}bincn(e){this.assert(typeof e=="number");const n=e%26,r=(e-n)/26,i=1<<n;if(this.length<=r)return this.expand(r+1),this.words[r]|=i,this;let s=i,o=r;for(;s!==0&&o<this.length;o++){let a=this.words[o]|0;a+=s,s=a>>>26,a&=67108863,this.words[o]=a}return s!==0&&(this.words[o]=s,this.length++),this}isZero(){return this.length===1&&this.words[0]===0}cmpn(e){const n=e<0;if(this.negative!==0&&!n)return-1;if(this.negative===0&&n)return 1;this.strip();let r;if(this.length>1)r=1;else{n&&(e=-e),this.assert(e<=67108863,"Number is too big");const i=this.words[0]|0;r=i===e?0:i<e?-1:1}return this.negative!==0?-r|0:r}cmp(e){if(this.negative!==0&&e.negative===0)return-1;if(this.negative===0&&e.negative!==0)return 1;const n=this.ucmp(e);return this.negative!==0?-n|0:n}ucmp(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;let n=0;for(let r=this.length-1;r>=0;r--){const i=this.words[r]|0,s=e.words[r]|0;if(i!==s){i<s?n=-1:i>s&&(n=1);break}}return n}gtn(e){return this.cmpn(e)===1}gt(e){return this.cmp(e)===1}gten(e){return this.cmpn(e)>=0}gte(e){return this.cmp(e)>=0}ltn(e){return this.cmpn(e)===-1}lt(e){return this.cmp(e)===-1}lten(e){return this.cmpn(e)<=0}lte(e){return this.cmp(e)<=0}eqn(e){return this.cmpn(e)===0}eq(e){return this.cmp(e)===0}toRed(e){return this.assert(this.red==null,"Already a number in reduction context"),this.assert(this.negative===0,"red works only with positives"),e.convertTo(this).forceRed(e)}fromRed(){return this.assert(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)}forceRed(e){return this.red=e,this}redAdd(e){return this.assert(this.red,"redAdd works only with red numbers"),this.red.add(this,e)}redIAdd(e){return this.assert(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)}redSub(e){return this.assert(this.red,"redSub works only with red numbers"),this.red.sub(this,e)}redISub(e){return this.assert(this.red,"redISub works only with red numbers"),this.red.isub(this,e)}redShl(e){return this.assert(this.red,"redShl works only with red numbers"),this.red.shl(this,e)}redMul(e){return this.assert(this.red,"redMul works only with red numbers"),this.red.verify2(this,e),this.red.mul(this,e)}redIMul(e){return this.assert(this.red,"redMul works only with red numbers"),this.red.verify2(this,e),this.red.imul(this,e)}redSqr(){return this.assert(this.red,"redSqr works only with red numbers"),this.red.verify1(this),this.red.sqr(this)}redISqr(){return this.assert(this.red,"redISqr works only with red numbers"),this.red.verify1(this),this.red.isqr(this)}redSqrt(){return this.assert(this.red,"redSqrt works only with red numbers"),this.red.verify1(this),this.red.sqrt(this)}redInvm(){return this.assert(this.red,"redInvm works only with red numbers"),this.red.verify1(this),this.red.invm(this)}redNeg(){return this.assert(this.red,"redNeg works only with red numbers"),this.red.verify1(this),this.red.neg(this)}redPow(e){return this.assert(this.red!=null&&e.red==null,"redPow(normalNum)"),this.red.verify1(this),this.red.pow(this,e)}static fromHex(e,n){return n==="big"?new Se(e,16):new Se(e,16,"le")}toHex(e=0){return this.toString("hex",e*2)}static fromJSON(e){return new Se(e)}static fromNumber(e){return new Se(e)}static fromString(e,n){return new Se(e,n)}static fromSm(e,n="big"){let r=e;return e.length===0?new Se(0):(n==="little"&&(r=[...r],r=r.reverse()),r[0]&128?(r=[...r],r[0]=r[0]&127,new Se(r).neg()):new Se(r))}toSm(e="big"){let n;return this.cmpn(0)===-1?(n=this.neg().toArray(),n[0]&128?n=[128,...n]:n[0]=n[0]|128):(n=this.toArray(),n[0]&128&&(n=[0,...n])),n.length===1&&n[0]===0&&(n=[]),e==="little"&&(n=n.reverse()),n}static fromBits(e,n=!1){if(e=e&2147483648?e-4294967296:e,n&&e&8388608)throw new Error("negative bit set");const r=e>>24,i=e&8388607;let s=[i>>24&255,i>>16&255,i>>8&255,i&255];if(r<=3)s=s.slice(1,1+r);else for(let o=0;o<r-3;o++)s.push(0);return e&8388608?new Se(s).neg():new Se(s)}toBits(){let e;for(this.ltn(0)?e=this.neg().toArray("be"):e=this.toArray("be");e.length<4;)e.unshift(0);if(e.every(s=>s===0))return 0;for(;e[0]===0;)e.shift();let n=e.length,r=e.slice(0,3).reduce((s,o)=>s*256+o,0);r&8388608&&(e.unshift(0),n+=1,r>>>=8);let i=n<<24|r;return this.ltn(0)&&(i|=8388608),i>>>0}static fromScriptNum(e,n,r){if(r===void 0&&(r=Number.MAX_SAFE_INTEGER),e.length>r)throw new Error("script number overflow");if(n===!0&&e.length>0&&!(e[e.length-1]&127)&&(e.length<=1||!(e[e.length-2]&128)))throw new Error("non-minimally encoded script number");return Se.fromSm(e,"little")}toScriptNum(){return this.toSm("little")}};M(Se,"zeros",["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"]),M(Se,"groupSizes",[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5]),M(Se,"groupBases",[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176]),M(Se,"wordSize",26);let D=Se;class fA{constructor(e,n){M(this,"name");M(this,"p");M(this,"k");M(this,"n");M(this,"tmp");this.name=e,this.p=new D(n,16),this.n=this.p.bitLength(),this.k=new D(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}_tmp(){const e=new D;return e.words=new Array(Math.ceil(this.n/13)),e}ireduce(e){let n=e,r;do this.split(n,this.tmp),n=this.imulK(n),n=n.iadd(this.tmp),r=n.bitLength();while(r>this.n);const i=r<this.n?-1:n.ucmp(this.p);return i===0?(n.words[0]=0,n.length=1):i>0?n.isub(this.p):(n.strip,n.strip()),n}split(e,n){e.iushrn(this.n,0,n)}imulK(e){return e.imul(this.k)}}class hA extends fA{constructor(){super("k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}split(e,n){const i=Math.min(e.length,9);let s=0;for(;s<i;s++)n.words[s]=e.words[s];if(n.length=i,e.length<=9){e.words[0]=0,e.length=1;return}let o=e.words[9];for(n.words[n.length++]=o&4194303,s=10;s<e.length;s++){const a=e.words[s]|0;e.words[s-10]=(a&4194303)<<4|o>>>22,o=a}o>>>=22,e.words[s-10]=o,o===0&&e.length>10?e.length-=10:e.length-=9}imulK(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;let n=0;for(let r=0;r<e.length;r++){const i=e.words[r]|0;n+=i*977,e.words[r]=n&67108863,n=i*64+(n/67108864|0)}return e.words[e.length-1]===0&&(e.length--,e.words[e.length-1]===0&&e.length--),e}}class nu{constructor(e){M(this,"prime");M(this,"m");if(e==="k256"){const n=new hA;this.m=n.p,this.prime=n}else this.assert(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}assert(e,n="Assertion failed"){if(!e)throw new Error(n)}verify1(e){this.assert(e.negative===0,"red works only with positives"),this.assert(e.red,"red works only with red numbers")}verify2(e,n){this.assert((e.negative|n.negative)===0,"red works only with positives"),this.assert(e.red!=null&&e.red===n.red,"red works only with red numbers")}imod(e){return this.prime!=null?this.prime.ireduce(e).forceRed(this):(D.move(e,e.umod(this.m).forceRed(this)),e)}neg(e){return e.isZero()?e.clone():this.m.sub(e).forceRed(this)}add(e,n){this.verify2(e,n);const r=e.add(n);return r.cmp(this.m)>=0&&r.isub(this.m),r.forceRed(this)}iadd(e,n){this.verify2(e,n);const r=e.iadd(n);return r.cmp(this.m)>=0&&r.isub(this.m),r}sub(e,n){this.verify2(e,n);const r=e.sub(n);return r.cmpn(0)<0&&r.iadd(this.m),r.forceRed(this)}isub(e,n){this.verify2(e,n);const r=e.isub(n);return r.cmpn(0)<0&&r.iadd(this.m),r}shl(e,n){return this.verify1(e),this.imod(e.ushln(n))}imul(e,n){return this.verify2(e,n),this.imod(e.imul(n))}mul(e,n){return this.verify2(e,n),this.imod(e.mul(n))}isqr(e){return this.imul(e,e.clone())}sqr(e){return this.mul(e,e)}sqrt(e){if(e.isZero())return e.clone();const n=this.m.andln(3);if(this.assert(n%2===1),n===3){const p=this.m.add(new D(1)).iushrn(2);return this.pow(e,p)}const r=this.m.subn(1);let i=0;for(;!r.isZero()&&r.andln(1)===0;)i++,r.iushrn(1);this.assert(!r.isZero());const s=new D(1).toRed(this),o=s.redNeg(),a=this.m.subn(1).iushrn(1),l=this.m.bitLength(),c=new D(2*l*l).toRed(this);for(;this.pow(c,a).cmp(o)!==0;)c.redIAdd(o);let u=this.pow(c,r),d=this.pow(e,r.addn(1).iushrn(1)),f=this.pow(e,r),h=i;for(;f.cmp(s)!==0;){let p=f,g=0;for(;p.cmp(s)!==0;g++)p=p.redSqr();this.assert(g<h);const w=this.pow(u,new D(1).iushln(h-g-1));d=d.redMul(w),u=w.redSqr(),f=f.redMul(u),h=g}return d}invm(e){const n=e._invmp(this.m);return n.negative!==0?(n.negative=0,this.imod(n).redNeg()):this.imod(n)}pow(e,n){if(n.isZero())return new D(1).toRed(this);if(n.cmpn(1)===0)return e.clone();const r=4,i=new Array(1<<r);i[0]=new D(1).toRed(this),i[1]=e;let s=2;for(;s<i.length;s++)i[s]=this.mul(i[s-1],e);let o=i[0],a=0,l=0,c=n.bitLength()%26;for(c===0&&(c=26),s=n.length-1;s>=0;s--){const u=n.words[s];for(let d=c-1;d>=0;d--){const f=u>>d&1;if(o!==i[0]&&(o=this.sqr(o)),f===0&&a===0){l=0;continue}a<<=1,a|=f,l++,!(l!==r&&(s!==0||d!==0))&&(o=this.mul(o,i[a]),l=0,a=0)}c=26}return o}convertTo(e){const n=e.umod(this.m);return n===e?n.clone():n}convertFrom(e){const n=e.clone();return n.red=null,n}}class pA extends nu{constructor(n){super(n);M(this,"shift");M(this,"r");M(this,"r2");M(this,"rinv");M(this,"minv");this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new D(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}convertTo(n){return this.imod(n.ushln(this.shift))}convertFrom(n){const r=this.imod(n.mul(this.rinv));return r.red=null,r}imul(n,r){if(n.isZero()||r.isZero())return n.words[0]=0,n.length=1,n;const i=n.imul(r),s=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),o=i.isub(s).iushrn(this.shift);let a=o;return o.cmp(this.m)>=0?a=o.isub(this.m):o.cmpn(0)<0&&(a=o.iadd(this.m)),a.forceRed(this)}mul(n,r){if(n.isZero()||r.isZero())return new D(0).forceRed(this);const i=n.mul(r),s=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),o=i.isub(s).iushrn(this.shift);let a=o;return o.cmp(this.m)>=0?a=o.isub(this.m):o.cmpn(0)<0&&(a=o.iadd(this.m)),a.forceRed(this)}invm(n){return this.imod(n._invmp(this.m).mul(this.r2)).forceRed(this)}}class bI{constructor(e){M(this,"curve");M(this,"type");M(this,"precomputed");this.curve=new kt,this.type=e,this.precomputed=null}}class Mn extends bI{constructor(n,r,i){super("jacobian");M(this,"x");M(this,"y");M(this,"z");M(this,"zOne");n===null&&r===null&&i===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new D(0)):(D.isBN(n)||(n=new D(n,16)),this.x=n,D.isBN(r)||(r=new D(r,16)),this.y=r,D.isBN(i)||(i=new D(i,16)),this.z=i),this.x.red==null&&(this.x=this.x.toRed(this.curve.red)),this.y.red==null&&(this.y=this.y.toRed(this.curve.red)),this.z.red==null&&(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}toP(){if(this.isInfinity())return new vn(null,null);const n=this.z.redInvm(),r=n.redSqr(),i=this.x.redMul(r),s=this.y.redMul(r).redMul(n);return new vn(i,s)}neg(){return new Mn(this.x,this.y.redNeg(),this.z)}add(n){if(this.isInfinity())return n;if(n.isInfinity())return this;const r=n.z.redSqr(),i=this.z.redSqr(),s=this.x.redMul(r),o=n.x.redMul(i),a=this.y.redMul(r.redMul(n.z)),l=n.y.redMul(i.redMul(this.z)),c=s.redSub(o),u=a.redSub(l);if(c.cmpn(0)===0)return u.cmpn(0)!==0?new Mn(null,null,null):this.dbl();const d=c.redSqr(),f=d.redMul(c),h=s.redMul(d),p=u.redSqr().redIAdd(f).redISub(h).redISub(h),g=u.redMul(h.redISub(p)).redISub(a.redMul(f)),w=this.z.redMul(n.z).redMul(c);return new Mn(p,g,w)}mixedAdd(n){if(this.isInfinity())return n.toJ();if(n.isInfinity())return this;if(n.x===null||n.y===null)throw new Error("Point coordinates cannot be null");const r=this.z.redSqr(),i=this.x,s=n.x.redMul(r),o=this.y,a=n.y.redMul(r).redMul(this.z),l=i.redSub(s),c=o.redSub(a);if(l.cmpn(0)===0)return c.cmpn(0)!==0?new Mn(null,null,null):this.dbl();const u=l.redSqr(),d=u.redMul(l),f=i.redMul(u),h=c.redSqr().redIAdd(d).redISub(f).redISub(f),p=c.redMul(f.redISub(h)).redISub(o.redMul(d)),g=this.z.redMul(l);return new Mn(h,p,g)}dblp(n){if(n===0)return this;if(this.isInfinity())return this;if(typeof n>"u")return this.dbl();let r=this;for(let i=0;i<n;i++)r=r.dbl();return r}dbl(){if(this.isInfinity())return this;let n,r,i;if(this.zOne){const s=this.x.redSqr(),o=this.y.redSqr(),a=o.redSqr();let l=this.x.redAdd(o).redSqr().redISub(s).redISub(a);l=l.redIAdd(l);const c=s.redAdd(s).redIAdd(s),u=c.redSqr().redISub(l).redISub(l);let d=a.redIAdd(a);d=d.redIAdd(d),d=d.redIAdd(d),n=u,r=c.redMul(l.redISub(u)).redISub(d),i=this.y.redAdd(this.y)}else{const s=this.x.redSqr(),o=this.y.redSqr(),a=o.redSqr();let l=this.x.redAdd(o).redSqr().redISub(s).redISub(a);l=l.redIAdd(l);const c=s.redAdd(s).redIAdd(s),u=c.redSqr();let d=a.redIAdd(a);d=d.redIAdd(d),d=d.redIAdd(d),n=u.redISub(l).redISub(l),r=c.redMul(l.redISub(n)).redISub(d),i=this.y.redMul(this.z),i=i.redIAdd(i)}return new Mn(n,r,i)}eq(n){if(n.type==="affine")return this.eq(n.toJ());if(this===n)return!0;const r=this.z.redSqr();n=n;const i=n.z.redSqr();if(this.x.redMul(i).redISub(n.x.redMul(r)).cmpn(0)!==0)return!1;const s=r.redMul(this.z),o=i.redMul(n.z);return this.y.redMul(o).redISub(n.y.redMul(s)).cmpn(0)===0}eqXToP(n){var a;const r=this.z.redSqr(),i=n.toRed((a=this.curve)==null?void 0:a.red).redMul(r);if(this.x.cmp(i)===0)return!0;const s=n.clone();if(this.curve===null||this.curve.redN==null)throw new Error("Curve or redN is not initialized.");const o=this.curve.redN.redMul(r);for(;s.cmp(this.curve.p)<0;){if(s.iadd(this.curve.n),s.cmp(this.curve.p)>=0)return!1;if(i.redIAdd(o),this.x.cmp(i)===0)return!0}return!1}inspect(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"}isInfinity(){return this.z.cmpn(0)===0}}const Vi=(t,e="Hash assertion failed")=>{if(!t)throw new Error(e)};class Od{constructor(e,n,r,i){M(this,"pending");M(this,"pendingTotal");M(this,"blockSize");M(this,"outSize");M(this,"endian");M(this,"_delta8");M(this,"_delta32");M(this,"padLength");M(this,"hmacStrength");this.pending=null,this.pendingTotal=0,this.blockSize=e,this.outSize=n,this.hmacStrength=r,this.padLength=i/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}_update(e,n){throw new Error("Not implemented")}_digest(){throw new Error("Not implemented")}_digestHex(){throw new Error("Not implemented")}update(e,n){if(e=fc(e,n),this.pending==null?this.pending=e:this.pending=this.pending.concat(e),this.pendingTotal+=e.length,this.pending.length>=this._delta8){e=this.pending;const r=e.length%this._delta8;this.pending=e.slice(e.length-r,e.length),this.pending.length===0&&(this.pending=null),e=vA(e,0,e.length-r,this.endian);for(let i=0;i<e.length;i+=this._delta32)this._update(e,i)}return this}digest(){return this.update(this._pad()),Vi(this.pending===null),this._digest()}digestHex(){return this.update(this._pad()),Vi(this.pending===null),this._digestHex()}_pad(){let e=this.pendingTotal;const n=this._delta8,r=n-(e+this.padLength)%n,i=new Array(r+this.padLength);i[0]=128;let s;for(s=1;s<r;s++)i[s]=0;e<<=3;let o;if(this.endian==="big"){for(o=8;o<this.padLength;o++)i[s++]=0;i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=e>>>24&255,i[s++]=e>>>16&255,i[s++]=e>>>8&255,i[s++]=e&255}else for(i[s++]=e&255,i[s++]=e>>>8&255,i[s++]=e>>>16&255,i[s++]=e>>>24&255,i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=0,o=8;o<this.padLength;o++)i[s++]=0;return i}}function gA(t,e){return(t.charCodeAt(e)&64512)!==55296||e<0||e+1>=t.length?!1:(t.charCodeAt(e+1)&64512)===56320}function fc(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];const n=[];if(typeof t=="string")if(e!=="hex"){let r=0;for(let i=0;i<t.length;i++){let s=t.charCodeAt(i);s<128?n[r++]=s:s<2048?(n[r++]=s>>6|192,n[r++]=s&63|128):gA(t,i)?(s=65536+((s&1023)<<10)+(t.charCodeAt(++i)&1023),n[r++]=s>>18|240,n[r++]=s>>12&63|128,n[r++]=s>>6&63|128,n[r++]=s&63|128):(n[r++]=s>>12|224,n[r++]=s>>6&63|128,n[r++]=s&63|128)}}else{t=t.replace(/[^a-z0-9]+/gi,""),t.length%2!==0&&(t="0"+t);for(let r=0;r<t.length;r+=2)n.push(parseInt(t[r]+t[r+1],16))}else{t=t;for(let r=0;r<t.length;r++)n[r]=t[r]|0}return n}function mA(t){return(t>>>24|t>>>8&65280|t<<8&16711680|(t&255)<<24)>>>0}function Ad(t,e){let n="";for(let r=0;r<t.length;r++){let i=t[r];e==="little"&&(i=mA(i)),n+=yA(i.toString(16))}return n}function yA(t){return t.length===7?"0"+t:t.length===6?"00"+t:t.length===5?"000"+t:t.length===4?"0000"+t:t.length===3?"00000"+t:t.length===2?"000000"+t:t.length===1?"0000000"+t:t}function vA(t,e,n,r){const i=n-e;Vi(i%4===0);const s=new Array(i/4);for(let o=0,a=e;o<s.length;o++,a+=4){let l;r==="big"?l=t[a]<<24|t[a+1]<<16|t[a+2]<<8|t[a+3]:l=t[a+3]<<24|t[a+2]<<16|t[a+1]<<8|t[a],s[o]=l>>>0}return s}function Nd(t,e){const n=new Array(t.length*4);for(let r=0,i=0;r<t.length;r++,i+=4){const s=t[r];e==="big"?(n[i]=s>>>24,n[i+1]=s>>>16&255,n[i+2]=s>>>8&255,n[i+3]=s&255):(n[i+3]=s>>>24,n[i+2]=s>>>16&255,n[i+1]=s>>>8&255,n[i]=s&255)}return n}function gr(t,e){return t>>>e|t<<32-e}function Ri(t,e){return t<<e|t>>>32-e}function _t(t,e){return t+e>>>0}function bo(t,e,n){return t+e+n>>>0}function Xp(t,e,n,r){return t+e+n+r>>>0}function xI(t,e,n,r,i){return t+e+n+r+i>>>0}function wA(t,e,n,r){if(t===0)return kI(e,n,r);if(t===1||t===3)return bA(e,n,r);if(t===2)return II(e,n,r)}function kI(t,e,n){return t&e^~t&n}function II(t,e,n){return t&e^t&n^e&n}function bA(t,e,n){return t^e^n}function xA(t){return gr(t,2)^gr(t,13)^gr(t,22)}function kA(t){return gr(t,6)^gr(t,11)^gr(t,25)}function IA(t){return gr(t,7)^gr(t,18)^t>>>3}function SA(t){return gr(t,17)^gr(t,19)^t>>>10}const EA=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],TA=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],RA=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],_A=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11];function Gv(t,e,n,r){return t<=15?e^n^r:t<=31?e&n|~e&r:t<=47?(e|~n)^r:t<=63?e&r|n&~r:e^(n|~r)}function PA(t){return t<=15?0:t<=31?1518500249:t<=47?1859775393:t<=63?2400959708:2840853838}function OA(t){return t<=15?1352829926:t<=31?1548603684:t<=47?1836072691:t<=63?2053994217:0}function Fr(t,e,n,r){const i=t[e],s=t[e+1],o=r+s>>>0,a=(o<r?1:0)+n+i;t[e]=a>>>0,t[e+1]=o}function uh(t,e,n,r){return(e+r>>>0<e?1:0)+t+n>>>0}function dh(t,e,n,r){return e+r>>>0}function AA(t,e,n,r,i,s,o,a){let l=0,c=e;return c=c+r>>>0,l+=c<e?1:0,c=c+s>>>0,l+=c<s?1:0,c=c+a>>>0,l+=c<a?1:0,t+n+i+o+l>>>0}function NA(t,e,n,r,i,s,o,a){return e+r+s+a>>>0}function CA(t,e,n,r,i,s,o,a,l,c){let u=0,d=e;return d=d+r>>>0,u+=d<e?1:0,d=d+s>>>0,u+=d<s?1:0,d=d+a>>>0,u+=d<a?1:0,d=d+c>>>0,u+=d<c?1:0,t+n+i+o+l+u>>>0}function MA(t,e,n,r,i,s,o,a,l,c){return e+r+s+a+c>>>0}function mr(t,e,n){return(e<<32-n|t>>>n)>>>0}function yr(t,e,n){return(t<<32-n|e>>>n)>>>0}function SI(t,e,n){return t>>>n}function EI(t,e,n){return(t<<32-n|e>>>n)>>>0}class Yg extends Od{constructor(){super(512,160,192,64);M(this,"h");this.endian="little",this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}_update(n,r){let i=this.h[0],s=this.h[1],o=this.h[2],a=this.h[3],l=this.h[4],c=i,u=s,d=o,f=a,h=l,p;for(let g=0;g<80;g++)p=_t(Ri(Xp(i,Gv(g,s,o,a),n[EA[g]+r],PA(g)),RA[g]),l),i=l,l=a,a=Ri(o,10),o=s,s=p,p=_t(Ri(Xp(c,Gv(79-g,u,d,f),n[TA[g]+r],OA(g)),_A[g]),h),c=h,h=f,f=Ri(d,10),d=u,u=p;p=bo(this.h[1],o,f),this.h[1]=bo(this.h[2],a,h),this.h[2]=bo(this.h[3],l,c),this.h[3]=bo(this.h[4],i,u),this.h[4]=bo(this.h[0],s,d),this.h[0]=p}_digest(){return Nd(this.h,"little")}_digestHex(){return Ad(this.h,"little")}}class si extends Od{constructor(){super(512,256,192,64);M(this,"h");M(this,"W");M(this,"k");this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],this.W=new Array(64)}_update(n,r){const i=this.W;r===void 0&&(r=0);let s;for(s=0;s<16;s++)i[s]=n[r+s];for(;s<i.length;s++)i[s]=Xp(SA(i[s-2]),i[s-7],IA(i[s-15]),i[s-16]);let o=this.h[0],a=this.h[1],l=this.h[2],c=this.h[3],u=this.h[4],d=this.h[5],f=this.h[6],h=this.h[7];for(Vi(this.k.length===i.length),s=0;s<i.length;s++){const p=xI(h,kA(u),kI(u,d,f),this.k[s],i[s]),g=_t(xA(o),II(o,a,l));h=f,f=d,d=u,u=_t(c,p),c=l,l=a,a=o,o=_t(p,g)}this.h[0]=_t(this.h[0],o),this.h[1]=_t(this.h[1],a),this.h[2]=_t(this.h[2],l),this.h[3]=_t(this.h[3],c),this.h[4]=_t(this.h[4],u),this.h[5]=_t(this.h[5],d),this.h[6]=_t(this.h[6],f),this.h[7]=_t(this.h[7],h)}_digest(){return Nd(this.h,"big")}_digestHex(){return Ad(this.h,"big")}}class ba extends Od{constructor(){super(512,160,80,64);M(this,"h");M(this,"W");M(this,"k");this.k=[1518500249,1859775393,2400959708,3395469782],this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}_update(n,r){const i=this.W;r===void 0&&(r=0);let s;for(s=0;s<16;s++)i[s]=n[r+s];for(;s<i.length;s++)i[s]=Ri(i[s-3]^i[s-8]^i[s-14]^i[s-16],1);let o=this.h[0],a=this.h[1],l=this.h[2],c=this.h[3],u=this.h[4];for(s=0;s<i.length;s++){const d=~~(s/20),f=xI(Ri(o,5),wA(d,a,l,c),u,i[s],this.k[d]);u=c,c=l,l=Ri(a,30),a=o,o=f}this.h[0]=_t(this.h[0],o),this.h[1]=_t(this.h[1],a),this.h[2]=_t(this.h[2],l),this.h[3]=_t(this.h[3],c),this.h[4]=_t(this.h[4],u)}_digest(){return Nd(this.h,"big")}_digestHex(){return Ad(this.h,"big")}}class xa extends Od{constructor(){super(1024,512,192,128);M(this,"h");M(this,"W");M(this,"k");this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],this.W=new Array(160)}_prepareBlock(n,r){const i=this.W;let s;for(s=0;s<32;s++)i[s]=n[r+s];for(;s<i.length;s+=2){const o=jA(i[s-4],i[s-3]),a=KA(i[s-4],i[s-3]),l=i[s-14],c=i[s-13],u=HA(i[s-30],i[s-29]),d=qA(i[s-30],i[s-29]),f=i[s-32],h=i[s-31];i[s]=AA(o,a,l,c,u,d,f,h),i[s+1]=NA(o,a,l,c,u,d,f,h)}}_update(n,r){this._prepareBlock(n,r);const i=this.W;let s=this.h[0],o=this.h[1],a=this.h[2],l=this.h[3],c=this.h[4],u=this.h[5],d=this.h[6],f=this.h[7],h=this.h[8],p=this.h[9],g=this.h[10],w=this.h[11],v=this.h[12],m=this.h[13],y=this.h[14],b=this.h[15];Vi(this.k.length===i.length);for(let x=0;x<i.length;x+=2){let I=y,k=b,S=VA(h,p),P=UA(h,p);const R=BA(h,p,g,w,v),B=LA(h,p,g,w,v,m),T=this.k[x],N=this.k[x+1],L=i[x],$=i[x+1],H=CA(I,k,S,P,R,B,T,N,L,$),W=MA(I,k,S,P,R,B,T,N,L,$);I=$A(s,o),k=WA(s,o),S=DA(s,o,a,l,c),P=FA(s,o,a,l,c,u);const C=uh(I,k,S,P),V=dh(I,k,S,P);y=v,b=m,v=g,m=w,g=h,w=p,h=uh(d,f,H,W),p=dh(f,f,H,W),d=c,f=u,c=a,u=l,a=s,l=o,s=uh(H,W,C,V),o=dh(H,W,C,V)}Fr(this.h,0,s,o),Fr(this.h,2,a,l),Fr(this.h,4,c,u),Fr(this.h,6,d,f),Fr(this.h,8,h,p),Fr(this.h,10,g,w),Fr(this.h,12,v,m),Fr(this.h,14,y,b)}_digest(){return Nd(this.h,"big")}_digestHex(){return Ad(this.h,"big")}}function BA(t,e,n,r,i,s){let o=t&n^~t&i;return o<0&&(o+=4294967296),o}function LA(t,e,n,r,i,s){let o=e&r^~e&s;return o<0&&(o+=4294967296),o}function DA(t,e,n,r,i,s){let o=t&n^t&i^n&i;return o<0&&(o+=4294967296),o}function FA(t,e,n,r,i,s){let o=e&r^e&s^r&s;return o<0&&(o+=4294967296),o}function $A(t,e){const n=mr(t,e,28),r=mr(e,t,2),i=mr(e,t,7);let s=n^r^i;return s<0&&(s+=4294967296),s}function WA(t,e){const n=yr(t,e,28),r=yr(e,t,2),i=yr(e,t,7);let s=n^r^i;return s<0&&(s+=4294967296),s}function VA(t,e){const n=mr(t,e,14),r=mr(t,e,18),i=mr(e,t,9);let s=n^r^i;return s<0&&(s+=4294967296),s}function UA(t,e){const n=yr(t,e,14),r=yr(t,e,18),i=yr(e,t,9);let s=n^r^i;return s<0&&(s+=4294967296),s}function HA(t,e){const n=mr(t,e,1),r=mr(t,e,8),i=SI(t,e,7);let s=n^r^i;return s<0&&(s+=4294967296),s}function qA(t,e){const n=yr(t,e,1),r=yr(t,e,8),i=EI(t,e,7);let s=n^r^i;return s<0&&(s+=4294967296),s}function jA(t,e){const n=mr(t,e,19),r=mr(e,t,29),i=SI(t,e,6);let s=n^r^i;return s<0&&(s+=4294967296),s}function KA(t,e){const n=yr(t,e,19),r=yr(e,t,29),i=EI(t,e,6);let s=n^r^i;return s<0&&(s+=4294967296),s}class Cd{constructor(e){M(this,"inner");M(this,"outer");M(this,"blockSize",64);M(this,"outSize",32);e=fc(e,"hex"),e.length>this.blockSize&&(e=new si().update(e).digest()),Vi(e.length<=this.blockSize);let n;for(n=e.length;n<this.blockSize;n++)e.push(0);for(n=0;n<e.length;n++)e[n]^=54;for(this.inner=new si().update(e),n=0;n<e.length;n++)e[n]^=106;this.outer=new si().update(e)}update(e,n){return this.inner.update(e,n),this}digest(){return this.outer.update(this.inner.digest()),this.outer.digest()}digestHex(){return this.outer.update(this.inner.digest()),this.outer.digestHex()}}class TI{constructor(e){M(this,"inner");M(this,"outer");M(this,"blockSize",64);e=fc(e,"hex"),e.length>this.blockSize&&(e=new ba().update(e).digest());let n;for(n=e.length;n<this.blockSize;n++)e.push(0);for(n=0;n<e.length;n++)e[n]^=54;for(this.inner=new ba().update(e),n=0;n<e.length;n++)e[n]^=106;this.outer=new ba().update(e)}update(e,n){return this.inner.update(e,n),this}digest(){return this.outer.update(this.inner.digest()),this.outer.digest()}digestHex(){return this.outer.update(this.inner.digest()),this.outer.digestHex()}}class Qg{constructor(e){M(this,"inner");M(this,"outer");M(this,"blockSize",128);M(this,"outSize",32);e=fc(e,"hex"),e.length>this.blockSize&&(e=new xa().update(e).digest()),Vi(e.length<=this.blockSize);let n;for(n=e.length;n<this.blockSize;n++)e.push(0);for(n=0;n<e.length;n++)e[n]^=54;for(this.inner=new xa().update(e),n=0;n<e.length;n++)e[n]^=106;this.outer=new xa().update(e)}update(e,n){return this.inner.update(e,n),this}digest(){return this.outer.update(this.inner.digest()),this.outer.digest()}digestHex(){return this.outer.update(this.inner.digest()),this.outer.digestHex()}}const RI=(t,e)=>new Yg().update(t,e).digest(),_I=(t,e)=>new ba().update(t,e).digest(),fn=(t,e)=>new si().update(t,e).digest(),vl=(t,e)=>new xa().update(t,e).digest(),un=(t,e)=>{const n=new si().update(t,e).digest();return new si().update(n).digest()},Md=(t,e)=>{const n=new si().update(t,e).digest();return new Yg().update(n).digest()},dr=(t,e,n)=>new Cd(t).update(e,n).digest(),As=(t,e,n)=>new Qg(t).update(e,n).digest();function PI(t,e,n,r,i="sha512"){if(i!=="sha512")throw new Error("Only sha512 is supported in this PBKDF2 implementation");const s=new Array(r),o=[...e,0,0,0,0];let a=0;const l=64,c=Math.ceil(r/l);for(let u=1;u<=c;u++){o[e.length]=u>>24&255,o[e.length+1]=u>>16&255,o[e.length+2]=u>>8&255,o[e.length+3]=u&255;const d=As(t,o);let f=d;for(let h=1;h<n;h++){f=As(t,f);for(let p=0;p<l;p++)d[p]^=f[p]}for(let h=0;h<d.length;h++)s[a+h]=d[h];a+=l}return s.slice(0,r)}const zA=Object.freeze(Object.defineProperty({__proto__:null,RIPEMD160:Yg,SHA1:ba,SHA1HMAC:TI,SHA256:si,SHA256HMAC:Cd,SHA512:xa,SHA512HMAC:Qg,hash160:Md,hash256:un,pbkdf2:PI,ripemd160:RI,sha1:_I,sha256:fn,sha256hmac:dr,sha512:vl,sha512hmac:As,toArray:fc},Symbol.toStringTag,{value:"Module"})),OI=t=>t.length%2===1?"0"+t:t,Z=t=>{let e="";for(const n of t)e+=OI(n.toString(16));return e},U=(t,e)=>{if(Array.isArray(t))return t.slice();if(t===void 0)return[];if(typeof t!="string")return Array.from(t,n=>n|0);switch(e){case"hex":return GA(t);case"base64":return XA(t);default:return YA(t)}},GA=t=>{t=t.replace(/[^a-z0-9]+/gi,""),t.length%2!==0&&(t="0"+t);const e=[];for(let n=0;n<t.length;n+=2)e.push(parseInt(t[n]+t[n+1],16));return e},XA=t=>{const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=[];let r=0,i=0;for(const s of t.replace(/=+$/,""))r=r<<6|e.indexOf(s),i+=6,i>=8&&(i-=8,n.push(r>>i&255),r&=(1<<i)-1);return n};function YA(t){const e=[];for(let n=0;n<t.length;n++){const r=t.codePointAt(n);if(r===void 0)throw new Error(`Index out of range: ${n}`);let i=r;i>65535?n++:i>=55296&&i<=57343&&(i=65533),i<=127?e.push(i):i<=2047?e.push(192|i>>6,128|i&63):i<=65535?e.push(224|i>>12,128|i>>6&63,128|i&63):e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}return e}const re=t=>{let e="",n=0;for(let r=0;r<t.length;r++){const i=t[r];if(n>0){n--;continue}if(i<=127)e+=String.fromCharCode(i);else if(i>=192&&i<=223){const s=t[r+1];n=1;const o=(i&31)<<6|s&63;e+=String.fromCharCode(o)}else if(i>=224&&i<=239){const s=t[r+1],o=t[r+2];n=2;const a=(i&15)<<12|(s&63)<<6|o&63;e+=String.fromCharCode(a)}else if(i>=240&&i<=247){const s=t[r+1],o=t[r+2],a=t[r+3];n=3;const l=(i&7)<<18|(s&63)<<12|(o&63)<<6|a&63,c=55296+(l-65536>>10),u=56320+(l-65536&1023);e+=String.fromCharCode(c,u)}}return e},Ui=(t,e)=>{switch(e){case"hex":return Z(t);case"utf8":return re(t);default:return t}};function Ae(t){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";let n="",r;for(r=0;r<t.length;r+=3){const i=t[r],s=r+1<t.length?t[r+1]:0,o=r+2<t.length?t[r+2]:0,a=i>>2,l=(i&3)<<4|s>>4,c=(s&15)<<2|o>>6,u=o&63;n+=e.charAt(a)+e.charAt(l),n+=r+1<t.length?e.charAt(c):"=",n+=r+2<t.length?e.charAt(u):"="}return n}const ra="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",ru=t=>{if(t===""||typeof t!="string")throw new Error(`Expected base58 string but got “${t}”`);const e=t.match(/[IOl0]/gmu);if(e!==null)throw new Error(`Invalid base58 character “${e.join("")}”`);const n=t.match(/^1+/gmu),r=n!==null?n[0].length:0,i=(t.length-r)*(Math.log(58)/Math.log(256))+1>>>0;return[...new Uint8Array([...new Uint8Array(r),...(t.match(/./gmu)??[]).map(o=>ra.indexOf(o)).reduce((o,a)=>(o=o.map(l=>{const c=l*58+a;return a=c>>8,c}),o),new Uint8Array(i)).reverse().filter((o=>a=>o=o||a)(!1))])]},iu=t=>{const e=Array(256).fill(-1);for(let r=0;r<ra.length;++r)e[ra.charCodeAt(r)]=r;const n=[];for(const r of t){let i=r;for(let s=0;s<n.length;++s){const o=(e[n[s]]<<8)+i;n[s]=ra.charCodeAt(o%58),i=o/58|0}for(;i!==0;)n.push(ra.charCodeAt(i%58)),i=i/58|0}for(const r of t){if(r!==0)break;n.push(49)}return n.reverse(),String.fromCharCode(...n)},Bd=(t,e=[0])=>{let n=un([...e,...t]);return n=[...e,...t,...n.slice(0,4)],iu(n)},Ld=(t,e,n=1)=>{const r=ru(t);let i=r.slice(0,n),s=r.slice(n,-4),o=[...i,...s];return o=un(o),r.slice(-4).forEach((a,l)=>{if(a!==o[l])throw new Error("Invalid checksum")}),e==="hex"&&(i=Z(i),s=Z(s)),{prefix:i,data:s}};class ne{constructor(e){M(this,"bufs");this.bufs=e!==void 0?e:[]}getLength(){let e=0;for(const n of this.bufs)e=e+n.length;return e}toArray(){const e=this.getLength(),n=new Array(e);let r=0;for(const i of this.bufs)for(const s of i)n[r++]=s;return n}write(e){return this.bufs.push(e),this}writeReverse(e){const n=new Array(e.length);for(let r=0;r<n.length;r++)n[r]=e[e.length-1-r];return this.bufs.push(n),this}writeUInt8(e){const n=new Array(1);return n[0]=e,this.write(n),this}writeInt8(e){const n=new Array(1);return n[0]=e&255,this.write(n),this}writeUInt16BE(e){return this.bufs.push([e>>8&255,e&255]),this}writeInt16BE(e){return this.writeUInt16BE(e&65535)}writeUInt16LE(e){return this.bufs.push([e&255,e>>8&255]),this}writeInt16LE(e){return this.writeUInt16LE(e&65535)}writeUInt32BE(e){return this.bufs.push([e>>24&255,e>>16&255,e>>8&255,e&255]),this}writeInt32BE(e){return this.writeUInt32BE(e>>>0)}writeUInt32LE(e){return this.bufs.push([e&255,e>>8&255,e>>16&255,e>>24&255]),this}writeInt32LE(e){return this.writeUInt32LE(e>>>0)}writeUInt64BEBn(e){const n=e.toArray("be",8);return this.write(n),this}writeUInt64LEBn(e){const n=e.toArray("be",8);return this.writeReverse(n),this}writeUInt64LE(e){const n=new D(e).toArray("be",8);return this.writeReverse(n),this}writeVarIntNum(e){const n=ne.varIntNum(e);return this.write(n),this}writeVarIntBn(e){const n=ne.varIntBn(e);return this.write(n),this}static varIntNum(e){let n;if(e<253)n=[e];else if(e<65536)n=[253,e&255,e>>8&255];else if(e<4294967296)n=[254,e&255,e>>8&255,e>>16&255,e>>24&255];else{const r=e&4294967295,i=Math.floor(e/4294967296)&4294967295;n=[255,r&255,r>>8&255,r>>16&255,r>>24&255,i&255,i>>8&255,i>>16&255,i>>24&255]}return n}static varIntBn(e){let n;if(e.ltn(253))n=[e.toNumber()];else if(e.ltn(65536)){const r=e.toNumber();n=[253,r&255,r>>8&255]}else if(e.lt(new D(4294967296))){const r=e.toNumber();n=[254,r&255,r>>8&255,r>>16&255,r>>24&255]}else{const r=new ne;r.writeUInt8(255),r.writeUInt64LEBn(e),n=r.toArray()}return n}}class Ge{constructor(e=[],n=0){M(this,"bin");M(this,"pos");this.bin=e,this.pos=n}eof(){return this.pos>=this.bin.length}read(e=this.bin.length){const n=this.pos,r=this.pos+e;return this.pos=r,this.bin.slice(n,r)}readReverse(e=this.bin.length){const n=new Array(e);for(let r=0;r<e;r++)n[r]=this.bin[this.pos+e-1-r];return this.pos+=e,n}readUInt8(){const e=this.bin[this.pos];return this.pos+=1,e}readInt8(){const e=this.bin[this.pos];return this.pos+=1,e&128?e-256:e}readUInt16BE(){const e=this.bin[this.pos]<<8|this.bin[this.pos+1];return this.pos+=2,e}readInt16BE(){const e=this.readUInt16BE();return e&32768?e-65536:e}readUInt16LE(){const e=this.bin[this.pos]|this.bin[this.pos+1]<<8;return this.pos+=2,e}readInt16LE(){const e=this.readUInt16LE();return e&32768?e-65536:e}readUInt32BE(){const e=this.bin[this.pos]*16777216+(this.bin[this.pos+1]<<16|this.bin[this.pos+2]<<8|this.bin[this.pos+3]);return this.pos+=4,e}readInt32BE(){const e=this.readUInt32BE();return e&2147483648?e-4294967296:e}readUInt32LE(){const e=(this.bin[this.pos]|this.bin[this.pos+1]<<8|this.bin[this.pos+2]<<16|this.bin[this.pos+3]<<24)>>>0;return this.pos+=4,e}readInt32LE(){const e=this.readUInt32LE();return e&2147483648?e-4294967296:e}readUInt64BEBn(){const e=this.bin.slice(this.pos,this.pos+8),n=new D(e);return this.pos=this.pos+8,n}readUInt64LEBn(){const e=this.readReverse(8);return new D(e)}readVarIntNum(){const e=this.readUInt8();let n;switch(e){case 253:return this.readUInt16LE();case 254:return this.readUInt32LE();case 255:if(n=this.readUInt64LEBn(),n.lte(new D(2).pow(new D(53))))return n.toNumber();throw new Error("number too large to retain precision - use readVarIntBn");default:return e}}readVarInt(){switch(this.bin[this.pos]){case 253:return this.read(3);case 254:return this.read(5);case 255:return this.read(9);default:return this.read(1)}}readVarIntBn(){const e=this.readUInt8();switch(e){case 253:return new D(this.readUInt16LE());case 254:return new D(this.readUInt32LE());case 255:return this.readUInt64LEBn();default:return new D(e)}}}const Yp=t=>{if(t.length===0)return t;const e=t[t.length-1];if(e&127)return t;if(t.length===1)return[];if(t[t.length-2]&128)return t;for(let n=t.length-1;n>0;n--)if(t[n-1]!==0)return t[n-1]&128?(t[n]=e,t.slice(0,n+1)):(t[n-1]|=e,t.slice(0,n));return[]},QA=Object.freeze(Object.defineProperty({__proto__:null,Reader:Ge,Writer:ne,encode:Ui,fromBase58:ru,fromBase58Check:Ld,minimallyEncode:Yp,toArray:U,toBase58:iu,toBase58Check:Bd,toBase64:Ae,toHex:Z,toUTF8:re,zero2:OI},Symbol.toStringTag,{value:"Module"})),et=class et extends bI{constructor(n,r,i=!0){super("affine");M(this,"x");M(this,"y");M(this,"inf");this.precomputed=null,n===null&&r===null?(this.x=null,this.y=null,this.inf=!0):(D.isBN(n)||(n=new D(n,16)),this.x=n,D.isBN(r)||(r=new D(r,16)),this.y=r,i&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red===null&&(this.x=this.x.toRed(this.curve.red)),this.y.red===null&&(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}static fromDER(n){if((n[0]===4||n[0]===6||n[0]===7)&&n.length-1===2*32){if(n[0]===6){if(n[n.length-1]%2!==0)throw new Error("Point string value is wrong length")}else if(n[0]===7&&n[n.length-1]%2!==1)throw new Error("Point string value is wrong length");return new et(n.slice(1,33),n.slice(33,1+2*32))}else if((n[0]===2||n[0]===3)&&n.length-1===32)return et.fromX(n.slice(1,33),n[0]===3);throw new Error("Unknown point format")}static fromString(n){const r=U(n,"hex");return et.fromDER(r)}static redSqrtOptimized(n){const s=et.red.m.addn(1).iushrn(2);return n.redPow(s)}static fromX(n,r){if(typeof BigInt=="function"){let a=function(m,y){return(m%y+y)%y},l=function(m,y,b){let x=BigInt(1);for(m=a(m,b);y>BigInt(0);)(y&BigInt(1))===BigInt(1)&&(x=a(x*m,b)),y>>=BigInt(1),m=a(m*m,b);return x},c=function(m,y){const b=y+BigInt(1)>>BigInt(2),x=l(m,b,y);return a(x*x,y)===a(m,y)?x:null};var i=a,s=l,o=c;const u=BigInt("0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFC2F"),d=BigInt(7);let f;if(n instanceof D)f=BigInt("0x"+n.toString(16));else if(typeof n=="string")f=BigInt("0x"+n);else if(Array.isArray(n))f=BigInt("0x"+Z(n).padStart(64,"0"));else if(typeof n=="number")f=BigInt(n);else throw new Error("Invalid x-coordinate type");f=a(f,u);const h=a(l(f,BigInt(3),u)+d,u);let p=c(h,u);if(p===null)throw new Error("Invalid point");const g=p%BigInt(2)===BigInt(1);(r&&!g||!r&&g)&&(p=u-p);const w=new D(f.toString(16),16),v=new D(p.toString(16),16);return new et(w,v)}else{const a=new nu("k256"),l=new D(0).toRed(a),c=new D(7).toRed(a),u=new D(0).toRed(a);D.isBN(n)||(n=new D(n,16)),n=n,n.red==null&&(n=n.toRed(a));const d=n.redSqr().redMul(n).redIAdd(n.redMul(l)).redIAdd(c);let f=d.redSqrt();if(f.redSqr().redSub(d).cmp(u)!==0)throw new Error("invalid point");const h=f.fromRed().isOdd();return(r&&!h||!r&&h)&&(f=f.redNeg()),new et(n,f)}}static fromJSON(n,r){typeof n=="string"&&(n=JSON.parse(n));const i=new et(n[0],n[1],r);if(typeof n[2]!="object")return i;const s=a=>new et(a[0],a[1],r),o=n[2];return i.precomputed={beta:null,doubles:typeof o.doubles=="object"&&o.doubles!==null?{step:o.doubles.step,points:[i].concat(o.doubles.points.map(s))}:void 0,naf:typeof o.naf=="object"&&o.naf!==null?{wnd:o.naf.wnd,points:[i].concat(o.naf.points.map(s))}:void 0},i}validate(){return this.curve.validate(this)}encode(n=!0,r){const i=this.curve.p.byteLength(),s=this.getX().toArray("be",i);let o;return n?o=[this.getY().isEven()?2:3].concat(s):o=[4].concat(s,this.getY().toArray("be",i)),r!=="hex"?o:Z(o)}toString(){return this.encode(!0,"hex")}toJSON(){return this.precomputed==null?[this.x,this.y]:[this.x,this.y,typeof this.precomputed=="object"&&this.precomputed!==null?{doubles:this.precomputed.doubles!=null?{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)}:void 0,naf:this.precomputed.naf!=null?{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}:void 0}:void 0]}inspect(){var n,r,i,s;return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+(((r=(n=this.x)==null?void 0:n.fromRed())==null?void 0:r.toString(16,2))??"undefined")+" y: "+(((s=(i=this.y)==null?void 0:i.fromRed())==null?void 0:s.toString(16,2))??"undefined")+">"}isInfinity(){return this.inf}add(n){var o,a,l;if(this.inf)return n;if(n.inf)return this;if(this.eq(n))return this.dbl();if(this.neg().eq(n))return new et(new D(0),new D(0));if(((o=this.x)==null?void 0:o.cmp(n.x??new D(0)))===0)return new et(new D(0),new D(0));let r=((a=this.y)==null?void 0:a.redSub(n.y??new D(0)))??new D(0);r.cmpn(0)!==0&&(r=r.redMul(((l=this.x)==null?void 0:l.redSub(n.x??new D(0)).redInvm())??new D(1)));const i=r==null?void 0:r.redSqr().redISub(this.x??new D(0)).redISub(n.x??new D(0)),s=(r??new D(1)).redMul((this.x??new D(0)).redSub(i??new D(0))).redISub(this.y??new D(0));return new et(i??new D(0),s??new D(0))}dbl(){if(this.inf)return this;const n=(this.y??new D(0)).redAdd(this.y??new D(0));if(n.cmpn(0)===0)return new et(new D(0),new D(0));const r=this.curve.a,i=(this.x??new D(0)).redSqr(),s=n.redInvm(),o=i.redAdd(i).redIAdd(i).redIAdd(r).redMul(s),a=o.redSqr().redISub((this.x??new D(0)).redAdd(this.x??new D(0))),l=o.redMul((this.x??new D(0)).redSub(a)).redISub(this.y??new D(0));return new et(a,l)}getX(){return(this.x??new D(0)).fromRed()}getY(){return(this.y??new D(0)).fromRed()}mul(n){return D.isBN(n)||(n=new D(n,16)),n=n,this.isInfinity()?this:this._hasDoubles(n)?this._fixedNafMul(n):this._endoWnafMulAdd([this],[n])}mulAdd(n,r,i){const s=[this,r],o=[n,i];return this._endoWnafMulAdd(s,o)}jmulAdd(n,r,i){const s=[this,r],o=[n,i];return this._endoWnafMulAdd(s,o,!0)}eq(n){return this===n||this.inf===n.inf&&(this.inf||(this.x??new D(0)).cmp(n.x??new D(0))===0&&(this.y??new D(0)).cmp(n.y??new D(0))===0)}neg(n){if(this.inf)return this;const r=new et(this.x,(this.y??new D(0)).redNeg());if(n===!0&&this.precomputed!=null){const i=this.precomputed,s=o=>o.neg();r.precomputed={naf:i.naf!=null?{wnd:i.naf.wnd,points:i.naf.points.map(s)}:void 0,doubles:i.doubles!=null?{step:i.doubles.step,points:i.doubles.points.map(o=>o.neg())}:void 0,beta:void 0}}return r}dblp(n){let r=this;for(let i=0;i<n;i++)r=r.dbl();return r}toJ(){return this.inf?new Mn(null,null,null):new Mn(this.x,this.y,this.curve.one)}_getBeta(){if(typeof this.curve.endo!="object")return;const n=this.precomputed;if(typeof n=="object"&&n!==null&&typeof n.beta=="object"&&n.beta!==null)return n.beta;const r=new et((this.x??new D(0)).redMul(this.curve.endo.beta),this.y);if(n!=null){const i=this.curve,s=o=>{if(o.x===null)throw new Error("p.x is null");if(i.endo===void 0||i.endo===null)throw new Error("curve.endo is undefined");return new et(o.x.redMul(i.endo.beta),o.y)};n.beta=r,r.precomputed={beta:null,naf:n.naf!=null?{wnd:n.naf.wnd,points:n.naf.points.map(s)}:void 0,doubles:n.doubles!=null?{step:n.doubles.step,points:n.doubles.points.map(s)}:void 0}}return r}_fixedNafMul(n){if(typeof this.precomputed!="object"||this.precomputed===null)throw new Error("_fixedNafMul requires precomputed values for the point");const r=this._getDoubles(),i=this.curve.getNAF(n,1,this.curve._bitLength);let s=(1<<r.step+1)-(r.step%2===0?2:1);s/=3;const o=[];for(let c=0;c<i.length;c+=r.step){let u=0;for(let d=c+r.step-1;d>=c;d--)u=(u<<1)+i[d];o.push(u)}let a=new Mn(null,null,null),l=new Mn(null,null,null);for(let c=s;c>0;c--){for(let u=0;u<o.length;u++){const d=o[u];d===c?l=l.mixedAdd(r.points[u]):d===-c&&(l=l.mixedAdd(r.points[u].neg()))}a=a.add(l)}return a.toP()}_wnafMulAdd(n,r,i,s,o){const a=this.curve._wnafT1.map(h=>h.toNumber()),l=this.curve._wnafT2.map(()=>[]),c=this.curve._wnafT3.map(()=>[]);let u=0;for(let h=0;h<s;h++){const g=r[h]._getNAFPoints(n);a[h]=g.wnd,l[h]=g.points}for(let h=s-1;h>=1;h-=2){const p=h-1,g=h;if(a[p]!==1||a[g]!==1){c[p]=this.curve.getNAF(i[p],a[p],this.curve._bitLength),c[g]=this.curve.getNAF(i[g],a[g],this.curve._bitLength),u=Math.max(c[p].length,u),u=Math.max(c[g].length,u);continue}const w=[r[p],null,null,r[g]];(r[p].y??new D(0)).cmp(r[g].y??new D(0))===0?(w[1]=r[p].add(r[g]),w[2]=r[p].toJ().mixedAdd(r[g].neg())):(r[p].y??new D(0)).cmp((r[g].y??new D(0)).redNeg())===0?(w[1]=r[p].toJ().mixedAdd(r[g]),w[2]=r[p].add(r[g].neg())):(w[1]=r[p].toJ().mixedAdd(r[g]),w[2]=r[p].toJ().mixedAdd(r[g].neg()));const v=[-3,-1,-5,-7,0,7,5,1,3],m=this.curve.getJSF(i[p],i[g]);u=Math.max(m[0].length,u),c[p]=new Array(u),c[g]=new Array(u);for(let y=0;y<u;y++){const b=m[0][y]|0,x=m[1][y]|0;c[p][y]=v[(b+1)*3+(x+1)],c[g][y]=0,l[p]=w}}let d=new Mn(null,null,null);const f=this.curve._wnafT4;for(let h=u;h>=0;h--){let p=0;for(;h>=0;){let v=!0;for(let m=0;m<s;m++)f[m]=new D(typeof c[m][h]=="number"?c[m][h]:0),f[m].isZero()||(v=!1);if(!v)break;p++,h--}if(h>=0&&p++,d=d.dblp(p),h<0)break;const g=new D(1),w=new D(2);for(let v=0;v<s;v++){const m=f[v];let y;m.cmpn(0)!==0&&(m.isNeg()?y=l[v][m.neg().sub(g).div(w).toNumber()].neg():y=l[v][m.sub(g).div(w).toNumber()],y.type==="affine"?d=d.mixedAdd(y):d=d.add(y))}}for(let h=0;h<s;h++)l[h]=[];return o===!0?d:d.toP()}_endoWnafMulAdd(n,r,i){const s=new Array(n.length*2),o=new Array(n.length*2);let a;for(a=0;a<n.length;a++){const c=this.curve._endoSplit(r[a]);let u=n[a],d=u._getBeta()??new et(new D(0),new D(0));c.k1.negative!==0&&(c.k1.ineg(),u=u.neg(!0)),c.k2.negative!==0&&(c.k2.ineg(),d=d.neg(!0)),s[a*2]=u,s[a*2+1]=d,o[a*2]=c.k1,o[a*2+1]=c.k2}const l=this._wnafMulAdd(1,s,o,a*2,i);for(let c=0;c<a*2;c++)s[c]=null,o[c]=null;return l}_hasDoubles(n){if(this.precomputed==null)return!1;const r=this.precomputed.doubles;return typeof r!="object"?!1:r.points.length>=Math.ceil((n.bitLength()+1)/r.step)}_getDoubles(n,r){if(typeof this.precomputed=="object"&&this.precomputed!==null&&typeof this.precomputed.doubles=="object"&&this.precomputed.doubles!==null)return this.precomputed.doubles;const i=[this];let s=this;for(let o=0;o<(r??0);o+=n??1){for(let a=0;a<(n??1);a++)s=s.dbl();i.push(s)}return{step:n??1,points:i}}_getNAFPoints(n){if(typeof this.precomputed=="object"&&this.precomputed!==null&&typeof this.precomputed.naf=="object"&&this.precomputed.naf!==null)return this.precomputed.naf;const r=[this],i=(1<<n)-1,s=i===1?null:this.dbl();for(let o=1;o<i;o++)s!==null&&(r[o]=r[o-1].add(s));return{wnd:n,points:r}}};M(et,"red",new nu("k256")),M(et,"a",new D(0).toRed(et.red)),M(et,"b",new D(7).toRed(et.red)),M(et,"zero",new D(0).toRed(et.red));let vn=et,fh;class kt{constructor(){M(this,"p");M(this,"red");M(this,"redN");M(this,"zero");M(this,"one");M(this,"two");M(this,"g");M(this,"n");M(this,"a");M(this,"b");M(this,"tinv");M(this,"zeroA");M(this,"threeA");M(this,"endo");M(this,"_endoWnafT1");M(this,"_endoWnafT2");M(this,"_wnafT1");M(this,"_wnafT2");M(this,"_wnafT3");M(this,"_wnafT4");M(this,"_bitLength");if(typeof fh<"u")return fh;fh=this;const n={prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",{doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}]};this.p=new D(n.p,16),this.red=new nu(n.prime),this.zero=new D(0).toRed(this.red),this.one=new D(1).toRed(this.red),this.two=new D(2).toRed(this.red),this.n=new D(n.n,16),this.g=vn.fromJSON(n.g,n.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n.bitLength(),this.redN=this.n.toRed(this.red),this.a=new D(n.a,16).toRed(this.red),this.b=new D(n.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(n),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}static assert(e,n="Elliptic curve assertion failed"){if(!e)throw new Error(n)}getNAF(e,n,r){const i=new Array(Math.max(e.bitLength(),r)+1);i.fill(0);const s=1<<n+1,o=e.clone();for(let a=0;a<i.length;a++){let l;const c=o.andln(s-1);o.isOdd()?(c>(s>>1)-1?l=(s>>1)-c:l=c,o.isubn(l)):l=0,i[a]=l,o.iushrn(1)}return i}getJSF(e,n){const r=[[],[]];e=e.clone(),n=n.clone();let i=0,s=0;for(;e.cmpn(-i)>0||n.cmpn(-s)>0;){let o=e.andln(3)+i&3,a=n.andln(3)+s&3;o===3&&(o=-1),a===3&&(a=-1);let l;if(!(o&1))l=0;else{const u=e.andln(7)+i&7;(u===3||u===5)&&a===2?l=-o:l=o}r[0].push(l);let c;if(!(a&1))c=0;else{const u=n.andln(7)+s&7;(u===3||u===5)&&o===2?c=-a:c=a}r[1].push(c),2*i===l+1&&(i=1-i),2*s===c+1&&(s=1-s),e.iushrn(1),n.iushrn(1)}return r}static cachedProperty(e,n,r){const i="_"+n;e.prototype[n]=function(){return this[i]!==void 0?this[i]:this[i]=r.call(this)}}static parseBytes(e){return typeof e=="string"?U(e,"hex"):e}static intFromLE(e){return new D(e,"hex","le")}_getEndomorphism(e){var s,o;if(!this.zeroA||this.p.modrn(3)!==1)return;let n,r;if(e.beta!==void 0)n=new D(e.beta,16).toRed(this.red);else{const a=this._getEndoRoots(this.p);if(a===null)throw new Error("Failed to get endomorphism roots for beta.");n=a[0].cmp(a[1])<0?a[0]:a[1],n=n.toRed(this.red)}if(e.lambda!==void 0)r=new D(e.lambda,16);else{const a=this._getEndoRoots(this.n);if(a===null)throw new Error("Failed to get endomorphism roots for lambda.");if(this.g==null)throw new Error("Curve generator point (g) is not defined.");const l=(s=this.g.mul(a[0]))==null?void 0:s.x,c=this.g.x!=null?this.g.x.redMul(n):void 0;if(l!=null&&c!=null&&l.cmp(c)===0)r=a[0];else{if(r=a[1],this.g==null)throw new Error("Curve generator point (g) is not defined.");const u=(o=this.g.mul(r))==null?void 0:o.x,d=this.g.x!=null?this.g.x.redMul(n):void 0;if(u==null||d==null)throw new Error("Lambda computation failed: g.mul(lambda).x or g.x.redMul(beta) is undefined.");kt.assert(u.cmp(d)===0,"Lambda selection does not match computed beta.")}}let i;return typeof e.basis=="object"&&e.basis!==null?i=e.basis.map(function(a){return{a:new D(a.a,16),b:new D(a.b,16)}}):i=this._getEndoBasis(r),{beta:n,lambda:r,basis:i}}_getEndoRoots(e){const n=e===this.p?this.red:new pA(e),r=new D(2).toRed(n).redInvm(),i=r.redNeg(),s=new D(3).toRed(n).redNeg().redSqrt().redMul(r),o=i.redAdd(s).fromRed(),a=i.redSub(s).fromRed();return[o,a]}_getEndoBasis(e){const n=this.n.ushrn(Math.floor(this.n.bitLength()/2));let r=e,i=this.n.clone(),s=new D(1),o=new D(0),a=new D(0),l=new D(1),c,u,d,f,h,p,g=new D(0),w=0,v=new D(0),m=new D(0);for(;r.cmpn(0)!==0;){const x=i.div(r);v=i.sub(x.mul(r)),m=a.sub(x.mul(s));const I=l.sub(x.mul(o));if(d===void 0&&v.cmp(n)<0)c=g.neg(),u=s,d=v.neg(),f=m;else if(d!==void 0&&++w===2)break;g=v,i=r,r=v,a=s,s=m,l=o,o=I}if(c===void 0||u===void 0||d===void 0||f===void 0)throw new Error("Failed to compute Endo Basis values");h=v.neg(),p=m;const y=d.sqr().add(f.sqr());return h.sqr().add(p.sqr()).cmp(y)>=0&&(h=c,p=u),d.negative!==0&&(d=d.neg(),f=f.neg()),h.negative!==0&&(h=h.neg(),p=p.neg()),[{a:d,b:f},{a:h,b:p}]}_endoSplit(e){if(this.endo==null)throw new Error("Endomorphism is not defined.");const n=this.endo.basis,r=n[0],i=n[1],s=i.b.mul(e).divRound(this.n),o=r.b.neg().mul(e).divRound(this.n),a=s.mul(r.a),l=o.mul(i.a),c=s.mul(r.b),u=o.mul(i.b),d=e.sub(a).sub(l),f=c.add(u).neg();return{k1:d,k2:f}}validate(e){if(e.inf)return!0;const n=e.x,r=e.y;if(n===null||r===null)throw new Error("Point coordinates cannot be null");const i=this.a.redMul(n),s=n.redSqr().redMul(n).redIAdd(i).redIAdd(this.b);return r.redSqr().redISub(s).cmpn(0)===0}}class Sn{constructor(e,n){M(this,"r");M(this,"s");this.r=e,this.s=n}static fromDER(e,n){const r=(d,f)=>{const h=d[f.place++];if(h&128)throw new Error("Invalid DER entity length");return h};class i{constructor(){M(this,"place");this.place=0}}e=U(e,n);const s=new i;if(e[s.place++]!==48)throw new Error("Signature DER must start with 0x30");if(r(e,s)+s.place!==e.length)throw new Error("Signature DER invalid");if(e[s.place++]!==2)throw new Error("Signature DER invalid");const a=r(e,s);let l=e.slice(s.place,a+s.place);if(s.place+=a,e[s.place++]!==2)throw new Error("Signature DER invalid");const c=r(e,s);if(e.length!==c+s.place)throw new Error("Invalid R-length in signature DER");let u=e.slice(s.place,c+s.place);if(l[0]===0)if(l[1]&128)l=l.slice(1);else throw new Error("Invalid R-value in signature DER");if(u[0]===0)if(u[1]&128)u=u.slice(1);else throw new Error("Invalid S-value in signature DER");return new Sn(new D(l),new D(u))}static fromCompact(e,n){if(e=U(e,n),e.length!==65)throw new Error("Invalid Compact Signature");const r=e[0];if(r<27||r>=35)throw new Error("Invalid Compact Byte");return new Sn(new D(e.slice(1,33)),new D(e.slice(33,65)))}verify(e,n,r){const i=new D(fn(e,r),16);return Gi(i,this,n)}toString(e){return this.toDER(e)}toDER(e){const n=(c,u)=>{if(u<128)c.push(u);else throw new Error("len must be < 0x80")},r=c=>{let u=0;const d=c.length-1;for(;c[u]===0&&!(c[u+1]&128)&&u<d;)u++;return u===0?c:c.slice(u)};let i=this.r.toArray(),s=this.s.toArray();for(i[0]&128&&(i=[0].concat(i)),s[0]&128&&(s=[0].concat(s)),i=r(i),s=r(s);s[0]===0&&!(s[1]&128);)s=s.slice(1);let o=[2];n(o,i.length),o=o.concat(i),o.push(2),n(o,s.length);const a=o.concat(s);let l=[48];return n(l,a.length),l=l.concat(a),e==="hex"?Z(l):e==="base64"?Ae(l):l}toCompact(e,n,r){if(e<0||e>3)throw new Error("Invalid recovery param");if(typeof n!="boolean")throw new Error("Invalid compressed param");let i=27+e;n&&(i+=4);let s=[i];return s=s.concat(this.r.toArray("be",32)),s=s.concat(this.s.toArray("be",32)),r==="hex"?Z(s):r==="base64"?Ae(s):s}RecoverPublicKey(e,n){const r=this.r,i=this.s,s=(e&1)!==0,o=e>>1,a=new kt,l=a.n,c=a.g,u=o!==0?r.add(l):r,d=vn.fromX(u,s);if(!d.mul(l).isInfinity())throw new Error("nR is not at infinity");const h=n.neg().umod(l),p=r.invm(l),g=p.mul(i).umod(l),w=p.mul(h).umod(l),v=c.mul(w).add(d.mul(g)),m=new ut(v);return m.validate(),m}CalculateRecoveryFactor(e,n){for(let r=0;r<4;r++){let i;try{i=this.RecoverPublicKey(r,n)}catch{continue}if(e.eq(i))return r}throw new Error("Unable to find valid recovery factor")}}class Xv{constructor(e,n){M(this,"K");M(this,"V");if(e=U(e,"hex"),n=U(n,"hex"),e.length<32)throw new Error("Not enough entropy. Minimum is 256 bits");const r=e.concat(n);this.K=new Array(32),this.V=new Array(32);for(let i=0;i<32;i++)this.K[i]=0,this.V[i]=1;this.update(r)}hmac(){return new Cd(this.K)}update(e){let n=this.hmac().update(this.V).update([0]);e!==void 0&&(n=n.update(e)),this.K=n.digest(),this.V=this.hmac().update(this.V).digest(),e!==void 0&&(this.K=this.hmac().update(this.V).update([1]).update(e).digest(),this.V=this.hmac().update(this.V).digest())}generate(e){let n=[];for(;n.length<e;)this.V=this.hmac().update(this.V).digest(),n=n.concat(this.V);const r=n.slice(0,e);return this.update(),Z(r)}}function JA(t,e,n=new kt){const r=t.byteLength()*8-n.n.bitLength();return r>0&&t.iushrn(r),e===null&&t.cmp(n.n)>=0?t.sub(n.n):t}const Dd=(t,e,n=!1,r)=>{if(typeof BigInt=="function"){let x=function(V,q){const G=V.toString(16).padStart(q*2,"0"),Y=new Uint8Array(q);for(let z=0;z<q;z++)Y[z]=parseInt(G.substr(z*2,2),16);return Y},T=function(V,q,G=!0){const Y=V.toString(2).length,z=q.toString(2).length,K=Y-z;return K>0&&(V=V>>BigInt(K)),!G&&V>=q?V-q:V},N=function(V){if(typeof V=="function"){const G=V(B).toString(16);return BigInt("0x"+G)}else if(V!=null&&D.isBN(V)){const q=V.toString(16);return BigInt("0x"+q)}else{const q=P.generate(I);return BigInt("0x"+q)}},L=function(V,q){return(V%q+q)%q},$=function(V,q){let G=f,Y=d,z=L(V,q),K=q;for(;z>f;){const oe=K/z,te=Y-G*oe,J=K-z*oe;Y=G,G=te,K=z,z=J}return L(G,q)},H=function(V,q){if(V===null)return q;if(q===null)return V;if(V.x===q.x&&V.y===L(-q.y,g))return null;let G;if(V.x===q.x&&V.y===q.y){if(V.y===d)return null;const K=L(BigInt(3)*V.x*V.x,g),oe=$(h*V.y,g);G=L(K*oe,g)}else{const K=L(q.y-V.y,g),oe=$(q.x-V.x,g);G=L(K*oe,g)}const Y=L(G*G-V.x-q.x,g),z=L(G*(V.x-Y)-V.y,g);return{x:Y,y:z}},W=function(V,q){let G=q,Y=null;for(;V>BigInt(0);)V%BigInt(2)===BigInt(1)&&(Y=Y===null?G:H(Y,G)??Y),G=H(G,G)??G,V>>=BigInt(1);if(Y===null)throw new Error("Scalar multiplication resulted in an invalid point.");return Y};var i=x,s=T,o=N,a=L,l=$,c=H,u=W;const d=BigInt(0),f=BigInt(1),h=BigInt(2),p=BigInt("0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141"),g=BigInt("0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFC2F"),w=BigInt("0x79BE667EF9DCBBAC55A06295CE870B07029BFCDB2DCE28D959F2815B16F81798"),v=BigInt("0x483ADA7726A3C4655DA4FBFC0E1108A8FD17B448A68554199C47D08FFB10D4B8"),m={x:w,y:v},y=BigInt("0x"+t.toString(16)),b=BigInt("0x"+e.toString(16));if(b<=d||b>=p)throw new Error("Invalid private key");const I=32,k=x(b,I),S=x(y,I),P=new Xv(Array.from(k),Array.from(S)),R=p-f;let B=0,C=!1;for(;!C;){B+=1,C=!0,B+=1;let V=N(r);if(V=T(V,p,!0),V<=f||V>=R){if(r instanceof D)throw new Error("Invalid fixed custom K value (must be more than 1 and less than N-1)");continue}const q=W(V,m);if(q===null){if(r instanceof D)throw new Error("Invalid fixed custom K value (must not create a point at infinity when multiplied by the generator point)");continue}const G=L(q.x,p);if(G===d){if(r instanceof D)throw new Error("Invalid fixed custom K value (when multiplied by G, the resulting x coordinate mod N must not be zero)");continue}const Y=$(V,p),z=L(G*b,p);let K=L(Y*(y+z),p);if(K===d){if(r instanceof D)throw new Error("Invalid fixed custom K value (when used with the key, it cannot create a zero value for S)");continue}n&&K>p/h&&(K=p-K);const oe=new D(G.toString(16),16),te=new D(K.toString(16),16);return new Sn(oe,te)}}else{const d=new kt;t=s(t);const f=d.n.byteLength(),h=e.toArray("be",f),p=t.toArray("be",f),g=new Xv(h,p),w=d.n.subn(1);for(let v=0;;v++){let m=typeof r=="function"?r(v):D.isBN(r)?r:new D(g.generate(f),16);if(m!=null)m=s(m,!0);else throw new Error("k is undefined");if(m.cmpn(1)<=0||m.cmp(w)>=0){if(D.isBN(r))throw new Error("Invalid fixed custom K value (must be more than 1 and less than N-1)");continue}const y=d.g.mul(m);if(y.isInfinity()){if(D.isBN(r))throw new Error("Invalid fixed custom K value (must not create a point at infinity when multiplied by the generator point)");continue}const x=y.getX().umod(d.n);if(x.cmpn(0)===0){if(D.isBN(r))throw new Error("Invalid fixed custom K value (when multiplied by G, the resulting x coordinate mod N must not be zero)");continue}let I=m.invm(d.n).mul(x.mul(e).iadd(t));if(I=I.umod(d.n),I.cmpn(0)===0){if(D.isBN(r))throw new Error("Invalid fixed custom K value (when used with the key, it cannot create a zero value for S)");continue}return n&&I.cmp(d.n.ushrn(1))>0&&(I=d.n.sub(I)),new Sn(x,I)}}throw new Error("Failed to generate a valid signature")},Gi=(t,e,n)=>{if(typeof BigInt=="function"){const r=BigInt(0),i=BigInt(1),s=BigInt(2),o=BigInt(3),a=BigInt("0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFC2F"),l=BigInt("0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141"),c={x:BigInt("0x79BE667EF9DCBBAC55A06295CE870B07029BFCDB2DCE28D959F2815B16F81798"),y:BigInt("0x483ADA7726A3C4655DA4FBFC0E1108A8FD17B448A68554199C47D08FFB10D4B8")},u=(k,S)=>(k%S+S)%S,d=(k,S)=>{let[P,R]=[k,S],[B,T]=[BigInt(1),BigInt(0)];for(;R!==r;){const N=P/R;[P,R]=[R,P-N*R],[B,T]=[T,B-N*T]}return P>i?r:u(B,S)},f=(k,S,P)=>u(k*S,P),h=(k,S,P)=>u(k-S,P),p=BigInt(4),g=BigInt(8),w=k=>{const{X:S,Y:P,Z:R}=k;if(P===r)return{X:r,Y:i,Z:r};const B=f(P,P,a),T=f(p,f(S,B,a),a),N=f(o,f(S,S,a),a),L=h(f(N,N,a),f(s,T,a),a),$=h(f(N,h(T,L,a),a),f(g,f(B,B,a),a),a),H=f(s,f(P,R,a),a);return{X:L,Y:$,Z:H}},v=(k,S)=>{if(k.Z===r)return S;if(S.Z===r)return k;const P=f(k.Z,k.Z,a),R=f(S.Z,S.Z,a),B=f(k.X,R,a),T=f(S.X,P,a),N=f(k.Y,f(R,S.Z,a),a),L=f(S.Y,f(P,k.Z,a),a),$=h(T,B,a),H=h(L,N,a);if($===r)return H===r?w(k):{X:r,Y:i,Z:r};const W=f($,$,a),C=f($,W,a),V=f(B,W,a),q=h(h(f(H,H,a),C,a),f(s,V,a),a),G=h(f(H,h(V,q,a),a),f(N,C,a),a),Y=f($,f(k.Z,S.Z,a),a);return{X:q,Y:G,Z:Y}},m=(k,S)=>{const P={X:S.x,Y:S.y,Z:i};let R={X:r,Y:i,Z:r};const B=k.toString(2);for(let T=0;T<B.length;T++)R=w(R),B[T]==="1"&&(R=v(R,P));return R},y=(k,S,P)=>{const{r:R,s:B}=P,T=k;if(R<=r||R>=l||B<=r||B>=l)return!1;const N=d(B,l);if(N===r)return!1;const L=f(T,N,l),$=f(R,N,l),H=m(L,c),W=m($,S),C=v(H,W);if(C.Z===r)return!1;const V=d(C.Z,a);if(V===r)return!1;const q=f(V,V,a),G=f(C.X,q,a);return u(G,l)===R},b=BigInt("0x"+t.toString(16));if(n.x==null||n.y==null)throw new Error("Invalid public key: missing coordinates.");const x={x:BigInt("0x"+n.x.toString(16)),y:BigInt("0x"+n.y.toString(16))},I={r:BigInt("0x"+e.r.toString(16)),s:BigInt("0x"+e.s.toString(16))};return y(b,x,I)}else{const r=new kt;t=JA(t);const i=e.r,s=e.s;if(i.cmpn(1)<0||i.cmp(r.n)>=0||s.cmpn(1)<0||s.cmp(r.n)>=0)return!1;const o=s.invm(r.n),a=o.mul(t).umod(r.n),l=o.mul(i).umod(r.n),c=r.g.jmulAdd(a,n,l);return c.isInfinity()?!1:c.eqXToP(i)}},ZA=Object.freeze(Object.defineProperty({__proto__:null,sign:Dd,verify:Gi},Symbol.toStringTag,{value:"Module"}));class ut extends vn{static fromPrivateKey(e){const r=new kt().g.mul(e);return new ut(r.x,r.y)}static fromString(e){const n=vn.fromString(e);return new ut(n.x,n.y)}static fromDER(e){const n=vn.fromDER(e);return new ut(n.x,n.y)}constructor(e,n=null,r=!0){if(e instanceof vn)super(e.getX(),e.getY());else{if(n===null&&r&&typeof e=="string"&&(e.length===66||e.length===130))throw new Error('You are using the "new PublicKey()" constructor with a DER hex string. You need to use "PublicKey.fromString()" instead.');super(e,n,r)}}deriveSharedSecret(e){if(!this.validate())throw new Error("Public key not valid for ECDH secret derivation");return this.mul(e)}verify(e,n,r){const i=new D(fn(e,r),16);return Gi(i,n,this)}toDER(e){return e==="hex"?this.encode(!0,e):this.encode(!0)}toHash(e){const n=Md(this.encode(!0));return e==="hex"?Z(n):n}toAddress(e=[0]){if(typeof e=="string")if(e==="testnet"||e==="test")e=[111];else if(e==="mainnet"||e==="main")e=[0];else throw new Error(`Invalid prefix ${e}`);return Bd(this.toHash(),e)}deriveChild(e,n){const r=this.deriveSharedSecret(e),i=U(n,"utf8"),s=dr(r.encode(!0),i),a=new kt().g.mul(new D(s)),l=this.add(a);return new ut(l.x,l.y)}static fromMsgHashAndCompactSignature(e,n,r){const i=U(n,r);if(i.length!==65)throw new Error("Invalid Compact Signature");const s=i[0];if(s<27||s>=35)throw new Error("Invalid Compact Byte");let o=i[0]-27;return o>3&&(o-=4),new Sn(new D(i.slice(1,33)),new D(i.slice(33,65))).RecoverPublicKey(o,e)}}class eN{constructor(){M(this,"_rand");var n;const e=()=>{throw new Error("No secure random number generator is available in this environment.")};if(this._rand=e,typeof self=="object")(n=self.crypto)!=null&&n.getRandomValues?this._rand=r=>{const i=new Uint8Array(r);return self.crypto.getRandomValues(i),[...i]}:this._rand=e;else try{const r=require("crypto");typeof r.randomBytes=="function"&&(this._rand=i=>[...r.randomBytes(i)])}catch{this._rand=e}}generate(e){return this._rand(e)}}let hh=null;const It=t=>(hh==null&&(hh=new eN),hh.generate(t));class Hi{constructor(e,n){M(this,"x");M(this,"y");const r=new kt().p;this.x=e.umod(r),this.y=n.umod(r)}toString(){return iu(this.x.toArray())+"."+iu(this.y.toArray())}static fromString(e){const[n,r]=e.split(".");return new Hi(new D(ru(n)),new D(ru(r)))}}class za{constructor(e,n){M(this,"points");M(this,"threshold");this.points=e,this.threshold=n??e.length}static fromPrivateKey(e,n){const r=new kt().p,i=[new Hi(new D(0),new D(e.toArray()))];for(let s=1;s<n;s++){const o=new D(It(32)).umod(r),a=new D(It(32)).umod(r);i.push(new Hi(o,a))}return new za(i)}valueAt(e){const n=new kt().p;let r=new D(0);for(let i=0;i<this.threshold;i++){let s=this.points[i].y;for(let o=0;o<this.threshold;o++)if(i!==o){const a=this.points[o].x,l=this.points[i].x,c=e.sub(a).umod(n),d=l.sub(a).umod(n).invm(n),f=c.mul(d).umod(n);s=s.mul(f).umod(n)}r=r.add(s).umod(n)}return r}}class Ga{constructor(e,n,r){M(this,"points");M(this,"threshold");M(this,"integrity");this.points=e,this.threshold=n,this.integrity=r}static fromBackupFormat(e){let n=0,r="";const i=e.map((s,o)=>{const a=s.split(".");if(a.length!==4)throw new Error("Invalid share format in share "+o.toString()+'. Expected format: "x.y.t.i" - received '+s);const[l,c,u,d]=a;if(u===void 0)throw new Error("Threshold not found in share "+o.toString());if(d===void 0)throw new Error("Integrity not found in share "+o.toString());const f=parseInt(u);if(o!==0&&n!==f)throw new Error("Threshold mismatch in share "+o.toString());if(o!==0&&r!==d)throw new Error("Integrity mismatch in share "+o.toString());return n=f,r=d,Hi.fromString([l,c].join("."))});return new Ga(i,n,r)}toBackupFormat(){return this.points.map(e=>e.toString()+"."+this.threshold.toString()+"."+this.integrity)}}class st extends D{static fromRandom(){return new st(It(32))}static fromString(e,n="hex"){return new st(super.fromString(e,n).toArray())}static fromHex(e){return new st(super.fromHex(e,"big"))}static fromWif(e,n=1){const r=Ld(e,void 0,n);if(r.data.length!==33)throw new Error("Invalid WIF length");if(r.data[32]!==1)throw new Error("Invalid WIF padding");return new st(r.data.slice(0,32))}constructor(e=0,n=10,r="be",i="apply"){if(e instanceof D?(super(),e.copy(this)):super(e,n,r),i!=="nocheck"){const s=this.checkInField();if(!s.inField){if(i==="error")throw new Error("Input is out of field");D.move(this,s.modN)}}}checkInField(){const e=new kt,n=this.mod(e.n);return{inField:this.cmp(n)===0,modN:n}}isValid(){return this.checkInField().inField}sign(e,n,r=!0,i){const s=new D(fn(e,n),16);return Dd(s,this,r,i)}verify(e,n,r){const i=new D(fn(e,r),16);return Gi(i,n,this.toPublicKey())}toPublicKey(){const n=new kt().g.mul(this);return new ut(n.x,n.y)}toWif(e=[128]){if(!this.isValid())throw new Error("Value is out of field");return Bd([...this.toArray("be",32),1],e)}toAddress(e=[0]){return this.toPublicKey().toAddress(e)}toHex(){return super.toHex(32)}toString(e="hex",n=64){return super.toString(e,n)}deriveSharedSecret(e){if(!e.validate())throw new Error("Public key not valid for ECDH secret derivation");return e.mul(this)}deriveChild(e,n){const r=this.deriveSharedSecret(e),i=U(n,"utf8"),s=dr(r.encode(!0),i),o=new kt;return new st(this.add(new D(s)).mod(o.n).toArray())}toKeyShares(e,n){if(typeof e!="number"||typeof n!="number")throw new Error("threshold and totalShares must be numbers");if(e<2)throw new Error("threshold must be at least 2");if(n<2)throw new Error("totalShares must be at least 2");if(e>n)throw new Error("threshold should be less than or equal to totalShares");const r=za.fromPrivateKey(this,e),i=[];for(let o=0;o<n;o++){const a=new D(st.fromRandom().toArray()),l=r.valueAt(a);i.push(new Hi(a,l))}const s=this.toPublicKey().toHash("hex").slice(0,8);return new Ga(i,e,s)}toBackupShares(e,n){return this.toKeyShares(e,n).toBackupFormat()}static fromBackupShares(e){return st.fromKeyShares(Ga.fromBackupFormat(e))}static fromKeyShares(e){const{points:n,threshold:r,integrity:i}=e;if(r<2)throw new Error("threshold must be at least 2");if(n.length<r)throw new Error(`At least ${r} shares are required to reconstruct the private key`);for(let l=0;l<r;l++)for(let c=l+1;c<r;c++)if(n[l].x.eq(n[c].x))throw new Error("Duplicate share detected, each must be unique.");const s=new za(n,r),o=new st(s.valueAt(new D(0)).toArray());if(o.toPublicKey().toHash("hex").slice(0,8)!==i)throw new Error("Integrity hash mismatch");return o}}const AI=[[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118],[202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192],[183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21],[4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117],[9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132],[83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207],[208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168],[81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210],[205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115],[96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219],[224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121],[231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8],[186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138],[112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158],[225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223],[140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22]],tN=[[0,0,0,0],[1,0,0,0],[2,0,0,0],[4,0,0,0],[8,0,0,0],[16,0,0,0],[32,0,0,0],[64,0,0,0],[128,0,0,0],[27,0,0,0],[54,0,0,0]];function Yv(t,e,n){let r,i;for(r=0;r<4;r++)for(i=0;i<4;i++)t[r][i]=t[r][i]^e[n+i][r]}function nN(t){let e,n;for(e=0;e<4;e++)for(n=0;n<4;n++)t[e][n]=AI[(t[e][n]&240)>>4][t[e][n]&15]}function Qv(t){let e;for(e=0;e<4;e++)t[e]=AI[(t[e]&240)>>4][t[e]&15]}function rN(t){const e=t[0];t[0]=t[1],t[1]=t[2],t[2]=t[3],t[3]=e}function iN(t){let e,n,r,i,s;for(e=1;e<4;e++)for(n=0;n<(e-1)%2+1;n++){for(s=t[e][n],r=n;i=r+e,i>=4&&(i=i-4),i!==n;)t[e][r]=t[e][i],r=i;t[e][r]=s}}function $r(t,e){let n,r=0;for(n=0;n<8;n++)e&1&&(r=r^t),t&128?(t=t<<1,t=t^283):t=t<<1,e=e>>1;return r}function sN(t){let e,n;const r=[[],[],[],[]];for(e=0;e<4;e++)r[0][e]=$r(2,t[0][e])^$r(3,t[1][e])^t[2][e]^t[3][e],r[1][e]=t[0][e]^$r(2,t[1][e])^$r(3,t[2][e])^t[3][e],r[2][e]=t[0][e]^t[1][e]^$r(2,t[2][e])^$r(3,t[3][e]),r[3][e]=$r(3,t[0][e])^t[1][e]^t[2][e]^$r(2,t[3][e]);for(e=0;e<4;e++)for(n=0;n<4;n++)t[e][n]=r[e][n]}function oN(t,e){let n,r;const i=parseInt(String(e.length/4)),s=[];for(n=0;n<e.length;n++)n%4===0&&s.push([]),s[parseInt(String(n/4))].push(e[n]);for(n=i;n<4*t;n++){s[n]=[];const o=s[n-1].slice();if(n%i===0)for(rN(o),Qv(o),r=0;r<4;r++)o[r]=o[r]^tN[parseInt(String(n/i))][r];else i>6&&n%i===4&&Qv(o);for(r=0;r<4;r++)s[n][r]=s[n-i][r]^o[r]}return s}function Jg(t,e){let n,r,i,s;const o=[[],[],[],[]],a=[],l=Array.from(e);if(l.length<=16){for(;l.length<16;)l.unshift(0);s=11}else if(l.length<=24){for(;l.length<24;)l.unshift(0);s=13}else if(e.length<=32){for(;l.length<32;)l.unshift(0);s=15}else throw new Error("Illegal key length: "+String(e.length));const c=oN(s,l);for(n=0;n<15;n++)o[parseInt(String(n/4))].push(t[n*4%15]);for(o[3].push(t[15]),Yv(o,c,0),i=1;i<s;i++)nN(o),iN(o),i+1<s&&sN(o),Yv(o,c,i*4);for(n=0;n<4;n++)for(r=0;r<4;r++)a.push(o[r][n]);return a}const Jv=function(t,e,n){return t[e]&1<<n?1:0},Ns=function(t){return[(t&4278190080)>>>24,(t&16711680)>>16,(t&65280)>>8,t&255]},it=function(t){let e;const n=[];for(e=0;e<t;e++)n.push(0);return n},aN=[225].concat(it(15)),su=function(t,e){let n;const r=[];for(n=0;n<t.length;n++)r[n]=t[n]^e[n];return r},Zv=function(t){let e,n=0,r=0;for(e=0;e<t.length;e++)r=n,n=t[e]&1,t[e]=t[e]>>1,r!==0&&(t[e]=t[e]|128);return t},cN=function(t,e){let n,r,i=e.slice(),s=it(16);for(n=0;n<16;n++)for(r=7;r!==-1;r--)Jv(t,n,r)!==0&&(s=su(s,i)),Jv(i,15,0)!==0?i=su(Zv(i),aN):i=Zv(i);return s},Zg=function(t){let e;const n=t.slice();for(e=15;e!==11&&(n[e]=n[e]+1,n[e]===256);e--)n[e]=0;return n};function ou(t,e){let n,r=it(16);for(n=0;n<t.length;n+=16)r=cN(su(r,t.slice(n,Math.min(n+16,t.length))),e);return r}function au(t,e,n){let r,i,s,o=e;const a=[];if(t.length===0)return t;const l=Math.ceil(t.length/16);for(r=0;r<l;r++){for(s=su(t.slice(r*16,Math.min((r+1)*16,t.length)),Jg(o,n)),i=0;i<s.length;i++)a.push(s[i]);r+1<l&&(o=Zg(o))}return a}function lN(t,e,n,r){let i,s;const o=Jg(it(16),r);i=[...n],n.length===12?i=i.concat(it(3)).concat([1]):(n.length%16!==0&&(i=i.concat(it(16-n.length%16))),i=i.concat(it(8)),i=ou(i.concat(it(4)).concat(Ns(n.length*8)),o));const a=au(t,Zg(i),r);return s=e.slice(),e.length===0?s=s.concat(it(16)):e.length%16!==0&&(s=s.concat(it(16-e.length%16))),s=s.concat(a),a.length===0?s=s.concat(it(16)):a.length%16!==0&&(s=s.concat(it(16-a.length%16))),s=s.concat(it(4)).concat(Ns(e.length*8)).concat(it(4)).concat(Ns(a.length*8)),{result:a,authenticationTag:au(ou(s,o),i,r)}}function uN(t,e,n,r,i){let s,o;const a=Jg(it(16),i);s=[...n],n.length===12?s=s.concat(it(3)).concat([1]):(n.length%16!==0&&(s=s.concat(it(16-n.length%16))),s=s.concat(it(8)),s=ou(s.concat(it(4)).concat(Ns(n.length*8)),a));const l=au(t,Zg(s),i);return o=e.slice(),e.length===0?o=o.concat(it(16)):e.length%16!==0&&(o=o.concat(it(16-e.length%16))),o=o.concat(t),t.length===0?o=o.concat(it(16)):t.length%16!==0&&(o=o.concat(it(16-t.length%16))),o=o.concat(it(4)).concat(Ns(e.length*8)).concat(it(4)).concat(Ns(t.length*8)),au(ou(o,a),s,i).join()!==r.join()?null:l}class Cr extends D{static fromRandom(){return new Cr(It(32))}encrypt(e,n){const r=It(32);e=U(e,n);const{result:i,authenticationTag:s}=lN(e,[],r,this.toArray("be",32));return Ui([...r,...i,...s],n)}decrypt(e,n){e=U(e,n);const r=e.slice(0,32),i=e.slice(32),s=i.slice(-16),o=i.slice(0,-16),a=uN(o,[],r,s,this.toArray());if(a===null)throw new Error("Decryption failed!");return Ui(a,n)}}const Ut=class Ut extends Sn{constructor(n,r,i){super(n,r);M(this,"scope");this.scope=i}static format(n){const r={sourceTXID:n.sourceTXID,sourceOutputIndex:n.sourceOutputIndex,sequence:n.inputSequence},i=[...n.otherInputs];i.splice(n.inputIndex,0,r);const s=()=>{const g=new ne;for(const m of i){if(typeof m.sourceTXID>"u"){if(m.sourceTransaction==null)throw new Error("Missing sourceTransaction for input");g.write(m.sourceTransaction.hash())}else g.writeReverse(U(m.sourceTXID,"hex"));g.writeUInt32LE(m.sourceOutputIndex)}const w=g.toArray();return un(w)},o=()=>{const g=new ne;for(const m of i){const y=m.sequence??4294967295;g.writeUInt32LE(y)}const w=g.toArray();return un(w)};function a(g){var y,b;const w=new ne;if(typeof g>"u")for(const x of n.outputs){const I=x.satoshis??0;w.writeUInt64LE(I);const k=((y=x.lockingScript)==null?void 0:y.toBinary())??[];w.writeVarIntNum(k.length),w.write(k)}else{const x=n.outputs[g];if(x===void 0)throw new Error(`Output at index ${g} does not exist`);const I=x.satoshis??0;w.writeUInt64LE(I);const k=((b=x.lockingScript)==null?void 0:b.toBinary())??[];w.writeVarIntNum(k.length),w.write(k)}const v=w.toArray();return un(v)}let l=new Array(32).fill(0),c=new Array(32).fill(0),u=new Array(32).fill(0);n.scope&Ut.SIGHASH_ANYONECANPAY||(l=s()),!(n.scope&Ut.SIGHASH_ANYONECANPAY)&&(n.scope&31)!==Ut.SIGHASH_SINGLE&&(n.scope&31)!==Ut.SIGHASH_NONE&&(c=o()),(n.scope&31)!==Ut.SIGHASH_SINGLE&&(n.scope&31)!==Ut.SIGHASH_NONE?u=a():(n.scope&31)===Ut.SIGHASH_SINGLE&&n.inputIndex<n.outputs.length&&(u=a(n.inputIndex));const d=new ne;d.writeInt32LE(n.transactionVersion),d.write(l),d.write(c),d.writeReverse(U(n.sourceTXID,"hex")),d.writeUInt32LE(n.sourceOutputIndex);const f=n.subscript.toBinary();d.writeVarIntNum(f.length),d.write(f),d.writeUInt64LE(n.sourceSatoshis);const h=r.sequence;return d.writeUInt32LE(h),d.write(u),d.writeUInt32LE(n.lockTime),d.writeUInt32LE(n.scope>>>0),d.toArray()}static fromChecksigFormat(n){if(n.length===0){const o=new D(1),a=new D(1),l=1;return new Ut(o,a,l)}const r=n[n.length-1],i=n.slice(0,n.length-1),s=Sn.fromDER(i);return new Ut(s.r,s.s,r)}hasLowS(){return!(this.s.ltn(1)||this.s.gt(new D("7FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF5D576E7357A4501DDFE92F46681B20A0","hex")))}toChecksigFormat(){return[...this.toDER(),this.scope]}};M(Ut,"SIGHASH_ALL",1),M(Ut,"SIGHASH_NONE",2),M(Ut,"SIGHASH_SINGLE",3),M(Ut,"SIGHASH_FORKID",64),M(Ut,"SIGHASH_ANYONECANPAY",128);let je=Ut;class NI{constructor(){M(this,"curve");this.curve=new kt}generateProof(e,n,r,i){const s=st.fromRandom(),o=s.toPublicKey(),a=r.mul(s),l=this.computeChallenge(n,r,i,a,o),c=s.add(l.mul(e)).umod(this.curve.n);return{R:o,SPrime:a,z:c}}verifyProof(e,n,r,i){const{R:s,SPrime:o,z:a}=i,l=this.computeChallenge(e,n,r,o,s),c=this.curve.g.mul(a),u=s.add(e.mul(l));if(!c.eq(u))return!1;const d=n.mul(a),f=o.add(r.mul(l));return!!d.eq(f)}computeChallenge(e,n,r,i,s){const o=[...e.encode(!0),...n.encode(!0),...r.encode(!0),...i.encode(!0),...s.encode(!0)],a=fn(o);return new D(a).umod(this.curve.n)}}const _={OP_FALSE:0,OP_0:0,OP_PUSHDATA1:76,OP_PUSHDATA2:77,OP_PUSHDATA4:78,OP_1NEGATE:79,OP_RESERVED:80,OP_TRUE:81,OP_1:81,OP_2:82,OP_3:83,OP_4:84,OP_5:85,OP_6:86,OP_7:87,OP_8:88,OP_9:89,OP_10:90,OP_11:91,OP_12:92,OP_13:93,OP_14:94,OP_15:95,OP_16:96,OP_NOP:97,OP_VER:98,OP_IF:99,OP_NOTIF:100,OP_VERIF:101,OP_VERNOTIF:102,OP_ELSE:103,OP_ENDIF:104,OP_VERIFY:105,OP_RETURN:106,OP_TOALTSTACK:107,OP_FROMALTSTACK:108,OP_2DROP:109,OP_2DUP:110,OP_3DUP:111,OP_2OVER:112,OP_2ROT:113,OP_2SWAP:114,OP_IFDUP:115,OP_DEPTH:116,OP_DROP:117,OP_DUP:118,OP_NIP:119,OP_OVER:120,OP_PICK:121,OP_ROLL:122,OP_ROT:123,OP_SWAP:124,OP_TUCK:125,OP_CAT:126,OP_SUBSTR:127,OP_SPLIT:127,OP_LEFT:128,OP_NUM2BIN:128,OP_RIGHT:129,OP_BIN2NUM:129,OP_SIZE:130,OP_INVERT:131,OP_AND:132,OP_OR:133,OP_XOR:134,OP_EQUAL:135,OP_EQUALVERIFY:136,OP_RESERVED1:137,OP_RESERVED2:138,OP_1ADD:139,OP_1SUB:140,OP_2MUL:141,OP_2DIV:142,OP_NEGATE:143,OP_ABS:144,OP_NOT:145,OP_0NOTEQUAL:146,OP_ADD:147,OP_SUB:148,OP_MUL:149,OP_DIV:150,OP_MOD:151,OP_LSHIFT:152,OP_RSHIFT:153,OP_BOOLAND:154,OP_BOOLOR:155,OP_NUMEQUAL:156,OP_NUMEQUALVERIFY:157,OP_NUMNOTEQUAL:158,OP_LESSTHAN:159,OP_GREATERTHAN:160,OP_LESSTHANOREQUAL:161,OP_GREATERTHANOREQUAL:162,OP_MIN:163,OP_MAX:164,OP_WITHIN:165,OP_RIPEMD160:166,OP_SHA1:167,OP_SHA256:168,OP_HASH160:169,OP_HASH256:170,OP_CODESEPARATOR:171,OP_CHECKSIG:172,OP_CHECKSIGVERIFY:173,OP_CHECKMULTISIG:174,OP_CHECKMULTISIGVERIFY:175,OP_NOP1:176,OP_NOP2:177,OP_NOP3:178,OP_NOP4:179,OP_NOP5:180,OP_NOP6:181,OP_NOP7:182,OP_NOP8:183,OP_NOP9:184,OP_NOP10:185,OP_NOP11:186,OP_NOP12:187,OP_NOP13:188,OP_NOP14:189,OP_NOP15:190,OP_NOP16:191,OP_NOP17:192,OP_NOP18:193,OP_NOP19:194,OP_NOP20:195,OP_NOP21:196,OP_NOP22:197,OP_NOP23:198,OP_NOP24:199,OP_NOP25:200,OP_NOP26:201,OP_NOP27:202,OP_NOP28:203,OP_NOP29:204,OP_NOP30:205,OP_NOP31:206,OP_NOP32:207,OP_NOP33:208,OP_NOP34:209,OP_NOP35:210,OP_NOP36:211,OP_NOP37:212,OP_NOP38:213,OP_NOP39:214,OP_NOP40:215,OP_NOP41:216,OP_NOP42:217,OP_NOP43:218,OP_NOP44:219,OP_NOP45:220,OP_NOP46:221,OP_NOP47:222,OP_NOP48:223,OP_NOP49:224,OP_NOP50:225,OP_NOP51:226,OP_NOP52:227,OP_NOP53:228,OP_NOP54:229,OP_NOP55:230,OP_NOP56:231,OP_NOP57:232,OP_NOP58:233,OP_NOP59:234,OP_NOP60:235,OP_NOP61:236,OP_NOP62:237,OP_NOP63:238,OP_NOP64:239,OP_NOP65:240,OP_NOP66:241,OP_NOP67:242,OP_NOP68:243,OP_NOP69:244,OP_NOP70:245,OP_NOP71:246,OP_NOP72:247,OP_NOP73:248,OP_NOP77:252,OP_SMALLDATA:249,OP_SMALLINTEGER:250,OP_PUBKEYS:251,OP_PUBKEYHASH:253,OP_PUBKEY:254,OP_INVALIDOPCODE:255};for(const t in _)_[_[t]]=t;class qt{constructor(e=[]){M(this,"chunks");this.chunks=e}static fromASM(e){const n=[],r=e.split(" ");let i=0;for(;i<r.length;){const s=r[i];let o,a=0;if(s.startsWith("OP_")&&typeof _[s]<"u"&&(o=s,a=_[s]),s==="0")a=0,n.push({op:a}),i=i+1;else if(s==="-1")a=_.OP_1NEGATE,n.push({op:a}),i=i+1;else if(o===void 0){let l=r[i];l.length%2!==0&&(l="0"+l);const c=U(l,"hex");if(Ui(c,"hex")!==l)throw new Error("invalid hex string in script");const u=c.length;u>=0&&u<_.OP_PUSHDATA1?a=u:u<Math.pow(2,8)?a=_.OP_PUSHDATA1:u<Math.pow(2,16)?a=_.OP_PUSHDATA2:u<Math.pow(2,32)&&(a=_.OP_PUSHDATA4),n.push({data:c,op:a}),i=i+1}else a===_.OP_PUSHDATA1||a===_.OP_PUSHDATA2||a===_.OP_PUSHDATA4?(n.push({data:U(r[i+2],"hex"),op:a}),i=i+3):(n.push({op:a}),i=i+1)}return new qt(n)}static fromHex(e){if(e.length===0)return qt.fromBinary([]);if(e.length%2!==0)throw new Error("There is an uneven number of characters in the string which suggests it is not hex encoded.");if(!/^[0-9a-fA-F]+$/.test(e))throw new Error("Some elements in this string are not hex encoded.");return qt.fromBinary(U(e,"hex"))}static fromBinary(e){e=[...e];const n=[],r=new Ge(e);for(;!r.eof();){const i=r.readUInt8();let s=0,o=[];if(i>0&&i<_.OP_PUSHDATA1)s=i,n.push({data:r.read(s),op:i});else if(i===_.OP_PUSHDATA1){try{s=r.readUInt8(),o=r.read(s)}catch{r.read()}n.push({data:o,op:i})}else if(i===_.OP_PUSHDATA2){try{s=r.readUInt16LE(),o=r.read(s)}catch{r.read()}n.push({data:o,op:i})}else if(i===_.OP_PUSHDATA4){try{s=r.readUInt32LE(),o=r.read(s)}catch{r.read()}n.push({data:o,op:i})}else n.push({op:i})}return new qt(n)}toASM(){let e="";for(let n=0;n<this.chunks.length;n++){const r=this.chunks[n];e+=this._chunkToString(r)}return e.slice(1)}toHex(){return Ui(this.toBinary(),"hex")}toBinary(){const e=new ne;for(let n=0;n<this.chunks.length;n++){const r=this.chunks[n],i=r.op;e.writeUInt8(i),r.data!=null&&(i<_.OP_PUSHDATA1?e.write(r.data):i===_.OP_PUSHDATA1?(e.writeUInt8(r.data.length),e.write(r.data)):i===_.OP_PUSHDATA2?(e.writeUInt16LE(r.data.length),e.write(r.data)):i===_.OP_PUSHDATA4&&(e.writeUInt32LE(r.data.length),e.write(r.data)))}return e.toArray()}writeScript(e){return this.chunks=this.chunks.concat(e.chunks),this}writeOpCode(e){return this.chunks.push({op:e}),this}setChunkOpCode(e,n){return this.chunks[e]={op:n},this}writeBn(e){if(e.cmpn(0)===_.OP_0)this.chunks.push({op:_.OP_0});else if(e.cmpn(-1)===0)this.chunks.push({op:_.OP_1NEGATE});else if(e.cmpn(1)>=0&&e.cmpn(16)<=0)this.chunks.push({op:e.toNumber()+_.OP_1-1});else{const n=e.toSm("little");this.writeBin(n)}return this}writeBin(e){let n;if(e.length>0&&e.length<_.OP_PUSHDATA1)n=e.length;else if(e.length===0)n=_.OP_0;else if(e.length<Math.pow(2,8))n=_.OP_PUSHDATA1;else if(e.length<Math.pow(2,16))n=_.OP_PUSHDATA2;else if(e.length<Math.pow(2,32))n=_.OP_PUSHDATA4;else throw new Error("You can't push that much data");return this.chunks.push({data:e,op:n}),this}writeNumber(e){return this.writeBn(new D(e)),this}removeCodeseparators(){const e=[];for(let n=0;n<this.chunks.length;n++)this.chunks[n].op!==_.OP_CODESEPARATOR&&e.push(this.chunks[n]);return this.chunks=e,this}findAndDelete(e){const n=e.toHex();for(let r=0;r<this.chunks.length;r++){const s=new qt([this.chunks[r]]).toHex();n===s&&this.chunks.splice(r,1)}return this}isPushOnly(){for(let e=0;e<this.chunks.length;e++)if(this.chunks[e].op>_.OP_16)return!1;return!0}isLockingScript(){throw new Error("Not implemented")}isUnlockingScript(){throw new Error("Not implemented")}_chunkToString(e){const n=e.op;let r="";if(typeof e.data>"u"){const i=_[n];r=`${r} ${i}`}else r=`${r} ${Z(e.data)}`;return r}}class vr extends qt{isLockingScript(){return!0}isUnlockingScript(){return!1}}class Ks extends qt{isLockingScript(){return!1}isUnlockingScript(){return!0}}const is=1024*1024*1024,ew=Math.pow(2,31)-1,_n=!0;class CI{constructor(e){M(this,"sourceTXID");M(this,"sourceOutputIndex");M(this,"sourceSatoshis");M(this,"lockingScript");M(this,"transactionVersion");M(this,"otherInputs");M(this,"outputs");M(this,"inputIndex");M(this,"unlockingScript");M(this,"inputSequence");M(this,"lockTime");M(this,"context");M(this,"programCounter");M(this,"lastCodeSeparator");M(this,"stack");M(this,"altStack");M(this,"ifStack");this.sourceTXID=e.sourceTXID,this.sourceOutputIndex=e.sourceOutputIndex,this.sourceSatoshis=e.sourceSatoshis,this.lockingScript=e.lockingScript,this.transactionVersion=e.transactionVersion,this.otherInputs=e.otherInputs,this.outputs=e.outputs,this.inputIndex=e.inputIndex,this.unlockingScript=e.unlockingScript,this.inputSequence=e.inputSequence,this.lockTime=e.lockTime,this.reset()}reset(){this.context="UnlockingScript",this.programCounter=0,this.lastCodeSeparator=null,this.stack=[],this.altStack=[],this.ifStack=[]}step(){this.context==="UnlockingScript"&&this.programCounter>=this.unlockingScript.chunks.length&&(this.context="LockingScript",this.programCounter=0);let e;this.context==="UnlockingScript"?e=this.unlockingScript.chunks[this.programCounter]:e=this.lockingScript.chunks[this.programCounter];const n=X=>X===_.OP_2MUL||X===_.OP_2DIV||X===_.OP_VERIF||X===_.OP_VERNOTIF||X===_.OP_VER,r=X=>{const ie=X.data,ge=X.op;return Array.isArray(ie)?ie.length===0?ge===_.OP_0:ie.length===1&&ie[0]>=1&&ie[0]<=16?ge===_.OP_1+(ie[0]-1):ie.length===1&&ie[0]===129?ge===_.OP_1NEGATE:ie.length<=75?ge===ie.length:ie.length<=255?ge===_.OP_PUSHDATA1:ie.length<=65535?ge===_.OP_PUSHDATA2:!0:!0},i=(X,ie=Number.MAX_SAFE_INTEGER)=>!(X.length>ie||X.length>0&&!(X[X.length-1]&127)&&(X.length<=1||!(X[X.length-2]&128))),s=(X,ie)=>{const ge=X;for(;ge.length<ie;)ge.unshift(0);return ge},o=X=>{if(X.length<9||X.length>73||X[0]!==48||X[1]!==X.length-3)return!1;const ie=X[3];if(5+ie>=X.length)return!1;const ge=X[5+ie];if(ie+ge+7!==X.length)return!1;const ke=X.slice(4);if(X[2]!==2||ie===0||ke[0]&128||ie>1&&ke[0]===0&&!(ke[1]&128))return!1;const me=X.slice(6+ie);return!(X[6+ie-2]!==2||ge===0||me[0]&128||ge>1&&me[0]===0&&!(me[1]&128))},a=X=>{if(X.length===0)return!0;o(X)||this.scriptEvaluationError("The signature format is invalid.");const ie=je.fromChecksigFormat(X);return ie.hasLowS()||this.scriptEvaluationError("The signature must have a low S value."),ie.scope&je.SIGHASH_FORKID?!0:(this.scriptEvaluationError("The signature must use SIGHASH_FORKID."),!1)},l=X=>(X.length<33&&this.scriptEvaluationError("The public key is too short, it must be at least 33 bytes."),X[0]===4?X.length!==65&&this.scriptEvaluationError("The non-compressed public key must be 65 bytes."):X[0]===2||X[0]===3?X.length!==33&&this.scriptEvaluationError("The compressed public key must be 33 bytes."):this.scriptEvaluationError("The public key is in an unknown format."),!0),c=(X,ie,ge)=>{const ke=je.format({sourceTXID:this.sourceTXID,sourceOutputIndex:this.sourceOutputIndex,sourceSatoshis:this.sourceSatoshis,transactionVersion:this.transactionVersion,otherInputs:this.otherInputs,outputs:this.outputs,inputIndex:this.inputIndex,subscript:ge,inputSequence:this.inputSequence,lockTime:this.lockTime,scope:X.scope}),me=new D(un(ke));return Gi(me,X,ie)},u=!this.ifStack.includes(!1);let d,f,h,p,g,w,v,m,y,b,x,I,k,S,P,R,B,T,N,L,$,H,W,C,V,q,G,Y,z,K,oe,te;const J=e.op;if(typeof J>"u"&&this.scriptEvaluationError(`An opcode is missing in this chunk of the ${this.context}!`),Array.isArray(e.data)&&e.data.length>is&&this.scriptEvaluationError(`It's not currently possible to push data larger than ${is} bytes.`),u&&n(J)&&this.scriptEvaluationError("This opcode is currently disabled."),u&&J>=0&&J<=_.OP_PUSHDATA4)r(e)||this.scriptEvaluationError("This data is not minimally-encoded."),Array.isArray(e.data)?this.stack.push(e.data):this.stack.push([]);else if(u||_.OP_IF<=J&&J<=_.OP_ENDIF)switch(J){case _.OP_1NEGATE:case _.OP_1:case _.OP_2:case _.OP_3:case _.OP_4:case _.OP_5:case _.OP_6:case _.OP_7:case _.OP_8:case _.OP_9:case _.OP_10:case _.OP_11:case _.OP_12:case _.OP_13:case _.OP_14:case _.OP_15:case _.OP_16:w=J-(_.OP_1-1),d=new D(w).toScriptNum(),this.stack.push(d);break;case _.OP_NOP:case _.OP_NOP2:case _.OP_NOP3:case _.OP_NOP1:case _.OP_NOP4:case _.OP_NOP5:case _.OP_NOP6:case _.OP_NOP7:case _.OP_NOP8:case _.OP_NOP9:case _.OP_NOP10:case _.OP_NOP11:case _.OP_NOP12:case _.OP_NOP13:case _.OP_NOP14:case _.OP_NOP15:case _.OP_NOP16:case _.OP_NOP17:case _.OP_NOP18:case _.OP_NOP19:case _.OP_NOP20:case _.OP_NOP21:case _.OP_NOP22:case _.OP_NOP23:case _.OP_NOP24:case _.OP_NOP25:case _.OP_NOP26:case _.OP_NOP27:case _.OP_NOP28:case _.OP_NOP29:case _.OP_NOP30:case _.OP_NOP31:case _.OP_NOP32:case _.OP_NOP33:case _.OP_NOP34:case _.OP_NOP35:case _.OP_NOP36:case _.OP_NOP37:case _.OP_NOP38:case _.OP_NOP39:case _.OP_NOP40:case _.OP_NOP41:case _.OP_NOP42:case _.OP_NOP43:case _.OP_NOP44:case _.OP_NOP45:case _.OP_NOP46:case _.OP_NOP47:case _.OP_NOP48:case _.OP_NOP49:case _.OP_NOP50:case _.OP_NOP51:case _.OP_NOP52:case _.OP_NOP53:case _.OP_NOP54:case _.OP_NOP55:case _.OP_NOP56:case _.OP_NOP57:case _.OP_NOP58:case _.OP_NOP59:case _.OP_NOP60:case _.OP_NOP61:case _.OP_NOP62:case _.OP_NOP63:case _.OP_NOP64:case _.OP_NOP65:case _.OP_NOP66:case _.OP_NOP67:case _.OP_NOP68:case _.OP_NOP69:case _.OP_NOP70:case _.OP_NOP71:case _.OP_NOP72:case _.OP_NOP73:case _.OP_NOP77:break;case _.OP_IF:case _.OP_NOTIF:K=!1,u&&(this.stack.length<1&&this.scriptEvaluationError("OP_IF and OP_NOTIF require at least one item on the stack when they are used!"),d=this.stacktop(-1),K=this.castToBool(d),J===_.OP_NOTIF&&(K=!K),this.stack.pop()),this.ifStack.push(K);break;case _.OP_ELSE:this.ifStack.length===0&&this.scriptEvaluationError("OP_ELSE requires a preceeding OP_IF."),this.ifStack[this.ifStack.length-1]=!this.ifStack[this.ifStack.length-1];break;case _.OP_ENDIF:this.ifStack.length===0&&this.scriptEvaluationError("OP_ENDIF requires a preceeding OP_IF."),this.ifStack.pop();break;case _.OP_VERIFY:this.stack.length<1&&this.scriptEvaluationError("OP_VERIFY requires at least one item to be on the stack."),d=this.stacktop(-1),K=this.castToBool(d),K?this.stack.pop():this.scriptEvaluationError("OP_VERIFY requires the top stack value to be truthy.");break;case _.OP_RETURN:this.context==="UnlockingScript"?this.programCounter=this.unlockingScript.chunks.length:this.programCounter=this.lockingScript.chunks.length,this.ifStack=[];break;case _.OP_TOALTSTACK:this.stack.length<1&&this.scriptEvaluationError("OP_TOALTSTACK requires at oeast one item to be on the stack."),this.altStack.push(this.stack.pop()??[]);break;case _.OP_FROMALTSTACK:this.altStack.length<1&&this.scriptEvaluationError("OP_FROMALTSTACK requires at least one item to be on the stack."),this.stack.push(this.altStack.pop()??[]);break;case _.OP_2DROP:this.stack.length<2&&this.scriptEvaluationError("OP_2DROP requires at least two items to be on the stack."),this.stack.pop(),this.stack.pop();break;case _.OP_2DUP:this.stack.length<2&&this.scriptEvaluationError("OP_2DUP requires at least two items to be on the stack."),f=this.stacktop(-2),h=this.stacktop(-1),this.stack.push([...f]),this.stack.push([...h]);break;case _.OP_3DUP:this.stack.length<3&&this.scriptEvaluationError("OP_3DUP requires at least three items to be on the stack."),f=this.stacktop(-3),h=this.stacktop(-2),p=this.stacktop(-1),this.stack.push([...f]),this.stack.push([...h]),this.stack.push([...p]);break;case _.OP_2OVER:this.stack.length<4&&this.scriptEvaluationError("OP_2OVER requires at least four items to be on the stack."),f=this.stacktop(-4),h=this.stacktop(-3),this.stack.push([...f]),this.stack.push([...h]);break;case _.OP_2ROT:this.stack.length<6&&this.scriptEvaluationError("OP_2ROT requires at least six items to be on the stack."),g=this.stack.splice(this.stack.length-6,2),this.stack.push(g[0]),this.stack.push(g[1]);break;case _.OP_2SWAP:this.stack.length<4&&this.scriptEvaluationError("OP_2SWAP requires at least four items to be on the stack."),g=this.stack.splice(this.stack.length-4,2),this.stack.push(g[0]),this.stack.push(g[1]);break;case _.OP_IFDUP:this.stack.length<1&&this.scriptEvaluationError("OP_IFDUP requires at least one item to be on the stack."),d=this.stacktop(-1),K=this.castToBool(d),K&&this.stack.push([...d]);break;case _.OP_DEPTH:d=new D(this.stack.length).toScriptNum(),this.stack.push(d);break;case _.OP_DROP:this.stack.length<1&&this.scriptEvaluationError("OP_DROP requires at least one item to be on the stack."),this.stack.pop();break;case _.OP_DUP:this.stack.length<1&&this.scriptEvaluationError("OP_DUP requires at least one item to be on the stack."),this.stack.push([...this.stacktop(-1)]);break;case _.OP_NIP:this.stack.length<2&&this.scriptEvaluationError("OP_NIP requires at least two items to be on the stack."),this.stack.splice(this.stack.length-2,1);break;case _.OP_OVER:this.stack.length<2&&this.scriptEvaluationError("OP_OVER requires at least two items to be on the stack."),this.stack.push([...this.stacktop(-2)]);break;case _.OP_PICK:case _.OP_ROLL:this.stack.length<2&&this.scriptEvaluationError(`${_[J]} requires at least two items to be on the stack.`),d=this.stacktop(-1),S=D.fromScriptNum(d,_n),w=S.toNumber(),this.stack.pop(),(w<0||w>=this.stack.length)&&this.scriptEvaluationError(`${_[J]} requires the top stack element to be 0 or a positive number less than the current size of the stack.`),d=this.stacktop(-w-1),J===_.OP_ROLL&&this.stack.splice(this.stack.length-w-1,1),this.stack.push([...d]);break;case _.OP_ROT:this.stack.length<3&&this.scriptEvaluationError("OP_ROT requires at least three items to be on the stack."),x=this.stacktop(-3),I=this.stacktop(-2),k=this.stacktop(-1),this.stack[this.stack.length-3]=I,this.stack[this.stack.length-2]=k,this.stack[this.stack.length-1]=x;break;case _.OP_SWAP:this.stack.length<2&&this.scriptEvaluationError("OP_SWAP requires at least two items to be on the stack."),x=this.stacktop(-2),I=this.stacktop(-1),this.stack[this.stack.length-2]=I,this.stack[this.stack.length-1]=x;break;case _.OP_TUCK:this.stack.length<2&&this.scriptEvaluationError("OP_TUCK requires at least two items to be on the stack."),this.stack.splice(this.stack.length-2,0,[...this.stacktop(-1)]);break;case _.OP_SIZE:this.stack.length<1&&this.scriptEvaluationError("OP_SIZE requires at least one item to be on the stack."),S=new D(this.stacktop(-1).length),this.stack.push(S.toScriptNum());break;case _.OP_AND:case _.OP_OR:case _.OP_XOR:switch(this.stack.length<2&&this.scriptEvaluationError(`${_[J]} requires at least one item to be on the stack.`),f=this.stacktop(-2),h=this.stacktop(-1),f.length!==h.length&&this.scriptEvaluationError(`${_[J]} requires the top two stack items to be the same size.`),J){case _.OP_AND:for(let X=0;X<f.length;X++)f[X]&=h[X];break;case _.OP_OR:for(let X=0;X<f.length;X++)f[X]|=h[X];break;case _.OP_XOR:for(let X=0;X<f.length;X++)f[X]^=h[X];break}this.stack.pop();break;case _.OP_INVERT:this.stack.length<1&&this.scriptEvaluationError("OP_INVERT requires at least one item to be on the stack."),d=this.stacktop(-1);for(let X=0;X<d.length;X++)d[X]=~d[X];break;case _.OP_LSHIFT:case _.OP_RSHIFT:if(this.stack.length<2&&this.scriptEvaluationError(`${_[J]} requires at least two items to be on the stack.`),f=this.stacktop(-2),f.length===0)this.stack.pop();else{P=new D(f),R=D.fromScriptNum(this.stacktop(-1),_n),w=R.toNumber(),w<0&&this.scriptEvaluationError(`${_[J]} requires the top item on the stack not to be negative.`),this.stack.pop(),this.stack.pop();let X;J===_.OP_LSHIFT&&(X=P.ushln(w)),J===_.OP_RSHIFT&&(X=P.ushrn(w));const ie=s(X.toArray().slice(f.length*-1),f.length);this.stack.push(ie)}break;case _.OP_EQUAL:case _.OP_EQUALVERIFY:this.stack.length<2&&this.scriptEvaluationError(`${_[J]} requires at least two items to be on the stack.`),f=this.stacktop(-2),h=this.stacktop(-1),oe=Z(f)===Z(h),this.stack.pop(),this.stack.pop(),this.stack.push(oe?[1]:[]),J===_.OP_EQUALVERIFY&&(oe?this.stack.pop():this.scriptEvaluationError("OP_EQUALVERIFY requires the top two stack items to be equal."));break;case _.OP_1ADD:case _.OP_1SUB:case _.OP_NEGATE:case _.OP_ABS:case _.OP_NOT:case _.OP_0NOTEQUAL:switch(this.stack.length<1&&this.scriptEvaluationError(`${_[J]} requires at least one items to be on the stack.`),d=this.stacktop(-1),S=D.fromScriptNum(d,_n),J){case _.OP_1ADD:S=S.addn(1);break;case _.OP_1SUB:S=S.subn(1);break;case _.OP_NEGATE:S=S.neg();break;case _.OP_ABS:S.cmpn(0)<0&&(S=S.neg());break;case _.OP_NOT:S=new D(S.cmpn(0)===0?1:0);break;case _.OP_0NOTEQUAL:S=new D(S.cmpn(0)!==0?1:0);break}this.stack.pop(),this.stack.push(S.toScriptNum());break;case _.OP_ADD:case _.OP_SUB:case _.OP_MUL:case _.OP_MOD:case _.OP_DIV:case _.OP_BOOLAND:case _.OP_BOOLOR:case _.OP_NUMEQUAL:case _.OP_NUMEQUALVERIFY:case _.OP_NUMNOTEQUAL:case _.OP_LESSTHAN:case _.OP_GREATERTHAN:case _.OP_LESSTHANOREQUAL:case _.OP_GREATERTHANOREQUAL:case _.OP_MIN:case _.OP_MAX:switch(this.stack.length<2&&this.scriptEvaluationError(`${_[J]} requires at least two items to be on the stack.`),P=D.fromScriptNum(this.stacktop(-2),_n),R=D.fromScriptNum(this.stacktop(-1),_n),S=new D(0),J){case _.OP_ADD:S=P.add(R);break;case _.OP_SUB:S=P.sub(R);break;case _.OP_MUL:S=P.mul(R);break;case _.OP_DIV:R.cmpn(0)===0&&this.scriptEvaluationError("OP_DIV cannot divide by zero!"),S=P.div(R);break;case _.OP_MOD:R.cmpn(0)===0&&this.scriptEvaluationError("OP_MOD cannot divide by zero!"),S=P.mod(R);break;case _.OP_BOOLAND:S=new D(P.cmpn(0)!==0&&R.cmpn(0)!==0?1:0);break;case _.OP_BOOLOR:S=new D(P.cmpn(0)!==0||R.cmpn(0)!==0?1:0);break;case _.OP_NUMEQUAL:S=new D(P.cmp(R)===0?1:0);break;case _.OP_NUMEQUALVERIFY:S=new D(P.cmp(R)===0?1:0);break;case _.OP_NUMNOTEQUAL:S=new D(P.cmp(R)!==0?1:0);break;case _.OP_LESSTHAN:S=new D(P.cmp(R)<0?1:0);break;case _.OP_GREATERTHAN:S=new D(P.cmp(R)>0?1:0);break;case _.OP_LESSTHANOREQUAL:S=new D(P.cmp(R)<=0?1:0);break;case _.OP_GREATERTHANOREQUAL:S=new D(P.cmp(R)>=0?1:0);break;case _.OP_MIN:S=P.cmp(R)<0?P:R;break;case _.OP_MAX:S=P.cmp(R)>0?P:R;break}this.stack.pop(),this.stack.pop(),this.stack.push(S.toScriptNum()),J===_.OP_NUMEQUALVERIFY&&(this.castToBool(this.stacktop(-1))?this.stack.pop():this.scriptEvaluationError("OP_NUMEQUALVERIFY requires the top stack item to be truthy."));break;case _.OP_WITHIN:this.stack.length<3&&this.scriptEvaluationError("OP_WITHIN requires at least three items to be on the stack."),P=D.fromScriptNum(this.stacktop(-3),_n),R=D.fromScriptNum(this.stacktop(-2),_n),B=D.fromScriptNum(this.stacktop(-1),_n),K=R.cmp(P)<=0&&P.cmp(B)<0,this.stack.pop(),this.stack.pop(),this.stack.pop(),this.stack.push(K?[1]:[]);break;case _.OP_RIPEMD160:case _.OP_SHA1:case _.OP_SHA256:case _.OP_HASH160:case _.OP_HASH256:{this.stack.length<1&&this.scriptEvaluationError(`${_[J]} requires at least one item to be on the stack.`);let X=[];d=this.stacktop(-1),J===_.OP_RIPEMD160?X=RI(d):J===_.OP_SHA1?X=_I(d):J===_.OP_SHA256?X=fn(d):J===_.OP_HASH160?X=Md(d):J===_.OP_HASH256&&(X=un(d)),this.stack.pop(),this.stack.push(X);break}case _.OP_CODESEPARATOR:this.lastCodeSeparator=this.programCounter;break;case _.OP_CHECKSIG:case _.OP_CHECKSIGVERIFY:this.stack.length<2&&this.scriptEvaluationError(`${_[J]} requires at least two items to be on the stack.`),T=this.stacktop(-2),N=this.stacktop(-1),(!a(T)||!l(N))&&this.scriptEvaluationError(`${_[J]} requires correct encoding for the public key and signature.`),this.context==="UnlockingScript"?L=new qt(this.unlockingScript.chunks.slice(this.lastCodeSeparator??0)):L=new qt(this.lockingScript.chunks.slice(this.lastCodeSeparator??0)),L.findAndDelete(new qt().writeBin(T));try{$=je.fromChecksigFormat(T),H=ut.fromDER(N),te=c($,H,L)}catch{te=!1}!te&&T.length>0&&this.scriptEvaluationError(`${_[J]} failed to verify the signature, and requires an empty signature when verification fails.`),this.stack.pop(),this.stack.pop(),this.stack.push(te?[1]:[]),J===_.OP_CHECKSIGVERIFY&&(te?this.stack.pop():this.scriptEvaluationError("OP_CHECKSIGVERIFY requires that a valid signature is provided."));break;case _.OP_CHECKMULTISIG:case _.OP_CHECKMULTISIGVERIFY:W=1,this.stack.length<W&&this.scriptEvaluationError(`${_[J]} requires at least 1 item to be on the stack.`),V=D.fromScriptNum(this.stacktop(-W),_n).toNumber(),(V<0||V>ew)&&this.scriptEvaluationError(`${_[J]} requires a key count between 0 and ${ew}.`),q=++W,W+=V,G=V+2,this.stack.length<W&&this.scriptEvaluationError(`${_[J]} requires the number of stack items not to be less than the number of keys used.`),Y=D.fromScriptNum(this.stacktop(-W),_n).toNumber(),(Y<0||Y>V)&&this.scriptEvaluationError(`${_[J]} requires the number of signatures to be no greater than the number of keys.`),z=++W,W+=Y,this.stack.length<W&&this.scriptEvaluationError(`${_[J]} requires the number of stack items not to be less than the number of signatures provided.`),this.context==="UnlockingScript"?L=new qt(this.unlockingScript.chunks.slice(this.lastCodeSeparator??0)):L=new qt(this.lockingScript.chunks.slice(this.lastCodeSeparator??0));for(let X=0;X<Y;X++)T=this.stacktop(-z-X),L.findAndDelete(new qt().writeBin(T));for(te=!0;te&&Y>0;){T=this.stacktop(-z),N=this.stacktop(-q),(!a(T)||!l(N))&&this.scriptEvaluationError(`${_[J]} requires correct encoding for the public key and signature.`);try{$=je.fromChecksigFormat(T),H=ut.fromString(Z(N)),C=c($,H,L)}catch{C=!1}C&&(z++,Y--),q++,V--,Y>V&&(te=!1)}for(;W-- >1;)!te&&G===0&&this.stacktop(-1).length>0&&this.scriptEvaluationError(`${_[J]} failed to verify a signature, and requires an empty signature when verification fails.`),G>0&&G--,this.stack.pop();this.stack.length<1&&this.scriptEvaluationError(`${_[J]} requires an extra item to be on the stack.`),this.stacktop(-1).length>0&&this.scriptEvaluationError(`${_[J]} requires the extra stack item to be empty.`),this.stack.pop(),this.stack.push(te?[1]:[]),J===_.OP_CHECKMULTISIGVERIFY&&(te?this.stack.pop():this.scriptEvaluationError("OP_CHECKMULTISIGVERIFY requires that a sufficient number of valid signatures are provided."));break;case _.OP_CAT:this.stack.length<2&&this.scriptEvaluationError("OP_CAT requires at least two items to be on the stack."),f=this.stacktop(-2),h=this.stacktop(-1),f.length+h.length>is&&this.scriptEvaluationError(`It's not currently possible to push data larger than ${is} bytes.`),this.stack[this.stack.length-2]=[...f,...h],this.stack.pop();break;case _.OP_SPLIT:this.stack.length<2&&this.scriptEvaluationError("OP_SPLIT requires at least two items to be on the stack."),f=this.stacktop(-2),w=D.fromScriptNum(this.stacktop(-1),_n).toNumber(),(w<0||w>f.length)&&this.scriptEvaluationError("OP_SPLIT requires the first stack item to be a non-negative number less than or equal to the size of the second-from-top stack item."),h=[...f],this.stack[this.stack.length-2]=h.slice(0,w),this.stack[this.stack.length-1]=h.slice(w);break;case _.OP_NUM2BIN:if(this.stack.length<2&&this.scriptEvaluationError("OP_NUM2BIN requires at least two items to be on the stack."),v=D.fromScriptNum(this.stacktop(-1),_n).toNumber(),v>is&&this.scriptEvaluationError(`It's not currently possible to push data larger than ${is} bytes.`),this.stack.pop(),m=this.stacktop(-1),m=Yp(m),m.length>v&&this.scriptEvaluationError("OP_NUM2BIN requires that the size expressed in the top stack item is large enough to hold the value expressed in the second-from-top stack item."),m.length===v){this.stack[this.stack.length-1]=m;break}for(b=0,m.length>0&&(b=m[m.length-1]&128,m[m.length-1]&=127),y=new Array(v),y.fill(0),w=0;w<v;w++)y[w]=m[w];for(w=m.length-1;w++<v-2;)y[w]=0;y[w]=b,this.stack[this.stack.length-1]=y;break;case _.OP_BIN2NUM:this.stack.length<1&&this.scriptEvaluationError("OP_BIN2NUM requires at least one item to be on the stack."),f=this.stacktop(-1),h=Yp(f),this.stack[this.stack.length-1]=h,i(h)||this.scriptEvaluationError("OP_BIN2NUM requires that the resulting number is valid.");break;default:this.scriptEvaluationError("Invalid opcode!")}this.programCounter++}validate(){for(this.unlockingScript.isPushOnly()||this.scriptEvaluationError("Unlocking scripts can only contain push operations, and no other opcodes.");this.step(),!(this.context==="LockingScript"&&this.programCounter>=this.lockingScript.chunks.length););return this.ifStack.length>0&&this.scriptEvaluationError("Every OP_IF must be terminated prior to the end of the script."),this.stack.length!==1&&this.scriptEvaluationError("The clean stack rule requires exactly one item to be on the stack after script execution."),this.castToBool(this.stacktop(-1))||this.scriptEvaluationError("The top stack element must be truthy after script evaluation."),!0}stacktop(e){return this.stack[this.stack.length+e]}castToBool(e){for(let n=0;n<e.length;n++)if(e[n]!==0)return!(n===e.length-1&&e[n]===128);return!1}scriptEvaluationError(e){throw new Error(`Script evaluation error: ${e}

Source TXID: ${this.sourceTXID}
Source output index: ${this.sourceOutputIndex}
Context: ${this.context}
Program counter: ${this.programCounter}
Stack size: ${this.stack.length}
Alt stack size: ${this.altStack.length}`)}}function tw(t){if(t==null)throw new Error("must have value");return t}class em{lock(e){let n;if(typeof e=="string"){const r=Ld(e);if(r.prefix[0]!==0&&r.prefix[0]!==111)throw new Error("only P2PKH is supported");n=r.data}else n=e;if(n.length!==20)throw new Error("P2PKH hash length must be 20 bytes");return new vr([{op:_.OP_DUP},{op:_.OP_HASH160},{op:n.length,data:n},{op:_.OP_EQUALVERIFY},{op:_.OP_CHECKSIG}])}unlock(e,n="all",r=!1,i,s){return{sign:async(o,a)=>{var v,m,y;let l=je.SIGHASH_FORKID;n==="all"&&(l|=je.SIGHASH_ALL),n==="none"&&(l|=je.SIGHASH_NONE),n==="single"&&(l|=je.SIGHASH_SINGLE),r&&(l|=je.SIGHASH_ANYONECANPAY);const c=o.inputs[a],u=o.inputs.filter((b,x)=>x!==a),d=c.sourceTXID??((v=c.sourceTransaction)==null?void 0:v.id("hex"));if(d==null||d===void 0)throw new Error("The input sourceTXID or sourceTransaction is required for transaction signing.");if(d==="")throw new Error("The input sourceTXID or sourceTransaction is required for transaction signing.");if(i||(i=(m=c.sourceTransaction)==null?void 0:m.outputs[c.sourceOutputIndex].satoshis),i==null||i===void 0)throw new Error("The sourceSatoshis or input sourceTransaction is required for transaction signing.");if(s||(s=(y=c.sourceTransaction)==null?void 0:y.outputs[c.sourceOutputIndex].lockingScript),s==null)throw new Error("The lockingScript or input sourceTransaction is required for transaction signing.");const f=je.format({sourceTXID:d,sourceOutputIndex:tw(c.sourceOutputIndex),sourceSatoshis:i,transactionVersion:o.version,otherInputs:u,inputIndex:a,outputs:o.outputs,inputSequence:tw(c.sequence),subscript:s,lockTime:o.lockTime,scope:l}),h=e.sign(fn(f)),g=new je(h.r,h.s,l).toChecksigFormat(),w=e.toPublicKey().encode(!0);return new Ks([{op:g.length,data:g},{op:w.length,data:w}])},estimateLength:async()=>108}}}class dN{constructor(e="raw"){M(this,"type","raw");this.type=e}lock(e){const n=[{op:_.OP_OVER},{op:_.OP_3},{op:_.OP_SPLIT},{op:_.OP_NIP},{op:_.OP_1},{op:_.OP_SPLIT},{op:_.OP_SWAP},{op:_.OP_SPLIT},{op:_.OP_DROP}];return this.type!=="raw"&&n.push({op:_["OP_"+this.type]}),n.push({op:e.length,data:e}),n.push({op:_.OP_EQUALVERIFY}),n.push({op:_.OP_CHECKSIG}),new vr(n)}unlock(e,n,r="all",i=!1){return{sign:async(s,o)=>{var g,w,v,m,y;typeof n>"u"&&(n=st.fromRandom());let a=je.SIGHASH_FORKID;r==="all"&&(a|=je.SIGHASH_ALL),r==="none"&&(a|=je.SIGHASH_NONE),r==="single"&&(a|=je.SIGHASH_SINGLE),i&&(a|=je.SIGHASH_ANYONECANPAY);const l=[...s.inputs],[c]=l.splice(o,1);if(typeof c.sourceTransaction!="object")throw new Error("The source transaction is needed for transaction signing.");const u=je.format({sourceTXID:((g=c.sourceTransaction)==null?void 0:g.id("hex"))??"",sourceOutputIndex:c.sourceOutputIndex??0,sourceSatoshis:((v=(w=c.sourceTransaction)==null?void 0:w.outputs[c.sourceOutputIndex])==null?void 0:v.satoshis)??0,transactionVersion:s.version,otherInputs:l,inputIndex:o,outputs:s.outputs,inputSequence:c.sequence??4294967295,subscript:((y=(m=c.sourceTransaction)==null?void 0:m.outputs[c.sourceOutputIndex])==null?void 0:y.lockingScript)??new qt,lockTime:s.lockTime,scope:a}),d=n.sign(fn(u),void 0,!0,e),h=new je(d.r,d.s,a).toChecksigFormat(),p=n.toPublicKey().encode(!0);return new Ks([{op:h.length,data:h},{op:p.length,data:p}])},estimateLength:async()=>108}}}function nw(t){if(t==null)throw new Error("must have value");return t}const fN=t=>t.length===0?{op:0}:t.length===1&&t[0]===0?{op:0}:t.length===1&&t[0]>0&&t[0]<=16?{op:80+t[0]}:t.length===1&&t[0]===129?{op:79}:t.length<=75?{op:t.length,data:t}:t.length<=255?{op:76,data:t}:t.length<=65535?{op:77,data:t}:{op:78,data:t};class Cs{constructor(e,n){M(this,"wallet");M(this,"originator");this.wallet=e,this.originator=n}static decode(e){var i;const n=ut.fromString(Z(nw(e.chunks[0].data))),r=[];for(let s=2;s<e.chunks.length;s++){const o=(i=e.chunks[s+1])==null?void 0:i.op;let a=e.chunks[s].data??[];if(a.length===0&&(e.chunks[s].op>=80&&e.chunks[s].op<=95?a=[e.chunks[s].op-80]:e.chunks[s].op===0?a=[0]:e.chunks[s].op===79&&(a=[129])),r.push(a),o===_.OP_DROP||o===_.OP_2DROP)break}return{fields:r,lockingPublicKey:n}}async lock(e,n,r,i,s=!1,o=!0,a="before"){const{publicKey:l}=await this.wallet.getPublicKey({protocolID:n,keyID:r,counterparty:i,forSelf:s},this.originator),c=[],u=[];if(c.push({op:l.length/2,data:U(l,"hex")}),c.push({op:_.OP_CHECKSIG}),o){const f=e.reduce((p,g)=>[...p,...g],[]),{signature:h}=await this.wallet.createSignature({data:f,protocolID:n,keyID:r,counterparty:i},this.originator);e.push(h)}for(const f of e)u.push(fN(f));let d=e.length;for(;d>1;)u.push({op:_.OP_2DROP}),d-=2;return d!==0&&u.push({op:_.OP_DROP}),a==="before"?new vr([...c,...u]):new vr([...u,...c])}unlock(e,n,r,i="all",s=!1,o,a){return{sign:async(l,c)=>{var b,x,I;let u=je.SIGHASH_FORKID;i==="all"&&(u|=je.SIGHASH_ALL),i==="none"&&(u|=je.SIGHASH_NONE),i==="single"&&(u|=je.SIGHASH_SINGLE),s&&(u|=je.SIGHASH_ANYONECANPAY);const d=l.inputs[c],f=l.inputs.filter((k,S)=>S!==c),h=d.sourceTXID??((b=d.sourceTransaction)==null?void 0:b.id("hex"));if(h==null||h===void 0)throw new Error("The input sourceTXID or sourceTransaction is required for transaction signing.");if(o||(o=(x=d.sourceTransaction)==null?void 0:x.outputs[d.sourceOutputIndex].satoshis),o==null||o===void 0)throw new Error("The sourceSatoshis or input sourceTransaction is required for transaction signing.");if(a||(a=(I=d.sourceTransaction)==null?void 0:I.outputs[d.sourceOutputIndex].lockingScript),a==null)throw new Error("The lockingScript or input sourceTransaction is required for transaction signing.");const p=je.format({sourceTXID:h,sourceOutputIndex:nw(d.sourceOutputIndex),sourceSatoshis:o,transactionVersion:l.version,otherInputs:f,inputIndex:c,outputs:l.outputs,inputSequence:d.sequence??4294967295,subscript:a,lockTime:l.lockTime,scope:u}),g=fn(p),{signature:w}=await this.wallet.createSignature({data:g,protocolID:e,keyID:n,counterparty:r},this.originator),v=Sn.fromDER([...w]),y=new je(v.r,v.s,u).toChecksigFormat();return new Ks([{op:y.length,data:y}])},estimateLength:async()=>73}}}class MI{constructor(e){M(this,"value");this.value=e}async computeFee(e){const n=s=>s>4294967296?9:s>65536?5:s>253?3:1;let r=4;r+=n(e.inputs.length);for(let s=0;s<e.inputs.length;s++){const o=e.inputs[s];r+=40;let a;if(typeof o.unlockingScript=="object")a=o.unlockingScript.toBinary().length;else if(typeof o.unlockingScriptTemplate=="object")a=await o.unlockingScriptTemplate.estimateLength(e,s);else throw new Error("All inputs must have an unlocking script or an unlocking script template for sat/kb fee computation.");r+=n(a),r+=a}r+=n(e.outputs.length);for(const s of e.outputs){r+=8;const o=s.lockingScript.toBinary().length;r+=n(o),r+=o}return r+=4,Math.ceil(r/1e3*this.value)}}class BI{constructor(e){M(this,"https");this.https=e}async request(e,n){return await new Promise((r,i)=>{const s=this.https.request(e,n,o=>{let a="";o.on("data",l=>{a+=l}),o.on("end",()=>{const l=o.statusCode>=200&&o.statusCode<=299,c=o.headers["content-type"],u=a!==""&&typeof c=="string"&&c.startsWith("application/json")?JSON.parse(a):a;r({status:o.statusCode,statusText:o.statusMessage,ok:l,data:u})})});s.on("error",o=>{i(o)}),n.data!==null&&n.data!==void 0&&s.write(JSON.stringify(n.data)),s.end()})}}class LI{constructor(e){M(this,"fetch");this.fetch=e}async request(e,n){const r={method:n.method,headers:n.headers,body:JSON.stringify(n.data)},i=await this.fetch(e,r),s=i.headers.get("Content-Type"),o=(s==null?void 0:s.startsWith("application/json"))??!1?await i.json():await i.text();return{ok:i.ok,status:i.status,statusText:i.statusText,data:o}}}function Xa(){const t={async request(...e){throw new Error("No method available to perform HTTP request")}};if(typeof window<"u"&&typeof window.fetch=="function")return new LI(window.fetch.bind(window));if(typeof require<"u")try{const e=require("https");return new BI(e)}catch{return t}else return t}function rw(){return`ts-sdk-${Z(It(16))}`}let DI=class{constructor(e,n){M(this,"URL");M(this,"apiKey");M(this,"deploymentId");M(this,"callbackUrl");M(this,"callbackToken");M(this,"headers");M(this,"httpClient");if(this.URL=e,typeof n=="string")this.apiKey=n,this.httpClient=Xa(),this.deploymentId=rw(),this.callbackToken=void 0,this.callbackUrl=void 0;else{const r=n??{},{apiKey:i,deploymentId:s,httpClient:o,callbackToken:a,callbackUrl:l,headers:c}=r;this.apiKey=i,this.httpClient=o??Xa(),this.deploymentId=s??rw(),this.callbackToken=a,this.callbackUrl=l,this.headers=c}}requestHeaders(){const e={"Content-Type":"application/json","XDeployment-ID":this.deploymentId};if(this.apiKey!=null&&this.apiKey!==""&&(e.Authorization=`Bearer ${this.apiKey}`),this.callbackUrl!=null&&this.callbackUrl!==""&&(e["X-CallbackUrl"]=this.callbackUrl),this.callbackToken!=null&&this.callbackToken!==""&&(e["X-CallbackToken"]=this.callbackToken),this.headers!=null)for(const n in this.headers)e[n]=this.headers[n];return e}async broadcast(e){let n;try{n=e.toHexEF()}catch(i){if(i.message==="All inputs must have source transactions when serializing to EF format")n=e.toHex();else throw i}const r={method:"POST",headers:this.requestHeaders(),data:{rawTx:n}};try{const i=await this.httpClient.request(`${this.URL}/v1/tx`,r);if(i.ok){const{txid:s,extraInfo:o,txStatus:a,competingTxs:l}=i.data,c={status:"success",txid:s,message:`${a} ${o}`};return l!=null&&(c.competingTxs=l),c}else{const s=typeof i.status,o={status:"error",code:s==="number"||s==="string"?i.status.toString():"ERR_UNKNOWN",description:"Unknown error"};let a=i.data;if(typeof a=="string")try{a=JSON.parse(i.data)}catch{}return typeof a=="object"&&(a!==null&&(o.more=a),a!=null&&typeof a.txid=="string"&&(o.txid=a.txid),a!=null&&"detail"in a&&typeof a.detail=="string"&&(o.description=a.detail)),o}}catch(i){return{status:"error",code:"500",description:typeof i.message=="string"?i.message:"Internal Server Error"}}}async broadcastMany(e){const n=e.map(i=>{try{return{rawTx:i.toHexEF()}}catch(s){if(s.message==="All inputs must have source transactions when serializing to EF format")return{rawTx:i.toHex()};throw s}}),r={method:"POST",headers:this.requestHeaders(),data:n};try{return(await this.httpClient.request(`${this.URL}/v1/txs`,r)).data}catch(i){const s={status:"error",code:"500",description:typeof i.message=="string"?i.message:"Internal Server Error"};return e.map(()=>s)}}};function FI(t=!1,e={}){return new DI(t?"https://arc-test.taal.com":"https://arc.taal.com",e)}let $I=class{constructor(e="main",n={}){M(this,"network");M(this,"apiKey");M(this,"URL");M(this,"httpClient");const{apiKey:r,httpClient:i}=n;this.network=e,this.URL=`https://api.whatsonchain.com/v1/bsv/${e}`,this.httpClient=i??Xa(),this.apiKey=r??""}async isValidRootForHeight(e,n){const r={method:"GET",headers:this.getHttpHeaders()},i=await this.httpClient.request(`${this.URL}/block/${n}/header`,r);if(i.ok){const{merkleroot:s}=i.data;return s===e}else{if(i.status===404)return!1;throw new Error(`Failed to verify merkleroot for height ${n} because of an error: ${JSON.stringify(i.data)} `)}}async currentHeight(){try{const e={method:"GET",headers:this.getHttpHeaders()},n=await this.httpClient.request(`${this.URL}/block/headers`,e);if(n.ok)return n.data[0].height;throw new Error(`Failed to get current height because of an error: ${JSON.stringify(n.data)} `)}catch(e){throw new Error(`Failed to get current height because of an error: ${e instanceof Error?e.message:String(e)}`)}}getHttpHeaders(){const e={Accept:"application/json"};return typeof this.apiKey=="string"&&this.apiKey.trim()!==""&&(e.Authorization=this.apiKey),e}};function WI(){return new $I}class _i{constructor(e,n,r=!0){M(this,"blockHeight");M(this,"path");this.blockHeight=e,this.path=n;const i=Array(this.path.length).fill(0).map(()=>new Set);this.path.forEach((o,a)=>{if(o.length===0&&a===0)throw new Error(`Empty level at height: ${a}`);const l=new Set;o.forEach(c=>{if(l.has(c.offset))throw new Error(`Duplicate offset: ${c.offset}, at height: ${a}`);if(l.add(c.offset),a===0){if(c.duplicate!==!0)for(let u=1;u<this.path.length;u++)i[u].add(c.offset>>u^1)}else if(r&&!i[a].has(c.offset))throw new Error(`Invalid offset: ${c.offset}, at height: ${a}, with legal offsets: ${Array.from(i[a]).join(", ")}`)})});let s;this.path[0].forEach((o,a)=>{if(a===0&&(s=this.computeRoot(o.hash)),s!==this.computeRoot(o.hash))throw new Error("Mismatched roots")})}static fromHex(e){return _i.fromBinary(U(e,"hex"))}static fromReader(e,n=!0){const r=e.readVarIntNum(),i=e.readUInt8(),s=Array(i).fill(null).map(()=>[]);let o,a,l;for(let c=0;c<i;c++){for(l=e.readVarIntNum();l>0;){a=e.readVarIntNum(),o=e.readUInt8();const u={offset:a};o&1?u.duplicate=!0:(o&2&&(u.txid=!0),u.hash=Z(e.read(32).reverse())),(!Array.isArray(s[c])||s[c].length===0)&&(s[c]=[]),s[c].push(u),l--}s[c].sort((u,d)=>u.offset-d.offset)}return new _i(r,s,n)}static fromBinary(e){const n=new Ge(e);return _i.fromReader(n)}static fromCoinbaseTxidAndHeight(e,n){return new _i(n,[[{offset:0,hash:e,txid:!0}]])}toBinary(){const e=new ne;e.writeVarIntNum(this.blockHeight);const n=this.path.length;e.writeUInt8(n);for(let r=0;r<n;r++){const i=Object.keys(this.path[r]).length;e.writeVarIntNum(i);for(const s of this.path[r]){e.writeVarIntNum(s.offset);let o=0;(s==null?void 0:s.duplicate)===!0&&(o|=1),(s==null?void 0:s.txid)!==void 0&&s.txid!==null&&(o|=2),e.writeUInt8(o),o&1||e.write(U(s.hash,"hex").reverse())}}return e.toArray()}toHex(){return Z(this.toBinary())}indexOf(e){const n=this.path[0].find(r=>r.hash===e);if(n==null)throw new Error(`Transaction ID ${e} not found in the Merkle Path`);return n.offset}computeRoot(e){if(typeof e!="string"){const s=this.path[0].find(o=>!!(o!=null&&o.hash));if(s==null)throw new Error("No valid leaf found in the Merkle Path");e=s.hash}if(typeof e!="string")throw new Error("Transaction ID is undefined");const n=this.indexOf(e);if(typeof n!="number")throw new Error(`This proof does not contain the txid: ${e??"undefined"}`);const r=s=>Z(un(U(s,"hex").reverse()).reverse());let i=e;if(this.path.length===1&&this.path[0].length===1)return i;for(let s=0;s<this.path.length;s++){this.path[s];const o=n>>s^1,a=this.findOrComputeLeaf(s,o);if(typeof a!="object")throw new Error(`Missing hash for index ${n} at height ${s}`);a.duplicate===!0?i=r((i??"")+(i??"")):o%2!==0?i=r((a.hash??"")+(i??"")):i=r((i??"")+(a.hash??""))}return i}findOrComputeLeaf(e,n){const r=u=>Z(un(U(u,"hex").reverse()).reverse());let i=this.path[e].find(u=>u.offset===n);if(i!=null)return i;if(e===0)return;const s=e-1,o=n<<1,a=this.findOrComputeLeaf(s,o);if(a==null||a.hash==null||a.hash==="")return;const l=this.findOrComputeLeaf(s,o+1);if(l==null)return;let c;return l.duplicate===!0?c=r(a.hash+a.hash):c=r((l.hash??"")+(a.hash??"")),i={offset:n,hash:c},i}async verify(e,n){const r=this.computeRoot(e);if(this.indexOf(e)===0){const i=await n.currentHeight();if(this.blockHeight+100<i)return!1}return await n.isValidRootForHeight(r,this.blockHeight)}combine(e){var s,o;if(this.blockHeight!==e.blockHeight)throw new Error("You cannot combine paths which do not have the same block height.");const n=this.computeRoot(),r=e.computeRoot();if(n!==r)throw new Error("You cannot combine paths which do not have the same root.");const i=[];for(let a=0;a<this.path.length;a++){i.push([]);for(let l=0;l<this.path[a].length;l++)i[a].push(this.path[a][l]);for(let l=0;l<e.path[a].length;l++)if(i[a].find(c=>c.offset===e.path[a][l].offset)===void 0)i[a].push(e.path[a][l]);else if(((s=e.path[a][l])==null?void 0:s.txid)!==void 0&&((o=e.path[a][l])==null?void 0:o.txid)!==null){const c=i[a].find(u=>u.offset===e.path[a][l].offset);c!=null&&(c.txid=!0)}}this.path=i,this.trim()}trim(){const e=(o,a)=>{(a.length===0||a.slice(-1)[0]!==o)&&a.push(o)},n=(o,a)=>{for(let l=o.length;l>=0;l--){const c=this.path[a].findIndex(u=>u.offset===o[l]);c>=0&&this.path[a].splice(c,1)}},r=o=>{const a=[];for(const l of o)e(l>>1,a);return a};let i=[],s=[];for(let o=0;o<this.path.length;o++)this.path[o].sort((a,l)=>a.offset-l.offset);for(let o=0;o<this.path[0].length;o++){const a=this.path[0][o];if(a.txid===!0)e(a.offset>>1,i);else{const l=a.offset%2===1,c=this.path[0][o+(l?-1:1)];(c.txid===void 0||c.txid===null||!c.txid)&&e(c.offset,s)}}n(s,0);for(let o=1;o<this.path.length;o++)s=i,i=r(i),n(s,o)}}class Bn{constructor(e,n){M(this,"_bumpIndex");M(this,"_tx");M(this,"_rawTx");M(this,"_txid");M(this,"inputTxids",[]);M(this,"isValid");typeof e=="string"?this._txid=e:Array.isArray(e)?this._rawTx=e:this._tx=e,this.bumpIndex=n,this.updateInputTxids()}get bumpIndex(){return this._bumpIndex}set bumpIndex(e){this._bumpIndex=e,this.updateInputTxids()}get hasProof(){return this._bumpIndex!==void 0}get isTxidOnly(){return this._txid!==void 0&&this._txid!==null&&this._rawTx==null&&this._tx==null}get txid(){if(this._txid!==void 0&&this._txid!==null&&this._txid!=="")return this._txid;if(this._tx!=null)return this._txid=this._tx.id("hex"),this._txid;if(this._rawTx!=null)return this._txid=Z(un(this._rawTx)),this._txid;throw new Error("Internal")}get tx(){if(this._tx!=null)return this._tx;if(this._rawTx!=null)return this._tx=wr.fromBinary(this._rawTx),this._tx}get rawTx(){if(this._rawTx!=null)return this._rawTx;if(this._tx!=null)return this._rawTx=this._tx.toBinary(),this._rawTx}static fromTx(e,n){return new Bn(e,n)}static fromRawTx(e,n){return new Bn(e,n)}static fromTxid(e,n){return new Bn(e,n)}updateInputTxids(){if(this.hasProof||this.tx==null)this.inputTxids=[];else{const e={};for(const n of this.tx.inputs)n.sourceTXID!==void 0&&n.sourceTXID!==null&&n.sourceTXID!==""&&(e[n.sourceTXID]=!0);this.inputTxids=Object.keys(e)}}toWriter(e,n){const r=a=>{e.writeUInt8(a)},i=()=>{if(this._txid==null)throw new Error("Transaction ID (_txid) is undefined");e.writeReverse(U(this._txid,"hex"))},s=()=>{if(this._rawTx!=null)e.write(this._rawTx);else if(this._tx!=null)e.write(this._tx.toBinary());else throw new Error("a valid serialized Transaction is expected")},o=()=>{this.bumpIndex===void 0?r(or.RAWTX):(r(or.RAWTX_AND_BUMP_INDEX),e.writeVarIntNum(this.bumpIndex))};n===Pi?this.isTxidOnly?(r(or.TXID_ONLY),i()):this.bumpIndex!==void 0?(r(or.RAWTX_AND_BUMP_INDEX),e.writeVarIntNum(this.bumpIndex),s()):(r(or.RAWTX),s()):(s(),o())}static fromReader(e,n){let r,i,s;if(n===Pi){const o=e.readUInt8();o===or.TXID_ONLY?s=Bn.fromTxid(Z(e.readReverse(32))):(o===or.RAWTX_AND_BUMP_INDEX&&(i=e.readVarIntNum()),r=wr.fromReader(e),s=Bn.fromTx(r,i))}else r=wr.fromReader(e),i=e.readUInt8()!==0?e.readVarIntNum():void 0,s=Bn.fromTx(r,i);return s}}function iw(t){if(t==null)throw new Error("Expected a valid value, but got undefined.");return t}const cu=4022206465,Pi=4022206466,Qp=16843009;var or;(function(t){t[t.RAWTX=0]="RAWTX",t[t.RAWTX_AND_BUMP_INDEX=1]="RAWTX_AND_BUMP_INDEX",t[t.TXID_ONLY=2]="TXID_ONLY"})(or||(or={}));class Qn{constructor(e=Pi){M(this,"bumps",[]);M(this,"txs",[]);M(this,"version",Pi);M(this,"atomicTxid");this.version=e}findTxid(e){return this.txs.find(n=>n.txid===e)}makeTxidOnly(e){const n=this.txs.findIndex(i=>i.txid===e);if(n===-1)return;let r=this.txs[n];return r.isTxidOnly||(this.txs.splice(n,1),r=this.mergeTxidOnly(e)),r}findBump(e){return this.bumps.find(n=>n.path[0].some(r=>r.hash===e))}findTransactionForSigning(e){const n=this.findTxid(e);if(!(n==null||n.tx==null)){for(const r of n.tx.inputs)if(r.sourceTransaction==null){const i=this.findTxid(iw(r.sourceTXID));i!=null&&(r.sourceTransaction=i.tx)}return n.tx}}findAtomicTransaction(e){const n=this.findTxid(e);if(n==null||n.tx==null)return;const r=(i,s)=>{const o=i.findBump(s.id("hex"));if(o!=null)s.merklePath=o;else for(const a of s.inputs){if(a.sourceTransaction==null){const l=i.findTxid(iw(a.sourceTXID));l!=null&&(a.sourceTransaction=l.tx)}if(a.sourceTransaction!=null){const l=i.findBump(a.sourceTransaction.id("hex"));l!=null?a.sourceTransaction.merklePath=l:r(i,a.sourceTransaction)}}};return r(this,n.tx),n.tx}mergeBump(e){let n;for(let i=0;i<this.bumps.length;i++){const s=this.bumps[i];if(s===e)return i;if(s.blockHeight===e.blockHeight){const o=s.computeRoot(),a=e.computeRoot();if(o===a){s.combine(e),n=i;break}}}n===void 0&&(n=this.bumps.length,this.bumps.push(e));const r=this.bumps[n];for(const i of this.txs){const s=i.txid;if(i.bumpIndex==null){for(const o of r.path[0])if(o.hash===s){i.bumpIndex=n,o.txid=!0;break}}}return n}mergeRawTx(e,n){const r=new Bn(e,n);return this.removeExistingTxid(r.txid),this.txs.push(r),this.tryToValidateBumpIndex(r),r}mergeTransaction(e){const n=e.id("hex");this.removeExistingTxid(n);let r;e.merklePath!=null&&(r=this.mergeBump(e.merklePath));const i=new Bn(e,r);if(this.txs.push(i),this.tryToValidateBumpIndex(i),r=i.bumpIndex,r===void 0)for(const s of e.inputs)s.sourceTransaction!=null&&this.mergeTransaction(s.sourceTransaction);return i}removeExistingTxid(e){const n=this.txs.findIndex(r=>r.txid===e);n>=0&&this.txs.splice(n,1)}mergeTxidOnly(e){let n=this.txs.find(r=>r.txid===e);return n==null&&(n=new Bn(e),this.txs.push(n),this.tryToValidateBumpIndex(n)),n}mergeBeefTx(e){let n=this.findTxid(e.txid);if(e.isTxidOnly&&n==null?n=this.mergeTxidOnly(e.txid):e._tx!=null&&(n==null||n.isTxidOnly)?n=this.mergeTransaction(e._tx):e._rawTx!=null&&(n==null||n.isTxidOnly)&&(n=this.mergeRawTx(e._rawTx)),n==null)throw new Error(`Failed to merge BeefTx for txid: ${e.txid}`);return n}mergeBeef(e){const n=Array.isArray(e)?Qn.fromBinary(e):e;for(const r of n.bumps)this.mergeBump(r);for(const r of n.txs)this.mergeBeefTx(r)}isValid(e){return this.verifyValid(e).valid}async verify(e,n){const r=this.verifyValid(n);if(!r.valid)return!1;for(const i of Object.keys(r.roots))if(!await e.isValidRootForHeight(r.roots[i],Number(i)))return!1;return!0}verifyValid(e){const n={valid:!1,roots:{}},r=this.sortTxs();if(r.missingInputs.length>0||r.notValid.length>0||r.txidOnly.length>0&&e!==!0||r.withMissingInputs.length>0)return n;const i={};for(const o of this.txs)if(o.isTxidOnly){if(e!==!0)return n;i[o.txid]=!0}const s=(o,a)=>{const l=o.computeRoot(a);return(n.roots[o.blockHeight]===void 0||n.roots[o.blockHeight]==="")&&(n.roots[o.blockHeight]=l),n.roots[o.blockHeight]===l};for(const o of this.bumps)for(const a of o.path[0])if(a.txid===!0&&typeof a.hash=="string"&&a.hash.length>0&&(i[a.hash]=!0,!s(o,a.hash)))return n;for(const o of this.txs)if(o.bumpIndex!==void 0&&this.bumps[o.bumpIndex].path[0].find(l=>l.hash===o.txid)==null)return n;for(const o of this.txs){for(const a of o.inputTxids)if(!i[a])return n;i[o.txid]=!0}return n.valid=!0,n}toWriter(e){e.writeUInt32LE(this.version),e.writeVarIntNum(this.bumps.length);for(const n of this.bumps)e.write(n.toBinary());e.writeVarIntNum(this.txs.length);for(const n of this.txs)n.toWriter(e,this.version)}toBinary(){const e=new ne;return this.toWriter(e),e.toArray()}toBinaryAtomic(e){this.sortTxs();const n=this.findTxid(e);if(n==null)throw new Error(`${e} does not exist in this Beef`);const r=this.txs[this.txs.length-1]===n?this:this.clone();if(r!==this){const s=this.txs.findIndex(o=>o.txid===e);r.txs.splice(s+1)}const i=new ne;return i.writeUInt32LE(Qp),i.writeReverse(U(e,"hex")),r.toWriter(i),i.toArray()}toHex(){return Z(this.toBinary())}static fromReader(e){let n=e.readUInt32LE(),r;if(n===Qp&&(r=Z(e.readReverse(32)),n=e.readUInt32LE()),n!==cu&&n!==Pi)throw new Error(`Serialized BEEF must start with ${cu} or ${Pi} but starts with ${n}`);const i=new Qn(n),s=e.readVarIntNum();for(let a=0;a<s;a++){const l=_i.fromReader(e,!1);i.bumps.push(l)}const o=e.readVarIntNum();for(let a=0;a<o;a++){const l=Bn.fromReader(e,n);i.txs.push(l)}return i.atomicTxid=r,i}static fromBinary(e){const n=new Ge(e);return Qn.fromReader(n)}static fromString(e,n="hex"){const r=U(e,n),i=new Ge(r);return Qn.fromReader(i)}tryToValidateBumpIndex(e){if(e.bumpIndex!==void 0)return!0;const n=e.txid;for(let r=0;r<this.bumps.length;r++){const i=this.bumps[r].path[0].findIndex(s=>s.hash===n);if(i>=0)return e.bumpIndex=r,this.bumps[r].path[0][i].txid=!0,!0}return!1}sortTxs(){const e={},n={};let r=[];const i=[],s=[];for(const u of this.txs)n[u.txid]=u,u.isValid=u.hasProof,u.isValid?(e[u.txid]=!0,i.push(u)):u.isTxidOnly&&u.inputTxids.length===0?(e[u.txid]=!0,s.push(u)):r.push(u);const o={},a=[],l=r;r=[];for(const u of l){let d=!1;for(const f of u.inputTxids)n[f]===void 0&&(o[f]=!0,d=!0);d?a.push(u):r.push(u)}for(;r.length>0;){const u=r;r=[];for(const d of u)d.inputTxids.every(f=>e[f])?(e[d.txid]=!0,i.push(d)):r.push(d);if(u.length===r.length)break}const c=r;return this.txs=a.concat(c).concat(s).concat(i),{missingInputs:Object.keys(o),notValid:c.map(u=>u.txid),valid:Object.keys(e),withMissingInputs:a.map(u=>u.txid),txidOnly:s.map(u=>u.txid)}}clone(){const e=new Qn;return e.version=this.version,e.bumps=Array.from(this.bumps),e.txs=Array.from(this.txs),e}trimKnownTxids(e){for(let n=0;n<this.txs.length;){const r=this.txs[n];r.isTxidOnly&&e.includes(r.txid)?this.txs.splice(n,1):n++}}getValidTxids(){return this.sortTxs().valid}toLogString(){var r;let e="";e+=`BEEF with ${this.bumps.length} BUMPS and ${this.txs.length} Transactions, isValid ${this.isValid().toString()}
`;let n=-1;for(const i of this.bumps)n++,e+=`  BUMP ${n}
    block: ${i.blockHeight}
    txids: [
${i.path[0].filter(s=>s.txid===!0).map(s=>`      '${s.hash??""}'`).join(`,
`)}
    ]
`;n=-1;for(const i of this.txs)n++,e+=`  TX ${n}
    txid: ${i.txid}
`,i.bumpIndex!==void 0&&(e+=`    bumpIndex: ${i.bumpIndex}
`),i.isTxidOnly?e+=`    txidOnly
`:e+=`    rawTx length=${((r=i.rawTx)==null?void 0:r.length)??0}
`,i.inputTxids.length>0&&(e+=`    inputs: [
${i.inputTxids.map(s=>`      '${s}'`).join(`,
`)}
    ]
`);return e}addComputedLeaves(){const e=n=>Z(un(U(n,"hex").reverse()).reverse());for(const n of this.bumps)for(let r=1;r<n.path.length;r++)for(const i of n.path[r-1])if(typeof i.hash=="string"&&!(i.offset&1)){const s=n.path[r-1].find(a=>a.offset===i.offset+1),o=i.offset>>1;s!==void 0&&typeof s.hash=="string"&&n.path[r].every(a=>a.offset!==o)&&n.path[r].push({offset:o,hash:e(s.hash+i.hash)})}}}let wr=class zn{constructor(e=1,n=[],r=[],i=0,s={},o){M(this,"version");M(this,"inputs");M(this,"outputs");M(this,"lockTime");M(this,"metadata");M(this,"merklePath");M(this,"cachedHash");this.version=e,this.inputs=n,this.outputs=r,this.lockTime=i,this.metadata=s,this.merklePath=o}static addPathOrInputs(e,n,r){if(typeof e.pathIndex=="number"){const i=r[e.pathIndex];if(typeof i!="object")throw new Error("Invalid merkle path index found in BEEF!");e.tx.merklePath=i}else for(const i of e.tx.inputs){if(i.sourceTXID===void 0)throw new Error("Input sourceTXID is undefined");const s=n[i.sourceTXID];if(typeof s!="object")throw new Error(`Reference to unknown TXID in BEEF: ${i.sourceTXID??"undefined"}`);i.sourceTransaction=s.tx,this.addPathOrInputs(s,n,r)}}static fromBEEF(e,n){const{tx:r}=zn.fromAnyBeef(e,n);return r}static fromAtomicBEEF(e){const{tx:n,txid:r,beef:i}=zn.fromAnyBeef(e);if(r!==i.atomicTxid)throw i.atomicTxid?new Error(`Transaction with TXID ${i.atomicTxid} not found in BEEF data.`):new Error("beef must conform to BRC-95 and must contain the subject txid.");return n}static fromAnyBeef(e,n){const r=Qn.fromBinary(e);if(r.txs.length<1)throw new Error("beef must include at least one transaction.");const i=n||r.atomicTxid||r.txs.slice(-1)[0].txid,s=r.findAtomicTransaction(i);if(s==null)throw n?new Error(`Transaction with TXID ${i} not found in BEEF data.`):new Error("beef does not contain transaction for atomic txid.");return{tx:s,beef:r,txid:i}}static fromEF(e){const n=new Ge(e),r=n.readUInt32LE();if(Z(n.read(6))!=="0000000000ef")throw new Error("Invalid EF marker");const i=n.readVarIntNum(),s=[];for(let c=0;c<i;c++){const u=Z(n.readReverse(32)),d=n.readUInt32LE(),f=n.readVarIntNum(),h=n.read(f),p=Ks.fromBinary(h),g=n.readUInt32LE(),w=n.readUInt64LEBn().toNumber(),v=n.readVarIntNum(),m=n.read(v),y=vr.fromBinary(m),b=new zn(void 0,[],[],void 0);b.outputs=Array(d+1).fill(null),b.outputs[d]={satoshis:w,lockingScript:y},s.push({sourceTransaction:b,sourceTXID:u,sourceOutputIndex:d,unlockingScript:p,sequence:g})}const o=n.readVarIntNum(),a=[];for(let c=0;c<o;c++){const u=n.readUInt64LEBn().toNumber(),d=n.readVarIntNum(),f=n.read(d),h=vr.fromBinary(f);a.push({satoshis:u,lockingScript:h})}const l=n.readUInt32LE();return new zn(r,s,a,l)}static parseScriptOffsets(e){const n=new Ge(e),r=[],i=[];n.pos+=4;const s=n.readVarIntNum();for(let a=0;a<s;a++){n.pos+=36;const l=n.readVarIntNum();r.push({vin:a,offset:n.pos,length:l}),n.pos+=l+4}const o=n.readVarIntNum();for(let a=0;a<o;a++){n.pos+=8;const l=n.readVarIntNum();i.push({vout:a,offset:n.pos,length:l}),n.pos+=l}return{inputs:r,outputs:i}}static fromReader(e){const n=e.readUInt32LE(),r=e.readVarIntNum(),i=[];for(let l=0;l<r;l++){const c=Z(e.readReverse(32)),u=e.readUInt32LE(),d=e.readVarIntNum(),f=e.read(d),h=Ks.fromBinary(f),p=e.readUInt32LE();i.push({sourceTXID:c,sourceOutputIndex:u,unlockingScript:h,sequence:p})}const s=e.readVarIntNum(),o=[];for(let l=0;l<s;l++){const c=e.readUInt64LEBn().toNumber(),u=e.readVarIntNum(),d=e.read(u),f=vr.fromBinary(d);o.push({satoshis:c,lockingScript:f})}const a=e.readUInt32LE();return new zn(n,i,o,a)}static fromBinary(e){const n=new Ge(e);return zn.fromReader(n)}static fromHex(e){return zn.fromBinary(U(e,"hex"))}static fromHexEF(e){return zn.fromEF(U(e,"hex"))}static fromHexBEEF(e,n){return zn.fromBEEF(U(e,"hex"),n)}addInput(e){if(typeof e.sourceTXID>"u"&&typeof e.sourceTransaction>"u")throw new Error("A reference to an an input transaction is required. If the input transaction itself cannot be referenced, its TXID must still be provided.");typeof e.sequence>"u"&&(e.sequence=4294967295),this.cachedHash=void 0,this.inputs.push(e)}addOutput(e){if(this.cachedHash=void 0,e.change!==!0){if(typeof e.satoshis>"u")throw new Error("either satoshis must be defined or change must be set to true");if(e.satoshis<0)throw new Error("satoshis must be a positive integer or zero")}if(e.lockingScript==null)throw new Error("lockingScript must be defined");this.outputs.push(e)}addP2PKHOutput(e,n){const r=new em().lock(e);if(typeof n>"u")return this.addOutput({lockingScript:r,change:!0});this.addOutput({lockingScript:r,satoshis:n})}updateMetadata(e){this.metadata={...this.metadata,...e}}async fee(e=new MI(10),n="equal"){if(this.cachedHash=void 0,typeof e=="number"){const s=e;e={computeFee:async()=>s}}const r=await e.computeFee(this),i=this.calculateChange(r);if(i<=0){this.outputs=this.outputs.filter(s=>s.change!==!0);return}this.distributeChange(i,n)}calculateChange(e){let n=0;for(const r of this.inputs){if(typeof r.sourceTransaction!="object")throw new Error("Source transactions are required for all inputs during fee computation");n+=r.sourceTransaction.outputs[r.sourceOutputIndex].satoshis??0}n-=e;for(const r of this.outputs)r.change!==!0&&r.satoshis!==void 0&&(n-=r.satoshis);return n}distributeChange(e,n){let r=0;const i=this.outputs.filter(s=>s.change);if(n==="random"?r=this.distributeRandomChange(e,i):n==="equal"&&(r=this.distributeEqualChange(e,i)),r<e){const s=this.outputs[this.outputs.length-1];s.satoshis!==void 0?s.satoshis+=e-r:s.satoshis=e-r}}distributeRandomChange(e,n){let r=0,i=e;const s=Array(n.length).fill(1);i-=n.length,r+=n.length;for(let o=0;o<n.length-1;o++){const a=this.benfordNumber(0,i);s[o]=s[o]+a,r+=a,i-=a}for(const o of this.outputs)o.change===!0&&(o.satoshis=s.shift());return r}distributeEqualChange(e,n){let r=0;const i=Math.floor(e/n.length);for(const s of n)r+=i,s.satoshis=i;return r}benfordNumber(e,n){const r=Math.floor(Math.random()*9)+1;return Math.floor(e+(n-e)*Math.log10(1+1/r)/Math.log10(10))}getFee(){let e=0;for(const r of this.inputs){if(typeof r.sourceTransaction!="object")throw new Error("Source transactions or sourceSatoshis are required for all inputs to calculate fee");e+=r.sourceTransaction.outputs[r.sourceOutputIndex].satoshis??0}let n=0;for(const r of this.outputs)n+=r.satoshis??0;return e-n}async sign(){this.cachedHash=void 0;for(const n of this.outputs)if(typeof n.satoshis>"u")throw n.change===!0?new Error("There are still change outputs with uncomputed amounts. Use the fee() method to compute the change amounts and transaction fees prior to signing."):new Error("One or more transaction outputs is missing an amount. Ensure all output amounts are provided before signing.");const e=await Promise.all(this.inputs.map(async(n,r)=>{var i,s;return typeof this.inputs[r].unlockingScriptTemplate=="object"?await((s=(i=this.inputs[r])==null?void 0:i.unlockingScriptTemplate)==null?void 0:s.sign(this,r)):await Promise.resolve(void 0)}));for(let n=0,r=this.inputs.length;n<r;n++)typeof this.inputs[n].unlockingScriptTemplate=="object"&&(this.inputs[n].unlockingScript=e[n])}async broadcast(e=FI()){return await e.broadcast(this)}toBinary(){const e=new ne;e.writeUInt32LE(this.version),e.writeVarIntNum(this.inputs.length);for(const n of this.inputs){if(typeof n.sourceTXID>"u")if(n.sourceTransaction!=null)e.write(n.sourceTransaction.hash());else throw new Error("sourceTransaction is undefined");else e.writeReverse(U(n.sourceTXID,"hex"));if(e.writeUInt32LE(n.sourceOutputIndex),n.unlockingScript==null)throw new Error("unlockingScript is undefined");const r=n.unlockingScript.toBinary();e.writeVarIntNum(r.length),e.write(r),e.writeUInt32LE(n.sequence??0)}e.writeVarIntNum(this.outputs.length);for(const n of this.outputs){e.writeUInt64LE(n.satoshis??0);const r=n.lockingScript.toBinary();e.writeVarIntNum(r.length),e.write(r)}return e.writeUInt32LE(this.lockTime),e.toArray()}toEF(){const e=new ne;e.writeUInt32LE(this.version),e.write([0,0,0,0,0,239]),e.writeVarIntNum(this.inputs.length);for(const n of this.inputs){if(typeof n.sourceTransaction>"u")throw new Error("All inputs must have source transactions when serializing to EF format");if(typeof n.sourceTXID>"u"?e.write(n.sourceTransaction.hash()):e.write(U(n.sourceTXID,"hex").reverse()),e.writeUInt32LE(n.sourceOutputIndex),n.unlockingScript==null)throw new Error("unlockingScript is undefined");const r=n.unlockingScript.toBinary();e.writeVarIntNum(r.length),e.write(r),e.writeUInt32LE(n.sequence??0),e.writeUInt64LE(n.sourceTransaction.outputs[n.sourceOutputIndex].satoshis??0);const i=n.sourceTransaction.outputs[n.sourceOutputIndex].lockingScript.toBinary();e.writeVarIntNum(i.length),e.write(i)}e.writeVarIntNum(this.outputs.length);for(const n of this.outputs){e.writeUInt64LE(n.satoshis??0);const r=n.lockingScript.toBinary();e.writeVarIntNum(r.length),e.write(r)}return e.writeUInt32LE(this.lockTime),e.toArray()}toHexEF(){return Z(this.toEF())}toHex(){return Z(this.toBinary())}toHexBEEF(){return Z(this.toBEEF())}toHexAtomicBEEF(){return Z(this.toAtomicBEEF())}hash(e){let n;return this.cachedHash!=null?n=this.cachedHash:(n=un(this.toBinary()),this.cachedHash=n),e==="hex"?Z(n):n}id(e){const n=[...this.hash()];return n.reverse(),e==="hex"?Z(n):n}async verify(e=WI(),n){const r=new Set,i=[this];for(;i.length>0;){const s=i.shift(),o=(s==null?void 0:s.id("hex"))??"";if(o!=null&&o!==""&&r.has(o))continue;if(typeof(s==null?void 0:s.merklePath)=="object"){if(e==="scripts only"){o!=null&&r.add(o);continue}else if(await s.merklePath.verify(o,e)){r.add(o);continue}}if(typeof n<"u"){if(s===void 0)throw new Error("Transaction is undefined");const c=zn.fromEF(s.toEF());if(delete c.outputs[0].satoshis,c.outputs[0].change=!0,await c.fee(n),s.getFee()<c.getFee())throw new Error(`Verification failed because the transaction ${o} has an insufficient fee and has not been mined.`)}let a=0;if(s===void 0)throw new Error("Transaction is undefined");for(let c=0;c<s.inputs.length;c++){const u=s.inputs[c];if(typeof u.sourceTransaction!="object")throw new Error(`Verification failed because the input at index ${c} of transaction ${o} is missing an associated source transaction. This source transaction is required for transaction verification because there is no merkle proof for the transaction spending a UTXO it contains.`);if(typeof u.unlockingScript!="object")throw new Error(`Verification failed because the input at index ${c} of transaction ${o} is missing an associated unlocking script. This script is required for transaction verification because there is no merkle proof for the transaction spending the UTXO.`);const d=u.sourceTransaction.outputs[u.sourceOutputIndex];a+=d.satoshis??0;const f=u.sourceTransaction.id("hex");r.has(f)||i.push(u.sourceTransaction);const h=s.inputs.filter((w,v)=>v!==c);if(typeof u.sourceTXID>"u"&&(u.sourceTXID=f),!new CI({sourceTXID:u.sourceTXID,sourceOutputIndex:u.sourceOutputIndex,lockingScript:d.lockingScript,sourceSatoshis:d.satoshis??0,transactionVersion:s.version,otherInputs:h,unlockingScript:u.unlockingScript,inputSequence:u.sequence??0,inputIndex:c,outputs:s.outputs,lockTime:s.lockTime}).validate())return!1}let l=0;for(const c of s.outputs){if(typeof c.satoshis!="number")throw new Error("Every output must have a defined amount during transaction verification.");l+=c.satoshis}if(l>a)return!1;r.add(o)}return!0}toBEEF(e){const n=new ne;n.writeUInt32LE(cu);const r=[],i=[],s=o=>{const a={tx:o},l=typeof o.merklePath=="object";if(l){let u=!1;for(let d=0;d<r.length;d++){if(r[d]===o.merklePath){a.pathIndex=d,u=!0;break}if(o.merklePath!==null&&o.merklePath!==void 0&&r[d].blockHeight===o.merklePath.blockHeight){const f=r[d].computeRoot(),h=o.merklePath.computeRoot();if(f===h){r[d].combine(o.merklePath),a.pathIndex=d,u=!0;break}}}u||(a.pathIndex=r.length,o.merklePath!==null&&o.merklePath!==void 0&&r.push(o.merklePath))}if(i.some(u=>u.tx.id("hex")===o.id("hex"))||i.unshift(a),!l)for(let u=0;u<o.inputs.length;u++){const d=o.inputs[u];if(typeof d.sourceTransaction=="object")s(d.sourceTransaction);else if(e===!1)throw new Error("A required source transaction is missing!")}};s(this),n.writeVarIntNum(r.length);for(const o of r)n.write(o.toBinary());n.writeVarIntNum(i.length);for(const o of i)n.write(o.tx.toBinary()),typeof o.pathIndex=="number"?(n.writeUInt8(1),n.writeVarIntNum(o.pathIndex)):n.writeUInt8(0);return n.toArray()}toAtomicBEEF(e){const n=new ne;n.writeUInt32LE(16843009),n.write(this.hash());const r=this.toBEEF(e);return n.write(r),n.toArray()}};function hN(t){return t.status==="success"}function pN(t){return t.status==="error"}class gN extends Qn{constructor(n){super();M(this,"knownTo",{});if(n!=null)for(const r of n)this.addParty(r)}isParty(n){return Object.keys(this.knownTo).includes(n)}addParty(n){if(this.isParty(n))throw new Error(`Party ${n} already exists.`);this.knownTo[n]={}}getKnownTxidsForParty(n){const r=this.knownTo[n];if(r===void 0)throw new Error(`Party ${n} is unknown.`);return Object.keys(r)}getTrimmedBeefForParty(n){const r=this.getKnownTxidsForParty(n),i=this.clone();return i.trimKnownTxids(r),i}addKnownTxidsForParty(n,r){this.isParty(n)||this.addParty(n);const i=this.knownTo[n];for(const s of r)i[s]=!0,this.mergeTxidOnly(s)}mergeBeefFromParty(n,r){const i=Array.isArray(r)?Qn.fromBinary(r):r,s=i.getValidTxids();this.mergeBeef(i),this.addKnownTxidsForParty(n,s)}}class mN{constructor(e="main",n=Xa()){M(this,"network");M(this,"URL");M(this,"httpClient");this.network=e,this.URL=`https://api.whatsonchain.com/v1/bsv/${e}/tx/raw`,this.httpClient=n}async broadcast(e){const n=e.toHex(),r={method:"POST",headers:{"Content-Type":"application/json",Accept:"text/plain"},data:{txhex:n}};try{const i=await this.httpClient.request(this.URL,r);return i.ok?{status:"success",txid:i.data,message:"broadcast successful"}:{status:"error",code:i.status.toString()??"ERR_UNKNOWN",description:i.data??"Unknown error"}}catch(i){return{status:"error",code:"500",description:typeof i.message=="string"?i.message:"Internal Server Error"}}}}const Jp="42423301",yN=(t,e,n)=>{const r=typeof n!="object";if(r){const d=new kt,f=new st(1),h=d.g.mul(f);n=new ut(h.x,h.y)}const i=It(32),o=`2-message signing-${Ae(i)}`,l=e.deriveChild(n,o).sign(t).toDER(),c=e.toPublicKey().encode(!0);return[...U(Jp,"hex"),...c,...r?[0]:n.encode(!0),...i,...l]},vN=(t,e,n)=>{const r=new Ge(e),i=Z(r.read(4));if(i!==Jp)throw new Error(`Message version mismatch: Expected ${Jp}, received ${i}`);const s=ut.fromString(Z(r.read(33))),[o]=r.read(1);if(o===0)n=new st(1);else{const h=r.read(32),p=Z([o,...h]);if(typeof n!="object")throw new Error(`This signature can only be verified with knowledge of a specific private key. The associated public key is: ${p}`);const g=n.toPublicKey().encode(!0,"hex");if(p!==g)throw new Error(`The recipient public key is ${g} but the signature requres the recipient to have public key ${p}`)}const a=Ae(r.read(32)),l=Z(r.read(r.bin.length-r.pos)),c=Sn.fromDER(l,"hex"),u=`2-message signing-${a}`;return s.deriveChild(n,u).verify(t,c)},wN=Object.freeze(Object.defineProperty({__proto__:null,sign:yN,verify:vN},Symbol.toStringTag,{value:"Module"})),Zp="42421033",bN=(t,e,n)=>{const r=It(32),s=`2-message encryption-${Ae(r)}`,o=e.deriveChild(n,s),a=n.deriveChild(e,s),l=o.deriveSharedSecret(a),u=new Cr(l.encode(!0).slice(1)).encrypt(t),d=e.toPublicKey().encode(!0);return[...U(Zp,"hex"),...d,...n.encode(!0),...r,...u]},xN=(t,e)=>{const n=new Ge(t),r=Z(n.read(4));if(r!==Zp)throw new Error(`Message version mismatch: Expected ${Zp}, received ${r}`);const i=ut.fromString(Z(n.read(33))),s=Z(n.read(33)),o=e.toPublicKey().encode(!0,"hex");if(s!==o)throw new Error(`The encrypted message expects a recipient public key of ${s}, but the provided key is ${o}`);const a=Ae(n.read(32)),l=n.read(n.bin.length-n.pos),c=`2-message encryption-${a}`,u=i.deriveChild(e,c),d=e.deriveChild(i,c),f=u.deriveSharedSecret(d);return new Cr(f.encode(!0).slice(1)).decrypt(l)},kN=Object.freeze(Object.defineProperty({__proto__:null,decrypt:xN,encrypt:bN},Symbol.toStringTag,{value:"Module"})),sw=`Bitcoin Signed Message:
`,tm=t=>{const e=new ne;e.writeVarIntNum(sw.length),e.write(U(sw,"utf8")),e.writeVarIntNum(t.length),e.write(t);const n=e.toArray();return un(n)},IN=(t,e,n="base64")=>{const r=tm(t),i=Dd(new D(r),e,!0);if(n==="raw")return i;const s=new D(r),o=i.CalculateRecoveryFactor(e.toPublicKey(),s);return i.toCompact(o,!0,"base64")},SN=(t,e,n)=>{const r=tm(t);return Gi(new D(r),e,n)},EN=Object.freeze(Object.defineProperty({__proto__:null,magicHash:tm,sign:IN,verify:SN},Symbol.toStringTag,{value:"Module"}));class ka{constructor(e,n,r,i,s,o,a){M(this,"versionBytesNum");M(this,"depth");M(this,"parentFingerPrint");M(this,"childIndex");M(this,"chainCode");M(this,"privKey");M(this,"pubKey");M(this,"constants",{pubKey:76067358,privKey:76066276});this.versionBytesNum=e,this.depth=n,this.parentFingerPrint=r,this.childIndex=i,this.chainCode=s,this.privKey=o,this.pubKey=a}fromRandom(){return this.versionBytesNum=this.constants.privKey,this.depth=0,this.parentFingerPrint=[0,0,0,0],this.childIndex=0,this.chainCode=It(32),this.privKey=st.fromRandom(),this.pubKey=this.privKey.toPublicKey(),this}static fromRandom(){return new this().fromRandom()}static fromString(e){return new this().fromString(e)}fromString(e){const n=Ld(e);return this.fromBinary([...n.prefix,...n.data])}static fromSeed(e){return new this().fromSeed(e)}fromSeed(e){if(e.length<128/8)throw new Error("Need more than 128 bits of entropy");if(e.length>512/8)throw new Error("More than 512 bits of entropy is nonstandard");const n=As(U("Bitcoin seed","utf8"),e);return this.depth=0,this.parentFingerPrint=[0,0,0,0],this.childIndex=0,this.chainCode=n.slice(32,64),this.versionBytesNum=this.constants.privKey,this.privKey=new st(n.slice(0,32)),this.pubKey=this.privKey.toPublicKey(),this}static fromBinary(e){return new this().fromBinary(e)}fromBinary(e){if(e.length!==78)throw new Error("incorrect bip32 data length");const n=new Ge(e);this.versionBytesNum=n.readUInt32BE(),this.depth=n.readUInt8(),this.parentFingerPrint=n.read(4),this.childIndex=n.readUInt32BE(),this.chainCode=n.read(32);const r=n.read(33),i=this.versionBytesNum===this.constants.privKey,s=this.versionBytesNum===this.constants.pubKey;if(i&&r[0]===0)this.privKey=new st(r.slice(1,33)),this.pubKey=this.privKey.toPublicKey();else if(s&&(r[0]===2||r[0]===3))this.pubKey=ut.fromString(Z(r));else throw new Error("Invalid key");return this}toString(){const e=this.toBinary();return Bd(e,[])}derive(e){if(e==="m")return this;const n=e.split("/");let r=this;for(const[i,s]of n.entries()){if(i===0){if(s!=="m")throw new Error("invalid path");continue}if(parseInt(s.replace("'",""),10).toString()!==s.replace("'",""))throw new Error("invalid path");const o=s.length>1&&s[s.length-1]==="'";let a=parseInt(o?s.slice(0,s.length-1):s,10)&2147483647;o&&(a+=2147483648),r=r.deriveChild(a)}return r}deriveChild(e){if(typeof e!="number")throw new Error("i must be a number");const n=[];n.push(e>>24&255),n.push(e>>16&255),n.push(e>>8&255),n.push(e&255);const r=[...n],i=(e&2147483648)!==0,s=this.versionBytesNum===this.constants.privKey;if(i&&(this.privKey===null||this.privKey===void 0||!s))throw new Error("Cannot do private key derivation without private key");let o=null;if(this.privKey!==null&&this.privKey!==void 0){let l=null;i?l=[0,...this.privKey.toArray("be",32),...r]:l=[...this.pubKey.encode(!0),...r];const c=As(this.chainCode,l),u=new D(c.slice(0,32)),d=c.slice(32,64),f=u.add(this.privKey).mod(new kt().n);o=new ka,o.chainCode=d,o.privKey=new st(f.toArray()),o.pubKey=o.privKey.toPublicKey()}else{const l=[...this.pubKey.encode(!0),...r],c=As(this.chainCode,l),u=new D(c.slice(0,32)),d=c.slice(32,64),f=new kt().g.mul(u),h=this.pubKey,p=f.add(h),g=new ut(p.x,p.y);o=new ka,o.chainCode=d,o.pubKey=g}o.childIndex=e;const a=Md(this.pubKey.encode(!0));return o.parentFingerPrint=a.slice(0,4),o.versionBytesNum=this.versionBytesNum,o.depth=this.depth+1,o}toPublic(){const e=new ka(this.versionBytesNum,this.depth,this.parentFingerPrint,this.childIndex,this.chainCode,this.privKey,this.pubKey);return e.versionBytesNum=this.constants.pubKey,e.privKey=void 0,e}toBinary(){const e=this.versionBytesNum===this.constants.privKey,n=this.versionBytesNum===this.constants.pubKey;if(e)return new ne().writeUInt32BE(this.versionBytesNum).writeUInt8(this.depth).write(this.parentFingerPrint).writeUInt32BE(this.childIndex).write(this.chainCode).writeUInt8(0).write(this.privKey.toArray("be",32)).toArray();if(n)return new ne().writeUInt32BE(this.versionBytesNum).writeUInt8(this.depth).write(this.parentFingerPrint).writeUInt32BE(this.childIndex).write(this.chainCode).write(this.pubKey.encode(!0)).toArray();throw new Error("bip32: invalid versionBytesNum byte")}isPrivate(){return this.versionBytesNum===this.constants.privKey}}const TN={value:["abandon","ability","able","about","above","absent","absorb","abstract","absurd","abuse","access","accident","account","accuse","achieve","acid","acoustic","acquire","across","act","action","actor","actress","actual","adapt","add","addict","address","adjust","admit","adult","advance","advice","aerobic","affair","afford","afraid","again","age","agent","agree","ahead","aim","air","airport","aisle","alarm","album","alcohol","alert","alien","all","alley","allow","almost","alone","alpha","already","also","alter","always","amateur","amazing","among","amount","amused","analyst","anchor","ancient","anger","angle","angry","animal","ankle","announce","annual","another","answer","antenna","antique","anxiety","any","apart","apology","appear","apple","approve","april","arch","arctic","area","arena","argue","arm","armed","armor","army","around","arrange","arrest","arrive","arrow","art","artefact","artist","artwork","ask","aspect","assault","asset","assist","assume","asthma","athlete","atom","attack","attend","attitude","attract","auction","audit","august","aunt","author","auto","autumn","average","avocado","avoid","awake","aware","away","awesome","awful","awkward","axis","baby","bachelor","bacon","badge","bag","balance","balcony","ball","bamboo","banana","banner","bar","barely","bargain","barrel","base","basic","basket","battle","beach","bean","beauty","because","become","beef","before","begin","behave","behind","believe","below","belt","bench","benefit","best","betray","better","between","beyond","bicycle","bid","bike","bind","biology","bird","birth","bitter","black","blade","blame","blanket","blast","bleak","bless","blind","blood","blossom","blouse","blue","blur","blush","board","boat","body","boil","bomb","bone","bonus","book","boost","border","boring","borrow","boss","bottom","bounce","box","boy","bracket","brain","brand","brass","brave","bread","breeze","brick","bridge","brief","bright","bring","brisk","broccoli","broken","bronze","broom","brother","brown","brush","bubble","buddy","budget","buffalo","build","bulb","bulk","bullet","bundle","bunker","burden","burger","burst","bus","business","busy","butter","buyer","buzz","cabbage","cabin","cable","cactus","cage","cake","call","calm","camera","camp","can","canal","cancel","candy","cannon","canoe","canvas","canyon","capable","capital","captain","car","carbon","card","cargo","carpet","carry","cart","case","cash","casino","castle","casual","cat","catalog","catch","category","cattle","caught","cause","caution","cave","ceiling","celery","cement","census","century","cereal","certain","chair","chalk","champion","change","chaos","chapter","charge","chase","chat","cheap","check","cheese","chef","cherry","chest","chicken","chief","child","chimney","choice","choose","chronic","chuckle","chunk","churn","cigar","cinnamon","circle","citizen","city","civil","claim","clap","clarify","claw","clay","clean","clerk","clever","click","client","cliff","climb","clinic","clip","clock","clog","close","cloth","cloud","clown","club","clump","cluster","clutch","coach","coast","coconut","code","coffee","coil","coin","collect","color","column","combine","come","comfort","comic","common","company","concert","conduct","confirm","congress","connect","consider","control","convince","cook","cool","copper","copy","coral","core","corn","correct","cost","cotton","couch","country","couple","course","cousin","cover","coyote","crack","cradle","craft","cram","crane","crash","crater","crawl","crazy","cream","credit","creek","crew","cricket","crime","crisp","critic","crop","cross","crouch","crowd","crucial","cruel","cruise","crumble","crunch","crush","cry","crystal","cube","culture","cup","cupboard","curious","current","curtain","curve","cushion","custom","cute","cycle","dad","damage","damp","dance","danger","daring","dash","daughter","dawn","day","deal","debate","debris","decade","december","decide","decline","decorate","decrease","deer","defense","define","defy","degree","delay","deliver","demand","demise","denial","dentist","deny","depart","depend","deposit","depth","deputy","derive","describe","desert","design","desk","despair","destroy","detail","detect","develop","device","devote","diagram","dial","diamond","diary","dice","diesel","diet","differ","digital","dignity","dilemma","dinner","dinosaur","direct","dirt","disagree","discover","disease","dish","dismiss","disorder","display","distance","divert","divide","divorce","dizzy","doctor","document","dog","doll","dolphin","domain","donate","donkey","donor","door","dose","double","dove","draft","dragon","drama","drastic","draw","dream","dress","drift","drill","drink","drip","drive","drop","drum","dry","duck","dumb","dune","during","dust","dutch","duty","dwarf","dynamic","eager","eagle","early","earn","earth","easily","east","easy","echo","ecology","economy","edge","edit","educate","effort","egg","eight","either","elbow","elder","electric","elegant","element","elephant","elevator","elite","else","embark","embody","embrace","emerge","emotion","employ","empower","empty","enable","enact","end","endless","endorse","enemy","energy","enforce","engage","engine","enhance","enjoy","enlist","enough","enrich","enroll","ensure","enter","entire","entry","envelope","episode","equal","equip","era","erase","erode","erosion","error","erupt","escape","essay","essence","estate","eternal","ethics","evidence","evil","evoke","evolve","exact","example","excess","exchange","excite","exclude","excuse","execute","exercise","exhaust","exhibit","exile","exist","exit","exotic","expand","expect","expire","explain","expose","express","extend","extra","eye","eyebrow","fabric","face","faculty","fade","faint","faith","fall","false","fame","family","famous","fan","fancy","fantasy","farm","fashion","fat","fatal","father","fatigue","fault","favorite","feature","february","federal","fee","feed","feel","female","fence","festival","fetch","fever","few","fiber","fiction","field","figure","file","film","filter","final","find","fine","finger","finish","fire","firm","first","fiscal","fish","fit","fitness","fix","flag","flame","flash","flat","flavor","flee","flight","flip","float","flock","floor","flower","fluid","flush","fly","foam","focus","fog","foil","fold","follow","food","foot","force","forest","forget","fork","fortune","forum","forward","fossil","foster","found","fox","fragile","frame","frequent","fresh","friend","fringe","frog","front","frost","frown","frozen","fruit","fuel","fun","funny","furnace","fury","future","gadget","gain","galaxy","gallery","game","gap","garage","garbage","garden","garlic","garment","gas","gasp","gate","gather","gauge","gaze","general","genius","genre","gentle","genuine","gesture","ghost","giant","gift","giggle","ginger","giraffe","girl","give","glad","glance","glare","glass","glide","glimpse","globe","gloom","glory","glove","glow","glue","goat","goddess","gold","good","goose","gorilla","gospel","gossip","govern","gown","grab","grace","grain","grant","grape","grass","gravity","great","green","grid","grief","grit","grocery","group","grow","grunt","guard","guess","guide","guilt","guitar","gun","gym","habit","hair","half","hammer","hamster","hand","happy","harbor","hard","harsh","harvest","hat","have","hawk","hazard","head","health","heart","heavy","hedgehog","height","hello","helmet","help","hen","hero","hidden","high","hill","hint","hip","hire","history","hobby","hockey","hold","hole","holiday","hollow","home","honey","hood","hope","horn","horror","horse","hospital","host","hotel","hour","hover","hub","huge","human","humble","humor","hundred","hungry","hunt","hurdle","hurry","hurt","husband","hybrid","ice","icon","idea","identify","idle","ignore","ill","illegal","illness","image","imitate","immense","immune","impact","impose","improve","impulse","inch","include","income","increase","index","indicate","indoor","industry","infant","inflict","inform","inhale","inherit","initial","inject","injury","inmate","inner","innocent","input","inquiry","insane","insect","inside","inspire","install","intact","interest","into","invest","invite","involve","iron","island","isolate","issue","item","ivory","jacket","jaguar","jar","jazz","jealous","jeans","jelly","jewel","job","join","joke","journey","joy","judge","juice","jump","jungle","junior","junk","just","kangaroo","keen","keep","ketchup","key","kick","kid","kidney","kind","kingdom","kiss","kit","kitchen","kite","kitten","kiwi","knee","knife","knock","know","lab","label","labor","ladder","lady","lake","lamp","language","laptop","large","later","latin","laugh","laundry","lava","law","lawn","lawsuit","layer","lazy","leader","leaf","learn","leave","lecture","left","leg","legal","legend","leisure","lemon","lend","length","lens","leopard","lesson","letter","level","liar","liberty","library","license","life","lift","light","like","limb","limit","link","lion","liquid","list","little","live","lizard","load","loan","lobster","local","lock","logic","lonely","long","loop","lottery","loud","lounge","love","loyal","lucky","luggage","lumber","lunar","lunch","luxury","lyrics","machine","mad","magic","magnet","maid","mail","main","major","make","mammal","man","manage","mandate","mango","mansion","manual","maple","marble","march","margin","marine","market","marriage","mask","mass","master","match","material","math","matrix","matter","maximum","maze","meadow","mean","measure","meat","mechanic","medal","media","melody","melt","member","memory","mention","menu","mercy","merge","merit","merry","mesh","message","metal","method","middle","midnight","milk","million","mimic","mind","minimum","minor","minute","miracle","mirror","misery","miss","mistake","mix","mixed","mixture","mobile","model","modify","mom","moment","monitor","monkey","monster","month","moon","moral","more","morning","mosquito","mother","motion","motor","mountain","mouse","move","movie","much","muffin","mule","multiply","muscle","museum","mushroom","music","must","mutual","myself","mystery","myth","naive","name","napkin","narrow","nasty","nation","nature","near","neck","need","negative","neglect","neither","nephew","nerve","nest","net","network","neutral","never","news","next","nice","night","noble","noise","nominee","noodle","normal","north","nose","notable","note","nothing","notice","novel","now","nuclear","number","nurse","nut","oak","obey","object","oblige","obscure","observe","obtain","obvious","occur","ocean","october","odor","off","offer","office","often","oil","okay","old","olive","olympic","omit","once","one","onion","online","only","open","opera","opinion","oppose","option","orange","orbit","orchard","order","ordinary","organ","orient","original","orphan","ostrich","other","outdoor","outer","output","outside","oval","oven","over","own","owner","oxygen","oyster","ozone","pact","paddle","page","pair","palace","palm","panda","panel","panic","panther","paper","parade","parent","park","parrot","party","pass","patch","path","patient","patrol","pattern","pause","pave","payment","peace","peanut","pear","peasant","pelican","pen","penalty","pencil","people","pepper","perfect","permit","person","pet","phone","photo","phrase","physical","piano","picnic","picture","piece","pig","pigeon","pill","pilot","pink","pioneer","pipe","pistol","pitch","pizza","place","planet","plastic","plate","play","please","pledge","pluck","plug","plunge","poem","poet","point","polar","pole","police","pond","pony","pool","popular","portion","position","possible","post","potato","pottery","poverty","powder","power","practice","praise","predict","prefer","prepare","present","pretty","prevent","price","pride","primary","print","priority","prison","private","prize","problem","process","produce","profit","program","project","promote","proof","property","prosper","protect","proud","provide","public","pudding","pull","pulp","pulse","pumpkin","punch","pupil","puppy","purchase","purity","purpose","purse","push","put","puzzle","pyramid","quality","quantum","quarter","question","quick","quit","quiz","quote","rabbit","raccoon","race","rack","radar","radio","rail","rain","raise","rally","ramp","ranch","random","range","rapid","rare","rate","rather","raven","raw","razor","ready","real","reason","rebel","rebuild","recall","receive","recipe","record","recycle","reduce","reflect","reform","refuse","region","regret","regular","reject","relax","release","relief","rely","remain","remember","remind","remove","render","renew","rent","reopen","repair","repeat","replace","report","require","rescue","resemble","resist","resource","response","result","retire","retreat","return","reunion","reveal","review","reward","rhythm","rib","ribbon","rice","rich","ride","ridge","rifle","right","rigid","ring","riot","ripple","risk","ritual","rival","river","road","roast","robot","robust","rocket","romance","roof","rookie","room","rose","rotate","rough","round","route","royal","rubber","rude","rug","rule","run","runway","rural","sad","saddle","sadness","safe","sail","salad","salmon","salon","salt","salute","same","sample","sand","satisfy","satoshi","sauce","sausage","save","say","scale","scan","scare","scatter","scene","scheme","school","science","scissors","scorpion","scout","scrap","screen","script","scrub","sea","search","season","seat","second","secret","section","security","seed","seek","segment","select","sell","seminar","senior","sense","sentence","series","service","session","settle","setup","seven","shadow","shaft","shallow","share","shed","shell","sheriff","shield","shift","shine","ship","shiver","shock","shoe","shoot","shop","short","shoulder","shove","shrimp","shrug","shuffle","shy","sibling","sick","side","siege","sight","sign","silent","silk","silly","silver","similar","simple","since","sing","siren","sister","situate","six","size","skate","sketch","ski","skill","skin","skirt","skull","slab","slam","sleep","slender","slice","slide","slight","slim","slogan","slot","slow","slush","small","smart","smile","smoke","smooth","snack","snake","snap","sniff","snow","soap","soccer","social","sock","soda","soft","solar","soldier","solid","solution","solve","someone","song","soon","sorry","sort","soul","sound","soup","source","south","space","spare","spatial","spawn","speak","special","speed","spell","spend","sphere","spice","spider","spike","spin","spirit","split","spoil","sponsor","spoon","sport","spot","spray","spread","spring","spy","square","squeeze","squirrel","stable","stadium","staff","stage","stairs","stamp","stand","start","state","stay","steak","steel","stem","step","stereo","stick","still","sting","stock","stomach","stone","stool","story","stove","strategy","street","strike","strong","struggle","student","stuff","stumble","style","subject","submit","subway","success","such","sudden","suffer","sugar","suggest","suit","summer","sun","sunny","sunset","super","supply","supreme","sure","surface","surge","surprise","surround","survey","suspect","sustain","swallow","swamp","swap","swarm","swear","sweet","swift","swim","swing","switch","sword","symbol","symptom","syrup","system","table","tackle","tag","tail","talent","talk","tank","tape","target","task","taste","tattoo","taxi","teach","team","tell","ten","tenant","tennis","tent","term","test","text","thank","that","theme","then","theory","there","they","thing","this","thought","three","thrive","throw","thumb","thunder","ticket","tide","tiger","tilt","timber","time","tiny","tip","tired","tissue","title","toast","tobacco","today","toddler","toe","together","toilet","token","tomato","tomorrow","tone","tongue","tonight","tool","tooth","top","topic","topple","torch","tornado","tortoise","toss","total","tourist","toward","tower","town","toy","track","trade","traffic","tragic","train","transfer","trap","trash","travel","tray","treat","tree","trend","trial","tribe","trick","trigger","trim","trip","trophy","trouble","truck","true","truly","trumpet","trust","truth","try","tube","tuition","tumble","tuna","tunnel","turkey","turn","turtle","twelve","twenty","twice","twin","twist","two","type","typical","ugly","umbrella","unable","unaware","uncle","uncover","under","undo","unfair","unfold","unhappy","uniform","unique","unit","universe","unknown","unlock","until","unusual","unveil","update","upgrade","uphold","upon","upper","upset","urban","urge","usage","use","used","useful","useless","usual","utility","vacant","vacuum","vague","valid","valley","valve","van","vanish","vapor","various","vast","vault","vehicle","velvet","vendor","venture","venue","verb","verify","version","very","vessel","veteran","viable","vibrant","vicious","victory","video","view","village","vintage","violin","virtual","virus","visa","visit","visual","vital","vivid","vocal","voice","void","volcano","volume","vote","voyage","wage","wagon","wait","walk","wall","walnut","want","warfare","warm","warrior","wash","wasp","waste","water","wave","way","wealth","weapon","wear","weasel","weather","web","wedding","weekend","weird","welcome","west","wet","whale","what","wheat","wheel","when","where","whip","whisper","wide","width","wife","wild","will","win","window","wine","wing","wink","winner","winter","wire","wisdom","wise","wish","witness","wolf","woman","wonder","wood","wool","word","work","world","worry","worth","wrap","wreck","wrestle","wrist","write","wrong","yard","year","yellow","you","young","youth","zebra","zero","zone","zoo"],space:" "};class nm{constructor(e,n,r=TN){M(this,"mnemonic");M(this,"seed");M(this,"Wordlist");this.mnemonic=e??"",this.seed=n??[],this.Wordlist=r}toBinary(){const e=new ne;if(this.mnemonic!==""){const n=U(this.mnemonic,"utf8");e.writeVarIntNum(n.length),e.write(n)}else e.writeVarIntNum(0);return this.seed.length>0?(e.writeVarIntNum(this.seed.length),e.write(this.seed)):e.writeVarIntNum(0),e.toArray()}fromBinary(e){const n=new Ge(e),r=n.readVarIntNum();r>0&&(this.mnemonic=Ui(n.read(r),"utf8"));const i=n.readVarIntNum();return i>0&&(this.seed=n.read(i)),this}fromRandom(e){if((e==null||isNaN(e)||e===0)&&(e=128),e%32!==0)throw new Error("bits must be multiple of 32");if(e<128)throw new Error("bits must be at least 128");const n=It(e/8);return this.entropy2Mnemonic(n),this.mnemonic2Seed(),this}static fromRandom(e){return new this().fromRandom(e)}fromEntropy(e){return this.entropy2Mnemonic(e),this}static fromEntropy(e){return new this().fromEntropy(e)}fromString(e){return this.mnemonic=e,this}static fromString(e){return new this().fromString(e)}toString(){return this.mnemonic}toSeed(e){return this.mnemonic2Seed(e),this.seed}entropy2Mnemonic(e){if(e.length<128/8)throw new Error("Entropy is less than 128 bits. It must be 128 bits or more.");const n=fn(e);let r="";const i=e.length*8;for(let a=0;a<e.length;a++)r=r+("00000000"+e[a].toString(2)).slice(-8);let s=n[0].toString(2);if(s=("00000000"+s).slice(-8).slice(0,i/32),r=r+s,r.length%11!==0)throw new Error("internal error - entropy not an even multiple of 11 bits - "+r.length.toString());let o="";for(let a=0;a<r.length/11;a++){o!==""&&(o=o+this.Wordlist.space);const l=parseInt(r.slice(a*11,(a+1)*11),2);o=o+this.Wordlist.value[l]}return this.mnemonic=o,this}check(){const n=this.mnemonic.split(this.Wordlist.space);let r="";for(let u=0;u<n.length;u++){const d=this.Wordlist.value.indexOf(n[u]);if(d<0)return!1;r=r+("00000000000"+d.toString(2)).slice(-11)}if(r.length%11!==0)throw new Error("internal error - entropy not an even multiple of 11 bits - "+r.length.toString());const i=r.length/33,s=r.slice(-i),o=r.slice(0,r.length-i),a=[];for(let u=0;u<o.length/8;u++)a.push(parseInt(r.slice(u*8,(u+1)*8),2));let c=fn(a.slice(0,o.length/8))[0].toString(2);return c=("00000000"+c).slice(-8).slice(0,i),c===s}mnemonic2Seed(e=""){let n=this.mnemonic;if(!this.check())throw new Error("Mnemonic does not pass the check - was the mnemonic typed incorrectly? Are there extra spaces?");if(typeof e!="string")throw new Error("passphrase must be a string or undefined");n=n.normalize("NFKD"),e=e.normalize("NFKD");const r=U(n,"utf8"),i=[...U("mnemonic","utf8"),...U(e,"utf8")];return this.seed=PI(r,i,2048,64,"sha512"),this}isValid(e=""){let n;try{this.mnemonic2Seed(e),n=!0}catch{n=!1}return n}static isValid(e,n=""){return new nm(e).isValid(n)}}function e0(t){this._tables[0][0][0]===0&&this._precompute();let e,n,r;const i=this._tables[0][4],s=this._tables[1],o=t.length;let a=1;if(o!==4&&o!==6&&o!==8)throw new Error("invalid aes key size");this._key=[n=t.slice(0),r=[]];let l;for(l=o;l<4*o+28;l++)e=n[l-1],(l%o===0||o===8&&l%o===4)&&(e=i[e>>>24]<<24^i[e>>16&255]<<16^i[e>>8&255]<<8^i[e&255],l%o===0&&(e=e<<8^e>>>24^a<<24,a=a<<1^(a>>7)*283)),n[l]=n[l-o]^e;for(let c=0;l>0;c++,l--)e=n[c&3?l:l-4],l<=4||c<4?r[c]=e:r[c]=s[0][i[e>>>24]]^s[1][i[e>>16&255]]^s[2][i[e>>8&255]]^s[3][i[e&255]]}e0.prototype={encrypt:function(t){return this._crypt(t,0)},decrypt:function(t){return this._crypt(t,1)},_tables:[[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)]],_precompute:function(){const t=this._tables[0],e=this._tables[1],n=t[4],r=e[4];let i,s,o;const a=new Uint8Array(256),l=new Uint8Array(256);let c,u,d,f,h,p;for(i=0;i<256;i++)l[(a[i]=i<<1^(i>>7)*283)^i]=i;for(s=o=0;n[s]===0;s^=c!==0?c:1,o=l[o]!==0?l[o]:1)for(f=o^o<<1^o<<2^o<<3^o<<4,f=f>>8^f&255^99,n[s]=f,r[f]=s,d=a[u=a[c=a[s]]],p=d*16843009^u*65537^c*257^s*16843008,h=a[f]*257^f*16843008,i=0;i<4;i++)t[i][s]=h=h<<24^h>>>8,e[i][f]=p=p<<24^p>>>8},_crypt:function(t,e){if(t.length!==4)throw new Error("invalid aes block size");const n=this._key[e];let r=t[0]^n[0],i=t[e===1?3:1]^n[1],s=t[2]^n[2],o=t[e===1?1:3]^n[3],a,l,c;const u=n.length/4-2;let d,f=4;const h=new Uint32Array(4),p=this._tables[e],g=p[0],w=p[1],v=p[2],m=p[3],y=p[4];for(d=0;d<u;d++)a=g[r>>>24]^w[i>>16&255]^v[s>>8&255]^m[o&255]^n[f],l=g[i>>>24]^w[s>>16&255]^v[o>>8&255]^m[r&255]^n[f+1],c=g[s>>>24]^w[o>>16&255]^v[r>>8&255]^m[i&255]^n[f+2],o=g[o>>>24]^w[r>>16&255]^v[i>>8&255]^m[s&255]^n[f+3],f+=4,r=a,i=l,s=c;for(d=0;d<4;d++)h[e===1?3&-d:d]=y[r>>>24]<<24^y[i>>16&255]<<16^y[s>>8&255]<<8^y[o&255]^n[f++],a=r,r=i,i=s,s=o,o=a;return h}};class lr{static encrypt(e,n){const r=lr.buf2Words(n),i=lr.buf2Words(e),o=new e0(r).encrypt(i);return lr.words2Buf(o)}static decrypt(e,n){const r=lr.buf2Words(e),i=lr.buf2Words(n),o=new e0(i).decrypt(r);return lr.words2Buf(o)}static buf2Words(e){if(e.length%4!==0)throw new Error("buf length must be a multiple of 4");const n=[];for(let r=0;r<e.length/4;r++){const i=e[r*4]*16777216+(e[r*4+1]<<16|e[r*4+2]<<8|e[r*4+3]);n.push(i)}return n}static words2Buf(e){const n=new Array(e.length*4);for(let r=0;r<e.length;r++){const i=e[r];n[r*4]=i>>>24&255,n[r*4+1]=i>>>16&255,n[r*4+2]=i>>>8&255,n[r*4+3]=i&255}return n}}class nn{static buf2BlocksBuf(e,n){const r=n/8,i=[];for(let s=0;s<=e.length/r;s++){let o=e.slice(s*r,s*r+r);o.length<n&&(o=nn.pkcs7Pad(o,n)),i.push(o)}return i}static blockBufs2Buf(e){let n=e[e.length-1];return n=nn.pkcs7Unpad(n),e[e.length-1]=n,e.flat()}static encrypt(e,n,r,i){const s=n.length*8,o=nn.buf2BlocksBuf(e,s);return nn.encryptBlocks(o,n,r,i).flat()}static decrypt(e,n,r,i){const s=n.length,o=[];for(let c=0;c<e.length/s;c++)o.push(e.slice(c*s,c*s+s));const a=nn.decryptBlocks(o,n,r,i);return nn.blockBufs2Buf(a)}static encryptBlock(e,n,r,i){const s=nn.xorBufs(e,n);return r.encrypt(s,i)}static decryptBlock(e,n,r,i){const s=r.decrypt(e,i);return nn.xorBufs(s,n)}static encryptBlocks(e,n,r,i){const s=[];for(let o=0;o<e.length;o++){const a=e[o],l=nn.encryptBlock(a,n,r,i);s.push(l),n=l}return s}static decryptBlocks(e,n,r,i){const s=[];for(let o=0;o<e.length;o++){const a=e[o],l=nn.decryptBlock(a,n,r,i);s.push(l),n=a}return s}static pkcs7Pad(e,n){const i=n/8-e.length,s=new Array(i);return s.fill(i),[...e,...s]}static pkcs7Unpad(e){const n=e[e.length-1],r=e.slice(e.length-n,e.length),i=new Array(n);if(i.fill(n),Z(r)!==Z(i))throw new Error("invalid padding");return e.slice(0,e.length-n)}static xorBufs(e,n){if(e.length!==n.length)throw new Error("bufs must have the same length");const r=new Array(e.length);for(let i=0;i<e.length;i++)r[i]=e[i]^n[i];return r}}class qc{static encrypt(e,n,r,i=!0){r=r??It(128/8);const s=nn.encrypt(e,r,lr,n);return i?[...r,...s]:[...s]}static decrypt(e,n,r){if(r==null){r=e.slice(0,128/8);const i=e.slice(128/8);return nn.decrypt(i,r,lr,n)}else{const i=e;return nn.decrypt(i,r,lr,n)}}}class lu{static ivkEkM(e,n){const r=e,s=n.mul(r),a=new ut(s.x,s.y).encode(!0),l=vl(a);return{iv:l.slice(0,16),kE:l.slice(16,32),kM:l.slice(32,64)}}static electrumEncrypt(e,n,r,i=!1){let s=null;r==null&&(r=st.fromRandom()),i||(s=r.toPublicKey().encode(!0));const{iv:o,kE:a,kM:l}=lu.ivkEkM(r,n),c=qc.encrypt(e,a,o,!1),u=U("BIE1","utf8");let d;s!=null&&s.length>0?d=[...u,...s,...c]:d=[...u,...c];const f=dr(l,d);return[...d,...f]}static electrumDecrypt(e,n,r){const s=e.slice(0,4);if(Ui(s,"utf8")!=="BIE1")throw new Error("Invalid Magic");let o=4,a=null;if(e.length-o-32>=33){const p=e[o];p===2||p===3?(a=e.slice(o,o+33),o+=33):p===4&&(a=e.slice(o,o+65),o+=65)}if(a!==null)r==null&&(r=ut.fromString(Z(a)));else if(r==null)throw new Error("Sender public key is required");const{iv:l,kE:c,kM:u}=lu.ivkEkM(n,r),d=e.slice(o,e.length-32),f=e.slice(e.length-32,e.length),h=dr(u,e.slice(0,e.length-32));if(Z(f)!==Z(h))throw new Error("Invalid checksum");return qc.decrypt(d,c,l)}static bitcoreEncrypt(e,n,r,i){r==null&&(r=st.fromRandom()),i==null&&(i=It(16));const s=r,a=r.toPublicKey().encode(!0),d=n.mul(s).getX().toArray("be",32),f=vl(d),h=f.slice(0,32),p=f.slice(32,64),g=qc.encrypt(e,h,i),w=dr(p,[...g]);return[...a,...g,...w]}static bitcoreDecrypt(e,n){const r=n,o=ut.fromString(Z(e.slice(0,33))).mul(r);if(o.eq(new vn(0,0)))throw new Error("P equals 0");const l=o.getX().toArray("be",32),c=vl(l),u=c.slice(0,32),d=c.slice(32,64),f=e.slice(33,e.length-32),h=e.slice(e.length-32,e.length),p=dr(d,f);if(Z(h)!==Z(p))throw new Error("Invalid checksum");return[...qc.decrypt(f,u)]}}function RN(t,e){const n=new wr(0,[],[],0);return n.outputs=Array(t.vout+1).fill(null),n.outputs[t.vout]={satoshis:t.satoshis,lockingScript:vr.fromHex(t.script)},{sourceTransaction:n,sourceTXID:t.txid,sourceOutputIndex:t.vout,unlockingScriptTemplate:e,sequence:4294967295}}class _N{static generate(e,n){const r=this.withDefaultOptions(n),i=this.getCounter(r.timestamp,r.period);return ow(e,i,r)}static validate(e,n,r){const i=this.withDefaultValidateOptions(r);if(n=n.trim(),n.length!==i.digits)return!1;const s=this.getCounter(i.timestamp,i.period),o=[s];for(let a=1;a<=i.skew;a++)o.push(s+a),o.push(s-a);for(const a of o)if(n===ow(e,a,i))return!0;return!1}static getCounter(e,n){const r=Math.floor(e/1e3);return Math.floor(r/n)}static withDefaultOptions(e){return{digits:2,algorithm:"SHA-1",period:30,timestamp:Date.now(),...e}}static withDefaultValidateOptions(e){return{skew:1,...this.withDefaultOptions(e)}}}function ow(t,e,n){const r=new D(e).toArray("be",8),s=PN(t,r,n.algorithm).digest(),o=s[s.length-1]&15,a=s.slice(o,o+4);return(new D(a).toNumber()&2147483647).toString().slice(-n.digits)}function PN(t,e,n){switch(n){case"SHA-1":return new TI(t).update(e);case"SHA-256":return new Cd(t).update(e);case"SHA-512":return new Qg(t).update(e);default:throw new Error("unsupported HMAC algorithm")}}var uu;(function(t){t[t.Silent=0]="Silent",t[t.App=1]="App",t[t.Counterparty=2]="Counterparty"})(uu||(uu={}));class Ya{constructor(e){M(this,"rootKey");M(this,"identityKey");e==="anyone"?this.rootKey=new st(1):this.rootKey=e,this.identityKey=this.rootKey.toPublicKey().toString()}derivePublicKey(e,n,r,i=!1){return r=this.normalizeCounterparty(r),i?this.rootKey.deriveChild(r,this.computeInvoiceNumber(e,n)).toPublicKey():r.deriveChild(this.rootKey,this.computeInvoiceNumber(e,n))}derivePrivateKey(e,n,r){return r=this.normalizeCounterparty(r),this.rootKey.deriveChild(r,this.computeInvoiceNumber(e,n))}deriveSymmetricKey(e,n,r){var o,a;r==="anyone"&&(r=new st(1).toPublicKey()),r=this.normalizeCounterparty(r);const i=this.derivePublicKey(e,n,r),s=this.derivePrivateKey(e,n,r);return new Cr(((a=(o=s.deriveSharedSecret(i))==null?void 0:o.x)==null?void 0:a.toArray())??[])}revealCounterpartySecret(e){if(e==="self")throw new Error("Counterparty secrets cannot be revealed for counterparty=self.");e=this.normalizeCounterparty(e);const n=this.rootKey.toPublicKey(),r=this.rootKey.deriveChild(n,"test").toHex(),i=this.rootKey.deriveChild(e,"test").toHex();if(r===i)throw new Error("Counterparty secrets cannot be revealed for counterparty=self.");return this.rootKey.deriveSharedSecret(e).encode(!0)}revealSpecificSecret(e,n,r){e=this.normalizeCounterparty(e);const i=this.rootKey.deriveSharedSecret(e),s=U(this.computeInvoiceNumber(n,r),"utf8");return dr(i.encode(!0),s)}normalizeCounterparty(e){if(e==null)throw new Error("counterparty must be self, anyone or a public key!");return e==="self"?this.rootKey.toPublicKey():e==="anyone"?new st(1).toPublicKey():typeof e=="string"?ut.fromString(e):e}computeInvoiceNumber(e,n){const r=e[0];if(!Number.isInteger(r)||r<0||r>2)throw new Error("Protocol security level must be 0, 1, or 2");const i=e[1].toLowerCase().trim();if(n.length>800)throw new Error("Key IDs must be 800 characters or less");if(n.length<1)throw new Error("Key IDs must be 1 character or more");if(i.length>400)if(i.startsWith("specific linkage revelation ")){if(i.length>430)throw new Error("Specific linkage revelation protocol names must be 430 characters or less")}else throw new Error("Protocol names must be 400 characters or less");if(i.length<5)throw new Error("Protocol names must be 5 characters or more");if(i.includes("  "))throw new Error('Protocol names cannot contain multiple consecutive spaces ("  ")');if(!/^[a-z0-9 ]+$/g.test(i))throw new Error("Protocol names can only contain letters, numbers and spaces");if(i.endsWith(" protocol"))throw new Error('No need to end your protocol name with " protocol"');return`${r}-${i}-${n}`}}class ON{constructor(e,n){M(this,"keyDeriver");M(this,"cache");M(this,"maxCacheSize");this.keyDeriver=new Ya(e),this.cache=new Map;const r=n==null?void 0:n.maxCacheSize;this.maxCacheSize=r!=null&&!isNaN(r)&&r>0?r:1e3}derivePublicKey(e,n,r,i=!1){const s=this.generateCacheKey("derivePublicKey",e,n,r,i);if(this.cache.has(s)){const o=this.cacheGet(s);if(o===void 0)throw new Error("Cached value is undefined");return o}else{const o=this.keyDeriver.derivePublicKey(e,n,r,i);return this.cacheSet(s,o),o}}derivePrivateKey(e,n,r){const i=this.generateCacheKey("derivePrivateKey",e,n,r);if(this.cache.has(i)){const s=this.cacheGet(i);if(s===void 0)throw new Error("Cached value is undefined");return s}else{const s=this.keyDeriver.derivePrivateKey(e,n,r);return this.cacheSet(i,s),s}}deriveSymmetricKey(e,n,r){const i=this.generateCacheKey("deriveSymmetricKey",e,n,r);if(this.cache.has(i)){const s=this.cacheGet(i);if(s===void 0)throw new Error("Cached value is undefined");return s}else{const s=this.keyDeriver.deriveSymmetricKey(e,n,r);return this.cacheSet(i,s),s}}revealCounterpartySecret(e){const n=this.generateCacheKey("revealCounterpartySecret",e);if(this.cache.has(n)){const r=this.cacheGet(n);if(r===void 0)throw new Error("Cached value is undefined");return r}else{const r=this.keyDeriver.revealCounterpartySecret(e);return this.cacheSet(n,r),r}}revealSpecificSecret(e,n,r){const i=this.generateCacheKey("revealSpecificSecret",e,n,r);if(this.cache.has(i)){const s=this.cacheGet(i);if(s===void 0)throw new Error("Cached value is undefined");return s}else{const s=this.keyDeriver.revealSpecificSecret(e,n,r);return this.cacheSet(i,s),s}}generateCacheKey(e,...n){const r=n.map(i=>this.serializeArgument(i)).join("|");return`${e}|${r}`}serializeArgument(e){return e instanceof ut||e instanceof st?e.toString():Array.isArray(e)?e.map(n=>this.serializeArgument(n)).join(","):typeof e=="object"&&e!==null?JSON.stringify(e):String(e)}cacheGet(e){const n=this.cache.get(e);return this.cache.delete(e),n!==void 0&&this.cache.set(e,n),n}cacheSet(e,n){if(this.cache.size>=this.maxCacheSize){const r=this.cache.keys().next().value;this.cache.delete(r)}this.cache.set(e,n)}}class rm{constructor(e){M(this,"keyDeriver");typeof e.identityKey!="string"&&(e=new Ya(e)),this.keyDeriver=e}async getPublicKey(e){if(e.identityKey){if(this.keyDeriver==null)throw new Error("keyDeriver is undefined");return{publicKey:this.keyDeriver.rootKey.toPublicKey().toString()}}else{if(e.protocolID==null||e.keyID==null||e.keyID==="")throw new Error("protocolID and keyID are required if identityKey is false or undefined.");return{publicKey:(this.keyDeriver??(()=>{throw new Error("keyDeriver is undefined")})()).derivePublicKey(e.protocolID,e.keyID,e.counterparty??"self",e.forSelf).toString()}}}async revealCounterpartyKeyLinkage(e){const{publicKey:n}=await this.getPublicKey({identityKey:!0});if(this.keyDeriver==null)throw new Error("keyDeriver is undefined");const r=this.keyDeriver.revealCounterpartySecret(e.counterparty),i=new NI().generateProof(this.keyDeriver.rootKey,this.keyDeriver.rootKey.toPublicKey(),ut.fromString(e.counterparty),vn.fromDER(r)),s=[...i.R.encode(!0),...i.SPrime.encode(!0),...i.z.toArray()],o=new Date().toISOString(),{ciphertext:a}=await this.encrypt({plaintext:r,protocolID:[2,"counterparty linkage revelation"],keyID:o,counterparty:e.verifier}),{ciphertext:l}=await this.encrypt({plaintext:s,protocolID:[2,"counterparty linkage revelation"],keyID:o,counterparty:e.verifier});return{prover:n,verifier:e.verifier,counterparty:e.counterparty,revelationTime:o,encryptedLinkage:a,encryptedLinkageProof:l}}async revealSpecificKeyLinkage(e){const{publicKey:n}=await this.getPublicKey({identityKey:!0});if(this.keyDeriver==null)throw new Error("keyDeriver is undefined");const r=this.keyDeriver.revealSpecificSecret(e.counterparty,e.protocolID,e.keyID),{ciphertext:i}=await this.encrypt({plaintext:r,protocolID:[2,`specific linkage revelation ${e.protocolID[0]} ${e.protocolID[1]}`],keyID:e.keyID,counterparty:e.verifier}),{ciphertext:s}=await this.encrypt({plaintext:[0],protocolID:[2,`specific linkage revelation ${e.protocolID[0]} ${e.protocolID[1]}`],keyID:e.keyID,counterparty:e.verifier});return{prover:n,verifier:e.verifier,counterparty:e.counterparty,protocolID:e.protocolID,keyID:e.keyID,encryptedLinkage:i,encryptedLinkageProof:s,proofType:0}}async encrypt(e){if(this.keyDeriver==null)throw new Error("keyDeriver is undefined");return{ciphertext:this.keyDeriver.deriveSymmetricKey(e.protocolID,e.keyID,e.counterparty??"self").encrypt(e.plaintext)}}async decrypt(e){if(this.keyDeriver==null)throw new Error("keyDeriver is undefined");return{plaintext:this.keyDeriver.deriveSymmetricKey(e.protocolID,e.keyID,e.counterparty??"self").decrypt(e.ciphertext)}}async createHmac(e){if(this.keyDeriver==null)throw new Error("keyDeriver is undefined");const n=this.keyDeriver.deriveSymmetricKey(e.protocolID,e.keyID,e.counterparty??"self");return{hmac:dr(n.toArray(),e.data)}}async verifyHmac(e){if(this.keyDeriver==null)throw new Error("keyDeriver is undefined");const n=this.keyDeriver.deriveSymmetricKey(e.protocolID,e.keyID,e.counterparty??"self"),r=dr(n.toArray(),e.data).toString()===e.hmac.toString();if(!r){const i=new Error("HMAC is not valid");throw i.code="ERR_INVALID_HMAC",i}return{valid:r}}async createSignature(e){if(e.hashToDirectlySign==null&&e.data==null)throw new Error("args.data or args.hashToDirectlySign must be valid");const n=e.hashToDirectlySign??fn(e.data??[]),i=(this.keyDeriver??(()=>{throw new Error("keyDeriver is undefined")})()).derivePrivateKey(e.protocolID,e.keyID,e.counterparty??"anyone");return{signature:Dd(new D(n),i,!0).toDER()}}async verifySignature(e){if(e.hashToDirectlyVerify==null&&e.data==null)throw new Error("args.data or args.hashToDirectlyVerify must be valid");const n=e.hashToDirectlyVerify??fn(e.data??[]),i=(this.keyDeriver??(()=>{throw new Error("keyDeriver is undefined")})()).derivePublicKey(e.protocolID,e.keyID,e.counterparty??"self",e.forSelf),s=Gi(new D(n),Sn.fromDER(e.signature),i);if(!s){const o=new Error("Signature is not valid");throw o.code="ERR_INVALID_SIGNATURE",o}return{valid:s}}}class t0{constructor(){M(this,"CWI");if(typeof window!="object")throw new Error("The window.CWI substrate requires a global window object.");if(typeof window.CWI!="object")throw new Error("The window.CWI interface does not appear to be bound to the window object.");this.CWI=window.CWI}async createAction(e,n){return await this.CWI.createAction(e,n)}async signAction(e,n){return await this.CWI.signAction(e,n)}async abortAction(e,n){return await this.CWI.abortAction(e,n)}async listActions(e,n){return await this.CWI.listActions(e,n)}async internalizeAction(e,n){return await this.CWI.internalizeAction(e,n)}async listOutputs(e,n){return await this.CWI.listOutputs(e,n)}async relinquishOutput(e,n){return await this.CWI.relinquishOutput(e,n)}async getPublicKey(e,n){return await this.CWI.getPublicKey(e,n)}async revealCounterpartyKeyLinkage(e,n){return await this.CWI.revealCounterpartyKeyLinkage(e,n)}async revealSpecificKeyLinkage(e,n){return await this.CWI.revealSpecificKeyLinkage(e,n)}async encrypt(e,n){return await this.CWI.encrypt(e,n)}async decrypt(e,n){return await this.CWI.decrypt(e,n)}async createHmac(e,n){return await this.CWI.createHmac(e,n)}async verifyHmac(e,n){return await this.CWI.verifyHmac(e,n)}async createSignature(e,n){return await this.CWI.createSignature(e,n)}async verifySignature(e,n){return await this.CWI.verifySignature(e,n)}async acquireCertificate(e,n){return await this.CWI.acquireCertificate(e,n)}async listCertificates(e,n){return await this.CWI.listCertificates(e,n)}async proveCertificate(e,n){return await this.CWI.proveCertificate(e,n)}async relinquishCertificate(e,n){return await this.CWI.relinquishCertificate(e,n)}async discoverByIdentityKey(e,n){return await this.CWI.discoverByIdentityKey(e,n)}async discoverByAttributes(e,n){return await this.CWI.discoverByAttributes(e,n)}async isAuthenticated(e,n){return await this.CWI.isAuthenticated(e,n)}async waitForAuthentication(e,n){return await this.CWI.waitForAuthentication(e,n)}async getHeight(e,n){return await this.CWI.getHeight(e,n)}async getHeaderForHeight(e,n){return await this.CWI.getHeaderForHeight(e,n)}async getNetwork(e,n){return await this.CWI.getNetwork(e,n)}async getVersion(e,n){return await this.CWI.getVersion(e,n)}}let im=class extends Error{constructor(n,r=1,i){super(n);M(this,"code");M(this,"isError",!0);this.code=r,this.name=this.constructor.name,i!=null&&i!==""?this.stack=i:Error.captureStackTrace(this,this.constructor)}};var n0;(function(t){t[t.unknownError=1]="unknownError",t[t.unsupportedAction=2]="unsupportedAction",t[t.invalidHmac=3]="invalidHmac",t[t.invalidSignature=4]="invalidSignature"})(n0||(n0={}));const AN=n0;class r0{constructor(e="*"){M(this,"domain");if(typeof window!="object")throw new Error("The XDM substrate requires a global window object.");if(typeof window.postMessage!="function")throw new Error("The window object does not seem to support postMessage calls.");this.domain=e}async invoke(e,n){return await new Promise((r,i)=>{const s=Ae(It(12)),o=a=>{if(!(a.data.type!=="CWI"||!a.isTrusted||a.data.id!==s||a.data.isInvocation===!0))if(typeof window.removeEventListener=="function"&&window.removeEventListener("message",o),a.data.status==="error"){const l=new im(a.data.description,a.data.code);i(l)}else r(a.data.result)};window.addEventListener("message",o),window.parent.postMessage({type:"CWI",isInvocation:!0,id:s,call:e,args:n},this.domain)})}async createAction(e){return await this.invoke("createAction",e)}async signAction(e){return await this.invoke("signAction",e)}async abortAction(e){return await this.invoke("abortAction",e)}async listActions(e){return await this.invoke("listActions",e)}async internalizeAction(e){return await this.invoke("internalizeAction",e)}async listOutputs(e){return await this.invoke("listOutputs",e)}async relinquishOutput(e){return await this.invoke("relinquishOutput",e)}async getPublicKey(e){return await this.invoke("getPublicKey",e)}async revealCounterpartyKeyLinkage(e){return await this.invoke("revealCounterpartyKeyLinkage",e)}async revealSpecificKeyLinkage(e){return await this.invoke("revealSpecificKeyLinkage",e)}async encrypt(e){return await this.invoke("encrypt",e)}async decrypt(e){return await this.invoke("decrypt",e)}async createHmac(e){return await this.invoke("createHmac",e)}async verifyHmac(e){return await this.invoke("verifyHmac",e)}async createSignature(e){return await this.invoke("createSignature",e)}async verifySignature(e){return await this.invoke("verifySignature",e)}async acquireCertificate(e){return await this.invoke("acquireCertificate",e)}async listCertificates(e){return await this.invoke("listCertificates",e)}async proveCertificate(e){return await this.invoke("proveCertificate",e)}async relinquishCertificate(e){return await this.invoke("relinquishCertificate",e)}async discoverByIdentityKey(e){return await this.invoke("discoverByIdentityKey",e)}async discoverByAttributes(e){return await this.invoke("discoverByAttributes",e)}async isAuthenticated(e){return await this.invoke("isAuthenticated",e)}async waitForAuthentication(e){return await this.invoke("waitForAuthentication",e)}async getHeight(e){return await this.invoke("getHeight",e)}async getHeaderForHeight(e){return await this.invoke("getHeaderForHeight",e)}async getNetwork(e){return await this.invoke("getNetwork",e)}async getVersion(e){return await this.invoke("getVersion",e)}}let wn=class VI{constructor(e,n,r,i,s,o,a){M(this,"type");M(this,"serialNumber");M(this,"subject");M(this,"certifier");M(this,"revocationOutpoint");M(this,"fields");M(this,"signature");this.type=e,this.serialNumber=n,this.subject=r,this.certifier=i,this.revocationOutpoint=s,this.fields=o,this.signature=a}toBinary(e=!0){const n=new ne,r=U(this.type,"base64");n.write(r);const i=U(this.serialNumber,"base64");n.write(i);const s=U(this.subject,"hex");n.write(s);const o=U(this.certifier,"hex");n.write(o);const[a,l]=this.revocationOutpoint.split("."),c=U(a,"hex");n.write(c),n.writeVarIntNum(Number(l));const u=Object.keys(this.fields).sort();n.writeVarIntNum(u.length);for(const d of u){const f=this.fields[d],h=U(d,"utf8");n.writeVarIntNum(h.length),n.write(h);const p=U(f,"utf8");n.writeVarIntNum(p.length),n.write(p)}if(e&&(this.signature??"").length>0){const d=U(this.signature,"hex");n.write(d)}return n.toArray()}static fromBinary(e){const n=new Ge(e),r=n.read(32),i=Ae(r),s=n.read(32),o=Ae(s),a=n.read(33),l=Z(a),c=n.read(33),u=Z(c),d=n.read(32),f=Z(d),h=n.readVarIntNum(),p=`${f}.${h}`,g=n.readVarIntNum(),w={};for(let m=0;m<g;m++){const y=n.readVarIntNum(),b=n.read(y),x=re(b),I=n.readVarIntNum(),k=n.read(I),S=re(k);w[x]=S}let v;if(!n.eof()){const m=n.read();v=Sn.fromDER(m).toString("hex")}return new VI(i,o,l,u,p,w,v)}async verify(){const e=new rm("anyone"),n=this.toBinary(!1),r=this.signature??"",{valid:i}=await e.verifySignature({signature:U(r,"hex"),data:n,protocolID:[2,"certificate signature"],keyID:`${this.type} ${this.serialNumber}`,counterparty:this.certifier});return i}async sign(e){if(this.signature!=null&&this.signature.length>0)throw new Error(`Certificate has already been signed! Signature present: ${this.signature}`);this.certifier=(await e.getPublicKey({identityKey:!0})).publicKey;const n=this.toBinary(!1),{signature:r}=await e.createSignature({data:n,protocolID:[2,"certificate signature"],keyID:`${this.type} ${this.serialNumber}`});this.signature=Z(r)}static getCertificateFieldEncryptionDetails(e,n){return{protocolID:[2,"certificate field encryption"],keyID:`${n??"unknown"} ${e}`}}};class sm extends wn{constructor(n,r,i,s,o,a,l,c){super(n,r,i,s,o,a,c);M(this,"masterKeyring");for(const u of Object.keys(a))if(l[u]===void 0||l[u]==="")throw new Error(`Master keyring must contain a value for every field. Missing or empty key for field: "${u}".`);this.masterKeyring=l}static async createCertificateFields(n,r,i){const s={},o={};for(const[a,l]of Object.entries(i)){const c=Cr.fromRandom(),u=c.encrypt(U(l,"utf8"));s[a]=Ae(u);const{ciphertext:d}=await n.encrypt({plaintext:c.toArray(),...wn.getCertificateFieldEncryptionDetails(a),counterparty:r});o[a]=Ae(d)}return{certificateFields:s,masterKeyring:o}}static async createKeyringForVerifier(n,r,i,s,o,a,l){if(!Array.isArray(o))throw new Error("fieldsToReveal must be an array of strings");const c={};for(const u of o){if(s[u]===void 0||s[u]===null||s[u]==="")throw new Error(`Fields to reveal must be a subset of the certificate fields. Missing the "${u}" field.`);const d=(await this.decryptField(n,a,u,s[u],r)).fieldRevelationKey,{ciphertext:f}=await n.encrypt({plaintext:d,...wn.getCertificateFieldEncryptionDetails(u,l),counterparty:i});c[u]=Ae(f)}return c}static async issueCertificateForSubject(n,r,i,s,o=async l=>"Certificate revocation not tracked.",a){const l=a??Ae(It(32)),{certificateFields:c,masterKeyring:u}=await this.createCertificateFields(n,r,i),d=await o(l),f=new sm(s,l,r,(await n.getPublicKey({identityKey:!0})).publicKey,d,c,u);return await f.sign(n),f}static async decryptFields(n,r,i,s){if(r==null||Object.keys(r).length===0)throw new Error("A MasterCertificate must have a valid masterKeyring!");try{const o={};for(const a of Object.keys(i))o[a]=(await this.decryptField(n,r,a,i[a],s)).decryptedFieldValue;return o}catch{throw new Error("Failed to decrypt all master certificate fields.")}}static async decryptField(n,r,i,s,o){if(r==null||Object.keys(r).length===0)throw new Error("A MasterCertificate must have a valid masterKeyring!");try{const{plaintext:a}=await n.decrypt({ciphertext:U(r[i],"base64"),...wn.getCertificateFieldEncryptionDetails(i),counterparty:o}),l=new Cr(a).decrypt(U(s,"base64"));return{fieldRevelationKey:a,decryptedFieldValue:re(l)}}catch{throw new Error("Failed to decrypt certificate field!")}}}class om extends wn{constructor(n,r,i,s,o,a,l,c,u){super(n,r,i,s,o,a,c);M(this,"keyring");M(this,"decryptedFields");this.keyring=l,this.decryptedFields=u}async decryptFields(n){if(this.keyring==null||Object.keys(this.keyring).length===0)throw new Error("A keyring is required to decrypt certificate fields for the verifier.");try{const r={};for(const i in this.keyring){const{plaintext:s}=await n.decrypt({ciphertext:U(this.keyring[i],"base64"),...wn.getCertificateFieldEncryptionDetails(i,this.serialNumber),counterparty:this.subject}),o=new Cr(s).decrypt(U(this.fields[i],"base64"));r[i]=re(o)}return r}catch(r){throw new Error(`Failed to decrypt selectively revealed certificate fields using keyring: ${String(r instanceof Error?r.message:r)}`)}}}class NN extends rm{constructor(n){super(n);M(this,"keyDeriver");if(n instanceof Ya)this.keyDeriver=n;else if(typeof n=="string"||n instanceof st)this.keyDeriver=new Ya(n);else throw new Error("Invalid key deriver provided")}async isAuthenticated(){throw new Error("not implemented")}async waitForAuthentication(){throw new Error("not implemented")}async getNetwork(){throw new Error("not implemented")}async getVersion(){throw new Error("not implemented")}async getPublicKey(n){if(n.privileged===!0)throw new Error("no privilege support");if(n.identityKey===!0){if(this.keyDeriver===null||this.keyDeriver===void 0)throw new Error("keyDeriver is not initialized");return{publicKey:this.keyDeriver.rootKey.toPublicKey().toString()}}else{if(n.protocolID==null||typeof n.keyID!="string"||n.keyID.trim()==="")throw new Error("protocolID and keyID are required if identityKey is false or undefined.");if(this.keyDeriver===null||this.keyDeriver===void 0)throw new Error("keyDeriver is not initialized");return{publicKey:this.keyDeriver.derivePublicKey(n.protocolID,n.keyID,typeof n.counterparty=="string"&&n.counterparty.trim()!==""?n.counterparty:"self",!!n.forSelf).toString()}}}async createAction(){throw new Error("not implemented")}async signAction(){throw new Error("not implemented")}async abortAction(){throw new Error("not implemented")}async listActions(){throw new Error("not implemented")}async internalizeAction(){throw new Error("not implemented")}async listOutputs(){throw new Error("not implemented")}async relinquishOutput(){throw new Error("not implemented")}async acquireCertificate(){throw new Error("not implemented")}async listCertificates(){throw new Error("not implemented")}async proveCertificate(){throw new Error("not implemented")}async relinquishCertificate(){throw new Error("not implemented")}async discoverByIdentityKey(){throw new Error("not implemented")}async discoverByAttributes(){throw new Error("not implemented")}async getHeight(){throw new Error("not implemented")}async getHeaderForHeight(){throw new Error("not implemented")}}class am{constructor(){M(this,"sessionNonceToSession");M(this,"identityKeyToNonces");this.sessionNonceToSession=new Map,this.identityKeyToNonces=new Map}addSession(e){if(typeof e.sessionNonce!="string")throw new Error("Invalid session: sessionNonce is required to add a session.");if(this.sessionNonceToSession.set(e.sessionNonce,e),typeof e.peerIdentityKey=="string"){let n=this.identityKeyToNonces.get(e.peerIdentityKey);n==null&&(n=new Set,this.identityKeyToNonces.set(e.peerIdentityKey,n)),n.add(e.sessionNonce)}}updateSession(e){this.removeSession(e),this.addSession(e)}getSession(e){const n=this.sessionNonceToSession.get(e);if(n!=null)return n;const r=this.identityKeyToNonces.get(e);if(r==null||r.size===0)return;let i;for(const s of r){const o=this.sessionNonceToSession.get(s);o!=null&&(i==null||(o.lastUpdate??0)>(i.lastUpdate??0))&&(i=o)}return i}removeSession(e){if(typeof e.sessionNonce=="string"&&this.sessionNonceToSession.delete(e.sessionNonce),typeof e.peerIdentityKey=="string"){const n=this.identityKeyToNonces.get(e.peerIdentityKey);n!=null&&(n.delete(e.sessionNonce??""),n.size===0&&this.identityKeyToNonces.delete(e.peerIdentityKey))}}hasSession(e){if(this.sessionNonceToSession.has(e))return!0;const r=this.identityKeyToNonces.get(e);return r!=null&&r.size>0}}async function ia(t,e,n="self"){const r=U(t,"base64"),i=r.slice(0,16),s=r.slice(16),{valid:o}=await e.verifyHmac({data:i,hmac:s,protocolID:[2,"server hmac"],keyID:re(i),counterparty:n});return o}async function du(t,e="self"){const n=It(16),{hmac:r}=await t.createHmac({protocolID:[2,"server hmac"],keyID:re(n),data:n,counterparty:e}),i=[...n,...r];return Ae(i)}const wl=async(t,e,n)=>{const r=await t.listCertificates({certifiers:e.certifiers,types:Object.keys(e.types)});return await Promise.all(r.certificates.map(async i=>{const{keyringForVerifier:s}=await t.proveCertificate({certificate:i,fieldsToReveal:e.types[i.type],verifier:n});return new om(i.type,i.serialNumber,i.subject,i.certifier,i.revocationOutpoint,i.fields,s,i.signature)}))},i0=async(t,e,n)=>{if(e.certificates==null||e.certificates.length===0)throw new Error("No certificates were provided in the AuthMessage.");await Promise.all(e.certificates.map(async r=>{if(r.subject!==e.identityKey)throw new Error(`The subject of one of your certificates ("${r.subject}") is not the same as the request sender ("${e.identityKey}").`);const i=new om(r.type,r.serialNumber,r.subject,r.certifier,r.revocationOutpoint,r.fields,r.keyring,r.signature);if(!await i.verify())throw new Error(`The signature for the certificate with serial number ${i.serialNumber} is invalid!`);if(n!=null){const{certifiers:o,types:a}=n;if(!o.includes(i.certifier))throw new Error(`Certificate with serial number ${i.serialNumber} has an unrequested certifier: ${i.certifier}`);if(a[i.type]==null)throw new Error(`Certificate with type ${i.type} was not requested`)}await i.decryptFields(t)}))},pi="0.1";class s0{constructor(e,n,r,i,s){M(this,"sessionManager");M(this,"transport");M(this,"wallet");M(this,"certificatesToRequest");M(this,"onGeneralMessageReceivedCallbacks",new Map);M(this,"onCertificatesReceivedCallbacks",new Map);M(this,"onCertificateRequestReceivedCallbacks",new Map);M(this,"onInitialResponseReceivedCallbacks",new Map);M(this,"callbackIdCounter",0);M(this,"autoPersistLastSession",!0);M(this,"lastInteractedWithPeer");this.wallet=e,this.transport=n,this.certificatesToRequest=r??{certifiers:[],types:{}},this.transport.onData(this.handleIncomingMessage.bind(this)).catch(console.error),this.sessionManager=i??new am,s===!1?this.autoPersistLastSession=!1:this.autoPersistLastSession=!0}async toPeer(e,n,r){this.autoPersistLastSession&&typeof this.lastInteractedWithPeer=="string"&&typeof n!="string"&&(n=this.lastInteractedWithPeer);const i=await this.getAuthenticatedSession(n,r),s=Ae(It(32)),{signature:o}=await this.wallet.createSignature({data:e,protocolID:[2,"auth message signature"],keyID:`${s} ${i.peerNonce??""}`,counterparty:i.peerIdentityKey}),a={version:pi,messageType:"general",identityKey:(await this.wallet.getPublicKey({identityKey:!0})).publicKey,nonce:s,yourNonce:i.peerNonce,payload:e,signature:o};i.lastUpdate=Date.now(),this.sessionManager.updateSession(i);try{await this.transport.send(a)}catch(l){const c=new Error(`Failed to send message to peer ${i.peerIdentityKey??"unknown"}: ${String(l.message)}`);throw c.stack=l.stack,c}}async requestCertificates(e,n,r=1e4){this.autoPersistLastSession&&typeof this.lastInteractedWithPeer=="string"&&typeof n!="string"&&(n=this.lastInteractedWithPeer);const i=await this.getAuthenticatedSession(n,r),s=Ae(It(32)),{signature:o}=await this.wallet.createSignature({data:U(JSON.stringify(e),"utf8"),protocolID:[2,"auth message signature"],keyID:`${s} ${i.peerNonce??""}`,counterparty:i.peerIdentityKey}),a={version:pi,messageType:"certificateRequest",identityKey:(await this.wallet.getPublicKey({identityKey:!0})).publicKey,nonce:s,initialNonce:i.sessionNonce,yourNonce:i.peerNonce,requestedCertificates:e,signature:o};i.lastUpdate=Date.now(),this.sessionManager.updateSession(i);try{await this.transport.send(a)}catch(l){throw new Error(`Failed to send certificate request message to peer ${i.peerIdentityKey??"unknown"}: ${String(l.message)}`)}}async getAuthenticatedSession(e,n){if(this.transport===void 0)throw new Error("Peer transport is not connected!");let r;if(typeof e=="string"&&(r=this.sessionManager.getSession(e)),r==null||!r.isAuthenticated){const i=await this.initiateHandshake(e,n);if(r=this.sessionManager.getSession(i),r==null||!r.isAuthenticated)throw new Error("Unable to establish mutual authentication with peer!")}return r}listenForGeneralMessages(e){const n=this.callbackIdCounter++;return this.onGeneralMessageReceivedCallbacks.set(n,e),n}stopListeningForGeneralMessages(e){this.onGeneralMessageReceivedCallbacks.delete(e)}listenForCertificatesReceived(e){const n=this.callbackIdCounter++;return this.onCertificatesReceivedCallbacks.set(n,e),n}stopListeningForCertificatesReceived(e){this.onCertificatesReceivedCallbacks.delete(e)}listenForCertificatesRequested(e){const n=this.callbackIdCounter++;return this.onCertificateRequestReceivedCallbacks.set(n,e),n}stopListeningForCertificatesRequested(e){this.onCertificateRequestReceivedCallbacks.delete(e)}async initiateHandshake(e,n=1e4){const r=await du(this.wallet),i=Date.now();this.sessionManager.addSession({isAuthenticated:!1,sessionNonce:r,peerIdentityKey:e,lastUpdate:i});const s={version:pi,messageType:"initialRequest",identityKey:(await this.wallet.getPublicKey({identityKey:!0})).publicKey,initialNonce:r,requestedCertificates:this.certificatesToRequest};return await this.transport.send(s),await this.waitForInitialResponse(r,n)}async waitForInitialResponse(e,n=1e4){return await new Promise((r,i)=>{const s=this.listenForInitialResponse(e,a=>{clearTimeout(o),this.stopListeningForInitialResponses(s),r(a)}),o=setTimeout(()=>{this.stopListeningForInitialResponses(s),i(new Error("Initial response timed out."))},n)})}listenForInitialResponse(e,n){const r=this.callbackIdCounter++;return this.onInitialResponseReceivedCallbacks.set(r,{callback:n,sessionNonce:e}),r}stopListeningForInitialResponses(e){this.onInitialResponseReceivedCallbacks.delete(e)}async handleIncomingMessage(e){if(typeof e.version!="string"||e.version!==pi){console.error(`Invalid or unsupported message auth version! Received: ${e.version}, expected: ${pi}`);return}switch(e.messageType){case"initialRequest":await this.processInitialRequest(e);break;case"initialResponse":await this.processInitialResponse(e);break;case"certificateRequest":await this.processCertificateRequest(e);break;case"certificateResponse":await this.processCertificateResponse(e);break;case"general":await this.processGeneralMessage(e);break;default:console.error(`Unknown message type of ${String(e.messageType)} from ${String(e.identityKey)}`)}}async processInitialRequest(e){if(typeof e.identityKey!="string"||typeof e.initialNonce!="string"||e.initialNonce==="")throw new Error("Missing required fields in initialRequest message.");const n=await du(this.wallet),r=Date.now();this.sessionManager.addSession({isAuthenticated:!0,sessionNonce:n,peerNonce:e.initialNonce,peerIdentityKey:e.identityKey,lastUpdate:r});let i;e.requestedCertificates!=null&&Array.isArray(e.requestedCertificates.certifiers)&&e.requestedCertificates.certifiers.length>0&&(this.onCertificateRequestReceivedCallbacks.size>0?this.onCertificateRequestReceivedCallbacks.forEach(a=>{a(e.identityKey,e.requestedCertificates)}):i=await wl(this.wallet,e.requestedCertificates,e.identityKey));const{signature:s}=await this.wallet.createSignature({data:U(e.initialNonce+n,"base64"),protocolID:[2,"auth message signature"],keyID:`${e.initialNonce} ${n}`,counterparty:e.identityKey}),o={version:pi,messageType:"initialResponse",identityKey:(await this.wallet.getPublicKey({identityKey:!0})).publicKey,initialNonce:n,yourNonce:e.initialNonce,certificates:i,requestedCertificates:this.certificatesToRequest,signature:s};this.lastInteractedWithPeer===void 0&&(this.lastInteractedWithPeer=e.identityKey),await this.transport.send(o)}async processInitialResponse(e){var o,a,l;if(!await ia(e.yourNonce,this.wallet))throw new Error(`Initial response nonce verification failed from peer: ${e.identityKey}`);const r=this.sessionManager.getSession(e.yourNonce);if(r==null)throw new Error(`Peer session not found for peer: ${e.identityKey}`);const i=U((r.sessionNonce??"")+(e.initialNonce??""),"base64"),{valid:s}=await this.wallet.verifySignature({data:i,signature:e.signature,protocolID:[2,"auth message signature"],keyID:`${r.sessionNonce??""} ${e.initialNonce??""}`,counterparty:e.identityKey});if(!s)throw new Error(`Unable to verify initial response signature for peer: ${e.identityKey}`);if(r.peerNonce=e.initialNonce,r.peerIdentityKey=e.identityKey,r.isAuthenticated=!0,r.lastUpdate=Date.now(),this.sessionManager.updateSession(r),((a=(o=this.certificatesToRequest)==null?void 0:o.certifiers)==null?void 0:a.length)>0&&((l=e.certificates)==null?void 0:l.length)>0&&(await i0(this.wallet,e,this.certificatesToRequest),this.onCertificatesReceivedCallbacks.forEach(c=>c(e.identityKey,e.certificates))),this.lastInteractedWithPeer=e.identityKey,this.onInitialResponseReceivedCallbacks.forEach(c=>{c.sessionNonce===r.sessionNonce&&c.callback(r.sessionNonce)}),e.requestedCertificates!=null&&Array.isArray(e.requestedCertificates.certifiers)&&e.requestedCertificates.certifiers.length>0)if(this.onCertificateRequestReceivedCallbacks.size>0)this.onCertificateRequestReceivedCallbacks.forEach(c=>{c(e.identityKey,e.requestedCertificates)});else{const c=await wl(this.wallet,e.requestedCertificates,e.identityKey);await this.sendCertificateResponse(e.identityKey,c)}}async processCertificateRequest(e){if(!await ia(e.yourNonce,this.wallet))throw new Error(`Unable to verify nonce for certificate request message from: ${e.identityKey}`);const r=this.sessionManager.getSession(e.yourNonce);if(r==null)throw new Error(`Session not found for nonce: ${e.yourNonce}`);const{valid:i}=await this.wallet.verifySignature({data:U(JSON.stringify(e.requestedCertificates),"utf8"),signature:e.signature,protocolID:[2,"auth message signature"],keyID:`${e.nonce??""} ${r.sessionNonce??""}`,counterparty:r.peerIdentityKey});if(!i)throw new Error(`Invalid signature in certificate request message from ${r.peerIdentityKey}`);if(r.lastUpdate=Date.now(),this.sessionManager.updateSession(r),e.requestedCertificates!=null&&Array.isArray(e.requestedCertificates.certifiers)&&e.requestedCertificates.certifiers.length>0)if(this.onCertificateRequestReceivedCallbacks.size>0)this.onCertificateRequestReceivedCallbacks.forEach(s=>{s(e.identityKey,e.requestedCertificates)});else{const s=await wl(this.wallet,e.requestedCertificates,e.identityKey);await this.sendCertificateResponse(e.identityKey,s)}}async sendCertificateResponse(e,n){const r=await this.getAuthenticatedSession(e),i=Ae(It(32)),{signature:s}=await this.wallet.createSignature({data:U(JSON.stringify(n),"utf8"),protocolID:[2,"auth message signature"],keyID:`${i} ${r.peerNonce??""}`,counterparty:r.peerIdentityKey}),o={version:pi,messageType:"certificateResponse",identityKey:(await this.wallet.getPublicKey({identityKey:!0})).publicKey,nonce:i,initialNonce:r.sessionNonce,yourNonce:r.peerNonce,certificates:n,signature:s};r.lastUpdate=Date.now(),this.sessionManager.updateSession(r);try{await this.transport.send(o)}catch(a){const l=a instanceof Error?a.message:String(a);throw new Error(`Failed to send certificate response message to peer ${r.peerIdentityKey??"unknown"}: ${l}`)}}async processCertificateResponse(e){if(!await ia(e.yourNonce,this.wallet))throw new Error(`Unable to verify nonce for certificate response from: ${e.identityKey}`);const r=this.sessionManager.getSession(e.yourNonce);if(r==null)throw new Error(`Session not found for nonce: ${e.yourNonce}`);const{valid:i}=await this.wallet.verifySignature({data:U(JSON.stringify(e.certificates),"utf8"),signature:e.signature,protocolID:[2,"auth message signature"],keyID:`${e.nonce??""} ${r.sessionNonce??""}`,counterparty:e.identityKey});if(!i)throw new Error(`Unable to verify certificate response signature for peer: ${e.identityKey}`);await i0(this.wallet,e,e.requestedCertificates),this.onCertificatesReceivedCallbacks.forEach(s=>{s(e.identityKey,e.certificates??[])}),r.lastUpdate=Date.now(),this.sessionManager.updateSession(r)}async processGeneralMessage(e){if(!await ia(e.yourNonce,this.wallet))throw new Error(`Unable to verify nonce for general message from: ${e.identityKey}`);const r=this.sessionManager.getSession(e.yourNonce);if(r==null)throw new Error(`Session not found for nonce: ${e.yourNonce}`);const{valid:i}=await this.wallet.verifySignature({data:e.payload,signature:e.signature,protocolID:[2,"auth message signature"],keyID:`${e.nonce??""} ${r.sessionNonce??""}`,counterparty:r.peerIdentityKey});if(!i)throw new Error(`Invalid signature in generalMessage from ${r.peerIdentityKey}`);r.lastUpdate=Date.now(),this.sessionManager.updateSession(r),this.lastInteractedWithPeer=e.identityKey,this.onGeneralMessageReceivedCallbacks.forEach(s=>{s(e.identityKey,e.payload??[])})}}const CN=[200,402],MN=typeof window<"u"?fetch.bind(window):fetch;class o0{constructor(e,n=MN){M(this,"onDataCallback");M(this,"fetchClient");M(this,"baseUrl");this.fetchClient=n,this.baseUrl=e}async send(e){if(!this.onDataCallback)throw new Error("Listen before you start speaking. God gave you two ears and one mouth for a reason.");if(e.messageType!=="general"){const n=await this.fetchClient(`${this.baseUrl}/.well-known/auth`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(n.ok&&this.onDataCallback){const r=await n.json();(r==null?void 0:r.status)!=="certificate received"&&this.onDataCallback(r)}else throw new Error("HTTP server failed to authenticate")}else{const n=this.deserializeRequestPayload(e.payload),r=`${this.baseUrl}${n.urlPostfix}`;let i=n;if(typeof n.headers!="object"&&(i.headers={}),i.headers["x-bsv-auth-version"]=e.version,i.headers["x-bsv-auth-identity-key"]=e.identityKey,i.headers["x-bsv-auth-nonce"]=e.nonce,i.headers["x-bsv-auth-your-nonce"]=e.yourNonce,i.headers["x-bsv-auth-signature"]=Z(e.signature),i.headers["x-bsv-auth-request-id"]=n.requestId,i.body){const d=i.headers;if(!d["content-type"])throw new Error("Content-Type header is required for requests with a body.");const f=d["content-type"];f.includes("application/json")||f.includes("application/x-www-form-urlencoded")||f.includes("text/plain")?i.body=re(i.body):i.body=new Uint8Array(i.body)}const s=await this.fetchClient(r,{method:i.method,headers:i.headers,body:i.body});if(!CN.includes(s.status)){let d;try{d=await s.json()}catch{const f=await s.text().catch(()=>"");throw new Error(`HTTP ${s.status} - ${f||"Unknown error"}`)}if((d==null?void 0:d.status)==="error"&&typeof d.description=="string"){const f=`HTTP ${s.status} - ${d.description}`;throw new Error(d.code?`${f} (code: ${d.code})`:f)}throw new Error(`HTTP ${s.status} - ${JSON.stringify(d)}`)}const o=await s.arrayBuffer(),a=new ne;a.write(U(s.headers.get("x-bsv-auth-request-id"),"base64")),a.writeVarIntNum(s.status);const l=[],c=[];s.headers.forEach((d,f)=>{const h=f.toLowerCase();(h.startsWith("x-bsv-")||h==="authorization")&&(h.startsWith("x-bsv-auth")||c.push([h,d]))}),c.sort(([d],[f])=>d.localeCompare(f)),l.push(...c),a.writeVarIntNum(l.length);for(let d=0;d<l.length;d++){const f=U(l[d][0],"utf8");a.writeVarIntNum(f.length),a.write(f);const h=U(l[d][1],"utf8");a.writeVarIntNum(h.length),a.write(h)}if(o){const d=Array.from(new Uint8Array(o));a.writeVarIntNum(d.length),a.write(d)}else a.writeVarIntNum(-1);const u={version:s.headers.get("x-bsv-auth-version"),messageType:s.headers.get("x-bsv-auth-message-type")==="certificateRequest"?"certificateRequest":"general",identityKey:s.headers.get("x-bsv-auth-identity-key"),nonce:s.headers.get("x-bsv-auth-nonce"),yourNonce:s.headers.get("x-bsv-auth-your-nonce"),requestedCertificates:JSON.parse(s.headers.get("x-bsv-auth-requested-certificates")),payload:a.toArray(),signature:U(s.headers.get("x-bsv-auth-signature"),"hex")};if(!u.version)throw new Error("HTTP server failed to authenticate");this.onDataCallback(u)}}async onData(e){this.onDataCallback=n=>{e(n)}}deserializeRequestPayload(e){const n=new Ge(e),r=Ae(n.read(32)),i=n.readVarIntNum();let s="GET";i>0&&(s=re(n.read(i)));const o=n.readVarIntNum();let a="";o>0&&(a=re(n.read(o)));const l=n.readVarIntNum();let c="";l>0&&(c=re(n.read(l)));const u={},d=n.readVarIntNum();if(d>0)for(let p=0;p<d;p++){const g=n.readVarIntNum(),w=n.read(g),v=re(w),m=n.readVarIntNum(),y=n.read(m),b=re(y);u[v]=b}let f;const h=n.readVarIntNum();return h>0&&(f=n.read(h)),{urlPostfix:a+c,method:s,headers:u,body:f,requestId:r}}}const aw="1.0";class BN{constructor(e,n,r){M(this,"sessionManager");M(this,"wallet");M(this,"callbacks",{});M(this,"certificatesReceived",[]);M(this,"requestedCertificates");M(this,"peers",{});this.wallet=e,this.requestedCertificates=n,this.sessionManager=r||new am}async fetch(e,n={}){if(n.retryCounter){if(n.retryCounter<=0)throw new Error("Request failed after maximum number of retries.");n.retryCounter--}const r=await new Promise(async(i,s)=>{try{const{method:o="GET",headers:a={},body:l}=n,c=new URL(e),u=c.origin;let d;if(typeof this.peers[u]>"u"){const w=new o0(u);d={peer:new s0(this.wallet,w,this.requestedCertificates,this.sessionManager)},this.peers[u]=d;const v=this.peers[u].peer.listenForCertificatesReceived((m,y)=>{this.certificatesReceived.push(...y)})}else{if(this.peers[u].supportsMutualAuth===!1){try{const w=await this.handleFetchAndValidate(e,n,this.peers[u]);i(w)}catch(w){s(w)}return}d=this.peers[u]}const f=It(32),h=Ae(f),p=await this.serializeRequest(o,a,l,c,f);this.callbacks[h]={resolve:i,reject:s};const g=d.peer.listenForGeneralMessages((w,v)=>{const m=new Ge(v);if(Ae(m.read(32))!==h)return;d.peer.stopListeningForGeneralMessages(g),this.peers[u].identityKey=w,this.peers[u].supportsMutualAuth=!0;const b=m.readVarIntNum(),x={},I=m.readVarIntNum();if(I>0)for(let R=0;R<I;R++){const B=m.readVarIntNum(),T=m.read(B),N=re(T),L=m.readVarIntNum(),$=m.read(L),H=re($);x[N]=H}x["x-bsv-auth-identity-key"]=w;let k;const S=m.readVarIntNum();S>0&&(k=m.read(S));const P=new Response(k?new Uint8Array(k):null,{status:b,statusText:`${b}`,headers:new Headers(x)});this.callbacks[h].resolve(P),delete this.callbacks[h]});await d.peer.toPeer(p.toArray(),d.identityKey).catch(async w=>{if(w.message.includes("Session not found for nonce")){delete this.peers[u],n.retryCounter??(n.retryCounter=3);const v=await this.fetch(e,n);i(v)}if(w.message.includes("HTTP server failed to authenticate"))try{const v=await this.handleFetchAndValidate(e,n,d);i(v)}catch(v){s(v)}else s(w)})}catch(o){s(o)}});return r.status===402?await this.handlePaymentAndRetry(e,n,r):r}async sendCertificateRequest(e,n){const i=new URL(e).origin;let s;if(this.peers[i])s={peer:this.peers[i].peer};else{const o=new o0(i);s={peer:new s0(this.wallet,o,this.requestedCertificates,this.sessionManager)},this.peers[i]=s}return new Promise(async(o,a)=>{const l=s.peer.listenForCertificatesReceived((c,u)=>{s.peer.stopListeningForCertificatesReceived(l),this.certificatesReceived.push(...u),o(u)});try{await s.peer.requestCertificates(n,s.identityKey)}catch(c){s.peer.stopListeningForCertificatesReceived(l),a(c)}})}consumeReceivedCertificates(){return this.certificatesReceived.splice(0)}async serializeRequest(e,n,r,i,s){const o=new ne;if(o.write(s),o.writeVarIntNum(e.length),o.write(U(e)),i.pathname.length>0){const c=U(i.pathname);o.writeVarIntNum(c.length),o.write(c)}else o.writeVarIntNum(-1);if(i.search.length>0){const c=U(i.search);o.writeVarIntNum(c.length),o.write(c)}else o.writeVarIntNum(-1);const a=[];for(let[c,u]of Object.entries(n))if(c=c.toLowerCase(),c.startsWith("x-bsv-")||c==="content-type"||c==="authorization"){if(c.startsWith("x-bsv-auth"))throw new Error("No BSV auth headers allowed here!");a.push([c,u])}else throw new Error("Unsupported header in the simplified fetch implementation. Only content-type, authorization, and x-bsv-* headers are supported.");o.writeVarIntNum(a.length);for(let c=0;c<a.length;c++){const u=U(a[c][0],"utf8");o.writeVarIntNum(u.length),o.write(u);const d=U(a[c][1],"utf8");o.writeVarIntNum(d.length),o.write(d)}if(["POST","PUT","PATCH","DELETE"].includes(e.toUpperCase())&&r===void 0){const c=a.find(([u])=>u==="content-type");c&&c[1].includes("application/json")?r="{}":r=""}if(r){const c=await this.normalizeBodyToNumberArray(r);o.writeVarIntNum(c.length),o.write(c)}else o.writeVarIntNum(-1);return o}async handleFetchAndValidate(e,n,r){const i=await fetch(e,n);if(i.headers.forEach(s=>{if(s.toLocaleLowerCase().startsWith("x-bsv"))throw new Error("The server is trying to claim it has been authenticated when it has not!")}),i.ok)return r.supportsMutualAuth=!1,i;throw new Error(`Request failed with status: ${i.status}`)}async handlePaymentAndRetry(e,n={},r){const i=r.headers.get("x-bsv-payment-version");if(!i||i!==aw)throw new Error(`Unsupported x-bsv-payment-version response header. Client version: ${aw}, Server version: ${i}`);const s=r.headers.get("x-bsv-payment-satoshis-required");if(!s)throw new Error("Missing x-bsv-payment-satoshis-required response header.");const o=parseInt(s);if(isNaN(o)||o<=0)throw new Error("Invalid x-bsv-payment-satoshis-required response header value.");const a=r.headers.get("x-bsv-auth-identity-key");if(!a)throw new Error("Missing x-bsv-auth-identity-key response header.");const l=r.headers.get("x-bsv-payment-derivation-prefix");if(typeof l!="string"||l.length<1)throw new Error("Missing x-bsv-payment-derivation-prefix response header.");const c=await du(this.wallet),{publicKey:u}=await this.wallet.getPublicKey({protocolID:[2,"3241645161d8"],keyID:`${l} ${c}`,counterparty:a}),d=new em().lock(ut.fromString(u).toAddress()).toHex(),{tx:f}=await this.wallet.createAction({description:`Payment for request to ${new URL(e).origin}`,outputs:[{satoshis:o,lockingScript:d,customInstructions:JSON.stringify({derivationPrefix:l,derivationSuffix:c,payee:a}),outputDescription:"HTTP request payment"}],options:{randomizeOutputs:!1}});return n.headers=n.headers||{},n.headers["x-bsv-payment"]=JSON.stringify({derivationPrefix:l,derivationSuffix:c,transaction:Ae(f)}),n.retryCounter??(n.retryCounter=3),this.fetch(e,n)}async normalizeBodyToNumberArray(e){if(e==null)return[];if(typeof e=="object")return U(JSON.stringify(e,"utf8"));if(Array.isArray(e)&&e.every(n=>typeof n=="number"))return e;if(typeof e=="string")return U(e,"utf8");if(e instanceof ArrayBuffer||ArrayBuffer.isView(e)){const n=e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer);return Array.from(n)}if(e instanceof Blob){const n=await e.arrayBuffer();return Array.from(new Uint8Array(n))}if(e instanceof FormData){const n=[];e.forEach((i,s)=>{n.push([s,i.toString()])});const r=new URLSearchParams(n).toString();return U(r,"utf8")}if(e instanceof URLSearchParams)return U(e.toString(),"utf8");throw e instanceof ReadableStream?new Error("ReadableStream cannot be directly converted to number[]."):new Error("Unsupported body type in this SimplifiedFetch implementation.")}}var a0;(function(t){t[t.createAction=1]="createAction",t[t.signAction=2]="signAction",t[t.abortAction=3]="abortAction",t[t.listActions=4]="listActions",t[t.internalizeAction=5]="internalizeAction",t[t.listOutputs=6]="listOutputs",t[t.relinquishOutput=7]="relinquishOutput",t[t.getPublicKey=8]="getPublicKey",t[t.revealCounterpartyKeyLinkage=9]="revealCounterpartyKeyLinkage",t[t.revealSpecificKeyLinkage=10]="revealSpecificKeyLinkage",t[t.encrypt=11]="encrypt",t[t.decrypt=12]="decrypt",t[t.createHmac=13]="createHmac",t[t.verifyHmac=14]="verifyHmac",t[t.createSignature=15]="createSignature",t[t.verifySignature=16]="verifySignature",t[t.acquireCertificate=17]="acquireCertificate",t[t.listCertificates=18]="listCertificates",t[t.proveCertificate=19]="proveCertificate",t[t.relinquishCertificate=20]="relinquishCertificate",t[t.discoverByIdentityKey=21]="discoverByIdentityKey",t[t.discoverByAttributes=22]="discoverByAttributes",t[t.isAuthenticated=23]="isAuthenticated",t[t.waitForAuthentication=24]="waitForAuthentication",t[t.getHeight=25]="getHeight",t[t.getHeaderForHeight=26]="getHeaderForHeight",t[t.getNetwork=27]="getNetwork",t[t.getVersion=28]="getVersion"})(a0||(a0={}));const cm=a0;class c0{constructor(e){M(this,"wire");this.wire=e}async transmit(e,n="",r=[]){const i=new ne;i.writeUInt8(cm[e]);const s=U(n,"utf8");i.writeUInt8(s.length),i.write(s),r.length>0&&i.write(r);const o=i.toArray(),a=await this.wire.transmitToWallet(o),l=new Ge(a),c=l.readUInt8();if(c===0)return l.read();{const u=l.readVarIntNum(),d=l.read(u),f=re(d),h=l.readVarIntNum(),p=l.read(h),g=re(p);throw new im(f,c,g)}}async createAction(e,n){const r=new ne,i=U(e.description,"utf8");if(r.writeVarIntNum(i.length),r.write(i),e.inputBEEF!=null?(r.writeVarIntNum(e.inputBEEF.length),r.write(e.inputBEEF)):r.writeVarIntNum(-1),e.inputs!=null){r.writeVarIntNum(e.inputs.length);for(const h of e.inputs){if(r.write(this.encodeOutpoint(h.outpoint)),h.unlockingScript!=null&&h.unlockingScript!==""){const g=U(h.unlockingScript,"hex");r.writeVarIntNum(g.length),r.write(g)}else r.writeVarIntNum(-1),r.writeVarIntNum(h.unlockingScriptLength??0);const p=U(h.inputDescription,"utf8");r.writeVarIntNum(p.length),r.write(p),typeof h.sequenceNumber=="number"?r.writeVarIntNum(h.sequenceNumber):r.writeVarIntNum(-1)}}else r.writeVarIntNum(-1);if(e.outputs!=null){r.writeVarIntNum(e.outputs.length);for(const h of e.outputs){const p=U(h.lockingScript,"hex");r.writeVarIntNum(p.length),r.write(p),r.writeVarIntNum(h.satoshis);const g=U(h.outputDescription,"utf8");if(r.writeVarIntNum(g.length),r.write(g),h.basket!=null&&h.basket!==""){const w=U(h.basket,"utf8");r.writeVarIntNum(w.length),r.write(w)}else r.writeVarIntNum(-1);if(h.customInstructions!=null&&h.customInstructions!==""){const w=U(h.customInstructions,"utf8");r.writeVarIntNum(w.length),r.write(w)}else r.writeVarIntNum(-1);if(h.tags!=null){r.writeVarIntNum(h.tags.length);for(const w of h.tags){const v=U(w,"utf8");r.writeVarIntNum(v.length),r.write(v)}}else r.writeVarIntNum(-1)}}else r.writeVarIntNum(-1);if(typeof e.lockTime=="number"?r.writeVarIntNum(e.lockTime):r.writeVarIntNum(-1),typeof e.version=="number"?r.writeVarIntNum(e.version):r.writeVarIntNum(-1),e.labels!=null){r.writeVarIntNum(e.labels.length);for(const h of e.labels){const p=U(h,"utf8");r.writeVarIntNum(p.length),r.write(p)}}else r.writeVarIntNum(-1);if(e.options!=null){if(r.writeInt8(1),typeof e.options.signAndProcess=="boolean"?r.writeInt8(e.options.signAndProcess?1:0):r.writeInt8(-1),typeof e.options.acceptDelayedBroadcast=="boolean"?r.writeInt8(e.options.acceptDelayedBroadcast?1:0):r.writeInt8(-1),e.options.trustSelf==="known"?r.writeInt8(1):r.writeInt8(-1),e.options.knownTxids!=null){r.writeVarIntNum(e.options.knownTxids.length);for(const h of e.options.knownTxids){const p=U(h,"hex");r.write(p)}}else r.writeVarIntNum(-1);if(typeof e.options.returnTXIDOnly=="boolean"?r.writeInt8(e.options.returnTXIDOnly?1:0):r.writeInt8(-1),typeof e.options.noSend=="boolean"?r.writeInt8(e.options.noSend?1:0):r.writeInt8(-1),e.options.noSendChange!=null){r.writeVarIntNum(e.options.noSendChange.length);for(const h of e.options.noSendChange)r.write(this.encodeOutpoint(h))}else r.writeVarIntNum(-1);if(e.options.sendWith!=null){r.writeVarIntNum(e.options.sendWith.length);for(const h of e.options.sendWith){const p=U(h,"hex");r.write(p)}}else r.writeVarIntNum(-1);typeof e.options.randomizeOutputs=="boolean"?r.writeInt8(e.options.randomizeOutputs?1:0):r.writeInt8(-1)}else r.writeInt8(0);const s=await this.transmit("createAction",n,r.toArray()),o=new Ge(s),a={};if(o.readInt8()===1){const h=o.read(32);a.txid=Z(h)}if(o.readInt8()===1){const h=o.readVarIntNum();a.tx=o.read(h)}const u=o.readVarIntNum();if(u>=0){a.noSendChange=[];for(let h=0;h<u;h++){const p=this.readOutpoint(o);a.noSendChange.push(p)}}const d=o.readVarIntNum();if(d>=0){a.sendWithResults=[];for(let h=0;h<d;h++){const p=o.read(32),g=Z(p),w=o.readInt8();let v="unproven";w===1?v="unproven":w===2?v="sending":w===3&&(v="failed"),a.sendWithResults.push({txid:g,status:v})}}if(o.readInt8()===1){const h=o.readVarIntNum(),p=o.read(h),g=o.readVarIntNum(),w=o.read(g);a.signableTransaction={tx:p,reference:Ae(w)}}return a}async signAction(e,n){const r=new ne,i=Object.keys(e.spends);r.writeVarIntNum(i.length);for(const f of i){r.writeVarIntNum(Number(f));const h=e.spends[Number(f)],p=U(h.unlockingScript,"hex");r.writeVarIntNum(p.length),r.write(p),typeof h.sequenceNumber=="number"?r.writeVarIntNum(h.sequenceNumber):r.writeVarIntNum(-1)}const s=U(e.reference,"base64");if(r.writeVarIntNum(s.length),r.write(s),e.options!=null)if(r.writeInt8(1),typeof e.options.acceptDelayedBroadcast=="boolean"?r.writeInt8(e.options.acceptDelayedBroadcast?1:0):r.writeInt8(-1),typeof e.options.returnTXIDOnly=="boolean"?r.writeInt8(e.options.returnTXIDOnly?1:0):r.writeInt8(-1),typeof e.options.noSend=="boolean"?r.writeInt8(e.options.noSend?1:0):r.writeInt8(-1),e.options.sendWith!=null){r.writeVarIntNum(e.options.sendWith.length);for(const f of e.options.sendWith){const h=U(f,"hex");r.write(h)}}else r.writeVarIntNum(-1);else r.writeInt8(0);const o=await this.transmit("signAction",n,r.toArray()),a=new Ge(o),l={};if(a.readInt8()===1){const f=a.read(32);l.txid=Z(f)}if(a.readInt8()===1){const f=a.readVarIntNum();l.tx=a.read(f)}const d=a.readVarIntNum();if(d>=0){l.sendWithResults=[];for(let f=0;f<d;f++){const h=a.read(32),p=Z(h),g=a.readInt8();let w="unproven";g===1?w="unproven":g===2?w="sending":g===3&&(w="failed"),l.sendWithResults.push({txid:p,status:w})}}return l}async abortAction(e,n){return await this.transmit("abortAction",n,U(e.reference,"base64")),{aborted:!0}}async listActions(e,n){const r=new ne;r.writeVarIntNum(e.labels.length);for(const c of e.labels){const u=U(c,"utf8");r.writeVarIntNum(u.length),r.write(u)}e.labelQueryMode==="any"?r.writeInt8(1):e.labelQueryMode==="all"?r.writeInt8(2):r.writeInt8(-1);const i=[e.includeLabels,e.includeInputs,e.includeInputSourceLockingScripts,e.includeInputUnlockingScripts,e.includeOutputs,e.includeOutputLockingScripts];for(const c of i)typeof c=="boolean"?r.writeInt8(c?1:0):r.writeInt8(-1);typeof e.limit=="number"?r.writeVarIntNum(e.limit):r.writeVarIntNum(-1),typeof e.offset=="number"?r.writeVarIntNum(e.offset):r.writeVarIntNum(-1),r.writeInt8(typeof e.seekPermission=="boolean"?e.seekPermission?1:0:-1);const s=await this.transmit("listActions",n,r.toArray()),o=new Ge(s),a=o.readVarIntNum(),l=[];for(let c=0;c<a;c++){const u=o.read(32),d=Z(u),f=o.readVarIntNum(),h=o.readInt8();let p;switch(h){case 1:p="completed";break;case 2:p="unprocessed";break;case 3:p="sending";break;case 4:p="unproven";break;case 5:p="unsigned";break;case 6:p="nosend";break;case 7:p="nonfinal";break;default:throw new Error(`Unknown status code: ${h}`)}const g=o.readInt8()===1,w=o.readVarIntNum(),v=o.read(w),m=re(v),y={txid:d,satoshis:f,status:p,isOutgoing:g,description:m,version:0,lockTime:0},b=o.readVarIntNum();if(b>=0){y.labels=[];for(let k=0;k<b;k++){const S=o.readVarIntNum(),P=o.read(S);y.labels.push(re(P))}}y.version=o.readVarIntNum(),y.lockTime=o.readVarIntNum();const x=o.readVarIntNum();if(x>=0){y.inputs=[];for(let k=0;k<x;k++){const S=this.readOutpoint(o),P=o.readVarIntNum(),R=o.readVarIntNum();let B;if(R>=0){const C=o.read(R);B=Z(C)}const T=o.readVarIntNum();let N;if(T>=0){const C=o.read(T);N=Z(C)}const L=o.readVarIntNum(),$=o.read(L),H=re($),W=o.readVarIntNum();y.inputs.push({sourceOutpoint:S,sourceSatoshis:P,sourceLockingScript:B,unlockingScript:N,inputDescription:H,sequenceNumber:W})}}const I=o.readVarIntNum();if(I>=0){y.outputs=[];for(let k=0;k<I;k++){const S=o.readVarIntNum(),P=o.readVarIntNum(),R=o.readVarIntNum();let B;if(R>=0){const Y=o.read(R);B=Z(Y)}const T=o.readInt8()===1,N=o.readVarIntNum(),L=o.read(N),$=re(L),H=o.readVarIntNum();let W;if(H>=0){const Y=o.read(H);W=re(Y)}const C=o.readVarIntNum(),V=[];if(C>=0)for(let Y=0;Y<C;Y++){const z=o.readVarIntNum(),K=o.read(z);V.push(re(K))}const q=o.readVarIntNum();let G;if(q>=0){const Y=o.read(q);G=re(Y)}y.outputs.push({outputIndex:S,satoshis:P,lockingScript:B,spendable:T,outputDescription:$,basket:W,tags:V,customInstructions:G})}}l.push(y)}return{totalActions:a,actions:l}}async internalizeAction(e,n){var s,o,a;const r=new ne;r.writeVarIntNum(e.tx.length),r.write(e.tx),r.writeVarIntNum(e.outputs.length);for(const l of e.outputs)if(r.writeVarIntNum(l.outputIndex),l.protocol==="wallet payment"){if(l.paymentRemittance==null)throw new Error("Payment remittance is required for wallet payment");r.writeUInt8(1),r.write(U(l.paymentRemittance.senderIdentityKey,"hex"));const c=U(l.paymentRemittance.derivationPrefix,"base64");r.writeVarIntNum(c.length),r.write(c);const u=U(l.paymentRemittance.derivationSuffix,"base64");r.writeVarIntNum(u.length),r.write(u)}else{r.writeUInt8(2);const c=U((s=l.insertionRemittance)==null?void 0:s.basket,"utf8");if(r.writeVarIntNum(c.length),r.write(c),typeof((o=l.insertionRemittance)==null?void 0:o.customInstructions)=="string"&&l.insertionRemittance.customInstructions!==""){const u=U(l.insertionRemittance.customInstructions,"utf8");r.writeVarIntNum(u.length),r.write(u)}else r.writeVarIntNum(-1);if(typeof((a=l.insertionRemittance)==null?void 0:a.tags)=="object"){r.writeVarIntNum(l.insertionRemittance.tags.length);for(const u of l.insertionRemittance.tags){const d=U(u,"utf8");r.writeVarIntNum(d.length),r.write(d)}}else r.writeVarIntNum(0)}if(typeof e.labels=="object"){r.writeVarIntNum(e.labels.length);for(const l of e.labels){const c=U(l,"utf8");r.writeVarIntNum(c.length),r.write(c)}}else r.writeVarIntNum(-1);const i=U(e.description);return r.writeVarIntNum(i.length),r.write(i),r.writeInt8(typeof e.seekPermission=="boolean"?e.seekPermission?1:0:-1),await this.transmit("internalizeAction",n,r.toArray()),{accepted:!0}}async listOutputs(e,n){const r=new ne,i=U(e.basket,"utf8");if(r.writeVarIntNum(i.length),r.write(i),typeof e.tags=="object"){r.writeVarIntNum(e.tags.length);for(const d of e.tags){const f=U(d,"utf8");r.writeVarIntNum(f.length),r.write(f)}}else r.writeVarIntNum(0);e.tagQueryMode==="all"?r.writeInt8(1):e.tagQueryMode==="any"?r.writeInt8(2):r.writeInt8(-1),e.include==="locking scripts"?r.writeInt8(1):e.include==="entire transactions"?r.writeInt8(2):r.writeInt8(-1),typeof e.includeCustomInstructions=="boolean"?r.writeInt8(e.includeCustomInstructions?1:0):r.writeInt8(-1),typeof e.includeTags=="boolean"?r.writeInt8(e.includeTags?1:0):r.writeInt8(-1),typeof e.includeLabels=="boolean"?r.writeInt8(e.includeLabels?1:0):r.writeInt8(-1),typeof e.limit=="number"?r.writeVarIntNum(e.limit):r.writeVarIntNum(-1),typeof e.offset=="number"?r.writeVarIntNum(e.offset):r.writeVarIntNum(-1),r.writeInt8(typeof e.seekPermission=="boolean"?e.seekPermission?1:0:-1);const s=await this.transmit("listOutputs",n,r.toArray()),o=new Ge(s),a=o.readVarIntNum(),l=o.readVarIntNum();let c;l>=0&&(c=o.read(l));const u=[];for(let d=0;d<a;d++){const f=this.readOutpoint(o),h=o.readVarIntNum(),p={spendable:!0,outpoint:f,satoshis:h},g=o.readVarIntNum();g>=0&&(p.lockingScript=Z(o.read(g)));const w=o.readVarIntNum();w>=0&&(p.customInstructions=re(o.read(w)));const v=o.readVarIntNum();if(v!==-1){const y=[];for(let b=0;b<v;b++){const x=o.readVarIntNum();y.push(re(o.read(x)))}p.tags=y}const m=o.readVarIntNum();if(m!==-1){const y=[];for(let b=0;b<m;b++){const x=o.readVarIntNum();y.push(re(o.read(x)))}p.labels=y}u.push(p)}return{totalOutputs:a,BEEF:c,outputs:u}}async relinquishOutput(e,n){const r=new ne,i=U(e.basket,"utf8");return r.writeVarIntNum(i.length),r.write(i),r.write(this.encodeOutpoint(e.output)),await this.transmit("relinquishOutput",n,r.toArray()),{relinquished:!0}}encodeOutpoint(e){const n=new ne,[r,i]=e.split(".");return n.write(U(r,"hex")),n.writeVarIntNum(Number(i)),n.toArray()}readOutpoint(e){const n=Z(e.read(32)),r=e.readVarIntNum();return`${n}.${r}`}async getPublicKey(e,n){const r=new ne;r.writeUInt8(e.identityKey?1:0),e.identityKey?r.write(this.encodePrivilegedParams(e.privileged,e.privilegedReason)):(r.write(this.encodeKeyRelatedParams(e.protocolID??(e.protocolID=[uu.Silent,"default"]),e.keyID??(e.keyID=""),e.counterparty,e.privileged,e.privilegedReason)),typeof e.forSelf=="boolean"?r.writeInt8(e.forSelf?1:0):r.writeInt8(-1)),r.writeInt8(typeof e.seekPermission=="boolean"?e.seekPermission?1:0:-1);const i=await this.transmit("getPublicKey",n,r.toArray());return{publicKey:Z(i)}}async revealCounterpartyKeyLinkage(e,n){const r=new ne;r.write(this.encodePrivilegedParams(e.privileged,e.privilegedReason)),r.write(U(e.counterparty,"hex")),r.write(U(e.verifier,"hex"));const i=await this.transmit("revealCounterpartyKeyLinkage",n,r.toArray()),s=new Ge(i),o=Z(s.read(33)),a=Z(s.read(33)),l=Z(s.read(33)),c=s.readVarIntNum(),u=re(s.read(c)),d=s.readVarIntNum(),f=s.read(d),h=s.readVarIntNum(),p=s.read(h);return{prover:o,verifier:a,counterparty:l,revelationTime:u,encryptedLinkage:f,encryptedLinkageProof:p}}async revealSpecificKeyLinkage(e,n){const r=new ne;r.write(this.encodeKeyRelatedParams(e.protocolID,e.keyID,e.counterparty,e.privileged,e.privilegedReason)),r.write(U(e.verifier,"hex"));const i=await this.transmit("revealSpecificKeyLinkage",n,r.toArray()),s=new Ge(i),o=Z(s.read(33)),a=Z(s.read(33)),l=Z(s.read(33)),c=s.readUInt8(),u=s.readVarIntNum(),d=re(s.read(u)),f=s.readVarIntNum(),h=re(s.read(f)),p=s.readVarIntNum(),g=s.read(p),w=s.readVarIntNum(),v=s.read(w),m=s.readUInt8();return{prover:o,verifier:a,counterparty:l,protocolID:[c,d],keyID:h,encryptedLinkage:g,encryptedLinkageProof:v,proofType:m}}async encrypt(e,n){const r=new ne;return r.write(this.encodeKeyRelatedParams(e.protocolID,e.keyID,e.counterparty,e.privileged,e.privilegedReason)),r.writeVarIntNum(e.plaintext.length),r.write(e.plaintext),r.writeInt8(typeof e.seekPermission=="boolean"?e.seekPermission?1:0:-1),{ciphertext:await this.transmit("encrypt",n,r.toArray())}}async decrypt(e,n){const r=new ne;return r.write(this.encodeKeyRelatedParams(e.protocolID,e.keyID,e.counterparty,e.privileged,e.privilegedReason)),r.writeVarIntNum(e.ciphertext.length),r.write(e.ciphertext),r.writeInt8(typeof e.seekPermission=="boolean"?e.seekPermission?1:0:-1),{plaintext:await this.transmit("decrypt",n,r.toArray())}}async createHmac(e,n){const r=new ne;return r.write(this.encodeKeyRelatedParams(e.protocolID,e.keyID,e.counterparty,e.privileged,e.privilegedReason)),r.writeVarIntNum(e.data.length),r.write(e.data),r.writeInt8(typeof e.seekPermission=="boolean"?e.seekPermission?1:0:-1),{hmac:await this.transmit("createHmac",n,r.toArray())}}async verifyHmac(e,n){const r=new ne;return r.write(this.encodeKeyRelatedParams(e.protocolID,e.keyID,e.counterparty,e.privileged,e.privilegedReason)),r.write(e.hmac),r.writeVarIntNum(e.data.length),r.write(e.data),r.writeInt8(typeof e.seekPermission=="boolean"?e.seekPermission?1:0:-1),await this.transmit("verifyHmac",n,r.toArray()),{valid:!0}}async createSignature(e,n){const r=new ne;return r.write(this.encodeKeyRelatedParams(e.protocolID,e.keyID,e.counterparty,e.privileged,e.privilegedReason)),typeof e.data=="object"?(r.writeUInt8(1),r.writeVarIntNum(e.data.length),r.write(e.data)):(r.writeUInt8(2),r.write(e.hashToDirectlySign??(e.hashToDirectlySign=[]))),r.writeInt8(typeof e.seekPermission=="boolean"?e.seekPermission?1:0:-1),{signature:await this.transmit("createSignature",n,r.toArray())}}async verifySignature(e,n){const r=new ne;return r.write(this.encodeKeyRelatedParams(e.protocolID,e.keyID,e.counterparty,e.privileged,e.privilegedReason)),typeof e.forSelf=="boolean"?r.writeInt8(e.forSelf?1:0):r.writeInt8(-1),r.writeVarIntNum(e.signature.length),r.write(e.signature),typeof e.data=="object"?(r.writeUInt8(1),r.writeVarIntNum(e.data.length),r.write(e.data)):(r.writeUInt8(2),r.write(e.hashToDirectlyVerify??[])),r.writeInt8(typeof e.seekPermission=="boolean"?e.seekPermission?1:0:-1),await this.transmit("verifySignature",n,r.toArray()),{valid:!0}}encodeKeyRelatedParams(e,n,r,i,s){const o=new ne;o.writeUInt8(e[0]);const a=U(e[1],"utf8");o.writeVarIntNum(a.length),o.write(a);const l=U(n,"utf8");return o.writeVarIntNum(l.length),o.write(l),typeof r!="string"?o.writeUInt8(0):r==="self"?o.writeUInt8(11):r==="anyone"?o.writeUInt8(12):o.write(U(r,"hex")),o.write(this.encodePrivilegedParams(i,s)),o.toArray()}async acquireCertificate(e,n){var a;const r=new ne;r.write(U(e.type,"base64")),r.write(U(e.certifier,"hex"));const i=Object.entries(e.fields);r.writeVarIntNum(i.length);for(const[l,c]of i){const u=U(l,"utf8"),d=U(c,"utf8");r.writeVarIntNum(u.length),r.write(u),r.writeVarIntNum(d.length),r.write(d)}if(r.write(this.encodePrivilegedParams(e.privileged,e.privilegedReason)),r.writeUInt8(e.acquisitionProtocol==="direct"?1:2),e.acquisitionProtocol==="direct"){r.write(U(e.serialNumber,"base64")),r.write(this.encodeOutpoint(e.revocationOutpoint??""));const l=U(e.signature,"hex");r.writeVarIntNum(l.length),r.write(l);const c=e.keyringRevealer!=="certifier"?U(e.keyringRevealer,"hex"):[11];r.write(c);const u=Object.keys(e.keyringForSubject??{});r.writeVarIntNum(u.length);for(let d=0;d<u.length;d++){const f=U(u[d],"utf8");r.writeVarIntNum(f.length),r.write(f);const h=U((a=e.keyringForSubject)==null?void 0:a[u[d]],"base64");r.writeVarIntNum(h.length),r.write(h)}}else{const l=U(e.certifierUrl,"utf8");r.writeVarIntNum(l.length),r.write(l)}const s=await this.transmit("acquireCertificate",n,r.toArray()),o=wn.fromBinary(s);return{...o,signature:o.signature}}encodePrivilegedParams(e,n){const r=new ne;if(typeof e=="boolean"?r.writeInt8(e?1:0):r.writeInt8(-1),typeof n=="string"){const i=U(n,"utf8");r.writeInt8(i.length),r.write(i)}else r.writeInt8(-1);return r.toArray()}async listCertificates(e,n){const r=new ne;r.writeVarIntNum(e.certifiers.length);for(let l=0;l<e.certifiers.length;l++)r.write(U(e.certifiers[l],"hex"));r.writeVarIntNum(e.types.length);for(let l=0;l<e.types.length;l++)r.write(U(e.types[l],"base64"));typeof e.limit=="number"?r.writeVarIntNum(e.limit):r.writeVarIntNum(-1),typeof e.offset=="number"?r.writeVarIntNum(e.offset):r.writeVarIntNum(-1),r.write(this.encodePrivilegedParams(e.privileged,e.privilegedReason));const i=await this.transmit("listCertificates",n,r.toArray()),s=new Ge(i),o=s.readVarIntNum(),a=[];for(let l=0;l<o;l++){const c=s.readVarIntNum(),u=s.read(c),d=wn.fromBinary(u);a.push({...d,signature:d.signature})}return{totalCertificates:o,certificates:a}}async proveCertificate(e,n){const r=new ne,i=U(e.certificate.type,"base64");r.write(i);const s=U(e.certificate.subject,"hex");r.write(s);const o=U(e.certificate.serialNumber,"base64");r.write(o);const a=U(e.certificate.certifier,"hex");r.write(a);const l=this.encodeOutpoint(e.certificate.revocationOutpoint??"");r.write(l);const c=U(e.certificate.signature,"hex");r.writeVarIntNum(c.length),r.write(c);const u=Object.entries(e.certificate.fields??{});r.writeVarIntNum(u.length);for(const[g,w]of u){const v=U(g,"utf8"),m=U(w,"utf8");r.writeVarIntNum(v.length),r.write(v),r.writeVarIntNum(m.length),r.write(m)}r.writeVarIntNum(e.fieldsToReveal.length);for(const g of e.fieldsToReveal){const w=U(g,"utf8");r.writeVarIntNum(w.length),r.write(w)}r.write(U(e.verifier,"hex")),r.write(this.encodePrivilegedParams(e.privileged,e.privilegedReason));const d=await this.transmit("proveCertificate",n,r.toArray()),f=new Ge(d),h=f.readVarIntNum(),p={};for(let g=0;g<h;g++){const w=f.readVarIntNum(),v=re(f.read(w)),m=f.readVarIntNum();p[v]=Ae(f.read(m))}return{keyringForVerifier:p}}async relinquishCertificate(e,n){const r=new ne,i=U(e.type,"base64");r.write(i);const s=U(e.serialNumber,"base64");r.write(s);const o=U(e.certifier,"hex");return r.write(o),await this.transmit("relinquishCertificate",n,r.toArray()),{relinquished:!0}}parseDiscoveryResult(e){const n=new Ge(e),r=n.readVarIntNum(),i=[];for(let s=0;s<r;s++){const o=n.readVarIntNum(),a=n.read(o),l=wn.fromBinary(a),c=n.readVarIntNum(),u=re(n.read(c)),d=n.readVarIntNum(),f=re(n.read(d)),h=n.readVarIntNum(),p=re(n.read(h)),g=n.readUInt8(),w={},v=n.readVarIntNum();for(let b=0;b<v;b++){const x=n.readVarIntNum(),I=re(n.read(x)),k=n.readVarIntNum();w[I]=n.read(k)}const m={},y=n.readVarIntNum();for(let b=0;b<y;b++){const x=n.readVarIntNum(),I=re(n.read(x)),k=n.readVarIntNum();m[I]=re(n.read(k))}i.push({...l,signature:l.signature,certifierInfo:{iconUrl:f,name:u,description:p,trust:g},publiclyRevealedKeyring:w,decryptedFields:m})}return{totalCertificates:r,certificates:i}}async discoverByIdentityKey(e,n){const r=new ne;r.write(U(e.identityKey,"hex")),typeof e.limit=="number"?r.writeVarIntNum(e.limit):r.writeVarIntNum(-1),typeof e.offset=="number"?r.writeVarIntNum(e.offset):r.writeVarIntNum(-1),r.writeInt8(typeof e.seekPermission=="boolean"?e.seekPermission?1:0:-1);const i=await this.transmit("discoverByIdentityKey",n,r.toArray());return this.parseDiscoveryResult(i)}async discoverByAttributes(e,n){const r=new ne,i=Object.keys(e.attributes);r.writeVarIntNum(i.length);for(let o=0;o<i.length;o++)r.writeVarIntNum(i[o].length),r.write(U(i[o],"utf8")),r.writeVarIntNum(e.attributes[i[o]].length),r.write(U(e.attributes[i[o]],"utf8"));typeof e.limit=="number"?r.writeVarIntNum(e.limit):r.writeVarIntNum(-1),typeof e.offset=="number"?r.writeVarIntNum(e.offset):r.writeVarIntNum(-1),r.writeInt8(typeof e.seekPermission=="boolean"?e.seekPermission?1:0:-1);const s=await this.transmit("discoverByAttributes",n,r.toArray());return this.parseDiscoveryResult(s)}async isAuthenticated(e,n){return{authenticated:(await this.transmit("isAuthenticated",n))[0]===1}}async waitForAuthentication(e,n){return await this.transmit("waitForAuthentication",n),{authenticated:!0}}async getHeight(e,n){const r=await this.transmit("getHeight",n);return{height:new Ge(r).readVarIntNum()}}async getHeaderForHeight(e,n){const r=new ne;r.writeVarIntNum(e.height);const i=await this.transmit("getHeaderForHeight",n,r.toArray());return{header:Z(i)}}async getNetwork(e,n){return{network:(await this.transmit("getNetwork",n))[0]===0?"mainnet":"testnet"}}async getVersion(e,n){const r=await this.transmit("getVersion",n);return{version:re(r)}}}class l0{constructor(e,n="http://localhost:3301",r=fetch){M(this,"baseUrl");M(this,"httpClient");M(this,"originator");this.baseUrl=n,this.httpClient=r,this.originator=e}async transmitToWallet(e){const n=new Ge(e),r=n.readUInt8(),i=cm[r];if(i===void 0||i==="")throw new Error(`Invalid call code: ${r}`);const s=n.readUInt8();let o;if(s>0){const u=n.read(s);o=re(u)}const a=n.read(),c=await(await fetch(`${this.baseUrl}/${i}`,{method:"POST",headers:{"Content-Type":"application/octet-stream",Origin:o??""},body:new Uint8Array(a)})).arrayBuffer();return Array.from(new Uint8Array(c))}}class cw{constructor(e,n="http://localhost:3321",r=fetch){M(this,"baseUrl");M(this,"httpClient");M(this,"originator");M(this,"api");this.baseUrl=n,this.originator=e,this.httpClient=r,this.api=async(i,s)=>{const o=await await r(`${this.baseUrl}/${i}`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Originator:this.originator??""},body:JSON.stringify(s)}),a=await o.json();if(!o.ok){const l={call:i,args:s,message:a.message??`HTTP Client error ${o.status}`};throw new Error(JSON.stringify(l))}return a}}async createAction(e){return await this.api("createAction",e)}async signAction(e){return await this.api("signAction",e)}async abortAction(e){return await this.api("abortAction",e)}async listActions(e){return await this.api("listActions",e)}async internalizeAction(e){return await this.api("internalizeAction",e)}async listOutputs(e){return await this.api("listOutputs",e)}async relinquishOutput(e){return await this.api("relinquishOutput",e)}async getPublicKey(e){return await this.api("getPublicKey",e)}async revealCounterpartyKeyLinkage(e){return await this.api("revealCounterpartyKeyLinkage",e)}async revealSpecificKeyLinkage(e){return await this.api("revealSpecificKeyLinkage",e)}async encrypt(e){return await this.api("encrypt",e)}async decrypt(e){return await this.api("decrypt",e)}async createHmac(e){return await this.api("createHmac",e)}async verifyHmac(e){return await this.api("verifyHmac",e)}async createSignature(e){return await this.api("createSignature",e)}async verifySignature(e){return await this.api("verifySignature",e)}async acquireCertificate(e){return await this.api("acquireCertificate",e)}async listCertificates(e){return await this.api("listCertificates",e)}async proveCertificate(e){return await this.api("proveCertificate",e)}async relinquishCertificate(e){return await this.api("relinquishCertificate",e)}async discoverByIdentityKey(e){return await this.api("discoverByIdentityKey",e)}async discoverByAttributes(e){return await this.api("discoverByAttributes",e)}async isAuthenticated(e){return await this.api("isAuthenticated",e)}async waitForAuthentication(e){return await this.api("waitForAuthentication",e)}async getHeight(e){return await this.api("getHeight",e)}async getHeaderForHeight(e){return await this.api("getHeaderForHeight",e)}async getNetwork(e){return await this.api("getNetwork",e)}async getVersion(e){return await this.api("getVersion",e)}}const LN=200;class lm{constructor(e="auto",n){M(this,"substrate");M(this,"originator");e==="Cicada"&&(e=new c0(new l0(n))),e==="window.CWI"&&(e=new t0),e==="XDM"&&(e=new r0),e==="json-api"&&(e=new cw(n)),this.substrate=e,this.originator=n}async connectToSubstrate(){if(typeof this.substrate=="object")return;let e;const n=async r=>{let i;if(typeof r=="number"?i=await Promise.race([e.getVersion({}),new Promise((s,o)=>setTimeout(()=>o(new Error("Timed out.")),r))]):i=await e.getVersion({}),typeof i!="object"||typeof i.version!="string")throw new Error("Failed to use substrate.")};try{e=new t0,await n(),this.substrate=e}catch(r){console.error("XDMSubstrate initialization failed:",r);try{e=new r0,await n(LN),this.substrate=e}catch(i){console.error("WalletWireTransceiver initialization failed:",i);try{e=new c0(new l0(this.originator)),await n(),this.substrate=e}catch(s){console.error("HTTPWalletJSON initialization failed:",s);try{e=new cw(this.originator),await n(),this.substrate=e}catch(o){throw console.error("No wallet available:",o),new Error("No wallet available over any communication substrate. Install a BSV wallet today!")}}}}}async createAction(e){return await this.connectToSubstrate(),await this.substrate.createAction(e,this.originator)}async signAction(e){return await this.connectToSubstrate(),await this.substrate.signAction(e,this.originator)}async abortAction(e){return await this.connectToSubstrate(),await this.substrate.abortAction(e,this.originator)}async listActions(e){return await this.connectToSubstrate(),await this.substrate.listActions(e,this.originator)}async internalizeAction(e){return await this.connectToSubstrate(),await this.substrate.internalizeAction(e,this.originator)}async listOutputs(e){return await this.connectToSubstrate(),await this.substrate.listOutputs(e,this.originator)}async relinquishOutput(e){return await this.connectToSubstrate(),await this.substrate.relinquishOutput(e,this.originator)}async getPublicKey(e){return await this.connectToSubstrate(),await this.substrate.getPublicKey(e,this.originator)}async revealCounterpartyKeyLinkage(e){return await this.connectToSubstrate(),await this.substrate.revealCounterpartyKeyLinkage(e,this.originator)}async revealSpecificKeyLinkage(e){return await this.connectToSubstrate(),await this.substrate.revealSpecificKeyLinkage(e,this.originator)}async encrypt(e){return await this.connectToSubstrate(),await this.substrate.encrypt(e,this.originator)}async decrypt(e){return await this.substrate.decrypt(e,this.originator)}async createHmac(e){return await this.connectToSubstrate(),await this.substrate.createHmac(e,this.originator)}async verifyHmac(e){return await this.connectToSubstrate(),await this.substrate.verifyHmac(e,this.originator)}async createSignature(e){return await this.connectToSubstrate(),await this.substrate.createSignature(e,this.originator)}async verifySignature(e){return await this.connectToSubstrate(),await this.substrate.verifySignature(e,this.originator)}async acquireCertificate(e){return await this.connectToSubstrate(),await this.substrate.acquireCertificate(e,this.originator)}async listCertificates(e){return await this.connectToSubstrate(),await this.substrate.listCertificates(e,this.originator)}async proveCertificate(e){return await this.connectToSubstrate(),await this.substrate.proveCertificate(e,this.originator)}async relinquishCertificate(e){return await this.connectToSubstrate(),await this.substrate.relinquishCertificate(e,this.originator)}async discoverByIdentityKey(e){return await this.connectToSubstrate(),await this.substrate.discoverByIdentityKey(e,this.originator)}async discoverByAttributes(e){return await this.connectToSubstrate(),await this.substrate.discoverByAttributes(e,this.originator)}async isAuthenticated(e={}){return await this.connectToSubstrate(),await this.substrate.isAuthenticated(e,this.originator)}async waitForAuthentication(e={}){return await this.connectToSubstrate(),await this.substrate.waitForAuthentication(e,this.originator)}async getHeight(e={}){return await this.connectToSubstrate(),await this.substrate.getHeight(e,this.originator)}async getHeaderForHeight(e){return await this.connectToSubstrate(),await this.substrate.getHeaderForHeight(e,this.originator)}async getNetwork(e={}){return await this.connectToSubstrate(),await this.substrate.getNetwork(e,this.originator)}async getVersion(e={}){return await this.connectToSubstrate(),await this.substrate.getVersion(e,this.originator)}}class DN{constructor(e){M(this,"wallet");this.wallet=e}decodeOutpoint(e){const n=e.read(32),r=Z(n),i=e.readVarIntNum();return`${r}.${i}`}encodeOutpoint(e){const n=new ne,[r,i]=e.split(".");return n.write(U(r,"hex")),n.writeVarIntNum(Number(i)),n.toArray()}async transmitToWallet(e){const n=new Ge(e);try{const r=n.readUInt8(),i=cm[r];if(i===void 0||i==="")throw new Error(`Invalid call code: ${r}`);const s=n.readUInt8(),o=n.read(s),a=re(o),l=n;switch(i){case"createAction":{const c={},u=l.readVarIntNum(),d=l.read(u);c.description=re(d);const f=l.readVarIntNum();f>=0?c.inputBEEF=l.read(f):c.inputBEEF=void 0;const h=l.readVarIntNum();if(h>=0){c.inputs=[];for(let I=0;I<h;I++){const k={};k.outpoint=this.decodeOutpoint(l);const S=l.readVarIntNum();if(S>=0){const T=l.read(S);k.unlockingScript=Z(T)}else{k.unlockingScript=void 0;const T=l.readVarIntNum();k.unlockingScriptLength=T}const P=l.readVarIntNum(),R=l.read(P);k.inputDescription=re(R);const B=l.readVarIntNum();B>=0?k.sequenceNumber=B:k.sequenceNumber=void 0,c.inputs.push(k)}}else c.inputs=void 0;const p=l.readVarIntNum();if(p>=0){c.outputs=[];for(let I=0;I<p;I++){const k={},S=l.readVarIntNum(),P=l.read(S);k.lockingScript=Z(P),k.satoshis=l.readVarIntNum();const R=l.readVarIntNum(),B=l.read(R);k.outputDescription=re(B);const T=l.readVarIntNum();if(T>=0){const $=l.read(T);k.basket=re($)}else k.basket=void 0;const N=l.readVarIntNum();if(N>=0){const $=l.read(N);k.customInstructions=re($)}else k.customInstructions=void 0;const L=l.readVarIntNum();if(L>=0){k.tags=[];for(let $=0;$<L;$++){const H=l.readVarIntNum(),W=l.read(H),C=re(W);k.tags.push(C)}}else k.tags=void 0;c.outputs.push(k)}}else c.outputs=void 0;const g=l.readVarIntNum();g>=0?c.lockTime=g:c.lockTime=void 0;const w=l.readVarIntNum();w>=0?c.version=w:c.version=void 0;const v=l.readVarIntNum();if(v>=0){c.labels=[];for(let I=0;I<v;I++){const k=l.readVarIntNum(),S=l.read(k),P=re(S);c.labels.push(P)}}else c.labels=void 0;if(l.readInt8()===1){c.options={};const I=l.readInt8();I===-1?c.options.signAndProcess=void 0:c.options.signAndProcess=I===1;const k=l.readInt8();k===-1?c.options.acceptDelayedBroadcast=void 0:c.options.acceptDelayedBroadcast=k===1;const S=l.readInt8();S===-1?c.options.trustSelf=void 0:S===1&&(c.options.trustSelf="known");const P=l.readVarIntNum();if(P>=0){c.options.knownTxids=[];for(let $=0;$<P;$++){const H=l.read(32),W=Z(H);c.options.knownTxids.push(W)}}else c.options.knownTxids=void 0;const R=l.readInt8();R===-1?c.options.returnTXIDOnly=void 0:c.options.returnTXIDOnly=R===1;const B=l.readInt8();B===-1?c.options.noSend=void 0:c.options.noSend=B===1;const T=l.readVarIntNum();if(T>=0){c.options.noSendChange=[];for(let $=0;$<T;$++){const H=this.decodeOutpoint(l);c.options.noSendChange.push(H)}}else c.options.noSendChange=void 0;const N=l.readVarIntNum();if(N>=0){c.options.sendWith=[];for(let $=0;$<N;$++){const H=l.read(32),W=Z(H);c.options.sendWith.push(W)}}else c.options.sendWith=void 0;const L=l.readInt8();L===-1?c.options.randomizeOutputs=void 0:c.options.randomizeOutputs=L===1}else c.options=void 0;const y=await this.wallet.createAction(c,a),b=new ne;if(y.txid!=null&&y.txid!==""?(b.writeInt8(1),b.write(U(y.txid,"hex"))):b.writeInt8(0),y.tx!=null?(b.writeInt8(1),b.writeVarIntNum(y.tx.length),b.write(y.tx)):b.writeInt8(0),y.noSendChange!=null){b.writeVarIntNum(y.noSendChange.length);for(const I of y.noSendChange)b.write(this.encodeOutpoint(I))}else b.writeVarIntNum(-1);if(y.sendWithResults!=null){b.writeVarIntNum(y.sendWithResults.length);for(const I of y.sendWithResults){b.write(U(I.txid,"hex"));let k;I.status==="unproven"?k=1:I.status==="sending"?k=2:I.status==="failed"&&(k=3),b.writeInt8(k)}}else b.writeVarIntNum(-1);if(y.signableTransaction!=null){b.writeInt8(1),b.writeVarIntNum(y.signableTransaction.tx.length),b.write(y.signableTransaction.tx);const I=U(y.signableTransaction.reference,"base64");b.writeVarIntNum(I.length),b.write(I)}else b.writeInt8(0);const x=new ne;return x.writeUInt8(0),x.write(b.toArray()),x.toArray()}case"signAction":{const c={},u=l.readVarIntNum();c.spends={};for(let v=0;v<u;v++){const m=l.readVarIntNum(),y={},b=l.readVarIntNum(),x=l.read(b);y.unlockingScript=Z(x);const I=l.readVarIntNum();I>=0?y.sequenceNumber=I:y.sequenceNumber=void 0,c.spends[m]=y}const d=l.readVarIntNum(),f=l.read(d);if(c.reference=Ae(f),l.readInt8()===1){c.options={};const v=l.readInt8();v===-1?c.options.acceptDelayedBroadcast=void 0:c.options.acceptDelayedBroadcast=v===1;const m=l.readInt8();m===-1?c.options.returnTXIDOnly=void 0:c.options.returnTXIDOnly=m===1;const y=l.readInt8();y===-1?c.options.noSend=void 0:c.options.noSend=y===1;const b=l.readVarIntNum();if(b>=0){c.options.sendWith=[];for(let x=0;x<b;x++){const I=l.read(32),k=Z(I);c.options.sendWith.push(k)}}else c.options.sendWith=void 0}else c.options=void 0;const p=await this.wallet.signAction(c,a),g=new ne;if(p.txid!=null&&p.txid!==""?(g.writeInt8(1),g.write(U(p.txid,"hex"))):g.writeInt8(0),p.tx!=null?(g.writeInt8(1),g.writeVarIntNum(p.tx.length),g.write(p.tx)):g.writeInt8(0),p.sendWithResults!=null){g.writeVarIntNum(p.sendWithResults.length);for(const v of p.sendWithResults){g.write(U(v.txid,"hex"));let m;v.status==="unproven"?m=1:v.status==="sending"?m=2:v.status==="failed"&&(m=3),g.writeInt8(m)}}else g.writeVarIntNum(-1);const w=new ne;return w.writeUInt8(0),w.write(g.toArray()),w.toArray()}case"abortAction":{const c=l.read(),u=Ae(c);await this.wallet.abortAction({reference:u},a);const d=new ne;return d.writeUInt8(0),d.toArray()}case"listActions":{const c={},u=l.readVarIntNum();c.labels=[];for(let y=0;y<u;y++){const b=l.readVarIntNum(),x=l.read(b);c.labels.push(re(x))}const d=l.readInt8();d===-1?c.labelQueryMode=void 0:d===1?c.labelQueryMode="any":d===2&&(c.labelQueryMode="all");const f=["includeLabels","includeInputs","includeInputSourceLockingScripts","includeInputUnlockingScripts","includeOutputs","includeOutputLockingScripts"];for(const y of f){const b=l.readInt8();b===-1?c[y]=void 0:c[y]=b===1}const h=l.readVarIntNum();h>=0?c.limit=h:c.limit=void 0;const p=l.readVarIntNum();p>=0?c.offset=p:c.offset=void 0;const g=l.readInt8();g>=0?c.seekPermission=g===1:c.seekPermission=void 0;const w=await this.wallet.listActions(c,a),v=new ne;v.writeVarIntNum(w.totalActions);for(const y of w.actions){v.write(U(y.txid,"hex")),v.writeVarIntNum(y.satoshis);let b;switch(y.status){case"completed":b=1;break;case"unprocessed":b=2;break;case"sending":b=3;break;case"unproven":b=4;break;case"unsigned":b=5;break;case"nosend":b=6;break;case"nonfinal":b=7;break;default:b=-1;break}v.writeInt8(b),v.writeInt8(y.isOutgoing?1:0);const x=U(y.description,"utf8");if(v.writeVarIntNum(x.length),v.write(x),y.labels!==void 0){v.writeVarIntNum(y.labels.length);for(const I of y.labels){const k=U(I,"utf8");v.writeVarIntNum(k.length),v.write(k)}}else v.writeVarIntNum(-1);if(v.writeVarIntNum(y.version),v.writeVarIntNum(y.lockTime),y.inputs!==void 0){v.writeVarIntNum(y.inputs.length);for(const I of y.inputs){if(v.write(this.encodeOutpoint(I.sourceOutpoint)),v.writeVarIntNum(I.sourceSatoshis),I.sourceLockingScript!==void 0){const S=U(I.sourceLockingScript,"hex");v.writeVarIntNum(S.length),v.write(S)}else v.writeVarIntNum(-1);if(I.unlockingScript!==void 0){const S=U(I.unlockingScript,"hex");v.writeVarIntNum(S.length),v.write(S)}else v.writeVarIntNum(-1);const k=U(I.inputDescription,"utf8");v.writeVarIntNum(k.length),v.write(k),v.writeVarIntNum(I.sequenceNumber)}}else v.writeVarIntNum(-1);if(y.outputs!==void 0){v.writeVarIntNum(y.outputs.length);for(const I of y.outputs){if(v.writeVarIntNum(I.outputIndex),v.writeVarIntNum(I.satoshis),I.lockingScript!==void 0){const S=U(I.lockingScript,"hex");v.writeVarIntNum(S.length),v.write(S)}else v.writeVarIntNum(-1);v.writeInt8(I.spendable?1:0);const k=U(I.outputDescription,"utf8");if(v.writeVarIntNum(k.length),v.write(k),I.basket!==void 0){const S=U(I.basket,"utf8");v.writeVarIntNum(S.length),v.write(S)}else v.writeVarIntNum(-1);if(I.tags!==void 0){v.writeVarIntNum(I.tags.length);for(const S of I.tags){const P=U(S,"utf8");v.writeVarIntNum(P.length),v.write(P)}}else v.writeVarIntNum(-1);if(I.customInstructions!==void 0){const S=U(I.customInstructions,"utf8");v.writeVarIntNum(S.length),v.write(S)}else v.writeVarIntNum(-1)}}else v.writeVarIntNum(-1)}const m=new ne;return m.writeUInt8(0),m.write(v.toArray()),m.toArray()}case"internalizeAction":{const c={},u=l.readVarIntNum();c.tx=l.read(u);const d=l.readVarIntNum();c.outputs=[];for(let w=0;w<d;w++){const v={};v.outputIndex=l.readVarIntNum();const m=l.readUInt8();if(m===1){v.protocol="wallet payment",v.paymentRemittance={};const y=l.read(33);v.paymentRemittance.senderIdentityKey=Z(y);const b=l.readVarIntNum(),x=l.read(b);v.paymentRemittance.derivationPrefix=Ae(x);const I=l.readVarIntNum(),k=l.read(I);v.paymentRemittance.derivationSuffix=Ae(k)}else if(m===2){v.protocol="basket insertion",v.insertionRemittance={};const y=l.readVarIntNum(),b=l.read(y);v.insertionRemittance.basket=re(b);const x=l.readVarIntNum();if(x>=0){const k=l.read(x);v.insertionRemittance.customInstructions=re(k)}const I=l.readVarIntNum();if(I>0){v.insertionRemittance.tags=[];for(let k=0;k<I;k++){const S=l.readVarIntNum(),P=l.read(S);v.insertionRemittance.tags.push(re(P))}}else v.insertionRemittance.tags=[]}c.outputs.push(v)}const f=l.readVarIntNum();if(f>=0){c.labels=[];for(let w=0;w<f;w++){const v=l.readVarIntNum();c.labels.push(re(l.read(v)))}}const h=l.readVarIntNum();c.description=re(l.read(h));const p=l.readInt8();p>=0?c.seekPermission=p===1:c.seekPermission=void 0,await this.wallet.internalizeAction(c,a);const g=new ne;return g.writeUInt8(0),g.toArray()}case"listOutputs":{const c={},u=l.readVarIntNum(),d=l.read(u);c.basket=re(d);const f=l.readVarIntNum();if(f>0){c.tags=[];for(let S=0;S<f;S++){const P=l.readVarIntNum(),R=l.read(P);c.tags.push(re(R))}}else c.tags=void 0;const h=l.readInt8();h===1?c.tagQueryMode="all":h===2?c.tagQueryMode="any":c.tagQueryMode=void 0;const p=l.readInt8();p===1?c.include="locking scripts":p===2?c.include="entire transactions":c.include=void 0;const g=l.readInt8();g===-1?c.includeCustomInstructions=void 0:c.includeCustomInstructions=g===1;const w=l.readInt8();w===-1?c.includeTags=void 0:c.includeTags=w===1;const v=l.readInt8();v===-1?c.includeLabels=void 0:c.includeLabels=v===1;const m=l.readVarIntNum();m>=0?c.limit=m:c.limit=void 0;const y=l.readVarIntNum();y>=0?c.offset=y:c.offset=void 0;const b=l.readInt8();b>=0?c.seekPermission=b===1:c.seekPermission=void 0;const x=await this.wallet.listOutputs(c,a),I=new ne;I.writeVarIntNum(x.totalOutputs),x.BEEF!=null?(I.writeVarIntNum(x.BEEF.length),I.write(x.BEEF)):I.writeVarIntNum(-1);for(const S of x.outputs){if(I.write(this.encodeOutpoint(S.outpoint)),I.writeVarIntNum(S.satoshis),S.lockingScript!==void 0){const P=U(S.lockingScript,"hex");I.writeVarIntNum(P.length),I.write(P)}else I.writeVarIntNum(-1);if(S.customInstructions!==void 0){const P=U(S.customInstructions,"utf8");I.writeVarIntNum(P.length),I.write(P)}else I.writeVarIntNum(-1);if(S.tags!==void 0){I.writeVarIntNum(S.tags.length);for(const P of S.tags){const R=U(P,"utf8");I.writeVarIntNum(R.length),I.write(R)}}else I.writeVarIntNum(-1);if(S.labels!==void 0){I.writeVarIntNum(S.labels.length);for(const P of S.labels){const R=U(P,"utf8");I.writeVarIntNum(R.length),I.write(R)}}else I.writeVarIntNum(-1)}const k=new ne;return k.writeUInt8(0),k.write(I.toArray()),k.toArray()}case"relinquishOutput":{const c={},u=l.readVarIntNum(),d=l.read(u);c.basket=re(d),c.output=this.decodeOutpoint(l),await this.wallet.relinquishOutput(c,a);const f=new ne;return f.writeUInt8(0),f.toArray()}case"getPublicKey":{const c={},u=l.readUInt8();if(c.identityKey=u===1,c.identityKey!==!0){c.protocolID=this.decodeProtocolID(l),c.keyID=this.decodeString(l),c.counterparty=this.decodeCounterparty(l);const g=l.readInt8();g===-1?c.privileged=void 0:c.privileged=g===1;const w=l.readInt8();if(w!==-1){const m=l.read(w);c.privilegedReason=re(m)}else c.privilegedReason=void 0;const v=l.readInt8();v===-1?c.forSelf=void 0:c.forSelf=v===1}else{const g=l.readInt8();g===-1?c.privileged=void 0:c.privileged=g===1;const w=l.readInt8();if(w!==-1){const v=l.read(w);c.privilegedReason=re(v)}else c.privilegedReason=void 0}const d=l.readInt8();d>=0?c.seekPermission=d===1:c.seekPermission=void 0;const f=await this.wallet.getPublicKey(c,a),h=new ne;h.writeUInt8(0);const p=U(f.publicKey,"hex");return h.write(p),h.toArray()}case"encrypt":{const c=this.decodeKeyRelatedParams(l),u=l.readVarIntNum();c.plaintext=l.read(u);const d=l.readInt8();d>=0?c.seekPermission=d===1:c.seekPermission=void 0;const f=await this.wallet.encrypt(c,a),h=new ne;return h.writeUInt8(0),h.write(f.ciphertext),h.toArray()}case"decrypt":{const c=this.decodeKeyRelatedParams(l),u=l.readVarIntNum();c.ciphertext=l.read(u);const d=l.readInt8();d>=0?c.seekPermission=d===1:c.seekPermission=void 0;const f=await this.wallet.decrypt(c,a),h=new ne;return h.writeUInt8(0),h.write(f.plaintext),h.toArray()}case"createHmac":{const c=this.decodeKeyRelatedParams(l),u=l.readVarIntNum();c.data=l.read(u);const d=l.readInt8();d>=0?c.seekPermission=d===1:c.seekPermission=void 0;const f=await this.wallet.createHmac(c,a),h=new ne;return h.writeUInt8(0),h.write(f.hmac),h.toArray()}case"verifyHmac":{const c=this.decodeKeyRelatedParams(l);c.hmac=l.read(32);const u=l.readVarIntNum();c.data=l.read(u);const d=l.readInt8();d>=0?c.seekPermission=d===1:c.seekPermission=void 0,await this.wallet.verifyHmac(c,a);const f=new ne;return f.writeUInt8(0),f.toArray()}case"createSignature":{const c=this.decodeKeyRelatedParams(l),u=l.readUInt8();if(u===1){const p=l.readVarIntNum();c.data=l.read(p)}else u===2&&(c.hashToDirectlySign=l.read(32));const d=l.readInt8();d>=0?c.seekPermission=d===1:c.seekPermission=void 0;const f=await this.wallet.createSignature(c,a),h=new ne;return h.writeUInt8(0),h.write(f.signature),h.toArray()}case"verifySignature":{const c=this.decodeKeyRelatedParams(l),u=l.readInt8();u===-1?c.forSelf=void 0:c.forSelf=u===1;const d=l.readVarIntNum();c.signature=l.read(d);const f=l.readUInt8();if(f===1){const g=l.readVarIntNum();c.data=l.read(g)}else f===2&&(c.hashToDirectlyVerify=l.read(32));const h=l.readInt8();h>=0?c.seekPermission=h===1:c.seekPermission=void 0,await this.wallet.verifySignature(c,a);const p=new ne;return p.writeUInt8(0),p.toArray()}case"isAuthenticated":{const c=await this.wallet.isAuthenticated({},a),u=new ne;return u.writeUInt8(0),u.writeUInt8(c.authenticated?1:0),u.toArray()}case"waitForAuthentication":{await this.wallet.waitForAuthentication({},a);const c=new ne;return c.writeUInt8(0),c.toArray()}case"getHeight":{const c=await this.wallet.getHeight({},a),u=new ne;return u.writeUInt8(0),u.writeVarIntNum(c.height),u.toArray()}case"getHeaderForHeight":{const c={};c.height=l.readVarIntNum();const u=await this.wallet.getHeaderForHeight(c,a),d=new ne;d.writeUInt8(0);const f=U(u.header,"hex");return d.write(f),d.toArray()}case"getNetwork":{const c=await this.wallet.getNetwork({},a),u=new ne;return u.writeUInt8(0),u.writeUInt8(c.network==="mainnet"?0:1),u.toArray()}case"getVersion":{const c=await this.wallet.getVersion({},a),u=new ne;u.writeUInt8(0);const d=U(c.version,"utf8");return u.write(d),u.toArray()}case"revealCounterpartyKeyLinkage":{const c={},u=l.readInt8();u===-1?c.privileged=void 0:c.privileged=u===1;const d=l.readInt8();if(d===-1)c.privilegedReason=void 0;else{const m=l.read(d);c.privilegedReason=re(m)}const f=l.read(33);c.counterparty=Z(f);const h=l.read(33);c.verifier=Z(h);const p=await this.wallet.revealCounterpartyKeyLinkage(c,a),g=new ne;g.write(U(p.prover,"hex")),g.write(U(p.verifier,"hex")),g.write(U(p.counterparty,"hex"));const w=U(p.revelationTime,"utf8");g.writeVarIntNum(w.length),g.write(w),g.writeVarIntNum(p.encryptedLinkage.length),g.write(p.encryptedLinkage),g.writeVarIntNum(p.encryptedLinkageProof.length),g.write(p.encryptedLinkageProof);const v=new ne;return v.writeUInt8(0),v.write(g.toArray()),v.toArray()}case"revealSpecificKeyLinkage":{const c=this.decodeKeyRelatedParams(l),u=l.read(33);c.verifier=Z(u);const d=await this.wallet.revealSpecificKeyLinkage(c,a),f=new ne;f.write(U(d.prover,"hex")),f.write(U(d.verifier,"hex")),f.write(U(d.counterparty,"hex")),f.writeUInt8(d.protocolID[0]);const h=U(d.protocolID[1],"utf8");f.writeVarIntNum(h.length),f.write(h);const p=U(d.keyID,"utf8");f.writeVarIntNum(p.length),f.write(p),f.writeVarIntNum(d.encryptedLinkage.length),f.write(d.encryptedLinkage),f.writeVarIntNum(d.encryptedLinkageProof.length),f.write(d.encryptedLinkageProof),f.writeUInt8(d.proofType);const g=new ne;return g.writeUInt8(0),g.write(f.toArray()),g.toArray()}case"acquireCertificate":{const c={},u=l.read(32);c.type=Ae(u);const d=l.read(33);c.certifier=Z(d);const f=l.readVarIntNum();c.fields={};for(let b=0;b<f;b++){const x=l.readVarIntNum(),I=l.read(x),k=re(I),S=l.readVarIntNum(),P=l.read(S),R=re(P);c.fields[k]=R}const h=l.readInt8();h===-1?c.privileged=void 0:c.privileged=h===1;const p=l.readInt8();if(p===-1)c.privilegedReason=void 0;else{const b=l.read(p);c.privilegedReason=re(b)}const g=l.readUInt8();if(c.acquisitionProtocol=g===1?"direct":"issuance",c.acquisitionProtocol==="direct"){const b=l.read(32);c.serialNumber=Ae(b),c.revocationOutpoint=this.decodeOutpoint(l);const x=l.readVarIntNum(),I=l.read(x);c.signature=Z(I);const k=l.readUInt8();if(k===11)c.keyringRevealer="certifier";else{const P=[k].concat(l.read(32));c.keyringRevealer=Z(P)}const S=l.readVarIntNum();c.keyringForSubject={};for(let P=0;P<S;P++){const R=l.readVarIntNum(),B=l.read(R),T=re(B),N=l.readVarIntNum(),L=l.read(N),$=Ae(L);c.keyringForSubject[T]=$}}else{const b=l.readVarIntNum(),x=l.read(b);c.certifierUrl=re(x)}const w=await this.wallet.acquireCertificate(c,a),m=new wn(w.type,w.serialNumber,w.subject,w.certifier,w.revocationOutpoint,w.fields,w.signature).toBinary(),y=new ne;return y.writeUInt8(0),y.write(m),y.toArray()}case"listCertificates":{const c={},u=l.readVarIntNum();c.certifiers=[];for(let y=0;y<u;y++){const b=l.read(33);c.certifiers.push(Z(b))}const d=l.readVarIntNum();c.types=[];for(let y=0;y<d;y++){const b=l.read(32);c.types.push(Ae(b))}const f=l.readVarIntNum();f>=0?c.limit=f:c.limit=void 0;const h=l.readVarIntNum();h>=0?c.offset=h:c.offset=void 0;const p=l.readInt8();p===-1?c.privileged=void 0:c.privileged=p===1;const g=l.readInt8();if(g===-1)c.privilegedReason=void 0;else{const y=l.read(g);c.privilegedReason=re(y)}const w=await this.wallet.listCertificates(c,a),v=new ne;v.writeVarIntNum(w.totalCertificates);for(const y of w.certificates){const x=new wn(y.type,y.serialNumber,y.subject,y.certifier,y.revocationOutpoint,y.fields,y.signature).toBinary();v.writeVarIntNum(x.length),v.write(x)}const m=new ne;return m.writeUInt8(0),m.write(v.toArray()),m.toArray()}case"proveCertificate":{const c={},u={},d=l.read(32);u.type=Ae(d);const f=l.read(33);u.subject=Z(f);const h=l.read(32);u.serialNumber=Ae(h);const p=l.read(33);u.certifier=Z(p),u.revocationOutpoint=this.decodeOutpoint(l);const g=l.readVarIntNum(),w=l.read(g);u.signature=Z(w);const v=l.readVarIntNum();u.fields={};for(let R=0;R<v;R++){const B=l.readVarIntNum(),T=l.read(B),N=re(T),L=l.readVarIntNum(),$=l.read(L),H=re($);u.fields[N]=H}c.certificate=u;const m=l.readVarIntNum();c.fieldsToReveal=[];for(let R=0;R<m;R++){const B=l.readVarIntNum(),T=l.read(B),N=re(T);c.fieldsToReveal.push(N)}const y=l.read(33);c.verifier=Z(y);const b=l.readInt8();b===-1?c.privileged=void 0:c.privileged=b===1;const x=l.readInt8();if(x===-1)c.privilegedReason=void 0;else{const R=l.read(x);c.privilegedReason=re(R)}const I=await this.wallet.proveCertificate(c,a),k=new ne,S=Object.entries(I.keyringForVerifier);k.writeVarIntNum(S.length);for(const[R,B]of S){const T=U(R,"utf8");k.writeVarIntNum(T.length),k.write(T);const N=U(B,"base64");k.writeVarIntNum(N.length),k.write(N)}const P=new ne;return P.writeUInt8(0),P.write(k.toArray()),P.toArray()}case"relinquishCertificate":{const c={},u=l.read(32);c.type=Ae(u);const d=l.read(32);c.serialNumber=Ae(d);const f=l.read(33);c.certifier=Z(f),await this.wallet.relinquishCertificate(c,a);const h=new ne;return h.writeUInt8(0),h.toArray()}case"discoverByIdentityKey":{const c={},u=l.read(33);c.identityKey=Z(u);const d=l.readVarIntNum();d>=0?c.limit=d:c.limit=void 0;const f=l.readVarIntNum();f>=0?c.offset=f:c.offset=void 0;const h=l.readInt8();h>=0?c.seekPermission=h===1:c.seekPermission=void 0;const p=await this.wallet.discoverByIdentityKey(c,a),g=this.serializeDiscoveryResult(p),w=new ne;return w.writeUInt8(0),w.write(g),w.toArray()}case"discoverByAttributes":{const c={},u=l.readVarIntNum();c.attributes={};for(let v=0;v<u;v++){const m=l.readVarIntNum(),y=l.read(m),b=re(y),x=l.readVarIntNum(),I=l.read(x),k=re(I);c.attributes[b]=k}const d=l.readVarIntNum();d>=0?c.limit=d:c.limit=void 0;const f=l.readVarIntNum();f>=0?c.offset=f:c.offset=void 0;const h=l.readInt8();h>=0?c.seekPermission=h===1:c.seekPermission=void 0;const p=await this.wallet.discoverByAttributes(c,a),g=this.serializeDiscoveryResult(p),w=new ne;return w.writeUInt8(0),w.write(g),w.toArray()}default:throw new Error(`Method ${i} not implemented`)}}catch(r){const i=new ne;i.writeUInt8(typeof r.code=="number"?r.code:1);const s=typeof r.message=="string"?r.message:"Unknown error",o=U(s,"utf8");i.writeVarIntNum(o.length),i.write(o);const a=typeof r.stack=="string"?r.stack:"",l=U(a,"utf8");return i.writeVarIntNum(l.length),i.write(l),i.toArray()}}decodeProtocolID(e){const n=e.readUInt8(),r=e.readVarIntNum(),i=e.read(r),s=re(i);return[n,s]}decodeString(e){const n=e.readVarIntNum(),r=e.read(n);return re(r)}decodeCounterparty(e){const n=e.readUInt8();if(n===11)return"self";if(n===12)return"anyone";if(n===0)return;{const r=e.read(32);return Z([n,...r])}}serializeDiscoveryResult(e){const n=new ne;n.writeVarIntNum(e.totalCertificates);for(const r of e.certificates){const s=new wn(r.type,r.serialNumber,r.subject,r.certifier,r.revocationOutpoint,r.fields,r.signaturre).toBinary();n.writeVarIntNum(s.length),n.write(s);const o=U(r.certifierInfo.name,"utf8");n.writeVarIntNum(o.length),n.write(o);const a=U(r.certifierInfo.iconUrl,"utf8");n.writeVarIntNum(a.length),n.write(a);const l=U(r.certifierInfo.description,"utf8");n.writeVarIntNum(l.length),n.write(l),n.writeUInt8(r.certifierInfo.trust);const c=Object.entries(r.publiclyRevealedKeyring);n.writeVarIntNum(c.length);for(const[d,f]of c){const h=U(d,"utf8");n.writeVarIntNum(h.length),n.write(h);const p=U(f,"base64");n.writeVarIntNum(p.length),n.write(p)}const u=Object.entries(r.decryptedFields);n.writeVarIntNum(u.length);for(const[d,f]of u){const h=U(d,"utf8");n.writeVarIntNum(h.length),n.write(h);const p=U(f,"utf8");n.writeVarIntNum(p.length),n.write(p)}}return n.toArray()}decodeKeyRelatedParams(e){const n={};n.protocolID=this.decodeProtocolID(e);const r=e.readVarIntNum(),i=e.read(r);n.keyID=re(i),n.counterparty=this.decodeCounterparty(e);const s=e.readInt8();s===-1?n.privileged=void 0:n.privileged=s===1;const o=e.readInt8();if(o===-1)n.privilegedReason=void 0;else{const a=e.read(o);n.privilegedReason=re(a)}return n}}class um{constructor(e){M(this,"pushDrop");this.pushDrop=new Cs(e)}static decode(e){const n=Cs.decode(e);if(n.fields.length<4)throw new Error("Invalid SHIP/SLAP advertisement!");const r=re(n.fields[0]);if(r!=="SHIP"&&r!=="SLAP")throw new Error("Invalid protocol type!");const i=Z(n.fields[1]),s=re(n.fields[2]),o=re(n.fields[3]);return{protocol:r,identityKey:i,domain:s,topicOrService:o}}async lock(e,n,r){const{publicKey:i}=await this.pushDrop.wallet.getPublicKey({identityKey:!0});return await this.pushDrop.lock([U(e,"utf8"),U(i,"hex"),U(n,"utf8"),U(r,"utf8")],[2,e==="SHIP"?"Service Host Interconnect":"Service Lookup Availability"],"1","self")}unlock(e){return this.pushDrop.unlock([2,e==="SHIP"?"Service Host Interconnect":"Service Lookup Availability"],"1","self")}}const UI=["https://overlay.babbage.systems","https://overlay-example.babbage.systems","https://office.babbage.systems"],FN=1e3;class u0{constructor(e=fetch){M(this,"fetchClient");this.fetchClient=e}async lookup(e,n,r=5e3){if(!e.startsWith("https:"))throw new Error('HTTPS facilitator can only use URLs that start with "https:"');const i=new Promise((a,l)=>setTimeout(()=>l(new Error("Request timed out")),r)),s=fetch(`${e}/lookup`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({service:n.service,query:n.query})}),o=await Promise.race([s,i]);if(o.ok)return await o.json();throw new Error("Failed to facilitate lookup")}}class HI{constructor(e){M(this,"facilitator");M(this,"slapTrackers");M(this,"hostOverrides");M(this,"additionalHosts");const n={facilitator:new u0,slapTrackers:UI,hostOverrides:{},additionalHosts:{}},{facilitator:r=n.facilitator,slapTrackers:i=n.slapTrackers,hostOverrides:s=n.hostOverrides,additionalHosts:o=n.additionalHosts}=e??n;this.facilitator=r??new u0,this.slapTrackers=i??[],this.hostOverrides=s??{},this.additionalHosts=o??{}}async query(e,n){var a;let r=[];if(e.service==="ls_slap"?r=this.slapTrackers:this.hostOverrides[e.service]!=null?r=this.hostOverrides[e.service]:r=await this.findCompetentHosts(e.service),((a=this.additionalHosts[e.service])==null?void 0:a.length)>0&&(r=[...r,...this.additionalHosts[e.service]]),r.length<1)throw new Error(`No competent hosts found by the SLAP trackers for lookup service: ${e.service}`);const s=(await Promise.allSettled(r.map(async l=>await this.facilitator.lookup(l,e,n)))).filter(l=>l.status==="fulfilled").map(l=>l.value);if(s.length===0)throw new Error("No successful responses from any hosts");if(s[0].type==="freeform")return s[0];const o=new Map;for(const l of s)if(l.type==="output-list")try{for(const c of l.outputs)try{const u=String(wr.fromBEEF(c.beef).id("hex"));if(u!==""){const d=`${String(u)}.${String(c.outputIndex)}`;o.set(d,c)}else console.warn("Invalid transaction ID:",u)}catch{continue}}catch(c){console.error("Error processing response outputs:",c)}return{type:"output-list",outputs:Array.from(o.values())}}async findCompetentHosts(e){const n={service:"ls_slap",query:{service:e}},r=await Promise.allSettled(this.slapTrackers.map(async s=>await this.facilitator.lookup(s,n,FN))),i=new Set;for(const s of r)if(s.status==="fulfilled"){const o=s.value;if(o.type!=="output-list")continue;for(const a of o.outputs)try{const c=wr.fromBEEF(a.beef).outputs[a.outputIndex].lockingScript,u=um.decode(c);if(u.topicOrService!==e||u.protocol!=="SLAP")continue;i.add(u.domain)}catch{continue}}else continue;return[...i]}}const $N=1e3;class qI{constructor(e=fetch){M(this,"httpClient");this.httpClient=e}async send(e,n){if(!e.startsWith("https:"))throw new Error('HTTPS facilitator can only use URLs that start with "https:"');const r=await fetch(`${e}/submit`,{method:"POST",headers:{"Content-Type":"application/octet-stream","X-Topics":JSON.stringify(n.topics)},body:new Uint8Array(n.beef)});if(r.ok)return await r.json();throw new Error("Failed to facilitate broadcast")}}class WN{constructor(e,n){M(this,"topics");M(this,"facilitator");M(this,"resolver");M(this,"requireAcknowledgmentFromAllHostsForTopics");M(this,"requireAcknowledgmentFromAnyHostForTopics");M(this,"requireAcknowledgmentFromSpecificHostsForTopics");if(e.length===0)throw new Error("At least one topic is required for broadcast.");if(e.some(l=>!l.startsWith("tm_")))throw new Error('Every topic must start with "tm_".');this.topics=e;const{facilitator:r,resolver:i,requireAcknowledgmentFromAllHostsForTopics:s,requireAcknowledgmentFromAnyHostForTopics:o,requireAcknowledgmentFromSpecificHostsForTopics:a}=n??{};this.facilitator=r??new qI,this.resolver=i??new HI,this.requireAcknowledgmentFromAllHostsForTopics=s??[],this.requireAcknowledgmentFromAnyHostForTopics=o??"all",this.requireAcknowledgmentFromSpecificHostsForTopics=a??{}}async broadcast(e){let n;try{n=e.toBEEF()}catch{throw new Error("Transactions sent via SHIP to Overlay Services must be serializable to BEEF format.")}const r=await this.findInterestedHosts();if(Object.keys(r).length===0)return{status:"error",code:"ERR_NO_HOSTS_INTERESTED",description:"No hosts are interested in receiving this transaction."};const i=Object.entries(r).map(async([f,h])=>{try{const p=await this.facilitator.send(f,{beef:n,topics:[...h]});if(p==null||Object.keys(p).length===0)throw new Error("Steak has no topics.");return{host:f,success:!0,steak:p}}catch(p){return{host:f,success:!1,error:p}}}),o=(await Promise.all(i)).filter(f=>f.success);if(o.length===0)return{status:"error",code:"ERR_ALL_HOSTS_REJECTED",description:"All SHIP hosts have rejected the transaction."};const a={};for(const f of o){const h=f.host,p=f.steak,g=new Set;for(const[w,v]of Object.entries(p)){const m=v.outputsToAdmit,y=v.coinsToRetain,b=v.coinsRemoved;((m==null?void 0:m.length)>0||(y==null?void 0:y.length)>0||(b==null?void 0:b.length)>0)&&g.add(w)}a[h]=g}let l,c;if(this.requireAcknowledgmentFromAllHostsForTopics==="all"?(l=this.topics,c="all"):this.requireAcknowledgmentFromAllHostsForTopics==="any"?(l=this.topics,c="any"):Array.isArray(this.requireAcknowledgmentFromAllHostsForTopics)?(l=this.requireAcknowledgmentFromAllHostsForTopics,c="all"):(l=this.topics,c="all"),l.length>0&&!this.checkAcknowledgmentFromAllHosts(a,l,c))return{status:"error",code:"ERR_REQUIRE_ACK_FROM_ALL_HOSTS_FAILED",description:"Not all hosts acknowledged the required topics."};let u,d;return this.requireAcknowledgmentFromAnyHostForTopics==="all"?(u=this.topics,d="all"):this.requireAcknowledgmentFromAnyHostForTopics==="any"?(u=this.topics,d="any"):Array.isArray(this.requireAcknowledgmentFromAnyHostForTopics)?(u=this.requireAcknowledgmentFromAnyHostForTopics,d="all"):(u=[],d="all"),u.length>0&&!this.checkAcknowledgmentFromAnyHost(a,u,d)?{status:"error",code:"ERR_REQUIRE_ACK_FROM_ANY_HOST_FAILED",description:"No host acknowledged the required topics."}:Object.keys(this.requireAcknowledgmentFromSpecificHostsForTopics).length>0&&!this.checkAcknowledgmentFromSpecificHosts(a,this.requireAcknowledgmentFromSpecificHostsForTopics)?{status:"error",code:"ERR_REQUIRE_ACK_FROM_SPECIFIC_HOSTS_FAILED",description:"Specific hosts did not acknowledge the required topics."}:{status:"success",txid:e.id("hex"),message:`Sent to ${o.length} Overlay Services ${o.length===1?"host":"hosts"}.`}}checkAcknowledgmentFromAllHosts(e,n,r){for(const i of Object.values(e))if(r==="all"){for(const s of n)if(!i.has(s))return!1}else if(r==="any"){let s=!1;for(const o of n)if(i.has(o)){s=!0;break}if(!s)return!1}return!0}checkAcknowledgmentFromAnyHost(e,n,r){if(r==="all"){for(const i of Object.values(e)){let s=!0;for(const o of n)if(!i.has(o)){s=!1;break}if(s)return!0}return!1}else{for(const i of Object.values(e))for(const s of n)if(i.has(s))return!0;return!1}}checkAcknowledgmentFromSpecificHosts(e,n){for(const[r,i]of Object.entries(n)){const s=e[r];if(s==null)return!1;let o,a;if(i==="all"||i==="any")a=i,o=this.topics;else if(Array.isArray(i))o=i,a="all";else continue;if(a==="all"){for(const l of o)if(!s.has(l))return!1}else if(a==="any"){let l=!1;for(const c of o)if(s.has(c)){l=!0;break}if(!l)return!1}}return!0}async findInterestedHosts(){const e={},n=await this.resolver.query({service:"ls_ship",query:{topics:this.topics}},$N);if(n.type!=="output-list")throw new Error("SHIP answer is not an output list.");for(const r of n.outputs)try{const s=wr.fromBEEF(r.beef).outputs[r.outputIndex].lockingScript,o=um.decode(s);if(!this.topics.includes(o.topicOrService)||o.protocol!=="SHIP")continue;e[o.domain]===void 0&&(e[o.domain]=new Set),e[o.domain].add(o.topicOrService)}catch{continue}return e}}const VN=Object.freeze(Object.defineProperty({__proto__:null,ARC:DI,ATOMIC_BEEF:Qp,AuthFetch:BN,BEEF_V1:cu,BEEF_V2:Pi,BSM:EN,Beef:Qn,BeefParty:gN,BeefTx:Bn,BigNumber:D,CachedKeyDeriver:ON,Certificate:wn,CompletedProtoWallet:NN,Curve:kt,DEFAULT_SLAP_TRACKERS:UI,ECDSA:ZA,ECIES:lu,EncryptedMessage:kN,FetchHttpClient:LI,HD:ka,HTTPSOverlayBroadcastFacilitator:qI,HTTPSOverlayLookupFacilitator:u0,HTTPWalletWire:l0,Hash:zA,KeyDeriver:Ya,KeyShares:Ga,LockingScript:vr,LookupResolver:HI,MasterCertificate:sm,MerklePath:_i,Mnemonic:nm,NodejsHttpClient:BI,OP:_,OverlayAdminTokenTemplate:um,P2PKH:em,Peer:s0,Point:vn,PointInFiniteField:Hi,Polynomial:za,PrivateKey:st,ProtoWallet:rm,PublicKey:ut,PushDrop:Cs,RPuzzle:dN,Random:It,SHIPBroadcaster:WN,SatoshisPerKilobyte:MI,Schnorr:NI,Script:qt,get SecurityLevels(){return uu},SessionManager:am,Signature:Sn,SignedMessage:wN,SimplifiedFetchTransport:o0,Spend:CI,SymmetricKey:Cr,TOTP:_N,get TX_DATA_FORMAT(){return or},Transaction:wr,TransactionSignature:je,UnlockingScript:Ks,Utils:QA,VerifiableCertificate:om,WalletClient:lm,WalletError:im,WalletErrors:AN,WalletWireProcessor:DN,WalletWireTransceiver:c0,WhatsOnChain:$I,WhatsOnChainBroadcaster:mN,WindowCWISubstrate:t0,XDM:r0,createNonce:du,defaultBroadcaster:FI,defaultChainTracker:WI,defaultHttpClient:Xa,fromUtxo:RN,getVerifiableCertificates:wl,isBroadcastFailure:pN,isBroadcastResponse:hN,validateCertificates:i0,verifyNonce:ia},Symbol.toStringTag,{value:"Module"}));async function UN(){try{const t=(await new lm("json-api","non-admin.com").getNetwork()).network;return t==="mainnet"||t==="testnet"?1:-1}catch{return 0}}var ph={},gh={},hc={};Object.defineProperty(hc,"__esModule",{value:!0});hc.WalletError=void 0;class fu extends Error{constructor(e,n,r,i){super(n),this.details=i,this.isError=!0,this.name=e,r&&(this.stack=r)}get code(){return this.name}set code(e){this.name=e}get description(){return this.message}set description(e){this.message=e}static fromUnknown(e){let n="WERR_UNKNOWN",r="",i;const s={};e!==null&&typeof e=="object"&&(e.name==="Error"||e.name==="FetchError"?n=e.code||e.status||"WERR_UNKNOWN":n=e.name||e.code||e.status||"WERR_UNKNOWN",typeof n!="string"&&(n="WERR_UNKNOWN"),r=e.message||e.description||"",typeof r!="string"&&(r="WERR_UNKNOWN"),typeof e.stack=="string"&&(i=e.stack),typeof e.sql=="string"&&(s.sql=e.sql),typeof e.sqlMessage=="string"&&(s.sqlMessage=e.sqlMessage));const o=new fu(n,r,i,Object.keys(s).length>0?s:void 0);if(e!==null&&typeof e=="object"){for(const[a,l]of Object.entries(e))if(!(a!=="walletError"&&typeof l!="string"&&typeof l!="number"&&!Array.isArray(l)))switch(a){case"walletError":o[a]=fu.fromUnknown(l);break;case"status":break;case"name":break;case"code":break;case"message":break;case"description":break;case"stack":break;case"sql":break;case"sqlMessage":break;default:o[a]=l;break}}return o}asStatus(){return{status:"error",code:this.name,description:this.message}}}hc.WalletError=fu;var jI={};Object.defineProperty(jI,"__esModule",{value:!0});var KI={};Object.defineProperty(KI,"__esModule",{value:!0});var Qe={};Object.defineProperty(Qe,"__esModule",{value:!0});Qe.WERR_INVALID_PUBLIC_KEY=Qe.WERR_INSUFFICIENT_FUNDS=Qe.WERR_NOT_ACTIVE=Qe.WERR_UNAUTHORIZED=Qe.WERR_NETWORK_CHAIN=Qe.WERR_BAD_REQUEST=Qe.WERR_MISSING_PARAMETER=Qe.WERR_INVALID_PARAMETER=Qe.WERR_BROADCAST_UNAVAILABLE=Qe.WERR_INVALID_OPERATION=Qe.WERR_INTERNAL=Qe.WERR_NOT_IMPLEMENTED=void 0;const jn=hc;class HN extends jn.WalletError{constructor(e){super("WERR_NOT_IMPLEMENTED",e??"Not implemented.")}}Qe.WERR_NOT_IMPLEMENTED=HN;class qN extends jn.WalletError{constructor(e){super("WERR_INTERNAL",e??"An internal error has occurred.")}}Qe.WERR_INTERNAL=qN;class jN extends jn.WalletError{constructor(e){super("WERR_INVALID_OPERATION",e??"An invalid operation was requested.")}}Qe.WERR_INVALID_OPERATION=jN;class KN extends jn.WalletError{constructor(e){super("WERR_BROADCAST_UNAVAILABLE","Unable to broadcast transaction at this time.")}}Qe.WERR_BROADCAST_UNAVAILABLE=KN;class zN extends jn.WalletError{constructor(e,n){super("WERR_INVALID_PARAMETER",`The ${e} parameter must be ${n??"valid."}`),this.parameter=e}}Qe.WERR_INVALID_PARAMETER=zN;class GN extends jn.WalletError{constructor(e){super("WERR_MISSING_PARAMETER",`The required ${e} parameter is missing.`),this.parameter=e}}Qe.WERR_MISSING_PARAMETER=GN;class XN extends jn.WalletError{constructor(e){super("WERR_BAD_REQUEST",e??"The request is invalid.")}}Qe.WERR_BAD_REQUEST=XN;class YN extends jn.WalletError{constructor(e){super("WERR_NETWORK_CHAIN",e??"Configured network chain is invalid or does not match across services.")}}Qe.WERR_NETWORK_CHAIN=YN;class QN extends jn.WalletError{constructor(e){super("WERR_UNAUTHORIZED",e??"Access is denied due to an authorization error.")}}Qe.WERR_UNAUTHORIZED=QN;class JN extends jn.WalletError{constructor(e){super("WERR_NOT_ACTIVE",e??"WalletStorageManager is not accessing user's active storage or there are conflicting active stores configured.")}}Qe.WERR_NOT_ACTIVE=JN;class ZN extends jn.WalletError{constructor(e,n){super("WERR_INSUFFICIENT_FUNDS",`Insufficient funds in the available inputs to cover the cost of the required outputs and the transaction fee (${n} more satoshis are needed, for a total of ${e}), plus whatever would be required in order to pay the fee to unlock and spend the outputs used to provide the additional satoshis.`),this.totalSatoshisNeeded=e,this.moreSatoshisNeeded=n}}Qe.WERR_INSUFFICIENT_FUNDS=ZN;class eC extends jn.WalletError{constructor(e,n="mainnet"){const r=n==="mainnet"?`The provided public key "${e}" is invalid or malformed.`:"The provided public key is invalid or malformed.";super("WERR_INVALID_PUBLIC_KEY",r),this.key=e}}Qe.WERR_INVALID_PUBLIC_KEY=eC;var Ce={};const Xe=br(VN);var lw;function tC(){if(lw)return Ce;lw=1,Object.defineProperty(Ce,"__esModule",{value:!0}),Ce.parseWalletOutpoint=n,Ce.validateSatoshis=u,Ce.validateOptionalInteger=d,Ce.validateInteger=f,Ce.validatePositiveIntegerOrZero=h,Ce.validateStringLength=p,Ce.isHexString=S,Ce.validateCreateActionInput=P,Ce.validateCreateActionOutput=R,Ce.validateCreateActionOptions=B,Ce.validateCreateActionArgs=T,Ce.validateSignActionOptions=N,Ce.validateSignActionArgs=L,Ce.validateAbortActionArgs=$,Ce.validateWalletPayment=H,Ce.validateBasketInsertion=W,Ce.validateInternalizeOutput=C,Ce.validateOriginator=V,Ce.validateInternalizeActionArgs=q,Ce.validateOptionalOutpointString=G,Ce.validateOutpointString=Y,Ce.validateRelinquishOutputArgs=z,Ce.validateRelinquishCertificateArgs=K,Ce.validateListCertificatesArgs=oe,Ce.validateAcquireCertificateArgs=ke,Ce.validateAcquireIssuanceCertificateArgs=me,Ce.validateAcquireDirectCertificateArgs=he,Ce.validateProveCertificateArgs=Be,Ce.validateDiscoverByIdentityKeyArgs=we,Ce.validateDiscoverByAttributesArgs=Nt,Ce.validateListOutputsArgs=Ne,Ce.validateListActionsArgs=Me;const t=Xe,e=ve();function n(E){const[j,Q]=E.split(".");return{txid:j,vout:Number(Q)}}function r(E){return E===void 0?!0:E}function i(E){return E===void 0?!1:E}function s(E){return E===void 0?0:E}function o(E){return E===void 0?4294967295:E}function a(E){return E===void 0?1:E}function l(E){return E===void 0?[]:E}function c(E,j,Q,pe){if(E!==void 0)return p(E,j,Q,pe)}function u(E,j,Q){if(E===void 0||!Number.isInteger(E)||E<0||E>21e14)throw new e.sdk.WERR_INVALID_PARAMETER(j,"a valid number of satoshis");if(Q!==void 0&&E<Q)throw new e.sdk.WERR_INVALID_PARAMETER(j,`at least ${Q} satoshis.`);return E}function d(E,j,Q,pe){if(E!==void 0)return f(E,j,void 0,Q,pe)}function f(E,j,Q,pe,fe){if(E===void 0){if(Q!==void 0)return Q;throw new e.sdk.WERR_INVALID_PARAMETER(j,"a valid integer")}if(!Number.isInteger(E))throw new e.sdk.WERR_INVALID_PARAMETER(j,"an integer");if(E=Number(E),pe!==void 0&&E<pe)throw new e.sdk.WERR_INVALID_PARAMETER(j,`at least ${pe} length.`);if(fe!==void 0&&E>fe)throw new e.sdk.WERR_INVALID_PARAMETER(j,`no more than ${fe} length.`);return E}function h(E,j){return f(E,j,0,0)}function p(E,j,Q,pe){const fe=t.Utils.toArray(E,"utf8").length;if(Q!==void 0&&fe<Q)throw new e.sdk.WERR_INVALID_PARAMETER(j,`at least ${Q} length.`);if(pe!==void 0&&fe>pe)throw new e.sdk.WERR_INVALID_PARAMETER(j,`no more than ${pe} length.`);return E}function g(E){if(E!==void 0)return w(E)}function w(E){return y(E,"basket",1,300)}function v(E){return y(E,"label",1,300)}function m(E){return y(E,"tag",1,300)}function y(E,j,Q,pe){E=E.trim().toLowerCase();const fe=t.Utils.toArray(E,"utf8").length;if(fe<Q)throw new e.sdk.WERR_INVALID_PARAMETER(j,`at least ${Q} length.`);if(fe>pe)throw new e.sdk.WERR_INVALID_PARAMETER(j,`no more than ${pe} length.`);return E}function b(E,j,Q,pe){if(E!==void 0)return x(E,j)}function x(E,j,Q,pe){var fe;E=E.trim();const Le=/^(?:[A-Za-z0-9+\/]{4})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/,tn=((fe=(E.match(/=+$/)||[])[0])===null||fe===void 0?void 0:fe.length)||0;if(tn>2||E.length%4!==0&&tn!==0||!Le.test(E))throw new e.sdk.WERR_INVALID_PARAMETER(j,"balid base64 string");return t.Utils.toArray(E,"base64").length,E}function I(E,j,Q,pe){if(E!==void 0)return k(E,j,Q,pe)}function k(E,j,Q,pe){if(E=E.trim().toLowerCase(),E.length%2===1)throw new e.sdk.WERR_INVALID_PARAMETER(j,`even length, not ${E.length}.`);if(!/^[0-9A-Fa-f]+$/.test(E))throw new e.sdk.WERR_INVALID_PARAMETER(j,"hexadecimal string.");if(Q!==void 0&&E.length<Q)throw new e.sdk.WERR_INVALID_PARAMETER(j,`at least ${Q} length.`);if(pe!==void 0&&E.length>pe)throw new e.sdk.WERR_INVALID_PARAMETER(j,`no more than ${pe} length.`);return E}function S(E){return E=E.trim(),!(E.length%2===1||!/^[0-9A-Fa-f]+$/.test(E))}function P(E){if(E.unlockingScript===void 0&&E.unlockingScriptLength===void 0)throw new e.sdk.WERR_INVALID_PARAMETER("unlockingScript, unlockingScriptLength","at least one valid value.");const j=I(E.unlockingScript,"unlockingScript"),Q=E.unlockingScriptLength||j.length/2;if(j&&Q!==j.length/2)throw new e.sdk.WERR_INVALID_PARAMETER("unlockingScriptLength","length unlockingScript if both valid.");return{outpoint:n(E.outpoint),inputDescription:p(E.inputDescription,"inputDescription",5,2e3),unlockingScript:j,unlockingScriptLength:Q,sequenceNumber:o(E.sequenceNumber)}}function R(E){return{lockingScript:k(E.lockingScript,"lockingScript"),satoshis:u(E.satoshis,"satoshis"),outputDescription:p(E.outputDescription,"outputDescription",5,2e3),basket:g(E.basket),customInstructions:E.customInstructions,tags:l(E.tags).map(Q=>m(Q))}}function B(E){const j=E||{};return{signAndProcess:r(j.signAndProcess),acceptDelayedBroadcast:r(j.acceptDelayedBroadcast),knownTxids:l(j.knownTxids),returnTXIDOnly:i(j.returnTXIDOnly),noSend:i(j.noSend),noSendChange:l(j.noSendChange).map(pe=>n(pe)),sendWith:l(j.sendWith),randomizeOutputs:r(j.randomizeOutputs)}}function T(E){var j;const Q={description:p(E.description,"description",5,2e3),inputBEEF:E.inputBEEF,inputs:l(E.inputs).map(pe=>P(pe)),outputs:l(E.outputs).map(pe=>R(pe)),lockTime:s(E.lockTime),version:a(E.version),labels:l((j=E.labels)===null||j===void 0?void 0:j.map(pe=>v(pe))),options:B(E.options),isSendWith:!1,isDelayed:!1,isNoSend:!1,isNewTx:!1,isRemixChange:!1,isSignAction:!1,randomVals:void 0,includeAllSourceTransactions:!1};return Q.isSendWith=Q.options.sendWith.length>0,Q.isRemixChange=!Q.isSendWith&&Q.inputs.length===0&&Q.outputs.length===0,Q.isNewTx=Q.isRemixChange||Q.inputs.length>0||Q.outputs.length>0,Q.isSignAction=Q.isNewTx&&(Q.options.signAndProcess===!1||Q.inputs.some(pe=>pe.unlockingScript===void 0)),Q.isDelayed=Q.options.acceptDelayedBroadcast,Q.isNoSend=Q.options.noSend,Q}function N(E){const j=E||{};return{acceptDelayedBroadcast:r(j.acceptDelayedBroadcast),returnTXIDOnly:i(j.returnTXIDOnly),noSend:i(j.noSend),sendWith:l(j.sendWith)}}function L(E){const j={spends:E.spends,reference:E.reference,options:N(E.options),isSendWith:!1,isDelayed:!1,isNoSend:!1,isNewTx:!0,isRemixChange:!1};return j.isSendWith=j.options.sendWith.length>0,j.isDelayed=j.options.acceptDelayedBroadcast,j.isNoSend=j.options.noSend,j}function $(E){return{reference:x(E.reference,"reference")}}function H(E){return E===void 0?void 0:{derivationPrefix:x(E.derivationPrefix,"derivationPrefix"),derivationSuffix:x(E.derivationSuffix,"derivationSuffix"),senderIdentityKey:k(E.senderIdentityKey,"senderIdentityKey")}}function W(E){return E===void 0?void 0:{basket:w(E.basket),customInstructions:c(E.customInstructions,"customInstructions",0,1e3),tags:l(E.tags).map(Q=>m(Q))}}function C(E){if(E.protocol!=="basket insertion"&&E.protocol!=="wallet payment")throw new e.sdk.WERR_INVALID_PARAMETER("protocol","'basket insertion' or 'wallet payment'");return{outputIndex:h(E.outputIndex,"outputIndex"),protocol:E.protocol,paymentRemittance:H(E.paymentRemittance),insertionRemittance:W(E.insertionRemittance)}}function V(E){if(E===void 0)return;E=E.trim().toLowerCase(),p(E,"originator",1,250);const j=E.split(".");for(const Q of j)p(Q,"originator part",1,63)}function q(E){const j={tx:E.tx,outputs:E.outputs.map(Q=>C(Q)),description:p(E.description,"description",5,2e3),labels:(E.labels||[]).map(Q=>v(Q)),seekPermission:r(E.seekPermission)};try{if(t.Beef.fromBinary(j.tx).txs.length<1)throw new e.sdk.WERR_INVALID_PARAMETER("tx","at least one transaction to internalize an output from")}catch{throw new e.sdk.WERR_INVALID_PARAMETER("tx","valid with at least one transaction to internalize an output from")}if(j.outputs.length<1)throw new e.sdk.WERR_INVALID_PARAMETER("outputs","at least one output to internalize from the transaction");return j}function G(E,j){if(E!==void 0)return Y(E,j)}function Y(E,j){const Q=E.split(".");if(Q.length!==2||!Number.isInteger(Number(Q[1])))throw new e.sdk.WERR_INVALID_PARAMETER(j,"txid as hex string and numeric output index joined with '.'");const pe=k(Q[0],`${j} txid`,void 0,64),fe=h(Number(Q[1]),`${j} vout`);return`${pe}.${fe}`}function z(E){return{basket:w(E.basket),output:Y(E.output,"output")}}function K(E){return{type:x(E.type,"type"),serialNumber:x(E.serialNumber,"serialNumber"),certifier:k(E.certifier,"certifier")}}function oe(E){return{certifiers:l(E.certifiers.map(Q=>k(Q.trim(),"certifiers"))),types:l(E.types.map(Q=>x(Q.trim(),"types"))),limit:f(E.limit,"limit",10,1,1e4),offset:h(s(E.offset),"offset"),privileged:i(E.privileged),privilegedReason:c(E.privilegedReason,"privilegedReason",5,50),partial:void 0}}function te(E){for(const j of Object.keys(E))p(j,"field name",1,50);return E}function J(E,j){return E==="certifier"?E:k(E,j)}function X(E,j){if(E!==void 0)return J(E,j)}function ie(E,j){for(const Q of Object.keys(E))p(Q,`${j} field name`,1,50),x(E[Q],`${j} field value`);return E}function ge(E,j){if(E!==void 0)return ie(E,j)}async function ke(E){const j={acquisitionProtocol:E.acquisitionProtocol,type:x(E.type,"type"),serialNumber:b(E.serialNumber,"serialNumber"),certifier:k(E.certifier,"certifier"),revocationOutpoint:G(E.revocationOutpoint,"revocationOutpoint"),fields:te(E.fields),signature:I(E.signature,"signature"),certifierUrl:E.certifierUrl,keyringRevealer:X(E.keyringRevealer,"keyringRevealer"),keyringForSubject:ge(E.keyringForSubject,"keyringForSubject"),privileged:i(E.privileged),privilegedReason:c(E.privilegedReason,"privilegedReason",5,50)};if(j.privileged&&!j.privilegedReason)throw new e.sdk.WERR_INVALID_PARAMETER("privilegedReason","valid when 'privileged' is true ");if(j.acquisitionProtocol==="direct"){if(!j.serialNumber)throw new e.sdk.WERR_INVALID_PARAMETER("serialNumber",'valid when acquisitionProtocol is "direct"');if(!j.signature)throw new e.sdk.WERR_INVALID_PARAMETER("signature",'valid when acquisitionProtocol is "direct"');if(!j.revocationOutpoint)throw new e.sdk.WERR_INVALID_PARAMETER("revocationOutpoint",'valid when acquisitionProtocol is "direct"')}return j}function me(E){if(E.acquisitionProtocol!=="issuance")throw new e.sdk.WERR_INTERNAL("Only acquire certificate via issuance requests allowed here.");if(E.serialNumber)throw new e.sdk.WERR_INVALID_PARAMETER("serialNumber",'valid when acquisitionProtocol is "direct"');if(E.signature)throw new e.sdk.WERR_INVALID_PARAMETER("signature",'valid when acquisitionProtocol is "direct"');if(E.revocationOutpoint)throw new e.sdk.WERR_INVALID_PARAMETER("revocationOutpoint",'valid when acquisitionProtocol is "direct"');if(E.keyringRevealer)throw new e.sdk.WERR_INVALID_PARAMETER("keyringRevealer",'valid when acquisitionProtocol is "direct"');if(E.keyringForSubject)throw new e.sdk.WERR_INVALID_PARAMETER("keyringForSubject",'valid when acquisitionProtocol is "direct"');if(!E.certifierUrl)throw new e.sdk.WERR_INVALID_PARAMETER("certifierUrl",'valid when acquisitionProtocol is "issuance"');if(E.privileged&&!E.privilegedReason)throw new e.sdk.WERR_INVALID_PARAMETER("privilegedReason","valid when 'privileged' is true ");return{type:x(E.type,"type"),certifier:k(E.certifier,"certifier"),certifierUrl:E.certifierUrl,fields:te(E.fields),privileged:i(E.privileged),privilegedReason:c(E.privilegedReason,"privilegedReason",5,50),subject:""}}function he(E){if(E.acquisitionProtocol!=="direct")throw new e.sdk.WERR_INTERNAL("Only acquire direct certificate requests allowed here.");if(!E.serialNumber)throw new e.sdk.WERR_INVALID_PARAMETER("serialNumber",'valid when acquisitionProtocol is "direct"');if(!E.signature)throw new e.sdk.WERR_INVALID_PARAMETER("signature",'valid when acquisitionProtocol is "direct"');if(!E.revocationOutpoint)throw new e.sdk.WERR_INVALID_PARAMETER("revocationOutpoint",'valid when acquisitionProtocol is "direct"');if(!E.keyringRevealer)throw new e.sdk.WERR_INVALID_PARAMETER("keyringRevealer",'valid when acquisitionProtocol is "direct"');if(!E.keyringForSubject)throw new e.sdk.WERR_INVALID_PARAMETER("keyringForSubject",'valid when acquisitionProtocol is "direct"');if(E.privileged&&!E.privilegedReason)throw new e.sdk.WERR_INVALID_PARAMETER("privilegedReason","valid when 'privileged' is true ");return{type:x(E.type,"type"),serialNumber:x(E.serialNumber,"serialNumber"),certifier:k(E.certifier,"certifier"),revocationOutpoint:Y(E.revocationOutpoint,"revocationOutpoint"),fields:te(E.fields),signature:k(E.signature,"signature"),keyringRevealer:J(E.keyringRevealer,"keyringRevealer"),keyringForSubject:ie(E.keyringForSubject,"keyringForSubject"),privileged:i(E.privileged),privilegedReason:c(E.privilegedReason,"privilegedReason",5,50),subject:""}}function Be(E){if(E.privileged&&!E.privilegedReason)throw new e.sdk.WERR_INVALID_PARAMETER("privilegedReason","valid when 'privileged' is true ");return{type:b(E.certificate.type,"certificate.type"),serialNumber:b(E.certificate.serialNumber,"certificate.serialNumber"),certifier:I(E.certificate.certifier,"certificate.certifier"),subject:I(E.certificate.subject,"certificate.subject"),revocationOutpoint:G(E.certificate.revocationOutpoint,"certificate.revocationOutpoint"),signature:I(E.certificate.signature,"certificate.signature"),fieldsToReveal:l(E.fieldsToReveal).map(Q=>p(Q,`fieldsToReveal ${Q}`,1,50)),verifier:k(E.verifier,"verifier"),privileged:i(E.privileged),privilegedReason:c(E.privilegedReason,"privilegedReason",5,50)}}function we(E){return{identityKey:k(E.identityKey,"identityKey",66,66),limit:f(E.limit,"limit",10,1,1e4),offset:h(s(E.offset),"offset"),seekPermission:i(E.seekPermission)}}function $e(E){for(const j of Object.keys(E))p(j,`field name ${j}`,1,50);return E}function Nt(E){return{attributes:$e(E.attributes),limit:f(E.limit,"limit",10,1,1e4),offset:h(s(E.offset),"offset"),seekPermission:i(E.seekPermission)}}function Ne(E){let j;if(E.tagQueryMode===void 0||E.tagQueryMode==="any")j="any";else if(E.tagQueryMode==="all")j="all";else throw new e.sdk.WERR_INVALID_PARAMETER("tagQueryMode","undefined, 'any', or 'all'");return{basket:p(E.basket,"basket",1,300),tags:(E.tags||[]).map(pe=>p(pe,"tag",1,300)),tagQueryMode:j,includeLockingScripts:E.include==="locking scripts",includeTransactions:E.include==="entire transactions",includeCustomInstructions:i(E.includeCustomInstructions),includeTags:i(E.includeTags),includeLabels:i(E.includeLabels),limit:f(E.limit,"limit",10,1,1e4),offset:f(E.offset,"offset",0,0,void 0),seekPermission:r(E.seekPermission),knownTxids:[]}}function Me(E){let j;if(E.labelQueryMode===void 0||E.labelQueryMode==="any")j="any";else if(E.labelQueryMode==="all")j="all";else throw new e.sdk.WERR_INVALID_PARAMETER("labelQueryMode","undefined, 'any', or 'all'");return{labels:(E.labels||[]).map(pe=>v(pe)),labelQueryMode:j,includeLabels:i(E.includeLabels),includeInputs:i(E.includeInputs),includeInputSourceLockingScripts:i(E.includeInputSourceLockingScripts),includeInputUnlockingScripts:i(E.includeInputUnlockingScripts),includeOutputs:i(E.includeOutputs),includeOutputLockingScripts:i(E.includeOutputLockingScripts),limit:f(E.limit,"limit",10,1,1e4),offset:f(E.offset,"offset",0,0,void 0),seekPermission:r(E.seekPermission)}}return Ce}var xo={},uw;function nC(){if(uw)return xo;uw=1,Object.defineProperty(xo,"__esModule",{value:!0}),xo.CertOps=void 0;const t=Xe,e=ve(),n=Xe,r=Qe;let i=class Ur extends t.Certificate{constructor(o,a){super(a.type,a.serialNumber,a.subject,a.certifier,a.revocationOutpoint,a.fields,a.signature),this.wallet=o}static async fromCounterparty(o,a){const l=new Ur(o,a.certificate);return await l.verify(),await l.decryptFields(a.counterparty,a.keyring),l.fields=l._encryptedFields,l}static async fromCertifier(o,a){return await Ur.fromCounterparty(o,{counterparty:a.certificate.certifier,...a})}static async fromEncrypted(o,a,l){const c=new Ur(o,a);return c._keyring=l,c._encryptedFields=this.copyFields(c.fields),c._decryptedFields=await c.decryptFields(),await c.verify(),c}static async fromDecrypted(o,a){const l=new Ur(o,a);return{fields:l._encryptedFields,keyring:l._keyring}=await l.encryptFields(),l._decryptedFields=await l.decryptFields(),l}static copyFields(o){const a={};for(const[l,c]of Object.entries(o))a[l]=c;return a}static getProtocolForCertificateFieldEncryption(o,a){return{protocolID:[2,"certificate field encryption"],keyID:`${o} ${a}`}}exportForSubject(){if(!this._keyring||!this._encryptedFields||!this.signature||this.signature.length===0)throw new r.WERR_INVALID_OPERATION("Certificate must be encrypted and signed prior to export.");const o=this.toWalletCertificate(),a=this._keyring;return{certificate:o,keyring:a}}toWalletCertificate(){return{signature:"",...this}}async encryptFields(o="self"){const a=this._decryptedFields||this.fields,l={},c={};for(const u of Object.keys(a)){const d=n.SymmetricKey.fromRandom(),f=d.encrypt(n.Utils.toArray(this.fields[u],"utf8"));l[u]=n.Utils.toBase64(f);const h=await this.wallet.encrypt({plaintext:d.toArray(),counterparty:o,...Ur.getProtocolForCertificateFieldEncryption(this.serialNumber,u)});c[u]=n.Utils.toBase64(h.ciphertext)}return this._keyring=c,this._decryptedFields=a,this.fields=this._encryptedFields=l,{fields:l,keyring:c}}async decryptFields(o,a){a||(a=this._keyring);const l=this._encryptedFields||this.fields,c={};if(!a)throw new e.sdk.WERR_INVALID_PARAMETER("keyring","valid");try{for(const u of Object.keys(a)){const{plaintext:d}=await this.wallet.decrypt({ciphertext:n.Utils.toArray(a[u],"base64"),counterparty:o||this.subject,...Ur.getProtocolForCertificateFieldEncryption(this.serialNumber,u)}),f=new n.SymmetricKey(d).decrypt(n.Utils.toArray(l[u],"base64"));c[u]=n.Utils.toUTF8(f)}return this._keyring=a,this._encryptedFields=l,this.fields=this._decryptedFields=c,c}catch(u){throw e.sdk.WalletError.fromUnknown(u)}}async exportForCounterparty(o,a){if(!this._keyring||!this._encryptedFields||!this.signature||this.signature.length===0)throw new r.WERR_INVALID_OPERATION("Certificate must be encrypted and signed prior to export.");const l=this.toWalletCertificate(),c=await this.createKeyringForVerifier(o,a);return{certificate:l,keyring:c,counterparty:await(0,e.getIdentityKey)(this.wallet)}}async createKeyringForVerifier(o,a){if(!this._keyring||!this._encryptedFields)throw new e.sdk.WERR_INVALID_OPERATION("certificate must be encrypted");if(!Array.isArray(a)||a.some(c=>this._encryptedFields[c]===void 0))throw new e.sdk.WERR_INVALID_PARAMETER("fieldsToReveal","an array of certificate field names");const l={};for(const c of a){const u=this._keyring[c],d=Ur.getProtocolForCertificateFieldEncryption(this.serialNumber,c),{plaintext:f}=await this.wallet.decrypt({ciphertext:n.Utils.toArray(u,"base64"),counterparty:this.certifier,...d});try{new n.SymmetricKey(f).decrypt(n.Utils.toArray(this.fields[c],"base64"))}catch{throw new e.sdk.WERR_INTERNAL(`unable to decrypt field "${c}" using derived field key.`)}const{ciphertext:h}=await this.wallet.encrypt({plaintext:f,counterparty:o,...d});l[c]=n.Utils.toBase64(h)}return l}async encryptAndSignNewCertificate(){if(await(0,e.getIdentityKey)(this.wallet)!==this.certifier)throw new e.sdk.WERR_INVALID_PARAMETER("wallet","the certifier for new certificate issuance.");await this.encryptFields(this.subject),await this.sign(this.wallet),await this.verify()}};return xo.CertOps=i,xo}var zI={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.specOpSetWalletChangeParams=t.specOpInvalidChange=t.specOpWalletBalance=t.ProvenTxReqNonTerminalStatus=t.ProvenTxReqTerminalStatus=void 0,t.isSpecOp=e,t.ProvenTxReqTerminalStatus=["completed","invalid","doubleSpend"],t.ProvenTxReqNonTerminalStatus=["sending","unsent","nosend","unknown","nonfinal","unprocessed","unmined","callback","unconfirmed"],t.specOpWalletBalance="893b7646de0e1c9f741bd6e9169b76a8847ae34adef7bef1e6a285371206d2e8",t.specOpInvalidChange="5a76fd430a311f8bc0553859061710a4475c19fed46e2ff95969aa918e612e57",t.specOpSetWalletChangeParams="a4979d28ced8581e9c1c92f1001cc7cb3aabf8ea32e10888ad898f0a509a3929";function e(n){return[t.specOpWalletBalance,t.specOpInvalidChange,t.specOpSetWalletChangeParams].indexOf(n)>=0}})(zI);var GI={};Object.defineProperty(GI,"__esModule",{value:!0});var Fd={};Object.defineProperty(Fd,"__esModule",{value:!0});Fd.PrivilegedKeyManager=void 0;const Wt=Xe;class rC{constructor(e,n=12e4){this.chunkPropNames=[],this.chunkPadPropNames=[],this.decoyPropNamesDestroy=[],this.decoyPropNamesRemain=[],this.CHUNK_COUNT=4,this.keyGetter=e,this.retentionPeriod=n;for(let r=0;r<2;r++){const i=this.generateRandomPropName();this[i]=Uint8Array.from((0,Wt.Random)(16)),this.decoyPropNamesRemain.push(i)}}destroyKey(){try{for(const e of this.chunkPropNames){const n=this[e];n&&n.fill(0),delete this[e]}for(const e of this.chunkPadPropNames){const n=this[e];n&&n.fill(0),delete this[e]}for(const e of this.decoyPropNamesDestroy){const n=this[e];n&&n.fill(0),delete this[e]}this.chunkPropNames=[],this.chunkPadPropNames=[],this.decoyPropNamesDestroy=[]}catch{}finally{this.destroyTimer&&(clearTimeout(this.destroyTimer),this.destroyTimer=void 0)}}scheduleKeyDestruction(){this.destroyTimer&&clearTimeout(this.destroyTimer),this.destroyTimer=setTimeout(()=>{this.destroyKey()},this.retentionPeriod)}xorBytes(e,n){const r=new Uint8Array(e.length);for(let i=0;i<e.length;i++)r[i]=e[i]^n[i];return r}splitKeyIntoChunks(e){const n=Math.floor(e.length/this.CHUNK_COUNT),r=[];let i=0;for(let s=0;s<this.CHUNK_COUNT;s++){const o=s===this.CHUNK_COUNT-1?e.length-i:n;r.push(e.slice(i,i+o)),i+=o}return r}reassembleKeyFromChunks(){try{const e=[];for(let s=0;s<this.chunkPropNames.length;s++){const o=this[this.chunkPropNames[s]],a=this[this.chunkPadPropNames[s]];if(!o||!a||o.length!==a.length)return null;const l=this.xorBytes(o,a);e.push(l)}const n=e.reduce((s,o)=>s+o.length,0);if(n!==32)return null;const r=new Uint8Array(n);let i=0;for(const s of e)r.set(s,i),i+=s.length,s.fill(0);return r}catch{return null}}generateRandomPropName(){return`_${Wt.Utils.toHex((0,Wt.Random)(4))}_${Math.floor(Math.random()*1e6)}`}get32ByteRepresentation(e){const n=e.toArray();if(n.length>32)throw new Error("PrivilegedKeyManager: Expected a 32-byte key, but got more.");const r=new Uint8Array(32);return r.set(n,32-n.length),r}async getPrivilegedKey(e){if(this.chunkPropNames.length>0&&this.chunkPadPropNames.length>0){const s=this.reassembleKeyFromChunks();if(s&&s.length===32){const o=Wt.Utils.toHex([...s]);return s.fill(0),this.scheduleKeyDestruction(),new Wt.PrivateKey(o,"hex")}}const n=await this.keyGetter(e),r=this.get32ByteRepresentation(n);this.destroyKey();const i=this.splitKeyIntoChunks(r);for(let s=0;s<i.length;s++){const o=this.generateRandomPropName(),a=this.generateRandomPropName();this.chunkPropNames.push(o),this.chunkPadPropNames.push(a);const l=Uint8Array.from((0,Wt.Random)(i[s].length)),c=this.xorBytes(i[s],l);this[o]=c,this[a]=l}for(let s=0;s<2;s++){const o=this.generateRandomPropName();this[o]=Uint8Array.from((0,Wt.Random)(32)),this.decoyPropNamesDestroy.push(o)}return r.fill(0),this.scheduleKeyDestruction(),n}async getPublicKey(e){return new Wt.ProtoWallet(await this.getPrivilegedKey(e.privilegedReason)).getPublicKey(e)}async revealCounterpartyKeyLinkage(e){return new Wt.ProtoWallet(await this.getPrivilegedKey(e.privilegedReason)).revealCounterpartyKeyLinkage(e)}async revealSpecificKeyLinkage(e){return new Wt.ProtoWallet(await this.getPrivilegedKey(e.privilegedReason)).revealSpecificKeyLinkage(e)}async encrypt(e){return new Wt.ProtoWallet(await this.getPrivilegedKey(e.privilegedReason)).encrypt(e)}async decrypt(e){return new Wt.ProtoWallet(await this.getPrivilegedKey(e.privilegedReason)).decrypt(e)}async createHmac(e){return new Wt.ProtoWallet(await this.getPrivilegedKey(e.privilegedReason)).createHmac(e)}async verifyHmac(e){return new Wt.ProtoWallet(await this.getPrivilegedKey(e.privilegedReason)).verifyHmac(e)}async createSignature(e){return new Wt.ProtoWallet(await this.getPrivilegedKey(e.privilegedReason)).createSignature(e)}async verifySignature(e){return new Wt.ProtoWallet(await this.getPrivilegedKey(e.privilegedReason)).verifySignature(e)}}Fd.PrivilegedKeyManager=rC;var dw;function iC(){return dw||(dw=1,function(t){var e=Ee&&Ee.__createBinding||(Object.create?function(r,i,s,o){o===void 0&&(o=s);var a=Object.getOwnPropertyDescriptor(i,s);(!a||("get"in a?!i.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(r,o,a)}:function(r,i,s,o){o===void 0&&(o=s),r[o]=i[s]}),n=Ee&&Ee.__exportStar||function(r,i){for(var s in r)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,r,s)};Object.defineProperty(t,"__esModule",{value:!0}),n(hc,t),n(jI,t),n(KI,t),n(Qe,t),n(tC(),t),n(nC(),t),n(zI,t),n(GI,t),n(Fd,t)}(gh)),gh}var mh={},$d={};Object.defineProperty($d,"__esModule",{value:!0});$d.stampLog=sC;$d.stampLogFormat=oC;function sC(t,e){const n=`${new Date().toISOString()} ${e}
`;if(typeof t=="object"&&typeof t.log=="string")return t.log=t.log+n;if(typeof t=="string")return t+n}function oC(t){if(typeof t!="string")return"";const e=t.split(`
`),n=[];let r=0;const i=[];for(const a of e){const l=a.indexOf(" ");if(l>-1){const c=new Date(a.substring(0,l)).getTime(),u=a.substring(l+1),d=c-(r||c),f=u.indexOf("**NETWORK**")>-1;f&&i.push(n.length),n.push({when:c,rest:u,delta:d,newClock:f}),r=c}}const s=n[n.length-1].when-n[0].when;if(i.length%2===0){let a=s,l=0;for(const u of i)a-=n[u-1].when-n[l].when,l=u;a-=n[n.length-1].when-n[l].when;let c=i.length;for(const u of i){const d=c>1?Math.floor(a/c):a;n[u].delta=d,a-=d,c--}}let o=`${new Date(n[0].when).toISOString()} Total = ${s} msecs
`;for(const a of n){let l=a.delta.toString();l=`${" ".repeat(8-l.length)}${l}`,o+=`${l} ${a.rest}
`}return o}var yh={},fw;function aC(){return fw||(fw=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ScriptTemplateBRC29=t.brc29ProtocolID=void 0;const e=fm(),n=Xe;t.brc29ProtocolID=[2,"3241645161d8"];class r{constructor(s){this.params=s,this.unlockLength=108,this.p2pkh=new n.P2PKH,(0,e.verifyTruthy)(s.derivationPrefix),(0,e.verifyTruthy)(s.derivationSuffix)}getKeyID(){return`${this.params.derivationPrefix} ${this.params.derivationSuffix}`}getKeyDeriver(s){return typeof s=="string"&&(s=n.PrivateKey.fromHex(s)),!this.params.keyDeriver||this.params.keyDeriver.rootKey.toHex()!==s.toHex()?new n.KeyDeriver(s):this.params.keyDeriver}lock(s,o){const a=this.getKeyDeriver(s).derivePublicKey(t.brc29ProtocolID,this.getKeyID(),o,!1).toAddress();return this.p2pkh.lock(a)}unlock(s,o,a,l){const c=this.getKeyDeriver(s).derivePrivateKey(t.brc29ProtocolID,this.getKeyID(),o).toHex();return this.p2pkh.unlock((0,e.asBsvSdkPrivateKey)(c),"all",!1,a,l)}}t.ScriptTemplateBRC29=r}(yh)),yh}var dm={};Object.defineProperty(dm,"__esModule",{value:!0});dm.parseTxScriptOffsets=lC;const cC=Xe;function lC(t){const e=new cC.Utils.Reader(t),n=[],r=[];e.pos+=4;const i=e.readVarIntNum();for(let o=0;o<i;o++){e.pos+=36;const a=e.readVarIntNum();n.push({vin:o,offset:e.pos,length:a}),e.pos+=a+4}const s=e.readVarIntNum();for(let o=0;o<s;o++){e.pos+=8;const a=e.readVarIntNum();r.push({vout:o,offset:e.pos,length:a}),e.pos+=a}return{inputs:n,outputs:r}}var Wd={};Object.defineProperty(Wd,"__esModule",{value:!0});Wd.convertProofToMerklePath=dC;const uC=Xe;function dC(t,e){const n=e.height,r=e.nodes.length,i=Array(r).fill(0).map(()=>[]);let s=e.index;for(let o=0;o<r;o++){const a=e.nodes[o],l=s%2===1,u={offset:l?s-1:s+1};if(a==="*"||o===0&&a===t?u.duplicate=!0:u.hash=a,i[o].push(u),o===0){const d={offset:e.index,hash:t,txid:!0};l?i[0].push(d):i[0].unshift(d)}s=s>>1}return new uC.MerklePath(n,i)}var qe={},hw;function fC(){if(hw)return qe;hw=1,Object.defineProperty(qe,"__esModule",{value:!0}),qe.getIdentityKey=n,qe.toWalletNetwork=r,qe.makeAtomicBeef=i,qe.asBsvSdkTx=s,qe.asBsvSdkScript=o,qe.asBsvSdkPrivateKey=a,qe.asBsvSdkPublickKey=l,qe.verifyTruthy=c,qe.verifyHexString=u,qe.verifyOptionalHexString=d,qe.verifyNumber=f,qe.verifyInteger=h,qe.verifyId=p,qe.verifyOneOrNone=g,qe.verifyOne=w,qe.wait=v,qe.randomBytes=m,qe.randomBytesHex=y,qe.randomBytesBase64=b,qe.validateSecondsSinceEpoch=x,qe.arraysEqual=I,qe.optionalArraysEqual=k,qe.maxDate=S,qe.sha256Hash=P,qe.doubleSha256HashLE=R,qe.doubleSha256BE=B;const t=Xe,e=ve();async function n(T){return(await T.getPublicKey({identityKey:!0})).publicKey}function r(T){return T==="main"?"mainnet":"testnet"}function i(T,N){return Array.isArray(N)&&(N=t.Beef.fromBinary(N)),N.mergeTransaction(T),N.toBinaryAtomic(T.id("hex"))}function s(T){return Array.isArray(T)?T=t.Transaction.fromBinary(T):typeof T=="string"&&(T=t.Transaction.fromHex(T)),T}function o(T){return Array.isArray(T)?T=t.Script.fromBinary(T):typeof T=="string"&&(T=t.Script.fromHex(T)),T}function a(T){return t.PrivateKey.fromString(T,"hex")}function l(T){return t.PublicKey.fromString(T)}function c(T,N){if(!T)throw new e.sdk.WERR_INTERNAL(N??"A truthy value is required.");return T}function u(T){if(typeof T!="string")throw new e.sdk.WERR_INTERNAL("A string is required.");return T=T.trim().toLowerCase(),T}function d(T){if(T)return u(T)}function f(T){if(typeof T!="number")throw new e.sdk.WERR_INTERNAL("A number is required.");return T}function h(T){if(typeof T!="number"||!Number.isInteger(T))throw new e.sdk.WERR_INTERNAL("An integer is required.");return T}function p(T){if(T=h(T),T<1)throw new e.sdk.WERR_INTERNAL("id must be valid integer greater than zero.");return T}function g(T){if(T.length>1)throw new e.sdk.WERR_BAD_REQUEST("Result must be unique.");return T[0]}function w(T,N){if(T.length!==1)throw new e.sdk.WERR_BAD_REQUEST(N??"Result must exist and be unique.");return T[0]}function v(T){return new Promise(N=>setTimeout(N,T))}function m(T){return(0,t.Random)(T)}function y(T){return t.Utils.toHex((0,t.Random)(T))}function b(T){return t.Utils.toBase64((0,t.Random)(T))}function x(T){const N=new Date(T*1e3);if(N.getTime()/1e3!==T||T<16e8||T>1e11)throw new e.sdk.WERR_INVALID_PARAMETER("time",'valid "since epoch" unix time');return N}function I(T,N){if(T.length!==N.length)return!1;for(let L=0;L<T.length;L++)if(T[L]!==N[L])return!1;return!0}function k(T,N){return!T&&!N?!0:!T||!N?!1:I(T,N)}function S(T,N){if(T&&N)return T>N?T:N;if(T)return T;if(N)return N}function P(T){return new t.Hash.SHA256().update(T).digest()}function R(T){const N=new t.Hash.SHA256().update(T).digest();return new t.Hash.SHA256().update(N).digest()}function B(T){return R(T).reverse()}return qe}var Vd={};Object.defineProperty(Vd,"__esModule",{value:!0});Vd.asString=hC;Vd.asArray=pC;const XI=Xe;function hC(t){return typeof t=="string"?t:XI.Utils.toHex(t)}function pC(t){return Array.isArray(t)?t:XI.Utils.toArray(t,"hex")}var pw;function fm(){return pw||(pw=1,function(t){var e=Ee&&Ee.__createBinding||(Object.create?function(r,i,s,o){o===void 0&&(o=s);var a=Object.getOwnPropertyDescriptor(i,s);(!a||("get"in a?!i.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(r,o,a)}:function(r,i,s,o){o===void 0&&(o=s),r[o]=i[s]}),n=Ee&&Ee.__exportStar||function(r,i){for(var s in r)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,r,s)};Object.defineProperty(t,"__esModule",{value:!0}),n($d,t),n(aC(),t),n(dm,t),n(Wd,t),n(fC(),t),n(Vd,t)}(mh)),mh}var ko={},hm={};Object.defineProperty(hm,"__esModule",{value:!0});hm.acquireDirectCertificate=gC;async function gC(t,e,n){var r;const i=new Date,s={certificateId:0,created_at:i,updated_at:i,userId:e.userId,type:n.type,subject:n.subject,verifier:n.keyringRevealer==="certifier"?n.certifier:n.keyringRevealer,serialNumber:n.serialNumber,certifier:n.certifier,revocationOutpoint:n.revocationOutpoint,signature:n.signature,fields:[],isDeleted:!1};for(const[a,l]of Object.entries(n.fields))(r=s.fields)===null||r===void 0||r.push({certificateId:0,created_at:i,updated_at:i,userId:e.userId,fieldName:a,fieldValue:l,masterKey:n.keyringForSubject[a]||""});return await t.storage.insertCertificate(s),{type:n.type,subject:n.subject,serialNumber:n.serialNumber,certifier:n.certifier,revocationOutpoint:n.revocationOutpoint,signature:n.signature,fields:n.fields}}var jc={},gw;function mC(){if(gw)return jc;gw=1,Object.defineProperty(jc,"__esModule",{value:!0}),jc.proveCertificate=e;const t=ve();async function e(n,r,i){const s={partial:{type:i.type,serialNumber:i.serialNumber,certifier:i.certifier,subject:i.subject,revocationOutpoint:i.revocationOutpoint,signature:i.signature},certifiers:[],types:[],limit:2,offset:0,privileged:!1},o=await n.storage.listCertificates(s);if(o.certificates.length!=1)throw new t.sdk.WERR_INVALID_PARAMETER("args","a unique certificate match");const a=o.certificates[0];let l=n;if(a.subject!=n.identityKey){if(!n.privilegedKeyManager)throw new t.sdk.WERR_INVALID_OPERATION("Wallet is not privileged. proveCertificate fails.");l=n.privilegedKeyManager}const u=await(await t.sdk.CertOps.fromCounterparty(l,{certificate:{...a},keyring:a.keyring,counterparty:a.verifier||a.subject})).exportForCounterparty(i.verifier,i.fieldsToReveal);return{certificate:u.certificate,verifier:u.counterparty,keyringForVerifier:u.keyring}}return jc}var gi={},Kc={},mw;function yC(){if(mw)return Kc;mw=1,Object.defineProperty(Kc,"__esModule",{value:!0}),Kc.buildSignableTransaction=r;const t=Xe,e=ve(),n=pm();function r(i,s,o){var a;const l=o.getClientChangeKeyPair(),c=s.inputBEEF?t.Beef.fromBinary(s.inputBEEF):void 0,{inputs:u,outputs:d}=i,f=new t.Transaction(s.version,[],[],s.lockTime),h=Array(d.length);for(let y=0;y<d.length;y++){const b=d.findIndex(x=>x.vout===y);if(b<0)throw new e.sdk.WERR_INVALID_PARAMETER("output.vout",`sequential. ${y} is missing`);h[y]=b}for(let y=0;y<d.length;y++){const b=h[y],x=d[b];if(y!==x.vout)throw new e.sdk.WERR_INVALID_PARAMETER("output.vout",`equal to array index. ${x.vout} !== ${y}`);const I=x.providedBy==="storage"&&x.purpose==="change",k=I?(0,n.makeChangeLock)(x,i,s,l,o):(0,e.asBsvSdkScript)(x.lockingScript),S={satoshis:x.satoshis,lockingScript:k,change:I};f.addOutput(S)}const p=[];for(const y of u){const b=y.vin!==void 0&&y.vin<s.inputs.length?s.inputs[y.vin]:void 0;p.push({argsInput:b,storageInput:y})}p.sort((y,b)=>y.storageInput.vin<b.storageInput.vin?-1:y.storageInput.vin===b.storageInput.vin?0:1);const g=[];let w=0;for(const{storageInput:y,argsInput:b}of p)if(b){const I=typeof b.unlockingScript=="string"?(0,e.asBsvSdkScript)(b.unlockingScript):new t.Script,k=s.isSignAction?(a=c==null?void 0:c.findTxid(b.outpoint.txid))===null||a===void 0?void 0:a.tx:void 0,S={sourceTXID:b.outpoint.txid,sourceOutputIndex:b.outpoint.vout,sourceTransaction:k,unlockingScript:I,sequence:b.sequenceNumber};f.addInput(S)}else{if(y.type!=="P2PKH")throw new e.sdk.WERR_INVALID_PARAMETER("type",`vin ${y.vin}, "${y.type}" is not a supported unlocking script type.`);g.push({vin:f.inputs.length,derivationPrefix:(0,e.verifyTruthy)(y.derivationPrefix),derivationSuffix:(0,e.verifyTruthy)(y.derivationSuffix),unlockerPubKey:y.senderIdentityKey,sourceSatoshis:y.sourceSatoshis,lockingScript:y.sourceLockingScript});const x={sourceTXID:y.sourceTxid,sourceOutputIndex:y.sourceVout,sourceTransaction:y.sourceTransaction?t.Transaction.fromBinary(y.sourceTransaction):void 0,unlockingScript:new t.Script,sequence:4294967295};f.addInput(x),w+=(0,e.verifyTruthy)(y.sourceSatoshis)}const v=d.filter(y=>y.purpose==="change").reduce((y,b)=>y+b.satoshis,0),m=w-v;return{tx:f,amount:m,pdi:g,log:""}}return Kc}var yw;function pm(){if(yw)return gi;yw=1,Object.defineProperty(gi,"__esModule",{value:!0}),gi.createAction=r,gi.makeChangeLock=a,gi.completeSignedTransaction=l,gi.processAction=u;const t=Xe,e=ve(),n=yC();async function r(d,f,h){var p;const g={};let w;if(h.isNewTx){if(w=await i(d,h),h.isSignAction)return s(w,d,h);w.tx=await l(w,{},d),g.txid=w.tx.id("hex"),g.noSendChange=(p=w.dcr.noSendChangeOutputVouts)===null||p===void 0?void 0:p.map(v=>`${g.txid}.${v}`),h.options.returnTXIDOnly||(g.tx=(0,e.makeAtomicBeef)(w.tx,w.dcr.inputBeef))}return g.sendWithResults=await u(w,d,f,h),g}async function i(d,f){const h=c(f),p=await d.storage.createAction(h),g=p.reference,{tx:w,amount:v,pdi:m}=(0,n.buildSignableTransaction)(p,f,d);return{reference:g,dcr:p,args:f,amount:v,tx:w,pdi:m}}function s(d,f,h){var p;if(!d.dcr.inputBeef)throw new e.sdk.WERR_INTERNAL("prior.dcr.inputBeef must be valid");const g=d.tx.id("hex"),w={noSendChange:h.isNoSend?(p=d.dcr.noSendChangeOutputVouts)===null||p===void 0?void 0:p.map(v=>`${g}.${v}`):void 0,signableTransaction:{reference:d.dcr.reference,tx:o(d.tx,d.dcr.inputBeef)}};return f.pendingSignActions[w.signableTransaction.reference]=d,w}function o(d,f){const h=new t.Beef;for(const p of d.inputs){if(!p.sourceTransaction)throw new e.sdk.WERR_INTERNAL("Every signableTransaction input must have a sourceTransaction");h.mergeRawTx(p.sourceTransaction.toBinary())}return h.mergeRawTx(d.toBinary()),h.toBinaryAtomic(d.id("hex"))}function a(d,f,h,p,g){const w=f.derivationPrefix,v=(0,e.verifyTruthy)(d.derivationSuffix);return new e.ScriptTemplateBRC29({derivationPrefix:w,derivationSuffix:v,keyDeriver:g.keyDeriver}).lock(p.privateKey,p.publicKey)}async function l(d,f,h){for(const[p,g]of Object.entries(f)){const w=Number(p),v=d.args.inputs[w],m=d.tx.inputs[w];if(!v||!m||v.unlockingScript||!Number.isInteger(v.unlockingScriptLength))throw new e.sdk.WERR_INVALID_PARAMETER("args","spend does not correspond to prior input with valid unlockingScriptLength.");if(g.unlockingScript.length/2>v.unlockingScriptLength)throw new e.sdk.WERR_INVALID_PARAMETER("args",`spend unlockingScript length ${g.unlockingScript.length} exceeds expected length ${v.unlockingScriptLength}`);m.unlockingScript=(0,e.asBsvSdkScript)(g.unlockingScript),g.sequenceNumber!==void 0&&(m.sequence=g.sequenceNumber)}for(const p of d.pdi){const g=new e.ScriptTemplateBRC29({derivationPrefix:p.derivationPrefix,derivationSuffix:p.derivationSuffix,keyDeriver:h.keyDeriver}),w=h.getClientChangeKeyPair(),v=w.privateKey,m=p.unlockerPubKey||w.publicKey,y=p.sourceSatoshis,b=(0,e.asBsvSdkScript)(p.lockingScript),x=g.unlock(v,m,y,b),I=d.tx.inputs[p.vin];I.unlockingScriptTemplate=x}return await d.tx.sign(),d.tx}function c(d){let f=d;if(!f.inputs.every(h=>h.unlockingScript===void 0)){f={...d,inputs:[]};for(const h of d.inputs){const p={...h,unlockingScriptLength:h.unlockingScript!==void 0?h.unlockingScript.length:h.unlockingScriptLength};delete p.unlockingScript,f.inputs.push(p)}}return f}async function u(d,f,h,p){const g={isNewTx:p.isNewTx,isSendWith:p.isSendWith,isNoSend:p.isNoSend,isDelayed:p.isDelayed,reference:d?d.reference:void 0,txid:d?d.tx.id("hex"):void 0,rawTx:d?d.tx.toBinary():void 0,sendWith:p.isSendWith?p.options.sendWith:[]};return(await f.storage.processAction(g)).sendWithResults}return gi}var ss={},vw;function vC(){if(vw)return ss;vw=1,Object.defineProperty(ss,"__esModule",{value:!0}),ss.signAction=r,ss.makeAtomicBeef=i,ss.completeSignedTransaction=s;const t=Xe,e=ve(),n=pm();async function r(o,a,l){const c=o.pendingSignActions[l.reference];if(!c)throw new e.sdk.WERR_NOT_IMPLEMENTED("recovery of out-of-session signAction reference data is not yet implemented.");if(!c.dcr.inputBeef)throw new e.sdk.WERR_INTERNAL("prior.dcr.inputBeef must be valid");c.tx=await s(c,l.spends,o);const u=await(0,n.processAction)(c,o,a,l);return{txid:c.tx.id("hex"),tx:l.options.returnTXIDOnly?void 0:i(c.tx,c.dcr.inputBeef),sendWithResults:u}}function i(o,a){return Array.isArray(a)&&(a=t.Beef.fromBinary(a)),a.mergeTransaction(o),a.toBinaryAtomic(o.id("hex"))}async function s(o,a,l){for(const[c,u]of Object.entries(a)){const d=Number(c),f=o.args.inputs[d],h=o.tx.inputs[d];if(!f||!h||f.unlockingScript||!Number.isInteger(f.unlockingScriptLength))throw new e.sdk.WERR_INVALID_PARAMETER("args","spend does not correspond to prior input with valid unlockingScriptLength.");if(u.unlockingScript.length/2>f.unlockingScriptLength)throw new e.sdk.WERR_INVALID_PARAMETER("args",`spend unlockingScript length ${u.unlockingScript.length} exceeds expected length ${f.unlockingScriptLength}`);h.unlockingScript=(0,e.asBsvSdkScript)(u.unlockingScript),u.sequenceNumber!==void 0&&(h.sequence=u.sequenceNumber)}for(const c of o.pdi){const u=new e.ScriptTemplateBRC29({derivationPrefix:c.derivationPrefix,derivationSuffix:c.derivationSuffix,keyDeriver:l.keyDeriver}),d=l.getClientChangeKeyPair(),f=d.privateKey,h=c.unlockerPubKey||d.publicKey,p=c.sourceSatoshis,g=(0,e.asBsvSdkScript)(c.lockingScript),w=u.unlock(f,h,p,g),v=o.tx.inputs[c.vin];v.unlockingScriptTemplate=w}return await o.tx.sign(),o.tx}return ss}var zc={},ww;function wC(){if(ww)return zc;ww=1,Object.defineProperty(zc,"__esModule",{value:!0}),zc.internalizeAction=n;const t=Xe,e=ve();async function n(r,i,s){const o=e.sdk.validateInternalizeActionArgs(s),{ab:a,tx:l,txid:c}=await h(),u=[2,"3241645161d8"];for(const p of o.outputs){if(p.outputIndex<0||p.outputIndex>=l.outputs.length)throw new e.sdk.WERR_INVALID_PARAMETER("outputIndex",`a valid output index in range 0 to ${l.outputs.length-1}`);switch(p.protocol){case"basket insertion":break;case"wallet payment":f(p);break;default:throw new e.sdk.WERR_INTERNAL(`unexpected protocol ${p.protocol}`)}}return await r.storage.internalizeAction(s);function f(p,g){const w=p.paymentRemittance,v=l.outputs[p.outputIndex];if(!w)throw new e.sdk.WERR_INVALID_PARAMETER("paymentRemitance",`valid for protocol ${p.protocol}`);const m=`${w.derivationPrefix} ${w.derivationSuffix}`,y=r.keyDeriver.derivePrivateKey(u,m,w.senderIdentityKey),b=new t.P2PKH().lock(y.toAddress());if(v.lockingScript.toHex()!==b.toHex())throw new e.sdk.WERR_INVALID_PARAMETER("paymentRemitance","locked by script conforming to BRC-29")}async function h(){const p=t.Beef.fromBinary(o.tx);if(!await p.verify(await r.getServices().getChainTracker(),!1)||!p.atomicTxid)throw new e.sdk.WERR_INVALID_PARAMETER("tx","valid AtomicBEEF");const w=p.atomicTxid,v=p.findTxid(w);if(!v)throw new e.sdk.WERR_INVALID_PARAMETER("tx",`valid AtomicBEEF with newest txid of ${w}`);const m=v.tx;return{ab:p,tx:m,txid:w}}}return zc}var vh={},bw;function YI(){return bw||(bw=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.maxPossibleSatoshis=void 0,t.generateChangeSdk=n,t.validateGenerateChangeSdkResult=r,t.validateGenerateChangeSdkParams=s,t.generateChangeSdkMakeStorage=o,t.varUintSize=a,t.transactionInputSize=l,t.transactionOutputSize=c,t.transactionSize=u;const e=ve();t.maxPossibleSatoshis=0x775f05a073fff;async function n(d,f,h){d.noLogging===!1&&i(d);const p={allocatedChangeInputs:[],changeOutputs:[],size:0,fee:0,satsPerKb:0};try{const g=s(d),w=d.feeModel.value||0,v=[...d.randomVals||[]],m=[],y=()=>{let z=0;return!v||v.length===0?z=Math.random():(z=v.shift()||0,v.push(z)),m.push(z),z},b=(z,K)=>{if(K<z)throw new e.sdk.WERR_INVALID_PARAMETER("max",`less than min (${z}). max is (${K})`);return Math.floor(y()*(K-z+1)+z)},x=d.fixedInputs,I=d.fixedOutputs,k=()=>x.reduce((z,K)=>z+K.satoshis,0)+p.allocatedChangeInputs.reduce((z,K)=>z+K.satoshis,0),S=()=>I.reduce((z,K)=>z+K.satoshis,0),P=()=>p.changeOutputs.reduce((z,K)=>z+K.satoshis,0),R=()=>k()-S()-P(),B=(z,K)=>{const oe=[...x.map(X=>X.unlockingScriptLength),...Array(p.allocatedChangeInputs.length+(z||0)).fill(d.changeUnlockingScriptLength)],te=[...I.map(X=>X.lockingScriptLength),...Array(p.changeOutputs.length+(K||0)).fill(d.changeLockingScriptLength)];return u(oe,te)},T=(z,K)=>Math.ceil(B(z,K)/1e3*w),N=(z,K)=>{const oe=k()-S()-P()-T(z,K);return!z&&!K&&(L=oe),oe};let L=0;N();const $=d.targetNetCount!==void 0,H=d.targetNetCount||0,W=()=>p.changeOutputs.length-p.allocatedChangeInputs.length,C=()=>$?W()-1<H:!1,V=async()=>{for(;p.allocatedChangeInputs.length>0;){const z=p.allocatedChangeInputs.pop();z&&await h(z.outputId)}L=N()};for(;$&&H>W()||p.changeOutputs.length===0&&N()>0;)p.changeOutputs.push({satoshis:p.changeOutputs.length===0?d.changeFirstSatoshis:d.changeInitialSatoshis,lockingScriptLength:d.changeLockingScriptLength});if(await(async()=>{let z=!1;const K=async()=>{if(N()>0)return!0;let oe;!$&&p.changeOutputs.length===0&&(oe=-N(1));const te=C()?1:0,J=-N(1,te)+(te===1?2*d.changeInitialSatoshis:0),X=await f(J,oe);return X?(p.allocatedChangeInputs.push(X),!z&&N()>0&&(te==1||p.changeOutputs.length===0)&&p.changeOutputs.push({satoshis:Math.min(N(),p.changeOutputs.length===0?d.changeFirstSatoshis:d.changeInitialSatoshis),lockingScriptLength:d.changeLockingScriptLength}),!0):!1};for(;;){for(await V();N()<0&&await K(););if(N()>=0||p.changeOutputs.length===0)break;for(z=!0;p.changeOutputs.length>0&&N()<0;)p.changeOutputs.pop();if(N()<0)break}})(),N()<0&&g.hasMaxPossibleOutput!==void 0){if(I[g.hasMaxPossibleOutput].satoshis!==t.maxPossibleSatoshis)throw new e.sdk.WERR_INTERNAL;I[g.hasMaxPossibleOutput].satoshis+=N(),p.maxPossibleSatoshisAdjustment={fixedOutputIndex:g.hasMaxPossibleOutput,satoshis:I[g.hasMaxPossibleOutput].satoshis}}if(N()<0)throw new e.sdk.WERR_INSUFFICIENT_FUNDS(S()+T(),-L);if(p.changeOutputs.length===0&&L>0)throw new e.sdk.WERR_INSUFFICIENT_FUNDS(S()+T(),d.changeFirstSatoshis);for(;p.changeOutputs.length>0&&L>0;)if(p.changeOutputs.length===1)p.changeOutputs[0].satoshis+=L,L=0;else if(p.changeOutputs[0].satoshis<d.changeInitialSatoshis){const z=Math.min(L,d.changeInitialSatoshis-p.changeOutputs[0].satoshis);L-=z,p.changeOutputs[0].satoshis+=z}else{const z=Math.max(1,Math.floor(b(2500,5e3)/1e4*L));L-=z;const K=b(0,p.changeOutputs.length-1);p.changeOutputs[K].satoshis+=z}p.size=B(),p.fee=R(),p.satsPerKb=w;const{ok:G,log:Y}=r(d,p);if(!G)throw new e.sdk.WERR_INTERNAL(`generateChangeSdk error: ${Y}`);return p.allocatedChangeInputs.length>4&&p.changeOutputs.length>4&&(console.log("generateChangeSdk_Capture_too_many_ins_and_outs"),i(d)),p}catch(g){throw e.sdk.WalletError.fromUnknown(g).code==="WERR_INSUFFICIENT_FUNDS",g}}function r(d,f){let h=!0,p="";const g=d.fixedInputs.reduce((y,b)=>y+b.satoshis,0)+f.allocatedChangeInputs.reduce((y,b)=>y+b.satoshis,0),w=d.fixedOutputs.reduce((y,b)=>y+b.satoshis,0)+f.changeOutputs.reduce((y,b)=>y+b.satoshis,0);f.fee&&Number.isInteger(f.fee)&&f.fee<0&&(p+=`basic fee error ${f.fee};`,h=!1);const v=g-w;v!==f.fee&&(p+=`exact fee error ${v} !== ${f.fee};`,h=!1);const m=Math.ceil((f.size||0)/1e3*(f.satsPerKb||0));return m!==f.fee&&(p+=`required fee error ${m} !== ${f.fee};`,h=!1),{ok:h,log:p}}function i(d,f){let h=JSON.stringify(d);console.log(`generateChangeSdk params length ${h.length}`);let p=-1;const g=99900;for(;p++,console.log(`generateChangeSdk params ${p} XXX${h.slice(0,g)}XXX`),h=h.slice(g),!(!h||p>100););}function s(d){if(!Array.isArray(d.fixedInputs))throw new e.sdk.WERR_INVALID_PARAMETER("fixedInputs","an array of objects");const f={};if(d.fixedInputs.forEach((h,p)=>{e.sdk.validateSatoshis(h.satoshis,`fixedInputs[${p}].satoshis`),e.sdk.validateInteger(h.unlockingScriptLength,`fixedInputs[${p}].unlockingScriptLength`,void 0,0)}),!Array.isArray(d.fixedOutputs))throw new e.sdk.WERR_INVALID_PARAMETER("fixedOutputs","an array of objects");if(d.fixedOutputs.forEach((h,p)=>{if(e.sdk.validateSatoshis(h.satoshis,`fixedOutputs[${p}].satoshis`),e.sdk.validateInteger(h.lockingScriptLength,`fixedOutputs[${p}].lockingScriptLength`,void 0,0),h.satoshis===t.maxPossibleSatoshis){if(f.hasMaxPossibleOutput!==void 0)throw new e.sdk.WERR_INVALID_PARAMETER(`fixedOutputs[${p}].satoshis`,"valid satoshis amount. Only one 'maxPossibleSatoshis' output allowed.");f.hasMaxPossibleOutput=p}}),d.feeModel=(0,e.validateStorageFeeModel)(d.feeModel),d.feeModel.model!=="sat/kb")throw new e.sdk.WERR_INVALID_PARAMETER("feeModel.model","'sat/kb'");return e.sdk.validateOptionalInteger(d.targetNetCount,"targetNetCount"),e.sdk.validateSatoshis(d.changeFirstSatoshis,"changeFirstSatoshis",1),e.sdk.validateSatoshis(d.changeInitialSatoshis,"changeInitialSatoshis",1),e.sdk.validateInteger(d.changeLockingScriptLength,"changeLockingScriptLength"),e.sdk.validateInteger(d.changeUnlockingScriptLength,"changeUnlockingScriptLength"),f}function o(d){const f=d.map(m=>({...m,spendable:!0}));f.sort((m,y)=>m.satoshis<y.satoshis?-1:m.satoshis>y.satoshis?1:m.outputId<y.outputId?-1:m.outputId>y.outputId?1:0);let h="";for(const m of f)h+=`change ${m.satoshis} ${m.outputId}
`;const p=()=>h,g=m=>(h+=` -> ${m.satoshis} sats, id ${m.outputId}
`,m.spendable=!1,m);return{allocateChangeInput:async(m,y)=>{if(h+=`allocate target ${m} exact ${y}`,y!==void 0){const I=f.find(k=>k.spendable&&k.satoshis===y);if(I)return g(I)}const b=f.find(I=>I.spendable&&I.satoshis>=m);if(b)return g(b);let x;for(let I=f.length-1;I>=0;I--)if(f[I].spendable){x=f[I];break}if(x)return g(x);h+=`
`},releaseChangeInput:async m=>{h+=`release id ${m}
`;const y=f.find(b=>b.outputId===m);if(!y)throw new e.sdk.WERR_INTERNAL(`unknown outputId ${m}`);if(y.spendable)throw new e.sdk.WERR_INTERNAL(`release of spendable outputId ${m}`);y.spendable=!0},getLog:p}}function a(d){if(d<0)throw new e.sdk.WERR_INVALID_PARAMETER("varUint","non-negative");return d<=252?1:d<=65535?3:d<=4294967295?5:9}function l(d){return 36+a(d)+d+4}function c(d){return a(d)+d+8}function u(d,f){return 4+a(d.length)+d.reduce((h,p)=>h+l(p),0)+a(f.length)+f.reduce((h,p)=>h+c(p),0)+4}}(vh)),vh}var xw;function bC(){if(xw)return ko;xw=1,Object.defineProperty(ko,"__esModule",{value:!0}),ko.Wallet=void 0;const t=Xe,e=ve(),n=hm,r=mC(),i=pm(),s=vC(),o=wC(),a=YI();function l(u){return u.isWalletSigner}let c=class{constructor(d,f,h,p){this.includeAllSourceTransactions=!0,this.returnTxidOnly=!1,this.randomVals=void 0;const g=l(d)?{chain:d.chain,keyDeriver:d.keyDeriver,storage:d.storage,services:f,monitor:h,privilegedKeyManager:p}:d;if(g.storage._authId.identityKey!=g.keyDeriver.identityKey)throw new e.sdk.WERR_INVALID_PARAMETER("storage",`authenticated as the same identityKey (${g.storage._authId.identityKey}) as the keyDeriver (${g.keyDeriver.identityKey}).`);this.chain=g.chain,this.keyDeriver=g.keyDeriver,this.storage=g.storage,this.proto=new t.ProtoWallet(g.keyDeriver),this.services=g.services,this.monitor=g.monitor,this.privilegedKeyManager=g.privilegedKeyManager,this.identityKey=this.keyDeriver.identityKey,this.pendingSignActions={},this.userParty=`user ${this.getClientChangeKeyPair().publicKey}`,this.beef=new t.BeefParty([this.userParty]),this.trustSelf="known",this.services&&this.storage.setServices(this.services)}async destroy(){await this.storage.destroy(),this.privilegedKeyManager&&await this.privilegedKeyManager.destroyKey()}getClientChangeKeyPair(){return{privateKey:this.keyDeriver.rootKey.toString(),publicKey:this.keyDeriver.rootKey.toPublicKey().toString()}}async getIdentityKey(){return(await this.getPublicKey({identityKey:!0})).publicKey}getPublicKey(d,f){if(d.privileged){if(!this.privilegedKeyManager)throw new Error("Privileged operations require the Wallet to be configured with a privileged key manager.");return this.privilegedKeyManager.getPublicKey(d)}return this.proto.getPublicKey(d)}revealCounterpartyKeyLinkage(d,f){if(d.privileged){if(!this.privilegedKeyManager)throw new Error("Privileged operations require the Wallet to be configured with a privileged key manager.");return this.privilegedKeyManager.revealCounterpartyKeyLinkage(d)}return this.proto.revealCounterpartyKeyLinkage(d)}revealSpecificKeyLinkage(d,f){if(d.privileged){if(!this.privilegedKeyManager)throw new Error("Privileged operations require the Wallet to be configured with a privileged key manager.");return this.privilegedKeyManager.revealSpecificKeyLinkage(d)}return this.proto.revealSpecificKeyLinkage(d)}encrypt(d,f){if(d.privileged){if(!this.privilegedKeyManager)throw new Error("Privileged operations require the Wallet to be configured with a privileged key manager.");return this.privilegedKeyManager.encrypt(d)}return this.proto.encrypt(d)}decrypt(d,f){if(d.privileged){if(!this.privilegedKeyManager)throw new Error("Privileged operations require the Wallet to be configured with a privileged key manager.");return this.privilegedKeyManager.decrypt(d)}return this.proto.decrypt(d)}createHmac(d,f){if(d.privileged){if(!this.privilegedKeyManager)throw new Error("Privileged operations require the Wallet to be configured with a privileged key manager.");return this.privilegedKeyManager.createHmac(d)}return this.proto.createHmac(d)}verifyHmac(d,f){if(d.privileged){if(!this.privilegedKeyManager)throw new Error("Privileged operations require the Wallet to be configured with a privileged key manager.");return this.privilegedKeyManager.verifyHmac(d)}return this.proto.verifyHmac(d)}createSignature(d,f){if(d.privileged){if(!this.privilegedKeyManager)throw new Error("Privileged operations require the Wallet to be configured with a privileged key manager.");return this.privilegedKeyManager.createSignature(d)}return this.proto.createSignature(d)}verifySignature(d,f){if(d.privileged){if(!this.privilegedKeyManager)throw new Error("Privileged operations require the Wallet to be configured with a privileged key manager.");return this.privilegedKeyManager.verifySignature(d)}return this.proto.verifySignature(d)}getServices(){if(!this.services)throw new e.sdk.WERR_INVALID_PARAMETER("services","valid in constructor arguments to be retreived here.");return this.services}getKnownTxids(d){if(d)for(const p of d)this.beef.mergeTxidOnly(p);return this.beef.sortTxs().valid}getStorageIdentity(){const d=this.storage.getSettings();return{storageIdentityKey:d.storageIdentityKey,storageName:d.storageName}}validateAuthAndArgs(d,f){const h=f(d),p={identityKey:this.identityKey};return{vargs:h,auth:p}}async listActions(d,f){e.sdk.validateOriginator(f);const{vargs:h}=this.validateAuthAndArgs(d,e.sdk.validateListActionsArgs);return await this.storage.listActions(h)}get storageParty(){return`storage ${this.getStorageIdentity().storageIdentityKey}`}async listOutputs(d,f){e.sdk.validateOriginator(f);const{vargs:h}=this.validateAuthAndArgs(d,e.sdk.validateListOutputsArgs);h.knownTxids=this.getKnownTxids();const p=await this.storage.listOutputs(h);return p.BEEF&&(this.beef.mergeBeefFromParty(this.storageParty,p.BEEF),p.BEEF=this.verifyReturnedTxidOnlyBEEF(p.BEEF)),p}async listCertificates(d,f){e.sdk.validateOriginator(f);const{vargs:h}=this.validateAuthAndArgs(d,e.sdk.validateListCertificatesArgs);return await this.storage.listCertificates(h)}async acquireCertificate(d,f){if(e.sdk.validateOriginator(f),d.acquisitionProtocol==="direct"){const{auth:h,vargs:p}=this.validateAuthAndArgs(d,e.sdk.validateAcquireDirectCertificateArgs);p.subject=(await this.getPublicKey({identityKey:!0,privileged:d.privileged,privilegedReason:d.privilegedReason})).publicKey;try{await e.sdk.CertOps.fromCounterparty(p.privileged?this.privilegedKeyManager:this,{certificate:{...p},keyring:p.keyringForSubject,counterparty:p.keyringRevealer==="certifier"?p.certifier:p.keyringRevealer})}catch(w){const v=e.sdk.WalletError.fromUnknown(w);throw new e.sdk.WERR_INVALID_PARAMETER("args",`valid encrypted and signed certificate and keyring from revealer. ${v.name}: ${v.message}`)}return await(0,n.acquireDirectCertificate)(this,h,p)}if(d.acquisitionProtocol==="issuance"){const{auth:h,vargs:p}=this.validateAuthAndArgs(d,e.sdk.validateAcquireIssuanceCertificateArgs),g=await(0,t.createNonce)(this,p.certifier),w=new t.AuthFetch(this),{certificateFields:v,masterKeyring:m}=await t.MasterCertificate.createCertificateFields(this,p.certifier,p.fields),y=await w.fetch(`${p.certifierUrl}/signCertificate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({clientNonce:g,type:p.type,fields:v,masterKeyring:m})});if(y.headers.get("x-bsv-auth-identity-key")!==p.certifier)throw new Error(`Invalid certifier! Expected: ${p.certifier}, Received: ${y.headers.get("x-bsv-auth-identity-key")}`);const{certificate:b,serverNonce:x}=await y.json();if(!b)throw new Error("No certificate received from certifier!");if(!x)throw new Error("No serverNonce received from certifier!");const I=new t.Certificate(b.type,b.serialNumber,b.subject,b.certifier,b.revocationOutpoint,b.fields,b.signature);await(0,t.verifyNonce)(x,this,p.certifier);const{valid:k}=await this.verifyHmac({hmac:t.Utils.toArray(I.serialNumber,"base64"),data:t.Utils.toArray(g+x,"base64"),protocolID:[2,"certificate issuance"],keyID:x+g,counterparty:p.certifier});if(!k)throw new Error("Invalid serialNumber");if(I.type!==p.type)throw new Error(`Invalid certificate type! Expected: ${p.type}, Received: ${I.type}`);if(I.subject!==this.identityKey)throw new Error(`Invalid certificate subject! Expected: ${this.identityKey}, Received: ${I.subject}`);if(I.certifier!==p.certifier)throw new Error(`Invalid certifier! Expected: ${p.certifier}, Received: ${I.certifier}`);if(!I.revocationOutpoint)throw new Error("Invalid revocationOutpoint!");if(Object.keys(I.fields).length!==Object.keys(v).length)throw new Error("Fields mismatch! Objects have different numbers of keys.");for(const S of Object.keys(v)){if(!(S in I.fields))throw new Error(`Missing field: ${S} in certificate.fields`);if(I.fields[S]!==v[S])throw new Error(`Invalid field! Expected: ${v[S]}, Received: ${I.fields[S]}`)}return await I.verify(),await(0,n.acquireDirectCertificate)(this,h,{...b,keyringRevealer:"certifier",keyringForSubject:m,privileged:p.privileged})}throw new e.sdk.WERR_INVALID_PARAMETER("acquisitionProtocol",`valid.${d.acquisitionProtocol} is unrecognized.`)}async relinquishCertificate(d,f){return e.sdk.validateOriginator(f),this.validateAuthAndArgs(d,e.sdk.validateRelinquishCertificateArgs),await this.storage.relinquishCertificate(d),{relinquished:!0}}async proveCertificate(d,f){f=e.sdk.validateOriginator(f);const{auth:h,vargs:p}=this.validateAuthAndArgs(d,e.sdk.validateProveCertificateArgs);return await(0,r.proveCertificate)(this,h,p)}async discoverByIdentityKey(d,f){throw e.sdk.validateOriginator(f),this.validateAuthAndArgs(d,e.sdk.validateDiscoverByIdentityKeyArgs),new Error("Method not implemented.")}async discoverByAttributes(d,f){throw e.sdk.validateOriginator(f),this.validateAuthAndArgs(d,e.sdk.validateDiscoverByAttributesArgs),new Error("Method not implemented.")}verifyReturnedTxidOnly(d){if(this.returnTxidOnly)return d;const f=d.txs.filter(h=>h.isTxidOnly).map(h=>h.txid);for(const h of f){d.findTxid(h);const p=this.beef.findAtomicTransaction(h);if(!p)throw new e.sdk.WERR_INTERNAL;d.mergeTransaction(p)}for(const h of d.txs)if(h.isTxidOnly)throw new e.sdk.WERR_INTERNAL;return d}verifyReturnedTxidOnlyAtomicBEEF(d){if(this.returnTxidOnly)return d;const f=t.Beef.fromBinary(d);if(!f.atomicTxid)throw new e.sdk.WERR_INTERNAL;return this.verifyReturnedTxidOnly(f).toBinaryAtomic(f.atomicTxid)}verifyReturnedTxidOnlyBEEF(d){if(this.returnTxidOnly)return d;const f=t.Beef.fromBinary(d);return this.verifyReturnedTxidOnly(f).toBinary()}async createAction(d,f){var h;e.sdk.validateOriginator(f),d.options||(d.options={}),(h=d.options).trustSelf||(h.trustSelf=this.trustSelf),d.options.knownTxids=this.getKnownTxids(d.options.knownTxids);const{auth:p,vargs:g}=this.validateAuthAndArgs(d,e.sdk.validateCreateActionArgs);g.includeAllSourceTransactions=this.includeAllSourceTransactions,this.randomVals&&this.randomVals.length>1&&(g.randomVals=[...this.randomVals]);const w=await(0,i.createAction)(this,p,g);if(w.tx&&this.beef.mergeBeefFromParty(this.storageParty,w.tx),w.tx&&(w.tx=this.verifyReturnedTxidOnlyAtomicBEEF(w.tx)),!g.options.acceptDelayedBroadcast&&w.sendWithResults&&w.sendWithResults.length===1&&w.sendWithResults[0].status==="failed")throw new e.sdk.WERR_BROADCAST_UNAVAILABLE;return w}async signAction(d,f){e.sdk.validateOriginator(f);const{auth:h,vargs:p}=this.validateAuthAndArgs(d,e.sdk.validateSignActionArgs),g=await(0,s.signAction)(this,h,p);if(!p.options.acceptDelayedBroadcast&&g.sendWithResults&&g.sendWithResults.length===1&&g.sendWithResults[0].status==="failed")throw new e.sdk.WERR_BROADCAST_UNAVAILABLE;return g.tx&&(g.tx=this.verifyReturnedTxidOnlyAtomicBEEF(g.tx)),g}async abortAction(d,f){e.sdk.validateOriginator(f);const{auth:h}=this.validateAuthAndArgs(d,e.sdk.validateAbortActionArgs);return await this.storage.abortAction(d)}async internalizeAction(d,f){e.sdk.validateOriginator(f);const{auth:h,vargs:p}=this.validateAuthAndArgs(d,e.sdk.validateInternalizeActionArgs);return await(0,o.internalizeAction)(this,h,d)}async relinquishOutput(d,f){e.sdk.validateOriginator(f);const{vargs:h}=this.validateAuthAndArgs(d,e.sdk.validateRelinquishOutputArgs);return await this.storage.relinquishOutput(d),{relinquished:!0}}async isAuthenticated(d,f){return e.sdk.validateOriginator(f),{authenticated:!0}}async waitForAuthentication(d,f){return e.sdk.validateOriginator(f),{authenticated:!0}}async getHeight(d,f){return e.sdk.validateOriginator(f),{height:await this.getServices().getHeight()}}async getHeaderForHeight(d,f){e.sdk.validateOriginator(f);const h=await this.getServices().getHeaderForHeight(d.height);return{header:t.Utils.toHex(h)}}async getNetwork(d,f){return e.sdk.validateOriginator(f),{network:(0,e.toWalletNetwork)(this.chain)}}async getVersion(d,f){return e.sdk.validateOriginator(f),{version:"wallet-brc100-1.0.0"}}async sweepTo(d){const f=(0,e.randomBytesBase64)(8),h=(0,e.randomBytesBase64)(8),p=this.keyDeriver,g=new e.ScriptTemplateBRC29({derivationPrefix:f,derivationSuffix:h,keyDeriver:p}),w="sweep",v=a.maxPossibleSatoshis,m=await this.createAction({outputs:[{lockingScript:g.lock(p.rootKey.toString(),d.identityKey).toHex(),satoshis:v,outputDescription:w,tags:["relinquish"],customInstructions:JSON.stringify({derivationPrefix:f,derivationSuffix:h,type:"BRC29"})}],options:{randomizeOutputs:!1,acceptDelayedBroadcast:!1},labels:[w],description:w});await d.internalizeAction({tx:m.tx,outputs:[{outputIndex:0,protocol:"wallet payment",paymentRemittance:{derivationPrefix:f,derivationSuffix:h,senderIdentityKey:this.identityKey}}],description:w,labels:[w]})}async balance(d="default"){const f={total:0,utxos:[]};let h=0;for(;;){const p=await this.listOutputs({basket:d,limit:1e3,offset:h});if(p.totalOutputs===0)break;for(const g of p.outputs)f.total+=g.satoshis,f.utxos.push({satoshis:g.satoshis,outpoint:g.outpoint});h+=p.outputs.length}return f}};return ko.Wallet=c,ko}var Ud={};Object.defineProperty(Ud,"__esModule",{value:!0});Ud.WalletSigner=void 0;class xC{constructor(e,n,r){this.isWalletSigner=!0,this.chain=e,this.keyDeriver=n,this.storage=r}}Ud.WalletSigner=xC;var wh={},Io={},kw;function kC(){if(kw)return Io;kw=1,Object.defineProperty(Io,"__esModule",{value:!0}),Io.WalletStorageManager=void 0;const t=ve();class e{constructor(i){this.storage=i,this.isStorageProvider=i.isStorageProvider(),this.isAvailable=!1}}let n=class{constructor(i,s,o){this._stores=[],this._isAvailable=!1,this._readerCount=0,this._writerCount=0,this._isSingleWriter=!0,this._syncLocked=!1,this._storageProviderLocked=!1;const a=[...o||[]];s&&a.unshift(s),this._stores=a.map(l=>new e(l)),this._authId={identityKey:i}}isStorageProvider(){return!1}isAvailable(){return this._isAvailable}get isActiveEnabled(){return this._active!==void 0&&this._active.settings.storageIdentityKey===this._active.user.activeStorage&&this._conflictingActives!==void 0&&this._conflictingActives.length===0}canMakeAvailable(){return this._stores.length>0}async makeAvailable(){var i;if(this._isAvailable)return this._active.settings;if(this._active=void 0,this._backups=[],this._conflictingActives=[],this._stores.length<1)throw new t.sdk.WERR_INVALID_PARAMETER("active","valid. Must add active storage provider to wallet.");const s=[];for(const a of this._stores){if(!a.isAvailable||!a.settings||!a.user){a.settings=await a.storage.makeAvailable();const l=await a.storage.findOrInsertUser(this._authId.identityKey);a.user=l.user,a.isAvailable=!0}if(!this._active)this._active=a;else{const l=a.user.activeStorage,c=a.settings.storageIdentityKey;l===c&&!this.isActiveEnabled?(s.push(this._active),this._active=a):s.push(a)}}const o=(i=this._active.settings)===null||i===void 0?void 0:i.storageIdentityKey;for(const a of s)a.user.activeStorage!==o?this._conflictingActives.push(a):this._backups.push(a);return this._isAvailable=!0,this._authId.userId=this._active.user.userId,this._authId.isActive=this.isActiveEnabled,this._active.settings}verifyActive(){if(!this._active||!this._isAvailable)throw new t.sdk.WERR_INVALID_OPERATION("An active WalletStorageProvider must be added to this WalletStorageManager and makeAvailable must be called.");return this._active}async getAuth(i){if(this.isAvailable()||await this.makeAvailable(),i&&!this._authId.isActive)throw new t.sdk.WERR_NOT_ACTIVE;return this._authId}async getUserId(){return(await this.getAuth()).userId}getActive(){return this.verifyActive().storage}getActiveSettings(){return this.verifyActive().settings}getActiveUser(){return this.verifyActive().user}getActiveStore(){return this.verifyActive().settings.storageIdentityKey}getActiveStoreName(){return this.verifyActive().settings.storageName}getBackupStores(){return this.verifyActive(),this._backups.map(i=>i.settings.storageIdentityKey)}getConflictingStores(){return this.verifyActive(),this._conflictingActives.map(i=>i.settings.storageIdentityKey)}getAllStores(){return this.verifyActive(),this._stores.map(i=>i.settings.storageIdentityKey)}async getActiveForWriter(){for(this.isAvailable()||await this.makeAvailable();this._storageProviderLocked||this._syncLocked||this._isSingleWriter&&this._writerCount>0||this._readerCount>0;)await(0,t.wait)(100);return this._writerCount++,this.getActive()}async getActiveForReader(){for(this.isAvailable()||await this.makeAvailable();this._storageProviderLocked||this._syncLocked||this._isSingleWriter&&this._writerCount>0;)await(0,t.wait)(100);return this._readerCount++,this.getActive()}async getActiveForSync(){for(this.isAvailable()||await this.makeAvailable();this._syncLocked;)await(0,t.wait)(100);for(this._syncLocked=!0;this._storageProviderLocked||this._readerCount>0||this._writerCount>0;)await(0,t.wait)(100);return this.getActive()}async getActiveForStorageProvider(){for(this.isAvailable()||await this.makeAvailable();this._storageProviderLocked;)await(0,t.wait)(100);for(this._storageProviderLocked=!0;this._syncLocked||this._readerCount>0||this._writerCount>0;)await(0,t.wait)(100);if(!this.getActive().isStorageProvider())throw new t.sdk.WERR_INVALID_OPERATION('Active "WalletStorageProvider" does not support "StorageProvider" interface.');return this.getActive()}async runAsWriter(i){try{const s=await this.getActiveForWriter();return await i(s)}finally{this._writerCount--}}async runAsReader(i){try{const s=await this.getActiveForReader();return await i(s)}finally{this._readerCount--}}async runAsSync(i,s){try{const o=s||await this.getActiveForSync();return await i(o)}finally{s||(this._syncLocked=!1)}}async runAsStorageProvider(i){try{const s=await this.getActiveForStorageProvider();return await i(s)}finally{this._storageProviderLocked=!1}}isActiveStorageProvider(){return this.getActive().isStorageProvider()}async addWalletStorageProvider(i){await i.makeAvailable(),this._services&&i.setServices(this._services),this._stores.push(new e(i)),this._isAvailable=!1,await this.makeAvailable()}setServices(i){this._services=i;for(const s of this._stores)s.storage.setServices(i)}getServices(){if(!this._services)throw new t.sdk.WERR_INVALID_OPERATION("Must setServices first.");return this._services}getSettings(){return this.getActive().getSettings()}async migrate(i,s){return await this.runAsWriter(async o=>o.migrate(i,s))}async destroy(){if(!(this._stores.length<1))return await this.runAsWriter(async i=>{for(const s of this._stores)await s.storage.destroy()})}async findOrInsertUser(i){const s=await this.getAuth();if(i!=s.identityKey)throw new t.sdk.WERR_UNAUTHORIZED;return await this.runAsWriter(async o=>{const a=await o.findOrInsertUser(i);if(s.userId&&s.userId!==a.user.userId)throw new t.sdk.WERR_INTERNAL("userId may not change for given identityKey");return this._authId.userId=a.user.userId,a})}async abortAction(i){return t.sdk.validateAbortActionArgs(i),await this.runAsWriter(async s=>{const o=await this.getAuth(!0);return await s.abortAction(o,i)})}async createAction(i){return await this.runAsWriter(async s=>{const o=await this.getAuth(!0);return await s.createAction(o,i)})}async internalizeAction(i){return t.sdk.validateInternalizeActionArgs(i),await this.runAsWriter(async s=>{const o=await this.getAuth(!0);return await s.internalizeAction(o,i)})}async relinquishCertificate(i){return t.sdk.validateRelinquishCertificateArgs(i),await this.runAsWriter(async s=>{const o=await this.getAuth(!0);return await s.relinquishCertificate(o,i)})}async relinquishOutput(i){return t.sdk.validateRelinquishOutputArgs(i),await this.runAsWriter(async s=>{const o=await this.getAuth(!0);return await s.relinquishOutput(o,i)})}async processAction(i){return await this.runAsWriter(async s=>{const o=await this.getAuth(!0);return await s.processAction(o,i)})}async insertCertificate(i){return await this.runAsWriter(async s=>{const o=await this.getAuth(!0);return await s.insertCertificateAuth(o,i)})}async listActions(i){const s=await this.getAuth();return await this.runAsReader(async o=>await o.listActions(s,i))}async listCertificates(i){const s=await this.getAuth();return await this.runAsReader(async o=>await o.listCertificates(s,i))}async listOutputs(i){const s=await this.getAuth();return await this.runAsReader(async o=>await o.listOutputs(s,i))}async findCertificates(i){const s=await this.getAuth();return await this.runAsReader(async o=>await o.findCertificatesAuth(s,i))}async findOutputBaskets(i){const s=await this.getAuth();return await this.runAsReader(async o=>await o.findOutputBasketsAuth(s,i))}async findOutputs(i){const s=await this.getAuth();return await this.runAsReader(async o=>await o.findOutputsAuth(s,i))}async findProvenTxReqs(i){return await this.runAsReader(async s=>await s.findProvenTxReqs(i))}async syncFromReader(i,s,o,a=""){const l=await this.getAuth();if(i!==l.identityKey)throw new t.sdk.WERR_UNAUTHORIZED;const c=await s.makeAvailable();let u=0,d=0;return a=await this.runAsSync(async f=>{const h=f,p=this.getSettings();a+=`syncFromReader from ${c.storageName} to ${p.storageName}
`;let g=-1;for(;;){g++;const v=(await t.EntitySyncState.fromStorage(h,i,c)).makeRequestSyncChunkArgs(i,p.storageIdentityKey),m=await s.getSyncChunk(v);m.user&&(m.user.activeStorage=this._active.user.activeStorage);const y=await h.processSyncChunk(v,m);if(u+=y.inserts,d+=y.updates,a+=`chunk ${g} inserted ${y.inserts} updated ${y.updates} ${y.maxUpdated_at}
`,y.done)break}return a+=`syncFromReader complete: ${u} inserts, ${d} updates
`,a},o),{inserts:u,updates:d,log:a}}async syncToWriter(i,s,o,a=""){const l=i.identityKey,c=await s.makeAvailable();let u=0,d=0;return a=await this.runAsSync(async f=>{const h=f,p=h.getSettings();a+=`syncToWriter from ${p.storageName} to ${c.storageName}
`;let g=-1;for(;;){g++;const v=(await t.EntitySyncState.fromStorage(s,l,p)).makeRequestSyncChunkArgs(l,c.storageIdentityKey),m=await h.getSyncChunk(v),y=await s.processSyncChunk(v,m);if(u+=y.inserts,d+=y.updates,a+=`chunk ${g} inserted ${y.inserts} updated ${y.updates} ${y.maxUpdated_at}
`,y.done)break}return a+=`syncToWriter complete: ${u} inserts, ${d} updates
`,a},o),{inserts:u,updates:d,log:a}}async updateBackups(i){const s=await this.getAuth(!0);return await this.runAsSync(async o=>{let a=`BACKUP CURRENT ACTIVE TO ${this._backups.length} STORES
`;for(const l of this._backups){const c=await this.syncToWriter(s,l.storage,o);a+=c.log}return a},i)}async setActive(i){this.isAvailable()||await this.makeAvailable();const s=this._stores.findIndex(c=>c.settings.storageIdentityKey===i);if(s<0)throw new t.sdk.WERR_INVALID_PARAMETER("storageIdentityKey",`registered with this "WalletStorageManager". ${i} does not match any managed store.`);const o=(await this.getAuth()).identityKey,a=this._stores[s];let l=`setActive to ${a.settings.storageName}`;return i===this.getActiveStore()&&this.isActiveEnabled?l+` unchanged
`:(l+=`
`,l+=await this.runAsSync(async c=>{let u="";if(this._conflictingActives.length>0){this._conflictingActives.push(this._active),this._conflictingActives=this._conflictingActives.filter(f=>!(f.settings.storageIdentityKey===i));for(const f of this._conflictingActives){u+=`MERGING STATE FROM CONFLICTING ACTIVES:
`;const h=await this.syncToWriter({identityKey:o,userId:a.user.userId,isActive:!1},a.storage,f.storage);u+=h.log}u+=`PROPAGATE MERGED ACTIVE STATE TO NON-ACTIVES
`}else u+=`BACKUP CURRENT ACTIVE STATE THEN SET NEW ACTIVE
`;const d=this._conflictingActives.length>0?a:this._active;await d.storage.setActive({identityKey:o,userId:d.user.userId},i);for(const f of this._stores)if(f.user.activeStorage=i,f.settings.storageIdentityKey!==d.settings.storageIdentityKey){const h=await this.syncToWriter({identityKey:o,userId:f.user.userId,isActive:!1},f.storage,d.storage);u+=h.log}return this._isAvailable=!1,await this.makeAvailable(),u}),l)}};return Io.WalletStorageManager=n,Io}var os={},Gc={},Iw;function IC(){if(Iw)return Gc;Iw=1,Object.defineProperty(Gc,"__esModule",{value:!0}),Gc.getBeefForTransaction=n;const t=Xe,e=ve();async function n(s,o,a){const l=Array.isArray(a.mergeToBeef)?t.Beef.fromBinary(a.mergeToBeef):a.mergeToBeef||new t.Beef;return await i(l,s,o,a,0),l}async function r(s,o,a){var l;s.getServices();const c=await e.EntityProvenTx.fromTxid(o,await s.getServices());return c.proven&&!a.ignoreStorage&&!a.ignoreNewProven&&(c.proven.provenTxId=await s.insertProvenTx(c.proven.toApi())),{proven:(l=c.proven)===null||l===void 0?void 0:l.toApi(),rawTx:c.rawTx}}async function i(s,o,a,l,c){const u=o.maxRecursionDepth;if(u&&u<=c)throw new e.sdk.WERR_INVALID_OPERATION(`Maximum BEEF depth exceeded. Limit is ${o.maxRecursionDepth}`);if(l.knownTxids&&l.knownTxids.indexOf(a)>-1)return s.mergeTxidOnly(a),s;if(!l.ignoreStorage){const h=await o.getValidBeefForTxid(a,s,l.trustSelf,l.knownTxids);if(h)return h}if(l.ignoreServices)throw new e.sdk.WERR_INVALID_PARAMETER(`txid ${a}`,`valid transaction on chain ${o.chain}`);const d=await r(o,a,l);if(d.proven&&l.minProofLevel&&l.minProofLevel>c&&(d.proven=void 0),d.proven)return s.mergeRawTx(d.proven.rawTx),s.mergeBump(new e.EntityProvenTx(d.proven).getMerklePath()),s;if(!d.rawTx)throw new e.sdk.WERR_INVALID_PARAMETER(`txid ${a}`,`valid transaction on chain ${o.chain}`);s.mergeRawTx(d.rawTx);const f=(0,e.asBsvSdkTx)(d.rawTx);for(const h of f.inputs){const p=(0,e.verifyTruthy)(h.sourceTXID);s.findTxid(p)||await i(s,o,p,l,c+1)}return s}return Gc}var Xc={},Sw;function SC(){if(Sw)return Xc;Sw=1,Object.defineProperty(Xc,"__esModule",{value:!0}),Xc.processAction=n;const t=Xe,e=ve();async function n(o,a,l){(0,e.stampLog)(l.log,"start storage processActionSdk");const c=(0,e.verifyId)(a.userId),u={sendWithResults:void 0};let d;const f=[...l.sendWith];if(l.isNewTx){const p=await i(o,c,l);if({req:d,log:l.log}=await s(o,c,p),!d)throw new e.sdk.WERR_INTERNAL;l.isNoSend&&!l.isSendWith?(0,e.stampLog)(l.log,"... storage processActionSdk newTx committed noSend"):(f.push(d.txid),(0,e.stampLog)(l.log,`... storage processActionSdk newTx committed sendWith ${d.txid}`))}const h=await r(o,c,f,l.isDelayed);return u.sendWithResults=h,(0,e.stampLog)(l.log,"end storage processActionSdk"),u}async function r(o,a,l,c){if(l.length<1)return[];const u=await o.getReqsAndBeefToShareWithWorld(l,[]),d=[];for(const y of u.details)d.push({txid:y.txid,getReq:y});const f=u.details.filter(y=>y.status==="readyToSend").map(y=>new e.EntityProvenTxReq(y.req)),h=f.map(y=>y.id),p=f.map(y=>y.notify.transactionIds||[]).flat();if(f.length>0&&!await u.beef.verify(await o.getServices().getChainTracker()))throw new e.sdk.WERR_INTERNAL("merged Beef failed validation.");const g=l.length>1?(0,e.randomBytesBase64)(16):void 0;if(c)return h.length>0&&await o.transaction(async y=>{await o.updateProvenTxReq(h,{status:"unsent",batch:g},y),await o.updateTransaction(p,{status:"sending"},y)}),m();if(h.length<1)return m();if(g){for(const y of f)y.batch=g;await o.updateProvenTxReq(h,{batch:g})}const w=await o.attemptToPostReqsToNetwork(f);for(const y of d){const b=w.details.find(x=>x.txid===y.txid);if(b&&(y.postBeef=b.pbrft,b.pbrft.status==="error"&&y.getReq.req)){const x=await e.EntityProvenTxReq.fromStorageId(o,y.getReq.req.provenTxReqId);x.status==="unprocessed"&&(x.status="unsent",await x.updateStorageDynamicProperties(o))}}return m();function m(){var y;const b=[];for(const x of d){let I="failed";x.getReq.status==="alreadySent"?I="unproven":x.getReq.status==="readyToSend"&&(c||((y=x.postBeef)===null||y===void 0?void 0:y.status)==="success")&&(I="sending"),b.push({txid:x.txid,status:I})}return b}}async function i(o,a,l){if(!l.reference||!l.txid||!l.rawTx)throw new e.sdk.WERR_INVALID_OPERATION("One or more expected params are undefined.");let c;try{c=t.Transaction.fromBinary(l.rawTx)}catch{throw new e.sdk.WERR_INVALID_OPERATION("Parsing serialized transaction failed.")}if(l.txid!==c.id("hex"))throw new e.sdk.WERR_INVALID_OPERATION("Hash of serialized transaction doesn't match expected txid");if(!(await o.getServices()).nLockTimeIsFinal(c))throw new e.sdk.WERR_INVALID_OPERATION(`This transaction is not final.
         Ensure that the transaction meets the rules for being a finalized
         which can be found at https://wiki.bitcoinsv.io/index.php/NLocktime_and_nSequence`);const u=(0,e.parseTxScriptOffsets)(l.rawTx),d=(0,e.verifyOne)(await o.findTransactions({partial:{userId:a,reference:l.reference}}));if(!d.isOutgoing)throw new e.sdk.WERR_INVALID_OPERATION("isOutgoing is not true");if(!d.inputBEEF)throw new e.sdk.WERR_INVALID_OPERATION;const f=t.Beef.fromBinary((0,e.asArray)(d.inputBEEF));if(d.status!=="unsigned"&&d.status!=="unprocessed")throw new e.sdk.WERR_INVALID_OPERATION(`invalid transaction status ${d.status}`);const h=(0,e.verifyId)(d.transactionId),p=await o.findOutputs({partial:{userId:a,transactionId:h}}),g=await o.findOutputs({partial:{userId:a,spentBy:h}}),w=(0,e.verifyOneOrNone)(await o.findCommissions({partial:{transactionId:h,userId:a}}));if(o.commissionSatoshis>0){if(!w)throw new e.sdk.WERR_INTERNAL;if(!c.outputs.some(I=>I.satoshis===w.satoshis&&I.lockingScript.toHex()===(0,e.asString)(w.lockingScript)))throw new e.sdk.WERR_INVALID_OPERATION("Transaction did not include an output to cover service fee.")}const v=e.EntityProvenTxReq.fromTxid(l.txid,l.rawTx,d.inputBEEF);v.addNotifyTransactionId(h);let m,y;if(l.isNoSend&&!l.isSendWith)y={req:"nosend",tx:"nosend"};else if(!l.isNoSend&&l.isDelayed)y={req:"unsent",tx:"unprocessed"};else if(!l.isNoSend&&!l.isDelayed)y={req:"unprocessed",tx:"unprocessed"},m={req:"unmined",tx:"unproven"};else throw new e.sdk.WERR_INTERNAL("logic error");v.status=y.req;const b={reference:l.reference,txid:l.txid,rawTx:l.rawTx,isSendWith:!!l.sendWith&&l.sendWith.length>0,isDelayed:l.isDelayed,isNoSend:l.isNoSend,tx:c,txScriptOffsets:u,transactionId:h,transaction:d,inputOutputs:g,outputOutputs:p,commission:w,beef:f,req:v,outputUpdates:[],transactionUpdate:{txid:l.txid,rawTx:void 0,inputBEEF:void 0,status:y.tx},postStatus:m};for(const x of b.outputOutputs){const I=(0,e.verifyInteger)(x.vout),k=b.txScriptOffsets.outputs[I],S=(0,e.asString)(b.rawTx.slice(k.offset,k.offset+k.length));if(x.lockingScript&&S!==(0,e.asString)(x.lockingScript))throw new e.sdk.WERR_INVALID_OPERATION(`rawTx output locking script for vout ${I} not equal to expected output script.`);if(c.outputs[I].lockingScript.toHex()!==S)throw new e.sdk.WERR_INVALID_OPERATION(`parsed transaction output locking script for vout ${I} not equal to expected output script.`);const P={txid:b.txid,spendable:!0,scriptLength:k.length,scriptOffset:k.offset};k.length>(await o.getSettings()).maxOutputScript&&(P.lockingScript=void 0),b.outputUpdates.push({id:x.outputId,update:P})}return b}async function s(o,a,l){let c=l.log;c=(0,e.stampLog)(c,"start storage commitNewTxToStorage");let u;await o.transaction(async f=>{c=(0,e.stampLog)(c,"... storage commitNewTxToStorage storage transaction start"),u=await l.req.insertOrMerge(o,f),c=(0,e.stampLog)(c,"... storage commitNewTxToStorage req inserted");for(const h of l.outputUpdates)await o.updateOutput(h.id,h.update,f);c=(0,e.stampLog)(c,"... storage commitNewTxToStorage outputs updated"),await o.updateTransaction(l.transactionId,l.transactionUpdate,f),c=(0,e.stampLog)(c,"... storage commitNewTxToStorage storage transaction end")}),c=(0,e.stampLog)(c,"... storage commitNewTxToStorage storage transaction await done");const d={req:(0,e.verifyTruthy)(u),log:c};return c=(0,e.stampLog)(c,"end storage commitNewTxToStorage"),d}return Xc}var Yc={},Ew;function QI(){if(Ew)return Yc;Ew=1,Object.defineProperty(Yc,"__esModule",{value:!0}),Yc.attemptToPostReqsToNetwork=n;const t=Xe,e=ve();async function n(r,i,s){const o={status:"success",beef:new t.Beef,details:[],log:""};for(const f of i)o.details.push({txid:f.txid,req:f,status:"unknown",pbrft:{txid:f.txid,status:"error"},data:void 0,error:void 0});const a=i.map(f=>f.txid);let l=!1;for(const f of i){let h=!1;if(f.rawTx||(h=!0,f.addHistoryNote({what:"postToNetworkError",error:"no rawTx"})),(!f.notify.transactionIds||f.notify.transactionIds.length<1)&&(h=!0,f.addHistoryNote({what:"postToNetworkError",error:"no notify tx"})),f.attempts>10&&(h=!0,f.addHistoryNote({what:"postToNetworkError",error:"too many attempts",attempts:f.attempts})),!h)try{await r.mergeReqToBeefToShareExternally(f.api,o.beef,[],s)}catch(p){const g=e.sdk.WalletError.fromUnknown(p);g.code==="WERR_INVALID_PARAMETER"&&g.parameter==="txid"&&(h=!0,f.addHistoryNote({what:"postToNetworkError",error:"depends on unknown txid"}))}h&&(l=!0)}if(l){for(const f of i)f.status="invalid",await f.updateStorageDynamicProperties(r),o.log+=`status set to ${f.status}
`;return o}const u=await(await r.getServices()).postBeef(o.beef,a);for(const f of a){const h=i.find(g=>g.txid===f);if(!h)throw new e.sdk.WERR_INTERNAL;const p=[];for(const g of u){p.push(...g.notes||[]);const w=g.txidResults.find(v=>v.txid===f);w&&p.push(...w.notes||[])}for(const g of p)h.addHistoryNote(g,!0);await h.updateStorageDynamicProperties(r),await h.refreshFromStorage(r)}const d=u.find(f=>f.status==="success");if(o.pbr=d||(u.length>0?u[0]:void 0),!o.pbr)o.status="error";else for(const f of o.details){const h=o.pbr.txidResults.find(p=>p.txid===f.txid);if(!h)throw new e.sdk.WERR_INTERNAL(`postBeef service failed to return result for txid ${f.txid}`);f.pbrft=h,o.pbr.data&&(f.data=JSON.stringify(o.pbr.data)),o.pbr.error&&(f.error=o.pbr.error.code),f.status=h.status==="success"?"success":"unknown",f.status!=="success"&&(o.status="error"),f.req.attempts++,f.req.addHistoryNote({what:"postToNetwork",name:o.pbr.name,status:f.status,error:f.error})}for(const f of o.details){let h,p;if(f.status==="success")["nosend","unprocessed","sending","unsent"].indexOf(f.req.status)>-1&&(h="unmined"),p="unproven";else if(f.status==="doubleSpend")h="doubleSpend",p="failed";else if(f.status!=="unknown")throw new e.sdk.WERR_INTERNAL(`unexpected status ${f.status}`);if(h&&(f.req.status=h),await f.req.updateStorageDynamicProperties(r),p){const g=f.req.notify.transactionIds;if(!g||g.length<1)throw new e.sdk.WERR_INTERNAL("req must have at least one transactionId to notify");for(const w of g)await r.updateTransactionStatus(p,w)}}return o}return Yc}var gm={};Object.defineProperty(gm,"__esModule",{value:!0});gm.listCertificates=EC;async function EC(t,e,n,r){const i={limit:n.limit,offset:n.offset},s={userId:e.userId,isDeleted:!1};if(n.partial){const a=n.partial;a.type&&(s.type=a.type),a.subject&&(s.subject=a.subject),a.serialNumber&&(s.serialNumber=a.serialNumber),a.certifier&&(s.certifier=a.certifier),a.revocationOutpoint&&(s.revocationOutpoint=a.revocationOutpoint),a.signature&&(s.signature=a.signature)}return await t.transaction(async a=>{const l={partial:s,certifiers:n.certifiers,types:n.types,paged:i,trx:a},c=await t.findCertificates(l),d={totalCertificates:0,certificates:(await Promise.all(c.map(async f=>{const h=await t.findCertificateFields({partial:{certificateId:f.certificateId,userId:e.userId},trx:a});return{...f,fields:Object.fromEntries(h.map(p=>[p.fieldName,p.fieldValue])),masterKeyring:Object.fromEntries(h.map(p=>[p.fieldName,p.masterKey]))}}))).map(f=>({type:f.type,subject:f.subject,serialNumber:f.serialNumber,certifier:f.certifier,revocationOutpoint:f.revocationOutpoint,signature:f.signature,fields:f.fields,verifier:f.verifier,keyring:f.masterKeyring}))};return d.certificates.length<i.limit?d.totalCertificates=d.certificates.length:d.totalCertificates=await t.countCertificates(l),d})}var mi={},Tw;function TC(){if(Tw)return mi;Tw=1,Object.defineProperty(mi,"__esModule",{value:!0}),mi.createAction=r,mi.offsetPubKey=g,mi.lockScriptWithKeyOffsetFromPubKey=w,mi.createStorageServiceChargeScript=v;const t=Xe,e=ve(),n=YI();async function r(m,y,b,x){if(!b.isNewTx)throw new e.sdk.WERR_INTERNAL;const I=y.userId,{storageBeef:k,beef:S,xinputs:P}=await c(m,I,b),R=l(m,I,b),B="default",T=(0,e.verifyOne)(await m.findOutputBaskets({partial:{userId:I,name:B}}),`Invalid outputGeneration basket "${B}"`),N=await u(m,I,b,T),L=await m.countChangeInputs(I,T.basketId,!b.isDelayed),$=(0,e.validateStorageFeeModel)(m.feeModel),H=await a(m,I,b,k),W={xinputs:P,xoutputs:R,changeBasket:T,noSendChangeIn:N,availableChangeCount:L,feeModel:$,transactionId:H.transactionId},{allocatedChange:C,changeOutputs:V,derivationPrefix:q,maxPossibleSatoshisAdjustment:G}=await d(m,I,b,W);if(G){const X=G;if(W.xoutputs[X.fixedOutputIndex].satoshis!==n.maxPossibleSatoshis)throw new e.sdk.WERR_INTERNAL;W.xoutputs[X.fixedOutputIndex].satoshis=X.satoshis}const Y=V.reduce((X,ie)=>X+ie.satoshis,0)-C.reduce((X,ie)=>X+ie.satoshis,0);await m.updateTransaction(H.transactionId,{satoshis:Y});const{outputs:z,changeVouts:K}=await o(m,I,b,W,V),oe=await h(m,I,b,C,S),te=await s(m,I,b,W,C);return{reference:H.reference,version:H.version,lockTime:H.lockTime,inputs:te,outputs:z,derivationPrefix:q,inputBeef:oe,noSendChangeOutputVouts:b.isNoSend?K:void 0}}function i(m,y,b,x){const I=new Date;return{created_at:I,updated_at:I,outputId:0,userId:m,transactionId:y,satoshis:b,vout:x,basketId:void 0,change:!1,customInstructions:void 0,derivationPrefix:void 0,derivationSuffix:void 0,outputDescription:"",lockingScript:void 0,providedBy:"you",purpose:"",senderIdentityKey:void 0,spendable:!0,spendingDescription:void 0,spentBy:void 0,txid:void 0,type:""}}async function s(m,y,b,x,I){const k=[],S=[];for(const R of x.xinputs){const B=R.output;S.push({i:R,o:B}),B&&await m.updateOutput(B.outputId,{spendable:!1,spentBy:x.transactionId,spendingDescription:R.inputDescription})}for(const R of I)S.push({o:R,unlockLen:107});let P=-1;for(const{i:R,o:B,unlockLen:T}of S)if(P++,B){if(!R&&!T)throw new e.sdk.WERR_INTERNAL(`vin ${P} non-fixedInput without unlockLen`);const N=b.includeAllSourceTransactions&&b.isSignAction?await m.getRawTxOfKnownValidTransaction(B.txid):void 0,L={vin:P,sourceTxid:B.txid,sourceVout:B.vout,sourceSatoshis:B.satoshis,sourceLockingScript:(0,e.asString)(B.lockingScript),sourceTransaction:N,unlockingScriptLength:T||R.unlockingScriptLength,providedBy:R&&B.providedBy==="storage"?"you-and-storage":B.providedBy,type:B.type,spendingDescription:B.spendingDescription||void 0,derivationPrefix:B.derivationPrefix||void 0,derivationSuffix:B.derivationSuffix||void 0,senderIdentityKey:B.senderIdentityKey||void 0};k.push(L)}else{if(!R)throw new e.sdk.WERR_INTERNAL(`vin ${P} without output or xinput`);const N={vin:P,sourceTxid:R.outpoint.txid,sourceVout:R.outpoint.vout,sourceSatoshis:R.satoshis,sourceLockingScript:R.lockingScript.toHex(),unlockingScriptLength:R.unlockingScriptLength,providedBy:"you",type:"custom",spendingDescription:void 0,derivationPrefix:void 0,derivationSuffix:void 0,senderIdentityKey:void 0};k.push(N)}return k}async function o(m,y,b,x,I){var k;const S=[],P={};for(const N of x.xoutputs)N.basket!==void 0&&!P[N.basket]&&(P[N.basket]=await m.findOrInsertOutputBasket(y,N.basket));const R={};for(const N of x.xoutputs)for(const L of N.tags)R[L]=await m.findOrInsertOutputTag(y,L);const B=[];for(const N of x.xoutputs){const L=(0,e.asArray)(N.lockingScript);if(N.purpose==="service-charge"){const $=new Date;await m.insertCommission({userId:y,transactionId:x.transactionId,lockingScript:L,satoshis:N.satoshis,isRedeemed:!1,keyOffset:(0,e.verifyTruthy)(N.keyOffset),created_at:$,updated_at:$,commissionId:0});const H=i(y,x.transactionId,N.satoshis,N.vout);H.lockingScript=L,H.providedBy="storage",H.purpose="storage-commission",H.type="custom",H.spendable=!1,B.push({o:H,tags:[]})}else{const $=N.basket?P[N.basket].basketId:void 0,H=i(y,x.transactionId,N.satoshis,N.vout);H.lockingScript=L,H.basketId=$,H.customInstructions=N.customInstructions,H.outputDescription=N.outputDescription,H.providedBy=N.providedBy,H.purpose=N.purpose||"",H.type="custom",B.push({o:H,tags:N.tags})}}for(const N of I)N.spendable=!0,B.push({o:N,tags:[]});if(b.options.randomizeOutputs){const N=[],L=()=>{let C=0;return!N||N.length===0?C=Math.random():(C=N.shift()||0,N.push(C)),C},$=C=>{let V=C.length,q,G;for(;V!==0;)G=Math.floor(L()*V),V-=1,q=C[V],C[V]=C[G],C[G]=q;return C};let H=-1;const W=Array(B.length);for(let C=0;C<W.length;C++)W[C]=C;$(W);for(const C of B){if(H++,C.o.vout!==H)throw new e.sdk.WERR_INTERNAL(`new output ${H} has out of order vout ${C.o.vout}`);C.o.vout=W[H]}}const T=[];for(const{o:N,tags:L}of B){N.outputId=await m.insertOutput(N),N.change&&N.purpose==="change"&&N.providedBy==="storage"&&T.push(N.vout);for(const H of L){const W=R[H];await m.findOrInsertOutputTagMap((0,e.verifyId)(N.outputId),(0,e.verifyId)(W.outputTagId))}const $={vout:(0,e.verifyInteger)(N.vout),satoshis:(0,e.verifyTruthy)(N.satoshis),lockingScript:N.lockingScript?(0,e.asString)(N.lockingScript):"",providedBy:(0,e.verifyTruthy)(N.providedBy),purpose:N.purpose||void 0,basket:(k=Object.values(P).find(H=>H.basketId===N.basketId))===null||k===void 0?void 0:k.name,tags:L,outputDescription:N.outputDescription,derivationSuffix:N.derivationSuffix,customInstructions:N.customInstructions};S.push($)}return{outputs:S,changeVouts:T}}async function a(m,y,b,x){const I=new Date,k={created_at:I,updated_at:I,transactionId:0,version:b.version,lockTime:b.lockTime,status:"unsigned",reference:(0,e.randomBytesBase64)(12),satoshis:0,userId:y,isOutgoing:!0,inputBEEF:x.toBinary(),description:b.description,txid:void 0,rawTx:void 0};k.transactionId=await m.insertTransaction(k);for(const S of b.labels){const P=await m.findOrInsertTxLabel(y,S);await m.findOrInsertTxLabelMap((0,e.verifyId)(k.transactionId),(0,e.verifyId)(P.txLabelId))}return k}function l(m,y,b){const x=[];let I=-1;for(const k of b.outputs){I++;const S={...k,vout:I,providedBy:"you",purpose:void 0,derivationSuffix:void 0,keyOffset:void 0};x.push(S)}if(m.commissionSatoshis>0&&m.commissionPubKeyHex){I++;const{script:k,keyOffset:S}=v(m.commissionPubKeyHex);x.push({lockingScript:k,satoshis:m.commissionSatoshis,outputDescription:"Storage Service Charge",basket:void 0,tags:[],vout:I,providedBy:"storage",purpose:"service-charge",keyOffset:S})}return x}async function c(m,y,b){const x=new t.Beef;if(b.inputs.length===0)return{storageBeef:x,beef:x,xinputs:[]};b.inputBEEF&&x.mergeBeef(b.inputBEEF);const I=b.inputs.map((R,B)=>({...R,vin:B,satoshis:-1,lockingScript:new t.Script})),k=b.options.trustSelf==="known",S={};for(const R of I)S[R.outpoint.txid]=!0;for(const R of x.txs)if(R.isTxidOnly){if(!k)throw new e.sdk.WERR_INVALID_PARAMETER("inputBEEF",`valid and contain complete proof data for ${R.txid}`);if(!S[R.txid]&&!await m.verifyKnownValidTransaction(R.txid))throw new e.sdk.WERR_INVALID_PARAMETER("inputBEEF",`valid and contain complete proof data for unknown ${R.txid}`)}for(const R of Object.keys(S)){let B=x.findTxid(R);if(!B&&k&&await m.verifyKnownValidTransaction(R)&&(B=x.mergeTxidOnly(R)),!B)throw new e.sdk.WERR_INVALID_PARAMETER("inputBEEF",`valid and contain proof data for possibly known ${R}`)}if(!await x.verify(await m.getServices().getChainTracker(),!0))throw console.log(`verifyInputBeef failed, inputBEEF failed to verify.
${x.toLogString()}
`),new e.sdk.WERR_INVALID_PARAMETER("inputBEEF","valid Beef when factoring options.trustSelf");const P=x.clone();for(const R of I){const{txid:B,vout:T}=R.outpoint,N=(0,e.verifyOneOrNone)(await m.findOutputs({partial:{userId:y,txid:B,vout:T}}));if(N){if(R.output=N,!Array.isArray(N.lockingScript)||!Number.isInteger(N.satoshis))throw new e.sdk.WERR_INVALID_PARAMETER(`${B}.${T}`,"output with valid lockingScript and satoshis");if(!N.spendable&&!b.isNoSend)throw new e.sdk.WERR_INVALID_PARAMETER(`${B}.${T}`,"spendable output unless noSend is true");R.satoshis=(0,e.verifyNumber)(N.satoshis),R.lockingScript=t.Script.fromBinary((0,e.asArray)(N.lockingScript))}else{let L=x.findTxid(B);if(L.isTxidOnly){const{rawTx:H,proven:W}=await m.getProvenOrRawTx(B);if(!H)throw new e.sdk.WERR_INVALID_PARAMETER("inputBEEF",`valid and contain proof data for ${B}`);L=x.mergeRawTx((0,e.asArray)(H)),W&&x.mergeBump(new e.EntityProvenTx(W).getMerklePath())}if(T>=L.tx.outputs.length)throw new e.sdk.WERR_INVALID_PARAMETER(`${B}.${T}`,"valid outpoint");const $=L.tx.outputs[T];R.satoshis=(0,e.verifyTruthy)($.satoshis),R.lockingScript=$.lockingScript}}return{beef:x,storageBeef:P,xinputs:I}}async function u(m,y,b,x){const I=[];if(!b.isNoSend)return[];const k=b.options.noSendChange;if(k&&k.length>0)for(const S of k){const P=(0,e.verifyOneOrNone)(await m.findOutputs({partial:{userId:y,txid:S.txid,vout:S.vout}}));if(!P||P.providedBy!=="storage"||P.purpose!=="change"||P.spendable===!1||Number.isInteger(P.spentBy)||!(0,e.verifyNumber)(P.satoshis)||P.basketId!==x.basketId)throw new e.sdk.WERR_INVALID_PARAMETER("noSendChange outpoint","valid");if(-1<I.findIndex(R=>R.outputId===P.outputId))throw new e.sdk.WERR_INVALID_PARAMETER("noSendChange outpoint","unique. Duplicates are not allowed.");I.push(P)}return I}async function d(m,y,b,x){const I={fixedInputs:x.xinputs.map(W=>({satoshis:W.satoshis,unlockingScriptLength:W.unlockingScriptLength})),fixedOutputs:x.xoutputs.map(W=>({satoshis:W.satoshis,lockingScriptLength:W.lockingScript.length/2})),feeModel:x.feeModel,changeInitialSatoshis:x.changeBasket.minimumDesiredUTXOValue,changeFirstSatoshis:Math.max(1,Math.round(x.changeBasket.minimumDesiredUTXOValue/4)),changeLockingScriptLength:25,changeUnlockingScriptLength:107,targetNetCount:x.changeBasket.numberOfDesiredUTXOs-x.availableChangeCount,randomVals:b.randomVals},k=[...x.noSendChangeIn],S={},P=async(W,C)=>{if(k.length>0){const Y=k.pop();return S[Y.outputId]=Y,await m.updateOutput(Y.outputId,{spendable:!1,spentBy:x.transactionId}),Y.spendable=!1,Y.spentBy=x.transactionId,{outputId:Y.outputId,satoshis:Y.satoshis}}const V=x.changeBasket.basketId,q=await m.allocateChangeInput(y,V,W,C,!b.isDelayed,x.transactionId);return q?(S[q.outputId]=q,{outputId:q.outputId,satoshis:q.satoshis}):void 0},R=async W=>{const C=x.noSendChangeIn.find(V=>V.outputId===W);if(C){k.push(C);return}await m.updateOutput(W,{spendable:!0,spentBy:void 0})},B=await(0,n.generateChangeSdk)(I,P,R),T=()=>{let W=0;return!b.randomVals||b.randomVals.length===0?W=Math.random():(W=b.randomVals.shift()||0,b.randomVals.push(W)),W},N=(W,C)=>Math.floor(T()*(C-W+1)+W),L=W=>{let C=[];if(!b.randomVals||b.randomVals.length===0)C=(0,t.Random)(W);else for(let V=0;V<W;V++)C.push(N(0,255));return t.Utils.toBase64(C)},$=L(16);return{maxPossibleSatoshisAdjustment:B.maxPossibleSatoshisAdjustment,allocatedChange:B.allocatedChangeInputs.map(W=>S[W.outputId]),changeOutputs:B.changeOutputs.map((W,C)=>({created_at:new Date,updated_at:new Date,outputId:0,userId:y,transactionId:x.transactionId,vout:I.fixedOutputs.length+C,satoshis:W.satoshis,basketId:x.changeBasket.basketId,spendable:!1,change:!0,type:"P2PKH",derivationPrefix:$,derivationSuffix:L(16),providedBy:"storage",purpose:"change",customInstructions:void 0,senderIdentityKey:void 0,outputDescription:"",txid:void 0,lockingScript:void 0,spentBy:void 0,spendingDescription:void 0})),derivationPrefix:$}}function f(m,y){if(y.options.returnTXIDOnly)return;const b={};for(const x of y.options.knownTxids)b[x]=!0;for(const x of m.txs.map(I=>I.txid))b[x]&&m.makeTxidOnly(x);return m.toBinary()}async function h(m,y,b,x,I){const k={trustSelf:void 0,knownTxids:b.options.knownTxids,mergeToBeef:I,ignoreStorage:!1,ignoreServices:!0,ignoreNewProven:!1,minProofLevel:void 0};if(!b.options.returnTXIDOnly){for(const S of x)!I.findTxid(S.txid)&&!b.options.knownTxids.find(P=>P===S.txid)&&await m.getBeefForTransaction(S.txid,k);return f(I,b)}}function p(m,y){let b;y!==void 0&&typeof y=="string"?y.length===64?b=t.PrivateKey.fromString(y,"hex"):b=t.PrivateKey.fromWif(y):(b=t.PrivateKey.fromRandom(),y=b.toWif());const x=m.mul(b).encode(!0,void 0),I=(0,e.sha256Hash)(x);return{hashedSecret:new t.BigNumber(I),keyOffset:y}}function g(m,y){const b=t.PublicKey.fromString(m),x=p(b,y),I=new t.Curve().g.mul(x.hashedSecret);return{offsetPubKey:new t.PublicKey(b.add(I)).toString(),keyOffset:x.keyOffset}}function w(m,y){const b=g(m,y),I=t.PublicKey.fromString(b.offsetPubKey).toHash();return{script:new t.P2PKH().lock(I).toHex(),keyOffset:b.keyOffset}}function v(m){return w(m)}return mi}var Qc={},Rw;function RC(){if(Rw)return Qc;Rw=1,Object.defineProperty(Qc,"__esModule",{value:!0}),Qc.internalizeAction=n;const t=Xe,e=ve();async function n(i,s,o){const a=new r(i,s,o);return await a.asyncSetup(),a.isMerge?await a.mergedInternalize():await a.newInternalize(),a.r}class r{constructor(s,o,a){this.storage=s,this.auth=o,this.args=a,this.vargs=e.sdk.validateInternalizeActionArgs(a),this.userId=o.userId,this.r={accepted:!0,isMerge:!1,txid:"",satoshis:0},this.ab=new t.Beef,this.tx=new t.Transaction,this.changeBasket={},this.baskets={},this.basketInsertions=[],this.walletPayments=[],this.eos=[]}get isMerge(){return this.r.isMerge}set isMerge(s){this.r.isMerge=s}get txid(){return this.r.txid}set txid(s){this.r.txid=s}get satoshis(){return this.r.satoshis}set satoshis(s){this.r.satoshis=s}async getBasket(s){let o=this.baskets[s];return o||(o=await this.storage.findOrInsertOutputBasket(this.userId,s),this.baskets[s]=o,o)}async asyncSetup(){({ab:this.ab,tx:this.tx,txid:this.txid}=await this.validateAtomicBeef(this.args.tx));for(const s of this.args.outputs){if(s.outputIndex<0||s.outputIndex>=this.tx.outputs.length)throw new e.sdk.WERR_INVALID_PARAMETER("outputIndex",`a valid output index in range 0 to ${this.tx.outputs.length-1}`);const o=this.tx.outputs[s.outputIndex];switch(s.protocol){case"basket insertion":{if(!s.insertionRemittance||s.paymentRemittance)throw new e.sdk.WERR_INVALID_PARAMETER("basket insertion","valid insertionRemittance and no paymentRemittance");this.basketInsertions.push({...s.insertionRemittance,txo:o,vout:s.outputIndex})}break;case"wallet payment":{if(s.insertionRemittance||!s.paymentRemittance)throw new e.sdk.WERR_INVALID_PARAMETER("wallet payment","valid paymentRemittance and no insertionRemittance");this.walletPayments.push({...s.paymentRemittance,txo:o,vout:s.outputIndex,ignore:!1})}break;default:throw new e.sdk.WERR_INTERNAL(`unexpected protocol ${s.protocol}`)}}if(this.changeBasket=(0,e.verifyOne)(await this.storage.findOutputBaskets({partial:{userId:this.userId,name:"default"}})),this.baskets={},this.etx=(0,e.verifyOneOrNone)(await this.storage.findTransactions({partial:{userId:this.userId,txid:this.txid}})),this.etx&&!(this.etx.status=="completed"||this.etx.status==="unproven"||this.etx.status==="nosend"))throw new e.sdk.WERR_INVALID_PARAMETER("tx",`target transaction of internalizeAction has invalid status ${this.etx.status}.`);if(this.isMerge=!!this.etx,this.isMerge){this.eos=await this.storage.findOutputs({partial:{userId:this.userId,txid:this.txid}});for(const s of this.eos){const o=this.basketInsertions.find(l=>l.vout===s.vout),a=this.walletPayments.find(l=>l.vout===s.vout);if(o&&a)throw new e.sdk.WERR_INVALID_PARAMETER("outputs","unique outputIndex values");o&&(o.eo=s),a&&(a.eo=s)}}for(const s of this.basketInsertions)this.isMerge&&s.eo&&s.eo.basketId===this.changeBasket.basketId&&(this.satoshis-=s.txo.satoshis);for(const s of this.walletPayments)this.isMerge?s.eo?s.eo.basketId===this.changeBasket.basketId?s.ignore=!0:this.satoshis+=s.txo.satoshis:this.satoshis+=s.txo.satoshis:this.satoshis+=s.txo.satoshis}async validateAtomicBeef(s){const o=t.Beef.fromBinary(s);if(!await o.verify(await this.storage.getServices().getChainTracker(),!1)||!o.atomicTxid)throw new e.sdk.WERR_INVALID_PARAMETER("tx","valid AtomicBEEF");const l=o.atomicTxid,c=o.findTxid(l);if(!c)throw new e.sdk.WERR_INVALID_PARAMETER("tx",`valid AtomicBEEF with newest txid of ${l}`);const u=c.tx;return{ab:o,tx:u,txid:l}}async findOrInsertTargetTransaction(s,o){const a=new Date,l={created_at:a,updated_at:a,transactionId:0,status:o,satoshis:s,version:this.tx.version,lockTime:this.tx.lockTime,reference:(0,e.randomBytesBase64)(7),userId:this.userId,isOutgoing:!1,description:this.args.description,inputBEEF:void 0,txid:this.txid,rawTx:void 0},c=await this.storage.findOrInsertTransaction(l);if(!c.isNew){if(!this.isMerge)throw new e.sdk.WERR_INVALID_PARAMETER("tx","target transaction of internalizeAction is undergoing active changes.");await this.storage.updateTransaction(c.tx.transactionId,{satoshis:c.tx.satoshis+s})}return c.tx}async mergedInternalize(){const s=this.etx.transactionId;await this.addLabels(s);for(const o of this.walletPayments)o.eo&&!o.ignore?await this.mergeWalletPaymentForOutput(s,o):o.ignore||await this.storeNewWalletPaymentForOutput(s,o);for(const o of this.basketInsertions)o.eo?await this.mergeBasketInsertionForOutput(s,o):await this.storeNewBasketInsertionForOutput(s,o)}async newInternalize(){this.etx=await this.findOrInsertTargetTransaction(this.satoshis,"unproven");const s=this.etx.transactionId,o=e.EntityProvenTxReq.fromTxid(this.txid,this.tx.toBinary(),this.args.tx);o.status="unmined",o.addHistoryNote({what:"internalizeAction",userId:this.userId}),o.addNotifyTransactionId(s),await this.storage.getProvenOrReq(this.txid,o.toApi()),await this.addLabels(s);for(const a of this.walletPayments)await this.storeNewWalletPaymentForOutput(s,a);for(const a of this.basketInsertions)await this.storeNewBasketInsertionForOutput(s,a)}async addLabels(s){for(const o of this.vargs.labels){const a=await this.storage.findOrInsertTxLabel(this.userId,o);await this.storage.findOrInsertTxLabelMap((0,e.verifyId)(s),(0,e.verifyId)(a.txLabelId))}}async addBasketTags(s,o){for(const a of s.tags||[])await this.storage.tagOutput({outputId:o,userId:this.userId},a)}async storeNewWalletPaymentForOutput(s,o){const a=new Date,l={created_at:a,updated_at:a,outputId:0,transactionId:s,userId:this.userId,spendable:!0,lockingScript:o.txo.lockingScript.toBinary(),vout:o.vout,basketId:this.changeBasket.basketId,satoshis:o.txo.satoshis,txid:this.txid,senderIdentityKey:o.senderIdentityKey,type:"P2PKH",providedBy:"storage",purpose:"change",derivationPrefix:o.derivationPrefix,derivationSuffix:o.derivationSuffix,change:!0,spentBy:void 0,customInstructions:void 0,outputDescription:"",spendingDescription:void 0};l.outputId=await this.storage.insertOutput(l),o.eo=l}async mergeWalletPaymentForOutput(s,o){const a=o.eo.outputId,l={basketId:this.changeBasket.basketId,type:"P2PKH",customInstructions:void 0,change:!0,providedBy:"storage",purpose:"change",senderIdentityKey:o.senderIdentityKey,derivationPrefix:o.derivationPrefix,derivationSuffix:o.derivationSuffix};await this.storage.updateOutput(a,l),o.eo={...o.eo,...l}}async mergeBasketInsertionForOutput(s,o){const a=o.eo.outputId,l={basketId:(await this.getBasket(o.basket)).basketId,type:"custom",customInstructions:o.customInstructions,change:!1,providedBy:"you",purpose:"",senderIdentityKey:void 0,derivationPrefix:void 0,derivationSuffix:void 0};await this.storage.updateOutput(a,l),o.eo={...o.eo,...l}}async storeNewBasketInsertionForOutput(s,o){const a=new Date,l={created_at:a,updated_at:a,outputId:0,transactionId:s,userId:this.userId,spendable:!0,lockingScript:o.txo.lockingScript.toBinary(),vout:o.vout,basketId:(await this.getBasket(o.basket)).basketId,satoshis:o.txo.satoshis,txid:this.txid,type:"custom",customInstructions:o.customInstructions,change:!1,spentBy:void 0,outputDescription:"",spendingDescription:void 0,providedBy:"you",purpose:"",senderIdentityKey:void 0,derivationPrefix:void 0,derivationSuffix:void 0};l.outputId=await this.storage.insertOutput(l),await this.addBasketTags(o,l.outputId),o.eo=l}}return Qc}var So={},bh={},pc={};Object.defineProperty(pc,"__esModule",{value:!0});pc.EntityBase=void 0;pc.createSyncMap=PC;class _C{constructor(e){this.api=e}toApi(){return this.updateApi(),this.api}}pc.EntityBase=_C;function PC(){return{provenTx:{entityName:"provenTx",idMap:{},maxUpdated_at:void 0,count:0},outputBasket:{entityName:"outputBasket",idMap:{},maxUpdated_at:void 0,count:0},transaction:{entityName:"transaction",idMap:{},maxUpdated_at:void 0,count:0},provenTxReq:{entityName:"provenTxReq",idMap:{},maxUpdated_at:void 0,count:0},txLabel:{entityName:"txLabel",idMap:{},maxUpdated_at:void 0,count:0},txLabelMap:{entityName:"txLabelMap",idMap:{},maxUpdated_at:void 0,count:0},output:{entityName:"output",idMap:{},maxUpdated_at:void 0,count:0},outputTag:{entityName:"outputTag",idMap:{},maxUpdated_at:void 0,count:0},outputTagMap:{entityName:"outputTagMap",idMap:{},maxUpdated_at:void 0,count:0},certificate:{entityName:"certificate",idMap:{},maxUpdated_at:void 0,count:0},certificateField:{entityName:"certificateField",idMap:{},maxUpdated_at:void 0,count:0},commission:{entityName:"commission",idMap:{},maxUpdated_at:void 0,count:0}}}var Eo={},_w;function OC(){if(_w)return Eo;_w=1,Object.defineProperty(Eo,"__esModule",{value:!0}),Eo.EntitySyncState=void 0;const t=Dt(),e=ve();class n extends t.EntityBase{constructor(i){const s=new Date;super(i||{syncStateId:0,created_at:s,updated_at:s,userId:0,storageIdentityKey:"",storageName:"",init:!1,refNum:"",status:"unknown",when:void 0,errorLocal:void 0,errorOther:void 0,satoshis:void 0,syncMap:JSON.stringify((0,t.createSyncMap)())}),this.errorLocal=this.api.errorLocal?JSON.parse(this.api.errorLocal):void 0,this.errorOther=this.api.errorOther?JSON.parse(this.api.errorOther):void 0,this.syncMap=JSON.parse(this.api.syncMap),this.validateSyncMap(this.syncMap)}validateSyncMap(i){for(const s of Object.keys(i)){const o=i[s];typeof o.maxUpdated_at=="string"&&(o.maxUpdated_at=new Date(o.maxUpdated_at))}}static async fromStorage(i,s,o){const{user:a}=(0,e.verifyTruthy)(await i.findOrInsertUser(s));let{syncState:l}=(0,e.verifyTruthy)(await i.findOrInsertSyncStateAuth({userId:a.userId,identityKey:s},o.storageIdentityKey,o.storageName));return new n(l)}async updateStorage(i,s,o){if(this.updated_at=new Date,this.updateApi(s&&this.id>0),this.id===0)await i.insertSyncState(this.api);else{const a={...this.api};s&&delete a.syncMap,delete a.created_at,await i.updateSyncState((0,e.verifyId)(this.id),a,o)}}updateApi(i){this.api.errorLocal=this.apiErrorLocal,this.api.errorOther=this.apiErrorOther,i||(this.api.syncMap=this.apiSyncMap)}set created_at(i){this.api.created_at=i}get created_at(){return this.api.created_at}set updated_at(i){this.api.updated_at=i}get updated_at(){return this.api.updated_at}set userId(i){this.api.userId=i}get userId(){return this.api.userId}set storageIdentityKey(i){this.api.storageIdentityKey=i}get storageIdentityKey(){return this.api.storageIdentityKey}set storageName(i){this.api.storageName=i}get storageName(){return this.api.storageName}set init(i){this.api.init=i}get init(){return this.api.init}set refNum(i){this.api.refNum=i}get refNum(){return this.api.refNum}set status(i){this.api.status=i}get status(){return this.api.status}set when(i){this.api.when=i}get when(){return this.api.when}set satoshis(i){this.api.satoshis=i}get satoshis(){return this.api.satoshis}get apiErrorLocal(){return this.errorToString(this.errorLocal)}get apiErrorOther(){return this.errorToString(this.errorOther)}get apiSyncMap(){return JSON.stringify(this.syncMap)}get id(){return this.api.syncStateId}set id(i){this.api.syncStateId=i}get entityName(){return"syncState"}get entityTable(){return"sync_states"}static mergeIdMap(i,s){for(const[o,a]of Object.entries(i)){const l=i[o],c=s[o];if(c!==void 0&&c!==l)throw new e.sdk.WERR_INVALID_PARAMETER("syncMap",`an unmapped id or the same mapped id. ${o} maps to ${c} not equal to ${l}`);c===void 0&&(s[o]=a)}}mergeSyncMap(i){n.mergeIdMap(i.provenTx.idMap,this.syncMap.provenTx.idMap),n.mergeIdMap(i.outputBasket.idMap,this.syncMap.outputBasket.idMap),n.mergeIdMap(i.transaction.idMap,this.syncMap.transaction.idMap),n.mergeIdMap(i.provenTxReq.idMap,this.syncMap.provenTxReq.idMap),n.mergeIdMap(i.txLabel.idMap,this.syncMap.txLabel.idMap),n.mergeIdMap(i.output.idMap,this.syncMap.output.idMap),n.mergeIdMap(i.outputTag.idMap,this.syncMap.outputTag.idMap),n.mergeIdMap(i.certificate.idMap,this.syncMap.certificate.idMap),n.mergeIdMap(i.commission.idMap,this.syncMap.commission.idMap)}errorToString(i){if(!i)return;const s={code:i.code,description:i.description,stack:i.stack};return JSON.stringify(s)}equals(i,s){return!1}async mergeNew(i,s,o,a){}async mergeExisting(i,s,o,a,l){return!1}makeRequestSyncChunkArgs(i,s,o,a){const l={identityKey:i,maxRoughSize:o||1e7,maxItems:a||1e3,offsets:[],since:this.when,fromStorageIdentityKey:this.storageIdentityKey,toStorageIdentityKey:s};for(const c of[this.syncMap.provenTx,this.syncMap.outputBasket,this.syncMap.outputTag,this.syncMap.txLabel,this.syncMap.transaction,this.syncMap.output,this.syncMap.txLabelMap,this.syncMap.outputTagMap,this.syncMap.certificate,this.syncMap.certificateField,this.syncMap.commission,this.syncMap.provenTxReq])l.offsets.push({name:c.entityName,offset:c.count});return l}async processSyncChunk(i,s,o){var a;const l=[new t.MergeEntity(o.provenTxs,t.EntityProvenTx.mergeFind,this.syncMap.provenTx),new t.MergeEntity(o.outputBaskets,t.EntityOutputBasket.mergeFind,this.syncMap.outputBasket),new t.MergeEntity(o.outputTags,t.EntityOutputTag.mergeFind,this.syncMap.outputTag),new t.MergeEntity(o.txLabels,t.EntityTxLabel.mergeFind,this.syncMap.txLabel),new t.MergeEntity(o.transactions,t.EntityTransaction.mergeFind,this.syncMap.transaction),new t.MergeEntity(o.outputs,t.EntityOutput.mergeFind,this.syncMap.output),new t.MergeEntity(o.txLabelMaps,t.EntityTxLabelMap.mergeFind,this.syncMap.txLabelMap),new t.MergeEntity(o.outputTagMaps,t.EntityOutputTagMap.mergeFind,this.syncMap.outputTagMap),new t.MergeEntity(o.certificates,t.EntityCertificate.mergeFind,this.syncMap.certificate),new t.MergeEntity(o.certificateFields,t.EntityCertificateField.mergeFind,this.syncMap.certificateField),new t.MergeEntity(o.commissions,t.EntityCommission.mergeFind,this.syncMap.commission),new t.MergeEntity(o.provenTxReqs,t.EntityProvenTxReq.mergeFind,this.syncMap.provenTxReq)];let c=0,u=0,d,f=!0;if(o.user){const h=o.user,{found:p,eo:g}=await t.EntityUser.mergeFind(i,this.userId,h);p&&await g.mergeExisting(i,s.since,h)&&(d=(0,e.maxDate)(d,h.updated_at),c++)}for(const h of l){const p=await h.merge(s.since,i,this.userId,this.syncMap);h.esm.count+=((a=h.stateArray)===null||a===void 0?void 0:a.length)||0,c+=p.updates,u+=p.inserts,d=(0,e.maxDate)(d,h.esm.maxUpdated_at),(h.stateArray===void 0||h.stateArray.length>0)&&(f=!1)}if(f){this.when=d;for(const h of l)h.esm.count=0}return await this.updateStorage(i,!1),{done:f,maxUpdated_at:d,updates:c,inserts:u}}}return Eo.EntitySyncState=n,Eo}var To={},Pw;function AC(){if(Pw)return To;Pw=1,Object.defineProperty(To,"__esModule",{value:!0}),To.EntityProvenTx=void 0;const t=Xe,e=ve(),n=Dt();class r extends n.EntityBase{static async fromTxid(s,o,a){var l;const c={proven:void 0,rawTx:a};if(o.chain,!c.rawTx){const d=await o.getRawTx(s);if(!(d!=null&&d.rawTx))return c;c.rawTx=d.rawTx}const u=await o.getMerklePath(s);if(u.merklePath&&u.header){const d=(l=u.merklePath.path[0].find(f=>f.hash===s))===null||l===void 0?void 0:l.offset;if(d!==void 0){const f={created_at:new Date,updated_at:new Date,provenTxId:0,txid:s,height:u.header.height,index:d,merklePath:u.merklePath.toBinary(),rawTx:c.rawTx,blockHash:u.header.hash,merkleRoot:u.header.merkleRoot};c.proven=new r(f)}}return c}constructor(s){const o=new Date;super(s||{provenTxId:0,created_at:o,updated_at:o,txid:"",height:0,index:0,merklePath:[],rawTx:[],blockHash:"",merkleRoot:""})}updateApi(){}getMerklePath(){return this._mp||(this._mp=t.MerklePath.fromBinary(this.api.merklePath)),this._mp}get provenTxId(){return this.api.provenTxId}set provenTxId(s){this.api.provenTxId=s}get created_at(){return this.api.created_at}set created_at(s){this.api.created_at=s}get updated_at(){return this.api.updated_at}set updated_at(s){this.api.updated_at=s}get txid(){return this.api.txid}set txid(s){this.api.txid=s}get height(){return this.api.height}set height(s){this.api.height=s}get index(){return this.api.index}set index(s){this.api.index=s}get merklePath(){return this.api.merklePath}set merklePath(s){this.api.merklePath=s}get rawTx(){return this.api.rawTx}set rawTx(s){this.api.rawTx=s}get blockHash(){return this.api.blockHash}set blockHash(s){this.api.blockHash=s}get merkleRoot(){return this.api.merkleRoot}set merkleRoot(s){this.api.merkleRoot=s}get id(){return this.api.provenTxId}set id(s){this.api.provenTxId=s}get entityName(){return"provenTx"}get entityTable(){return"proven_txs"}equals(s,o){const a=this.toApi();if(a.txid!=s.txid||a.height!=s.height||a.index!=s.index||!(0,e.arraysEqual)(a.merklePath,s.merklePath)||!(0,e.arraysEqual)(a.rawTx,s.rawTx)||a.blockHash!==s.blockHash||a.merkleRoot!==s.merkleRoot)return!1;if(o){if(a.provenTxId!==o.provenTx.idMap[s.provenTxId])return!1}else if(a.provenTxId!==s.provenTxId)return!1;return!0}static async mergeFind(s,o,a,l,c){const u=(0,e.verifyOneOrNone)(await s.findProvenTxs({partial:{txid:a.txid},trx:c}));return{found:!!u,eo:new r(u||{...a}),eiId:(0,e.verifyId)(a.provenTxId)}}async mergeNew(s,o,a,l){this.provenTxId=0,this.provenTxId=await s.insertProvenTx(this.toApi(),l)}async mergeExisting(s,o,a,l,c){return!1}static async fromReq(s,o,a){if(!s.txid)throw new e.sdk.WERR_MISSING_PARAMETER("req.txid");if(!s.rawTx)throw new e.sdk.WERR_MISSING_PARAMETER("req.rawTx");if(!s.rawTx)throw new e.sdk.WERR_INTERNAL("rawTx must be valid");for(const c of o.notes||[])s.addHistoryNote(c,!0);if(!o.name&&!o.merklePath&&!o.error)return;if(!o.merklePath){if(s.created_at){const c=Date.now()-s.created_at.getTime(),u=Math.ceil(c<1?0:c/(1e3*60));s.attempts>r.getProofAttemptsLimit&&u>r.getProofMinutes&&(s.addHistoryNote({what:"getMerklePathGiveUp",attempts:s.attempts,limit:r.getProofAttemptsLimit,ageInMinutes:u},!0),s.notified=!1,s.status="invalid")}return}a&&s.attempts++;const l=Array.isArray(o.merklePath)?o.merklePath:[o.merklePath];for(const c of l)try{const u=new Date,d=c.path[0].find(h=>h.txid===!0&&h.hash===s.txid);if(!d)throw s.addHistoryNote({what:"getMerklePathTxidNotFound"},!0),new e.sdk.WERR_INTERNAL("merkle path does not contain leaf for txid");return new r({created_at:u,updated_at:u,provenTxId:0,txid:s.txid,height:c.blockHeight,index:d.offset,merklePath:c.toBinary(),rawTx:s.rawTx,merkleRoot:o.header.merkleRoot,blockHash:o.header.hash})}catch(u){const d=e.sdk.WalletError.fromUnknown(u);s.addHistoryNote({what:"getMerklePathProvenError",attempts:s.attempts,code:d.code,description:d.description},!0)}}}return To.EntityProvenTx=r,r.getProofAttemptsLimit=8,r.getProofMinutes=60,To}var Ro={},Ow;function NC(){if(Ow)return Ro;Ow=1,Object.defineProperty(Ro,"__esModule",{value:!0}),Ro.EntityProvenTxReq=void 0;const t=ve(),e=Dt();class n extends e.EntityBase{static async fromStorageTxid(i,s,o){const a=(0,t.verifyOneOrNone)(await i.findProvenTxReqs({partial:{txid:s},trx:o}));if(a)return new n(a)}static async fromStorageId(i,s,o){const a=(0,t.verifyOneOrNone)(await i.findProvenTxReqs({partial:{provenTxReqId:s},trx:o}));if(!a)throw new t.sdk.WERR_INTERNAL(`proven_tx_reqs with id ${s} is missing.`);return new n(a)}static fromTxid(i,s,o){const a=new Date;return new n({provenTxReqId:0,created_at:a,updated_at:a,txid:i,inputBEEF:o,rawTx:s,status:"unknown",history:"{}",notify:"{}",attempts:0,notified:!1})}packApiHistory(){this.api.history=JSON.stringify(this.history)}packApiNotify(){this.api.notify=JSON.stringify(this.notify)}unpackApiHistory(){this.history=JSON.parse(this.api.history)}unpackApiNotify(){this.notify=JSON.parse(this.api.notify)}get apiHistory(){return this.packApiHistory(),this.api.history}get apiNotify(){return this.packApiNotify(),this.api.notify}set apiHistory(i){this.api.history=i,this.unpackApiHistory()}set apiNotify(i){this.api.notify=i,this.unpackApiNotify()}updateApi(){this.packApiHistory(),this.packApiNotify()}unpackApi(){if(this.unpackApiHistory(),this.unpackApiNotify(),this.notify.transactionIds){const i=[];for(const s of this.notify.transactionIds)Number.isInteger(s)&&!i.some(o=>o===s)&&i.push(s);this.notify.transactionIds=i}}async refreshFromStorage(i){const s=(0,t.verifyOne)(await i.findProvenTxReqs({partial:{provenTxReqId:this.id}}));this.api=s,this.unpackApi()}constructor(i){const s=new Date;super(i||{provenTxReqId:0,created_at:s,updated_at:s,txid:"",rawTx:[],history:"",notify:"",attempts:0,status:"unknown",notified:!1}),this.history={},this.notify={},this.unpackApi()}historySince(i){const s={notes:[]},o=i.toISOString(),a=this.history.notes;if(a&&s.notes)for(const l of a)l.when&&l.when>o&&s.notes.push(l);return s}historyPretty(i,s=0){const o=i?this.historySince(i):{...this.history};if(!o.notes)return"";const a=i?i.toISOString():void 0;let l="";for(const c of o.notes)a&&c.when&&c.when<a||(l+=this.prettyNote(c)+`
`);return l}prettyNote(i){let s=`${i.when}: ${i.what}`;for(const[o,a]of Object.entries(i))o!=="when"&&o!=="what"&&(typeof a=="string"?s+=" "+o+":`"+a+"`":s+=" "+o+":"+a);return s}getHistorySummary(){const i={setToCompleted:!1,setToUnmined:!1,setToCallback:!1,setToDoubleSpend:!1,setToSending:!1,setToUnconfirmed:!1},s=this.history;if(s.notes)for(const o of s.notes)this.parseHistoryNote(o,i);return i}parseHistoryNote(i,s){const o=s||{setToCompleted:!1,setToUnmined:!1,setToCallback:!1,setToDoubleSpend:!1,setToSending:!1,setToUnconfirmed:!1};let a=this.prettyNote(i);try{switch(i.what){case"status":switch(i.status_now){case"completed":o.setToCompleted=!0;break;case"unmined":o.setToUnmined=!0;break;case"callback":o.setToCallback=!0;break;case"doubleSpend":o.setToDoubleSpend=!0;break;case"sending":o.setToSending=!0;break;case"unconfirmed":o.setToUnconfirmed=!0;break;default:break}break;default:break}}catch{}return a}addNotifyTransactionId(i){if(!Number.isInteger(i))throw new t.sdk.WERR_INVALID_PARAMETER("id","integer");const s=new Set(this.notify.transactionIds||[]);s.add(i),this.notify.transactionIds=[...s].sort((o,a)=>o>a?1:o<a?-1:0),this.notified=!1}addHistoryNote(i,s){this.history.notes||(this.history.notes=[]),i.when||(i.when=new Date().toISOString()),s&&(this.history.notes=this.history.notes.filter(a=>a.what!==i.what||a.when&&a.when>i.when));let o=!0;for(const a of this.history.notes){let l=!0;for(const[c,u]of Object.entries(a))if(u!==i[c]){l=!1;break}if(l&&(o=!1),!o)break}if(o){this.history.notes.push(i);const a=l=>`${l.when} ${l.what}`;this.history.notes.sort((l,c)=>a(l)<a(c)?-1:a(l)>a(c)?1:0)}}async updateStorage(i,s){this.updated_at=new Date,this.updateApi(),this.id===0&&await i.insertProvenTxReq(this.api);const o={...this.api};await i.updateProvenTxReq(this.id,o,s)}async updateStorageDynamicProperties(i,s){this.updated_at=new Date,this.updateApi();const o={updated_at:this.api.updated_at,provenTxId:this.api.provenTxId,status:this.api.status,history:this.api.history,notify:this.api.notify,notified:this.api.notified,attempts:this.api.attempts,batch:this.api.batch};i.isStorageProvider()?await i.updateProvenTxReqDynamics(this.id,o,s):await i.runAsStorageProvider(async l=>{await l.updateProvenTxReqDynamics(this.id,o,s)})}async insertOrMerge(i,s){return await i.transaction(async a=>{let l=this.toApi();const{req:c,isNew:u}=await i.findOrInsertProvenTxReq(l,a);if(u)return new n(c);{const d=new n(c);return d.mergeNotifyTransactionIds(l),d.mergeHistory(l,void 0,!0),await d.updateStorage(i,a),d}},s)}get status(){return this.api.status}set status(i){i!==this.api.status&&(this.addHistoryNote({what:"status",status_was:this.api.status,status_now:i}),this.api.status=i)}get provenTxReqId(){return this.api.provenTxReqId}set provenTxReqId(i){this.api.provenTxReqId=i}get created_at(){return this.api.created_at}set created_at(i){this.api.created_at=i}get updated_at(){return this.api.updated_at}set updated_at(i){this.api.updated_at=i}get txid(){return this.api.txid}set txid(i){this.api.txid=i}get inputBEEF(){return this.api.inputBEEF}set inputBEEF(i){this.api.inputBEEF=i}get rawTx(){return this.api.rawTx}set rawTx(i){this.api.rawTx=i}get attempts(){return this.api.attempts}set attempts(i){this.api.attempts=i}get provenTxId(){return this.api.provenTxId}set provenTxId(i){this.api.provenTxId=i}get notified(){return this.api.notified}set notified(i){this.api.notified=i}get batch(){return this.api.batch}set batch(i){this.api.batch=i}get id(){return this.api.provenTxReqId}set id(i){this.api.provenTxReqId=i}get entityName(){return"provenTxReq"}get entityTable(){return"proven_tx_reqs"}equals(i,s){const o=this.toApi();if(o.txid!=i.txid||!(0,t.arraysEqual)(o.rawTx,i.rawTx)||!o.inputBEEF&&i.inputBEEF||o.inputBEEF&&!i.inputBEEF||o.inputBEEF&&i.inputBEEF&&!(0,t.arraysEqual)(o.inputBEEF,i.inputBEEF)||o.batch!=i.batch)return!1;if(s){if(o.provenTxReqId!==s.provenTxReq.idMap[(0,t.verifyId)(i.provenTxReqId)]||!o.provenTxId&&i.provenTxId||o.provenTxId&&!i.provenTxId||i.provenTxId&&o.provenTxId!==s.provenTx.idMap[i.provenTxId])return!1}else if(o.attempts!=i.attempts||o.history!=i.history||o.notify!=i.notify||o.provenTxReqId!==i.provenTxReqId||o.provenTxId!==i.provenTxId)return!1;return!0}static async mergeFind(i,s,o,a,l){const c=(0,t.verifyOneOrNone)(await i.findProvenTxReqs({partial:{txid:o.txid},trx:l}));return{found:!!c,eo:new n(c||{...o}),eiId:(0,t.verifyId)(o.provenTxReqId)}}mapNotifyTransactionIds(i){const s=this.notify.transactionIds||[];this.notify.transactionIds=[];for(const o of s){const a=i.transaction.idMap[o];a&&this.addNotifyTransactionId(a)}}mergeNotifyTransactionIds(i,s){var o;const a=new n(i);if(a.notify.transactionIds){(o=this.notify).transactionIds||(o.transactionIds=[]);for(const l of a.notify.transactionIds){const c=s?s.transaction.idMap[l]:l;c&&this.addNotifyTransactionId(c)}}}mergeHistory(i,s,o){const a=new n(i);if(a.history.notes)for(const l of a.history.notes)this.addHistoryNote(l)}static isTerminalStatus(i){return t.sdk.ProvenTxReqTerminalStatus.some(s=>s===i)}async mergeNew(i,s,o,a){this.provenTxId&&(this.provenTxId=o.provenTx.idMap[this.provenTxId]),this.mapNotifyTransactionIds(o),this.provenTxReqId=0,this.provenTxReqId=await i.insertProvenTxReq(this.toApi(),a)}async mergeExisting(i,s,o,a,l){if(!this.batch&&o.batch)this.batch=o.batch;else if(this.batch&&o.batch&&this.batch!==o.batch)throw new t.sdk.WERR_INTERNAL("ProvenTxReq merge batch not equal.");return this.mergeHistory(o,a,!0),this.mergeNotifyTransactionIds(o,a),this.updated_at=new Date,await i.updateProvenTxReq(this.id,this.toApi(),l),!1}}return Ro.EntityProvenTxReq=n,Ro}var _o={},Aw;function CC(){if(Aw)return _o;Aw=1,Object.defineProperty(_o,"__esModule",{value:!0}),_o.MergeEntity=void 0;const t=ve();let e=class{constructor(r,i,s){this.stateArray=r,this.find=i,this.esm=s,this.idMap=s.idMap}updateSyncMap(r,i,s){const o=(0,t.verifyId)(i),a=(0,t.verifyId)(s);if(r[o]===void 0)r[o]=a;else if(r[o]!==a)throw new t.sdk.WERR_INTERNAL(`updateSyncMap map[${i}] can't override ${r[o]} with ${a}`)}async merge(r,i,s,o,a){let l=0,c=0;if(!this.stateArray)return{inserts:l,updates:c};for(const u of this.stateArray){this.esm.maxUpdated_at=(0,t.maxDate)(this.esm.maxUpdated_at,u.updated_at);const{found:d,eo:f,eiId:h}=await this.find(i,s,u,o,a);d?await f.mergeExisting(i,r,u,o,a)&&c++:(await f.mergeNew(i,s,o,a),l++),h>-1&&this.updateSyncMap(this.idMap,h,f.id)}return{inserts:l,updates:c}}};return _o.MergeEntity=e,_o}var Po={},Nw;function MC(){if(Nw)return Po;Nw=1,Object.defineProperty(Po,"__esModule",{value:!0}),Po.EntityOutputBasket=void 0;const t=ve(),e=Dt();class n extends e.EntityBase{constructor(i){const s=new Date;super(i||{basketId:0,created_at:s,updated_at:s,userId:0,name:"",numberOfDesiredUTXOs:0,minimumDesiredUTXOValue:0,isDeleted:!1})}get basketId(){return this.api.basketId}set basketId(i){this.api.basketId=i}get created_at(){return this.api.created_at}set created_at(i){this.api.created_at=i}get updated_at(){return this.api.updated_at}set updated_at(i){this.api.updated_at=i}get userId(){return this.api.userId}set userId(i){this.api.userId=i}get name(){return this.api.name}set name(i){this.api.name=i}get numberOfDesiredUTXOs(){return this.api.numberOfDesiredUTXOs}set numberOfDesiredUTXOs(i){this.api.numberOfDesiredUTXOs=i}get minimumDesiredUTXOValue(){return this.api.minimumDesiredUTXOValue}set minimumDesiredUTXOValue(i){this.api.minimumDesiredUTXOValue=i}get isDeleted(){return this.api.isDeleted}set isDeleted(i){this.api.isDeleted=i}get id(){return this.api.basketId}set id(i){this.api.basketId=i}get entityName(){return"outputBasket"}get entityTable(){return"output_baskets"}updateApi(){}equals(i,s){const o=this.api;if(o.name!=i.name||o.numberOfDesiredUTXOs!=i.numberOfDesiredUTXOs||o.minimumDesiredUTXOValue!=i.minimumDesiredUTXOValue)return!1;if(s){if(o.basketId!==s.outputBasket.idMap[(0,t.verifyId)(i.basketId)])return!1}else if(o.basketId!==i.basketId||o.userId!==i.userId)return!1;return!0}static async mergeFind(i,s,o,a,l){const c=(0,t.verifyOneOrNone)(await i.findOutputBaskets({partial:{name:o.name,userId:s},trx:l}));return{found:!!c,eo:new n(c||{...o}),eiId:(0,t.verifyId)(o.basketId)}}async mergeNew(i,s,o,a){this.userId=s,this.name||(this.name="default"),this.basketId=0,this.basketId=await i.insertOutputBasket(this.toApi(),a)}async mergeExisting(i,s,o,a,l){let c=!1;return o.updated_at>this.updated_at&&(this.minimumDesiredUTXOValue=o.minimumDesiredUTXOValue,this.numberOfDesiredUTXOs=o.numberOfDesiredUTXOs,this.isDeleted=o.isDeleted,this.updated_at=new Date,await i.updateOutputBasket(this.id,this.toApi(),l),c=!0),c}}return Po.EntityOutputBasket=n,Po}var Oo={},Cw;function BC(){if(Cw)return Oo;Cw=1,Object.defineProperty(Oo,"__esModule",{value:!0}),Oo.EntityUser=void 0;const t=ve(),e=Dt();class n extends e.EntityBase{constructor(i){const s=new Date;super(i||{userId:0,created_at:s,updated_at:s,identityKey:"",activeStorage:""})}updateApi(){}get userId(){return this.api.userId}set userId(i){this.api.userId=i}get created_at(){return this.api.created_at}set created_at(i){this.api.created_at=i}get updated_at(){return this.api.updated_at}set updated_at(i){this.api.updated_at=i}get identityKey(){return this.api.identityKey}set identityKey(i){this.api.identityKey=i}get activeStorage(){return this.api.activeStorage}set activeStorage(i){this.api.activeStorage=i}get id(){return this.api.userId}set id(i){this.api.userId=i}get entityName(){return"user"}get entityTable(){return"users"}equals(i,s){const o=this.toApi();return!(o.identityKey!=i.identityKey||o.activeStorage!=i.activeStorage)}static async mergeFind(i,s,o,a){const l=(0,t.verifyOneOrNone)(await i.findUsers({partial:{identityKey:o.identityKey},trx:a}));if(l&&l.userId!=s)throw new t.sdk.WERR_INTERNAL("logic error, userIds don not match.");return{found:!!l,eo:new n(l||{...o}),eiId:(0,t.verifyId)(o.userId)}}async mergeNew(i,s,o,a){throw new t.sdk.WERR_INTERNAL("a sync chunk merge must never create a new user")}async mergeExisting(i,s,o,a,l){let c=!1;return(o.updated_at>this.updated_at||this.activeStorage===void 0&&o.activeStorage!==void 0)&&(this.activeStorage=o.activeStorage,this.updated_at=new Date,await i.updateUser(this.id,this.toApi(),l),c=!0),c}}return Oo.EntityUser=n,Oo}var Ao={},Mw;function LC(){if(Mw)return Ao;Mw=1,Object.defineProperty(Ao,"__esModule",{value:!0}),Ao.EntityTxLabelMap=void 0;const t=ve(),e=Dt();class n extends e.EntityBase{constructor(i){const s=new Date;super(i||{created_at:s,updated_at:s,transactionId:0,txLabelId:0,isDeleted:!1})}updateApi(){}get txLabelId(){return this.api.txLabelId}set txLabelId(i){this.api.txLabelId=i}get transactionId(){return this.api.transactionId}set transactionId(i){this.api.transactionId=i}get created_at(){return this.api.created_at}set created_at(i){this.api.created_at=i}get updated_at(){return this.api.updated_at}set updated_at(i){this.api.updated_at=i}get isDeleted(){return this.api.isDeleted}set isDeleted(i){this.api.isDeleted=i}get id(){throw new t.sdk.WERR_INVALID_OPERATION('entity has no "id" value')}get entityName(){return"txLabelMap"}get entityTable(){return"tx_labels_map"}equals(i,s){const o=this.toApi();return!(o.transactionId!==(s?s.transaction.idMap[(0,t.verifyId)(i.transactionId)]:i.transactionId)||o.txLabelId!==(s?s.txLabel.idMap[(0,t.verifyId)(i.txLabelId)]:i.txLabelId)||o.isDeleted!==i.isDeleted)}static async mergeFind(i,s,o,a,l){const c=a.transaction.idMap[o.transactionId],u=a.txLabel.idMap[o.txLabelId],d=(0,t.verifyOneOrNone)(await i.findTxLabelMaps({partial:{transactionId:c,txLabelId:u},trx:l}));return{found:!!d,eo:new n(d||{...o}),eiId:-1}}async mergeNew(i,s,o,a){this.transactionId=o.transaction.idMap[this.transactionId],this.txLabelId=o.txLabel.idMap[this.txLabelId],await i.insertTxLabelMap(this.toApi(),a)}async mergeExisting(i,s,o,a,l){let c=!1;return o.updated_at>this.updated_at&&(this.isDeleted=o.isDeleted,this.updated_at=new Date,await i.updateTxLabelMap(this.transactionId,this.txLabelId,this.toApi(),l),c=!0),c}}return Ao.EntityTxLabelMap=n,Ao}var No={},Bw;function DC(){if(Bw)return No;Bw=1,Object.defineProperty(No,"__esModule",{value:!0}),No.EntityTxLabel=void 0;const t=ve(),e=Dt();class n extends e.EntityBase{constructor(i){const s=new Date;super(i||{txLabelId:0,created_at:s,updated_at:s,label:"",userId:0,isDeleted:!1})}updateApi(){}get txLabelId(){return this.api.txLabelId}set txLabelId(i){this.api.txLabelId=i}get created_at(){return this.api.created_at}set created_at(i){this.api.created_at=i}get updated_at(){return this.api.updated_at}set updated_at(i){this.api.updated_at=i}get label(){return this.api.label}set label(i){this.api.label=i}get userId(){return this.api.userId}set userId(i){this.api.userId=i}get isDeleted(){return this.api.isDeleted}set isDeleted(i){this.api.isDeleted=i}get id(){return this.api.txLabelId}set id(i){this.api.txLabelId=i}get entityName(){return"txLabel"}get entityTable(){return"tx_labels"}equals(i,s){const o=this.toApi();return!(o.label!=i.label||o.isDeleted!=i.isDeleted||!s&&o.userId!==i.userId)}static async mergeFind(i,s,o,a,l){const c=(0,t.verifyOneOrNone)(await i.findTxLabels({partial:{label:o.label,userId:s},trx:l}));return{found:!!c,eo:new n(c||{...o}),eiId:(0,t.verifyId)(o.txLabelId)}}async mergeNew(i,s,o,a){this.userId=s,this.txLabelId=0,this.txLabelId=await i.insertTxLabel(this.toApi(),a)}async mergeExisting(i,s,o,a,l){let c=!1;return o.updated_at>this.updated_at&&(this.isDeleted=o.isDeleted,this.updated_at=new Date,await i.updateTxLabel(this.id,this.toApi(),l),c=!0),c}}return No.EntityTxLabel=n,No}var Co={},Lw;function FC(){if(Lw)return Co;Lw=1,Object.defineProperty(Co,"__esModule",{value:!0}),Co.EntityOutputTag=void 0;const t=ve(),e=Dt();class n extends e.EntityBase{constructor(i){const s=new Date;super(i||{outputTagId:0,created_at:s,updated_at:s,tag:"",userId:0,isDeleted:!1})}updateApi(){}get outputTagId(){return this.api.outputTagId}set outputTagId(i){this.api.outputTagId=i}get created_at(){return this.api.created_at}set created_at(i){this.api.created_at=i}get updated_at(){return this.api.updated_at}set updated_at(i){this.api.updated_at=i}get tag(){return this.api.tag}set tag(i){this.api.tag=i}get userId(){return this.api.userId}set userId(i){this.api.userId=i}get isDeleted(){return this.api.isDeleted}set isDeleted(i){this.api.isDeleted=i}get id(){return this.api.outputTagId}set id(i){this.api.outputTagId=i}get entityName(){return"outputTag"}get entityTable(){return"output_tags"}equals(i,s){const o=this.toApi();return!(o.tag!=i.tag||o.isDeleted!=i.isDeleted||!s&&o.userId!==i.userId)}static async mergeFind(i,s,o,a,l){const c=(0,t.verifyOneOrNone)(await i.findOutputTags({partial:{tag:o.tag,userId:s},trx:l}));return{found:!!c,eo:new n(c||{...o}),eiId:(0,t.verifyId)(o.outputTagId)}}async mergeNew(i,s,o,a){this.userId=s,this.outputTagId=0,this.outputTagId=await i.insertOutputTag(this.toApi(),a)}async mergeExisting(i,s,o,a,l){let c=!1;return o.updated_at>this.updated_at&&(this.isDeleted=o.isDeleted,this.updated_at=new Date,await i.updateOutputTag(this.id,this.toApi(),l),c=!0),c}}return Co.EntityOutputTag=n,Co}var Mo={},Dw;function $C(){if(Dw)return Mo;Dw=1,Object.defineProperty(Mo,"__esModule",{value:!0}),Mo.EntityOutputTagMap=void 0;const t=ve(),e=Dt();class n extends e.EntityBase{constructor(i){const s=new Date;super(i||{created_at:s,updated_at:s,outputId:0,outputTagId:0,isDeleted:!1})}updateApi(){}get outputTagId(){return this.api.outputTagId}set outputTagId(i){this.api.outputTagId=i}get outputId(){return this.api.outputId}set outputId(i){this.api.outputId=i}get created_at(){return this.api.created_at}set created_at(i){this.api.created_at=i}get updated_at(){return this.api.updated_at}set updated_at(i){this.api.updated_at=i}get isDeleted(){return this.api.isDeleted}set isDeleted(i){this.api.isDeleted=i}get id(){throw new t.sdk.WERR_INVALID_OPERATION('entity has no "id" value')}get entityName(){return"outputTagMap"}get entityTable(){return"output_tags_map"}equals(i,s){const o=this.toApi();return!(o.outputId!==(s?s.output.idMap[(0,t.verifyId)(i.outputId)]:i.outputId)||o.outputTagId!==(s?s.outputTag.idMap[(0,t.verifyId)(i.outputTagId)]:i.outputTagId)||o.isDeleted!==i.isDeleted)}static async mergeFind(i,s,o,a,l){const c=a.output.idMap[o.outputId],u=a.outputTag.idMap[o.outputTagId],d=(0,t.verifyOneOrNone)(await i.findOutputTagMaps({partial:{outputId:c,outputTagId:u},trx:l}));return{found:!!d,eo:new n(d||{...o}),eiId:-1}}async mergeNew(i,s,o,a){this.outputId=o.output.idMap[this.outputId],this.outputTagId=o.outputTag.idMap[this.outputTagId],await i.insertOutputTagMap(this.toApi(),a)}async mergeExisting(i,s,o,a,l){let c=!1;return o.updated_at>this.updated_at&&(this.isDeleted=o.isDeleted,this.updated_at=new Date,await i.updateOutputTagMap(this.outputId,this.outputTagId,this.toApi(),l),c=!0),c}}return Mo.EntityOutputTagMap=n,Mo}var Bo={},Fw;function WC(){if(Fw)return Bo;Fw=1,Object.defineProperty(Bo,"__esModule",{value:!0}),Bo.EntityCommission=void 0;const t=ve(),e=Dt();class n extends e.EntityBase{constructor(i){const s=new Date;super(i||{commissionId:0,created_at:s,updated_at:s,transactionId:0,userId:0,isRedeemed:!1,keyOffset:"",lockingScript:[],satoshis:0})}updateApi(){}get commissionId(){return this.api.commissionId}set commissionId(i){this.api.commissionId=i}get created_at(){return this.api.created_at}set created_at(i){this.api.created_at=i}get updated_at(){return this.api.updated_at}set updated_at(i){this.api.updated_at=i}get transactionId(){return this.api.transactionId}set transactionId(i){this.api.transactionId=i}get userId(){return this.api.userId}set userId(i){this.api.userId=i}get isRedeemed(){return this.api.isRedeemed}set isRedeemed(i){this.api.isRedeemed=i}get keyOffset(){return this.api.keyOffset}set keyOffset(i){this.api.keyOffset=i}get lockingScript(){return this.api.lockingScript}set lockingScript(i){this.api.lockingScript=i}get satoshis(){return this.api.satoshis}set satoshis(i){this.api.satoshis=i}get id(){return this.api.commissionId}set id(i){this.api.commissionId=i}get entityName(){return"commission"}get entityTable(){return"commissions"}equals(i,s){return!(this.isRedeemed!==i.isRedeemed||this.transactionId!==(s?s.transaction.idMap[i.transactionId]:i.transactionId)||this.keyOffset!==i.keyOffset||!(0,t.arraysEqual)(this.lockingScript,i.lockingScript)||this.satoshis!==i.satoshis)}static async mergeFind(i,s,o,a,l){const c=a.transaction.idMap[o.transactionId],u=(0,t.verifyOneOrNone)(await i.findCommissions({partial:{transactionId:c,userId:s},trx:l}));return{found:!!u,eo:new n(u||{...o}),eiId:(0,t.verifyId)(o.commissionId)}}async mergeNew(i,s,o,a){this.transactionId&&(this.transactionId=o.transaction.idMap[this.transactionId]),this.userId=s,this.commissionId=0,this.commissionId=await i.insertCommission(this.toApi(),a)}async mergeExisting(i,s,o,a,l){let c=!1;return o.updated_at>this.updated_at&&(this.isRedeemed=o.isRedeemed,this.updated_at=new Date,await i.updateCommission(this.id,this.toApi(),l),c=!0),c}}return Bo.EntityCommission=n,Bo}var Lo={},$w;function VC(){if($w)return Lo;$w=1,Object.defineProperty(Lo,"__esModule",{value:!0}),Lo.EntityCertificate=void 0;const t=ve(),e=Dt();class n extends e.EntityBase{constructor(i){const s=new Date;super(i||{certificateId:0,created_at:s,updated_at:s,userId:0,type:"",subject:"",verifier:void 0,serialNumber:"",certifier:"",revocationOutpoint:"",signature:"",isDeleted:!1})}updateApi(){}get certificateId(){return this.api.certificateId}set certificateId(i){this.api.certificateId=i}get created_at(){return this.api.created_at}set created_at(i){this.api.created_at=i}get updated_at(){return this.api.updated_at}set updated_at(i){this.api.updated_at=i}get userId(){return this.api.userId}set userId(i){this.api.userId=i}get type(){return this.api.type}set type(i){this.api.type=i}get subject(){return this.api.subject}set subject(i){this.api.subject=i}get verifier(){return this.api.verifier}set verifier(i){this.api.verifier=i}get serialNumber(){return this.api.serialNumber}set serialNumber(i){this.api.serialNumber=i}get certifier(){return this.api.certifier}set certifier(i){this.api.certifier=i}get revocationOutpoint(){return this.api.revocationOutpoint}set revocationOutpoint(i){this.api.revocationOutpoint=i}get signature(){return this.api.signature}set signature(i){this.api.signature=i}get isDeleted(){return this.api.isDeleted}set isDeleted(i){this.api.isDeleted=i}get id(){return this.api.certificateId}set id(i){this.api.certificateId=i}get entityName(){return"certificate"}get entityTable(){return"certificates"}equals(i,s){return!(this.type!==i.type||this.subject!==i.subject||this.serialNumber!==i.serialNumber||this.revocationOutpoint!==i.revocationOutpoint||this.signature!==i.signature||this.verifier!==i.verifier||this.isDeleted!==i.isDeleted)}static async mergeFind(i,s,o,a,l){const c=(0,t.verifyOneOrNone)(await i.findCertificates({partial:{serialNumber:o.serialNumber,certifier:o.certifier,userId:s},trx:l}));return{found:!!c,eo:new n(c||{...o}),eiId:(0,t.verifyId)(o.certificateId)}}async mergeNew(i,s,o,a){this.userId=s,this.certificateId=0,this.certificateId=await i.insertCertificate(this.toApi(),a)}async mergeExisting(i,s,o,a,l){let c=!1;return o.updated_at>this.updated_at&&(this.type=o.type,this.subject=o.subject,this.serialNumber=o.serialNumber,this.revocationOutpoint=o.revocationOutpoint,this.signature=o.signature,this.verifier=o.verifier,this.isDeleted=o.isDeleted,this.updated_at=new Date,await i.updateCertificate(this.id,this.toApi(),l),c=!0),c}}return Lo.EntityCertificate=n,Lo}var Do={},Ww;function UC(){if(Ww)return Do;Ww=1,Object.defineProperty(Do,"__esModule",{value:!0}),Do.EntityCertificateField=void 0;const t=ve(),e=Dt();class n extends e.EntityBase{constructor(i){const s=new Date;super(i||{created_at:s,updated_at:s,userId:0,certificateId:0,fieldName:"",fieldValue:"",masterKey:""})}updateApi(){}get userId(){return this.api.userId}set userId(i){this.api.userId=i}get certificateId(){return this.api.certificateId}set certificateId(i){this.api.certificateId=i}get created_at(){return this.api.created_at}set created_at(i){this.api.created_at=i}get updated_at(){return this.api.updated_at}set updated_at(i){this.api.updated_at=i}get fieldName(){return this.api.fieldName}set fieldName(i){this.api.fieldName=i}get fieldValue(){return this.api.fieldValue}set fieldValue(i){this.api.fieldValue=i}get masterKey(){return this.api.masterKey}set masterKey(i){this.api.masterKey=i}get id(){throw new t.sdk.WERR_INVALID_OPERATION('entity has no "id" value')}get entityName(){return"certificateField"}get entityTable(){return"certificate_fields"}equals(i,s){return!(this.certificateId!==(s?s.certificate.idMap[i.certificateId]:i.certificateId)||this.fieldName!==i.fieldName||this.fieldValue!==i.fieldValue||this.masterKey!==i.masterKey)}static async mergeFind(i,s,o,a,l){const c=a.certificate.idMap[o.certificateId],u=(0,t.verifyOneOrNone)(await i.findCertificateFields({partial:{certificateId:c,userId:s,fieldName:o.fieldName},trx:l}));return{found:!!u,eo:new n(u||{...o}),eiId:-1}}async mergeNew(i,s,o,a){this.certificateId=o.certificate.idMap[this.certificateId],this.userId=s,await i.insertCertificateField(this.toApi(),a)}async mergeExisting(i,s,o,a,l){let c=!1;return o.updated_at>this.updated_at&&(this.fieldValue=o.fieldValue,this.masterKey=o.masterKey,this.updated_at=new Date,await i.updateCertificateField(this.certificateId,this.fieldName,this.toApi(),l),c=!0),c}}return Do.EntityCertificateField=n,Do}var Fo={},Vw;function HC(){if(Vw)return Fo;Vw=1,Object.defineProperty(Fo,"__esModule",{value:!0}),Fo.EntityTransaction=void 0;const t=Xe,e=ve(),n=Dt();class r extends n.EntityBase{getBsvTx(){if(this.rawTx)return t.Transaction.fromBinary(this.rawTx)}getBsvTxIns(){const s=this.getBsvTx();return s?s.inputs:[]}async getInputs(s,o){const a=await s.findOutputs({partial:{userId:this.userId,spentBy:this.id},trx:o});for(const l of this.getBsvTxIns()){const c=(0,e.verifyOneOrNone)(await s.findOutputs({partial:{userId:this.userId,txid:l.sourceTXID,vout:l.sourceOutputIndex},trx:o}));c&&!a.some(u=>u.outputId===c.outputId)&&a.push(c)}return a}constructor(s){const o=new Date;super(s||{transactionId:0,created_at:o,updated_at:o,userId:0,txid:"",status:"unprocessed",reference:"",satoshis:0,description:"",isOutgoing:!1,rawTx:void 0,inputBEEF:void 0})}updateApi(){}get transactionId(){return this.api.transactionId}set transactionId(s){this.api.transactionId=s}get created_at(){return this.api.created_at}set created_at(s){this.api.created_at=s}get updated_at(){return this.api.updated_at}set updated_at(s){this.api.updated_at=s}get version(){return this.api.version}set version(s){this.api.version=s}get lockTime(){return this.api.lockTime}set lockTime(s){this.api.lockTime=s}get isOutgoing(){return this.api.isOutgoing}set isOutgoing(s){this.api.isOutgoing=s}get status(){return this.api.status}set status(s){this.api.status=s}get userId(){return this.api.userId}set userId(s){this.api.userId=s}get provenTxId(){return this.api.provenTxId}set provenTxId(s){this.api.provenTxId=s}get satoshis(){return this.api.satoshis}set satoshis(s){this.api.satoshis=s}get txid(){return this.api.txid}set txid(s){this.api.txid=s}get reference(){return this.api.reference}set reference(s){this.api.reference=s}get inputBEEF(){return this.api.inputBEEF}set inputBEEF(s){this.api.inputBEEF=s}get description(){return this.api.description}set description(s){this.api.description=s}get rawTx(){return this.api.rawTx}set rawTx(s){this.api.rawTx=s}get id(){return this.api.transactionId}set id(s){this.api.transactionId=s}get entityName(){return"transaction"}get entityTable(){return"transactions"}equals(s,o){const a=this.toApi();return!(a.transactionId!==(o?o.transaction.idMap[(0,e.verifyId)(s.transactionId)]:s.transactionId)||a.reference!==s.reference||a.version!==s.version||a.lockTime!==s.lockTime||a.isOutgoing!==s.isOutgoing||a.status!==s.status||a.satoshis!==s.satoshis||a.txid!==s.txid||a.description!==s.description||!(0,e.optionalArraysEqual)(a.rawTx,s.rawTx)||!(0,e.optionalArraysEqual)(a.inputBEEF,s.inputBEEF)||!a.provenTxId!=!s.provenTxId||s.provenTxId&&a.provenTxId!==(o?o.provenTx.idMap[(0,e.verifyId)(s.provenTxId)]:s.provenTxId))}static async mergeFind(s,o,a,l,c){const u=(0,e.verifyOneOrNone)(await s.findTransactions({partial:{reference:a.reference,userId:o},trx:c}));return{found:!!u,eo:new r(u||{...a}),eiId:(0,e.verifyId)(a.transactionId)}}async mergeNew(s,o,a,l){this.provenTxId&&(this.provenTxId=a.provenTx.idMap[this.provenTxId]),this.userId=o,this.transactionId=0,this.transactionId=await s.insertTransaction(this.toApi(),l)}async mergeExisting(s,o,a,l,c){let u=!1;return a.updated_at>this.updated_at&&(this.version=a.version,this.lockTime=a.lockTime,this.isOutgoing=a.isOutgoing,this.status=a.status,this.provenTxId=a.provenTxId?l.provenTx.idMap[a.provenTxId]:void 0,this.satoshis=a.satoshis,this.txid=a.txid,this.description=a.description,this.rawTx=a.rawTx,this.inputBEEF=a.inputBEEF,this.updated_at=new Date,await s.updateTransaction(this.id,this.toApi(),c),u=!0),u}async getProvenTx(s,o){if(!this.provenTxId)return;const a=(0,e.verifyOneOrNone)(await s.findProvenTxs({partial:{provenTxId:this.provenTxId},trx:o}));if(a)return new n.EntityProvenTx(a)}}return Fo.EntityTransaction=r,Fo}var $o={},Uw;function qC(){if(Uw)return $o;Uw=1,Object.defineProperty($o,"__esModule",{value:!0}),$o.EntityOutput=void 0;const t=ve(),e=Dt();class n extends e.EntityBase{constructor(i){const s=new Date;super(i||{outputId:0,created_at:s,updated_at:s,userId:0,transactionId:0,spendable:!1,change:!1,satoshis:0,outputDescription:"",vout:0,type:"",providedBy:"you",purpose:"",txid:void 0,basketId:void 0,spentBy:void 0,derivationPrefix:void 0,derivationSuffix:void 0,senderIdentityKey:void 0,customInstructions:void 0,spendingDescription:void 0,scriptLength:void 0,scriptOffset:void 0,lockingScript:void 0})}updateApi(){}get outputId(){return this.api.outputId}set outputId(i){this.api.outputId=i}get created_at(){return this.api.created_at}set created_at(i){this.api.created_at=i}get updated_at(){return this.api.updated_at}set updated_at(i){this.api.updated_at=i}get userId(){return this.api.userId}set userId(i){this.api.userId=i}get transactionId(){return this.api.transactionId}set transactionId(i){this.api.transactionId=i}get basketId(){return this.api.basketId}set basketId(i){this.api.basketId=i}get spentBy(){return this.api.spentBy}set spentBy(i){this.api.spentBy=i}get vout(){return this.api.vout}set vout(i){this.api.vout=i}get satoshis(){return this.api.satoshis}set satoshis(i){this.api.satoshis=i}get outputDescription(){return this.api.outputDescription}set outputDescription(i){this.api.outputDescription=i}get spendable(){return this.api.spendable}set spendable(i){this.api.spendable=i}get change(){return this.api.change}set change(i){this.api.change=i}get txid(){return this.api.txid}set txid(i){this.api.txid=i}get type(){return this.api.type}set type(i){this.api.type=i}get providedBy(){return this.api.providedBy}set providedBy(i){this.api.providedBy=i}get purpose(){return this.api.purpose}set purpose(i){this.api.purpose=i}get spendingDescription(){return this.api.spendingDescription}set spendingDescription(i){this.api.spendingDescription=i}get derivationPrefix(){return this.api.derivationPrefix}set derivationPrefix(i){this.api.derivationPrefix=i}get derivationSuffix(){return this.api.derivationSuffix}set derivationSuffix(i){this.api.derivationSuffix=i}get senderIdentityKey(){return this.api.senderIdentityKey}set senderIdentityKey(i){this.api.senderIdentityKey=i}get customInstructions(){return this.api.customInstructions}set customInstructions(i){this.api.customInstructions=i}get lockingScript(){return this.api.lockingScript}set lockingScript(i){this.api.lockingScript=i}get scriptLength(){return this.api.scriptLength}set scriptLength(i){this.api.scriptLength=i}get scriptOffset(){return this.api.scriptOffset}set scriptOffset(i){this.api.scriptOffset=i}get id(){return this.api.outputId}set id(i){this.api.outputId=i}get entityName(){return"output"}get entityTable(){return"outputs"}equals(i,s){return!(this.transactionId!==(s?s.transaction.idMap[i.transactionId]:i.transactionId)||this.basketId!==(s&&i.basketId?s.outputBasket.idMap[i.basketId]:i.basketId)||this.spentBy!==(s&&i.spentBy?s.transaction.idMap[i.spentBy]:i.spentBy)||this.vout!==i.vout||this.satoshis!==i.satoshis||this.spendable!==i.spendable||this.change!==i.change||this.txid!==i.txid||this.type!==i.type||this.providedBy!==i.providedBy||this.purpose!==i.purpose||this.outputDescription!==i.outputDescription||this.spendingDescription!==i.spendingDescription||this.derivationPrefix!==i.derivationPrefix||this.derivationSuffix!==i.derivationSuffix||this.senderIdentityKey!==i.senderIdentityKey||this.customInstructions!==i.customInstructions||!(0,t.optionalArraysEqual)(this.lockingScript,i.lockingScript)||this.scriptLength!==i.scriptLength||this.scriptOffset!==i.scriptOffset)}static async mergeFind(i,s,o,a,l){const c=a.transaction.idMap[o.transactionId];o.basketId&&a.outputBasket.idMap[o.basketId];const u=(0,t.verifyOneOrNone)(await i.findOutputs({partial:{userId:s,transactionId:c,vout:o.vout},trx:l}));return{found:!!u,eo:new n(u||{...o}),eiId:(0,t.verifyId)(o.outputId)}}async mergeNew(i,s,o,a){this.userId=s,this.basketId=this.basketId?o.outputBasket.idMap[this.basketId]:void 0,this.transactionId=o.transaction.idMap[this.transactionId],this.spentBy=this.spentBy?o.transaction.idMap[this.spentBy]:void 0,this.outputId=0,this.outputId=await i.insertOutput(this.toApi(),a)}async mergeExisting(i,s,o,a,l){let c=!1;return o.updated_at>this.updated_at&&(this.spentBy=o.spentBy?a.transaction.idMap[o.spentBy]:void 0,this.spendable=o.spendable,this.change=o.change,this.type=o.type,this.providedBy=o.providedBy,this.purpose=o.purpose,this.outputDescription=o.outputDescription,this.spendingDescription=o.spendingDescription,this.senderIdentityKey=o.senderIdentityKey,this.customInstructions=o.customInstructions,this.scriptLength=o.scriptLength,this.scriptOffset=o.scriptOffset,this.lockingScript=o.lockingScript,this.updated_at=new Date,await i.updateOutput(this.id,this.toApi(),l),c=!0),c}}return $o.EntityOutput=n,$o}var Hw;function Dt(){return Hw||(Hw=1,function(t){var e=Ee&&Ee.__createBinding||(Object.create?function(r,i,s,o){o===void 0&&(o=s);var a=Object.getOwnPropertyDescriptor(i,s);(!a||("get"in a?!i.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(r,o,a)}:function(r,i,s,o){o===void 0&&(o=s),r[o]=i[s]}),n=Ee&&Ee.__exportStar||function(r,i){for(var s in r)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,r,s)};Object.defineProperty(t,"__esModule",{value:!0}),n(pc,t),n(OC(),t),n(AC(),t),n(NC(),t),n(CC(),t),n(MC(),t),n(BC(),t),n(LC(),t),n(DC(),t),n(FC(),t),n($C(),t),n(WC(),t),n(VC(),t),n(UC(),t),n(HC(),t),n(qC(),t)}(bh)),bh}var Wo={},Jc={},qw;function jC(){if(qw)return Jc;qw=1,Object.defineProperty(Jc,"__esModule",{value:!0}),Jc.getSyncChunk=e;const t=ve();async function e(i,s){const o={fromStorageIdentityKey:s.fromStorageIdentityKey,toStorageIdentityKey:s.toStorageIdentityKey,userIdentityKey:s.identityKey};let a=s.maxItems,l=s.maxRoughSize,c=0,u=!1;const d=(0,t.verifyTruthy)(await i.findUserByIdentityKey(s.identityKey));(!s.since||d.updated_at>new Date(s.since))&&(o.user=d);const f=[{name:"provenTx",maxDivider:100,preAdd:()=>{o.provenTxs=[]},addItem:p=>{o.provenTxs.push(p)},findItems:async(p,g)=>await p.getProvenTxsForUser(g)},{name:"outputBasket",maxDivider:1,preAdd:()=>{o.outputBaskets=[]},addItem:p=>{o.outputBaskets.push(p)},findItems:async(p,g)=>await p.findOutputBaskets({partial:{userId:g.userId},since:g.since,paged:g.paged})},{name:"outputTag",maxDivider:1,preAdd:()=>{o.outputTags=[]},addItem:p=>{o.outputTags.push(p)},findItems:async(p,g)=>await p.findOutputTags({partial:{userId:g.userId},since:g.since,paged:g.paged})},{name:"txLabel",maxDivider:1,preAdd:()=>{o.txLabels=[]},addItem:p=>{o.txLabels.push(p)},findItems:async(p,g)=>await p.findTxLabels({partial:{userId:g.userId},since:g.since,paged:g.paged})},{name:"transaction",maxDivider:25,preAdd:()=>{o.transactions=[]},addItem:p=>{o.transactions.push(p)},findItems:async(p,g)=>await p.findTransactions({partial:{userId:g.userId},since:g.since,paged:g.paged})},{name:"output",maxDivider:25,preAdd:()=>{o.outputs=[]},addItem:p=>{o.outputs.push(p)},findItems:async(p,g)=>await p.findOutputs({partial:{userId:g.userId},since:g.since,paged:g.paged})},{name:"txLabelMap",maxDivider:1,preAdd:()=>{o.txLabelMaps=[]},addItem:p=>{o.txLabelMaps.push(p)},findItems:async(p,g)=>await p.getTxLabelMapsForUser(g)},{name:"outputTagMap",maxDivider:1,preAdd:()=>{o.outputTagMaps=[]},addItem:p=>{o.outputTagMaps.push(p)},findItems:async(p,g)=>await p.getOutputTagMapsForUser(g)},{name:"certificate",maxDivider:25,preAdd:()=>{o.certificates=[]},addItem:p=>{o.certificates.push(p)},findItems:async(p,g)=>await p.findCertificates({partial:{userId:g.userId},since:g.since,paged:g.paged})},{name:"certificateField",maxDivider:25,preAdd:()=>{o.certificateFields=[]},addItem:p=>{o.certificateFields.push(p)},findItems:async(p,g)=>await p.findCertificateFields({partial:{userId:g.userId},since:g.since,paged:g.paged})},{name:"commission",maxDivider:25,preAdd:()=>{o.commissions=[]},addItem:p=>{o.commissions.push(p)},findItems:async(p,g)=>await p.findCommissions({partial:{userId:g.userId},since:g.since,paged:g.paged})},{name:"provenTxReq",maxDivider:100,preAdd:()=>{o.provenTxReqs=[]},addItem:p=>{o.provenTxReqs.push(p)},findItems:async(p,g)=>await p.getProvenTxReqsForUser(g)}],h=async p=>{if(c>=s.offsets.length){u=!0;return}let{offset:g,name:w}=s.offsets[c++];if(p.name!==w)throw new t.sdk.WERR_INVALID_PARAMETER("offsets",`in dependency order. '${p.name}' expected, found ${w}.`);let v=!1;for(;!u;){const m=Math.min(a,Math.max(10,s.maxItems/p.maxDivider));if(m<=0)break;const y=await p.findItems(i,{userId:d.userId,since:s.since,paged:{limit:m,offset:g}});if(r(y),v||(p.preAdd(),v=!0),y.length===0)break;for(const b of y)if(g++,p.addItem(b),a--,l-=JSON.stringify(b).length,a<=0||l<0){u=!0;break}}};for(;!u;)for(const p of f)await h(p);return o}function n(i){if(!(i instanceof Date))throw new t.sdk.WERR_INVALID_OPERATION("bad date")}function r(i){for(const s of i){n(s.created_at),n(s.updated_at);for(const o of Object.keys(s))if(s[o]===null)throw new t.sdk.WERR_INVALID_OPERATION}}return Jc}var jw;function KC(){if(jw)return Wo;jw=1,Object.defineProperty(Wo,"__esModule",{value:!0}),Wo.StorageReader=void 0;const t=ve(),e=jC();let n=class{get dbtype(){var i;return(i=this._settings)===null||i===void 0?void 0:i.dbtype}constructor(i){this.chain=i.chain}isAvailable(){return!!this._settings}async makeAvailable(){return this._settings=await this.readSettings()}getSettings(){if(!this._settings)throw new t.sdk.WERR_INVALID_OPERATION('must call "makeAvailable" before accessing "settings"');return this._settings}isStorageProvider(){return!1}async findUserByIdentityKey(i){return(0,t.verifyOneOrNone)(await this.findUsers({partial:{identityKey:i}}))}async getSyncChunk(i){return(0,e.getSyncChunk)(this,i)}validateEntityDate(i){if(!this.dbtype)throw new t.sdk.WERR_INTERNAL("must call verifyReadyForDatabaseAccess first");let s=this.validateDate(i);switch(this.dbtype){case"MySQL":break;case"SQLite":s=s.toISOString();break;default:throw new t.sdk.WERR_INTERNAL(`Invalid dateScheme ${this.dbtype}`)}return s}validateOptionalEntityDate(i,s){if(!this.dbtype)throw new t.sdk.WERR_INTERNAL("must call verifyReadyForDatabaseAccess first");let o=this.validateOptionalDate(i);switch(!o&&s&&(o=new Date),this.dbtype){case"MySQL":break;case"SQLite":o&&(o=o.toISOString());break;default:throw new t.sdk.WERR_INTERNAL(`Invalid dateScheme ${this.dbtype}`)}return o}validateDate(i){let s;return i instanceof Date?s=i:s=new Date(i),s}validateOptionalDate(i){if(i!=null)return this.validateDate(i)}validateDateForWhere(i){if(!this.dbtype)throw new t.sdk.WERR_INTERNAL("must call verifyReadyForDatabaseAccess first");typeof i=="number"&&(i=(0,t.validateSecondsSinceEpoch)(i));const s=(0,t.verifyTruthy)(this.validateDate(i));let o;switch(this.dbtype){case"MySQL":o=s;break;case"SQLite":o=s.toISOString();break;default:throw new t.sdk.WERR_INTERNAL(`Invalid dateScheme ${this.dbtype}`)}return o}};return Wo.StorageReader=n,Wo}var Kw;function zC(){if(Kw)return So;Kw=1,Object.defineProperty(So,"__esModule",{value:!0}),So.StorageReaderWriter=void 0;const t=ve(),e=Dt(),n=KC();let r=class extends n.StorageReader{constructor(s){super(s)}async setActive(s,o){return await this.updateUser((0,t.verifyId)(s.userId),{activeStorage:o})}async findCertificateById(s,o){return(0,t.verifyOneOrNone)(await this.findCertificates({partial:{certificateId:s},trx:o}))}async findCommissionById(s,o){return(0,t.verifyOneOrNone)(await this.findCommissions({partial:{commissionId:s},trx:o}))}async findOutputById(s,o,a){return(0,t.verifyOneOrNone)(await this.findOutputs({partial:{outputId:s},noScript:a,trx:o}))}async findOutputBasketById(s,o){return(0,t.verifyOneOrNone)(await this.findOutputBaskets({partial:{basketId:s},trx:o}))}async findProvenTxById(s,o){return(0,t.verifyOneOrNone)(await this.findProvenTxs({partial:{provenTxId:s},trx:o}))}async findProvenTxReqById(s,o){return(0,t.verifyOneOrNone)(await this.findProvenTxReqs({partial:{provenTxReqId:s},trx:o}))}async findSyncStateById(s,o){return(0,t.verifyOneOrNone)(await this.findSyncStates({partial:{syncStateId:s},trx:o}))}async findTransactionById(s,o,a){return(0,t.verifyOneOrNone)(await this.findTransactions({partial:{transactionId:s},noRawTx:a,trx:o}))}async findTxLabelById(s,o){return(0,t.verifyOneOrNone)(await this.findTxLabels({partial:{txLabelId:s},trx:o}))}async findOutputTagById(s,o){return(0,t.verifyOneOrNone)(await this.findOutputTags({partial:{outputTagId:s},trx:o}))}async findUserById(s,o){return(0,t.verifyOneOrNone)(await this.findUsers({partial:{userId:s},trx:o}))}async findOrInsertUser(s,o){let a,l=!1;for(let c=0;;c++)try{if(a=(0,t.verifyOneOrNone)(await this.findUsers({partial:{identityKey:s},trx:o})),a)break;const u=new Date;a={created_at:u,updated_at:new Date("1971-01-01"),userId:0,identityKey:s,activeStorage:this.getSettings().storageIdentityKey},a.userId=await this.insertUser(a,o),l=!0,await this.insertOutputBasket({created_at:u,updated_at:new Date("1971-01-01"),basketId:0,userId:a.userId,name:"default",numberOfDesiredUTXOs:32,minimumDesiredUTXOValue:1e3,isDeleted:!1});break}catch(u){if(console.log(`findOrInsertUser catch: ${JSON.stringify(u).slice(0,512)}`),c>0)throw u}return{user:a,isNew:l}}async findOrInsertTransaction(s,o){let a,l=!1;for(let c=0;;c++)try{if(a=(0,t.verifyOneOrNone)(await this.findTransactions({partial:{userId:s.userId,txid:s.txid},trx:o})),a)break;s.transactionId=await this.insertTransaction(s,o),l=!0,a=s;break}catch(u){if(c>0)throw u}return{tx:a,isNew:l}}async findOrInsertOutputBasket(s,o,a){const l={name:o,userId:s};for(let c=0;;c++)try{const u=new Date;let d=(0,t.verifyOneOrNone)(await this.findOutputBaskets({partial:l,trx:a}));return d||(d={...l,minimumDesiredUTXOValue:0,numberOfDesiredUTXOs:0,basketId:0,created_at:u,updated_at:u,isDeleted:!1},d.basketId=await this.insertOutputBasket(d,a)),d.isDeleted&&await this.updateOutputBasket((0,t.verifyId)(d.basketId),{isDeleted:!1}),d}catch(u){if(c>0)throw u}}async findOrInsertTxLabel(s,o,a){const l={label:o,userId:s};for(let c=0;;c++)try{const u=new Date;let d=(0,t.verifyOneOrNone)(await this.findTxLabels({partial:l,trx:a}));return d||(d={...l,txLabelId:0,created_at:u,updated_at:u,isDeleted:!1},d.txLabelId=await this.insertTxLabel(d,a)),d.isDeleted&&await this.updateTxLabel((0,t.verifyId)(d.txLabelId),{isDeleted:!1}),d}catch(u){if(c>0)throw u}}async findOrInsertTxLabelMap(s,o,a){const l={transactionId:s,txLabelId:o};for(let c=0;;c++)try{const u=new Date;let d=(0,t.verifyOneOrNone)(await this.findTxLabelMaps({partial:l,trx:a}));return d||(d={...l,created_at:u,updated_at:u,isDeleted:!1},await this.insertTxLabelMap(d,a)),d.isDeleted&&await this.updateTxLabelMap(s,o,{isDeleted:!1}),d}catch(u){if(c>0)throw u}}async findOrInsertOutputTag(s,o,a){const l={tag:o,userId:s};for(let c=0;;c++)try{const u=new Date;let d=(0,t.verifyOneOrNone)(await this.findOutputTags({partial:l,trx:a}));return d||(d={...l,outputTagId:0,created_at:u,updated_at:u,isDeleted:!1},d.outputTagId=await this.insertOutputTag(d,a)),d.isDeleted&&await this.updateOutputTag((0,t.verifyId)(d.outputTagId),{isDeleted:!1}),d}catch(u){if(c>0)throw u}}async findOrInsertOutputTagMap(s,o,a){const l={outputId:s,outputTagId:o};for(let c=0;;c++)try{const u=new Date;let d=(0,t.verifyOneOrNone)(await this.findOutputTagMaps({partial:l,trx:a}));return d||(d={...l,created_at:u,updated_at:u,isDeleted:!1},await this.insertOutputTagMap(d,a)),d.isDeleted&&await this.updateOutputTagMap(s,o,{isDeleted:!1}),d}catch(u){if(c>0)throw u}}async findOrInsertSyncStateAuth(s,o,a){const l={userId:s.userId,storageIdentityKey:o,storageName:a};for(let c=0;;c++)try{const u=new Date;let d=(0,t.verifyOneOrNone)(await this.findSyncStates({partial:l}));return d?{syncState:d,isNew:!1}:(d={...l,created_at:u,updated_at:u,syncStateId:0,status:"unknown",init:!1,refNum:(0,t.randomBytesBase64)(12),syncMap:JSON.stringify((0,e.createSyncMap)())},await this.insertSyncState(d),{syncState:d,isNew:!0})}catch(u){if(c>0)throw u}}async findOrInsertProvenTxReq(s,o){let a,l=!1;for(let c=0;;c++)try{if(a=(0,t.verifyOneOrNone)(await this.findProvenTxReqs({partial:{txid:s.txid},trx:o})),a)break;s.provenTxReqId=await this.insertProvenTxReq(s,o),l=!0,a=s;break}catch(u){if(c>0)throw u}return{req:a,isNew:l}}async findOrInsertProvenTx(s,o){let a,l=!1;for(let c=0;;c++)try{if(a=(0,t.verifyOneOrNone)(await this.findProvenTxs({partial:{txid:s.txid},trx:o})),a)break;s.provenTxId=await this.insertProvenTx(s,o),l=!0,a=s;break}catch(u){if(c>0)throw u}return{proven:a,isNew:l}}async tagOutput(s,o,a){await this.transaction(async l=>{const c=(0,t.verifyOne)(await this.findOutputs({partial:s,noScript:!0,trx:l})),u=await this.findOrInsertOutputTag(c.userId,o,l);await this.findOrInsertOutputTagMap((0,t.verifyId)(c.outputId),(0,t.verifyId)(u.outputTagId),l)},a)}};return So.StorageReaderWriter=r,So}var zw;function GC(){if(zw)return os;zw=1,Object.defineProperty(os,"__esModule",{value:!0}),os.StorageProvider=void 0,os.validateStorageFeeModel=d;const t=Xe,e=ve(),n=IC(),r=SC(),i=QI(),s=gm,o=TC(),a=RC(),l=zC(),c=Dt();let u=class JI extends l.StorageReaderWriter{static defaultOptions(){return{feeModel:{model:"sat/kb",value:1},commissionSatoshis:0,commissionPubKeyHex:void 0}}static createStorageBaseOptions(h){return{...JI.defaultOptions(),chain:h}}constructor(h){super(h),this.isDirty=!1,this.feeModel=h.feeModel,this.commissionPubKeyHex=h.commissionPubKeyHex,this.commissionSatoshis=h.commissionSatoshis}isStorageProvider(){return!0}setServices(h){this._services=h}getServices(){if(!this._services)throw new e.sdk.WERR_INVALID_OPERATION("Must setServices first.");return this._services}async abortAction(h,p){if(!h.userId)throw new e.sdk.WERR_INVALID_PARAMETER("auth.userId","valid");const g=h.userId;let w=p.reference,v;return await this.transaction(async y=>{let b=(0,e.verifyOneOrNone)(await this.findTransactions({partial:{reference:w,userId:g},noRawTx:!0,trx:y}));!b&&p.reference.length===64&&(v=w,w=void 0,b=(0,e.verifyOneOrNone)(await this.findTransactions({partial:{txid:v,userId:g},noRawTx:!0,trx:y})));const x=["completed","failed","sending","unproven"];if(!b||!b.isOutgoing||-1<x.findIndex(k=>k===b.status))throw new e.sdk.WERR_INVALID_PARAMETER("reference","an inprocess, outgoing action that has not been signed and shared to the network.");if(await this.updateTransactionStatus("failed",b.transactionId,g,w,y),b.txid){const k=await c.EntityProvenTxReq.fromStorageTxid(this,b.txid,y);k&&(k.addHistoryNote({what:"abortAction",reference:p.reference}),k.status="invalid",await k.updateStorageDynamicProperties(this,y))}return{aborted:!0}})}async internalizeAction(h,p){return await(0,a.internalizeAction)(this,h,p)}async getReqsAndBeefToShareWithWorld(h,p,g){const w={beef:new t.Beef,details:[]};for(const v of h){const m={txid:v,status:"unknown"};w.details.push(m);try{if(m.proven=(0,e.verifyOneOrNone)(await this.findProvenTxs({partial:{txid:v},trx:g})),m.proven)m.status="alreadySent";else{const y=["unmined","callback","unconfirmed","completed"],b=["sending","unsent","nosend","unprocessed"],x=["unknown","nonfinal","invalid","doubleSpend"];m.req=(0,e.verifyOneOrNone)(await this.findProvenTxReqs({partial:{txid:v},trx:g})),m.req?x.indexOf(m.req.status)>-1?(m.status="error",m.error=`ERR_INVALID_PARAMETER: ${v} is not ready to send.`):y.indexOf(m.req.status)>-1?m.status="alreadySent":b.indexOf(m.req.status)>-1?!m.req.rawTx||!m.req.inputBEEF?(m.status="error",m.error=`ERR_INTERNAL: ${v} req is missing rawTx or beef.`):m.status="readyToSend":(m.status="error",m.error=`ERR_INTERNAL: ${v} has unexpected req status ${m.req.status}`):(m.status="error",m.error=`ERR_UNKNOWN_TXID: ${v} was not found.`),m.status==="readyToSend"&&await this.mergeReqToBeefToShareExternally(m.req,w.beef,p,g)}}catch(y){const b=e.sdk.WalletError.fromUnknown(y);m.error=`${b.name}: ${b.message}`}}return w}async mergeReqToBeefToShareExternally(h,p,g,w){const{rawTx:v,inputBEEF:m}=h;if(!v||!m)throw new e.sdk.WERR_INTERNAL("req rawTx and beef must be valid.");p.mergeRawTx((0,e.asArray)(v)),p.mergeBeef((0,e.asArray)(m));const y=t.Transaction.fromBinary((0,e.asArray)(v));for(const b of y.inputs){if(!b.sourceTXID)throw new e.sdk.WERR_INTERNAL("req all transaction inputs must have valid sourceTXID");const x=b.sourceTXID;p.findTxid(x)||(g&&g.indexOf(x)>-1?p.mergeTxidOnly(x):await this.getValidBeefForKnownTxid(x,p,void 0,g,w))}}async getProvenOrReq(h,p,g){if(p&&h!==p.txid)throw new e.sdk.WERR_INVALID_PARAMETER("newReq","same txid");const w={proven:void 0,req:void 0};if(w.proven=(0,e.verifyOneOrNone)(await this.findProvenTxs({partial:{txid:h},trx:g})),w.proven)return w;for(let v=0;;v++)try{if(w.req=(0,e.verifyOneOrNone)(await this.findProvenTxReqs({partial:{txid:h},trx:g})),!w.req&&!p)break;if(!w.req&&p&&await this.insertProvenTxReq(p,g),w.req&&p){const m=new c.EntityProvenTxReq(w.req);m.mergeHistory(p,void 0,!0),m.mergeNotifyTransactionIds(p),await m.updateStorageDynamicProperties(this,g)}break}catch(m){if(v>0)throw m}return w}async updateTransactionsStatus(h,p){await this.transaction(async g=>{for(const w of h)await this.updateTransactionStatus(p,w,void 0,void 0,g)})}async updateTransactionStatus(h,p,g,w,v){if(!p&&!(g&&w))throw new e.sdk.WERR_MISSING_PARAMETER("either transactionId or userId and reference");await this.transaction(async m=>{const y={};p&&(y.transactionId=p),g&&(y.userId=g),w&&(y.reference=w);const b=(0,e.verifyOne)(await this.findTransactions({partial:y,noRawTx:!0,trx:m}));if(h!=="completed"&&b.status==="completed"||b.provenTxId)throw new e.sdk.WERR_INVALID_OPERATION('The status of a "completed" transaction cannot be changed.');if(h!=="failed"&&b.status==="failed")throw new e.sdk.WERR_INVALID_OPERATION('A "failed" transaction may not be un-failed by this method.');switch(h){case"failed":{const I=await new c.EntityTransaction(b).getInputs(this,m);for(const k of I)await this.updateOutput((0,e.verifyId)(k.outputId),{spendable:!0,spentBy:void 0},m)}break;case"nosend":case"unsigned":case"unprocessed":case"sending":case"unproven":case"completed":break;default:throw new e.sdk.WERR_INVALID_PARAMETER("status",`not be ${h}`)}await this.updateTransaction(b.transactionId,{status:h},m)},v)}async createAction(h,p){if(!h.userId)throw new e.sdk.WERR_UNAUTHORIZED;return await(0,o.createAction)(this,h,p)}async processAction(h,p){if(!h.userId)throw new e.sdk.WERR_UNAUTHORIZED;return await(0,r.processAction)(this,h,p)}async attemptToPostReqsToNetwork(h,p){return await(0,i.attemptToPostReqsToNetwork)(this,h,p)}async listCertificates(h,p){return await(0,s.listCertificates)(this,h,p)}async verifyKnownValidTransaction(h,p){const{proven:g,rawTx:w}=await this.getProvenOrRawTx(h,p);return g!=null||w!=null}async getValidBeefForKnownTxid(h,p,g,w,v){const m=await this.getValidBeefForTxid(h,p,g,w,v);if(!m)throw new e.sdk.WERR_INVALID_PARAMETER("txid",`${h} is not known to storage.`);return m}async getValidBeefForTxid(h,p,g,w,v){const m=p||new t.Beef,y=await this.getProvenOrRawTx(h,v);if(y.proven)if(g==="known")m.mergeTxidOnly(h);else{m.mergeRawTx(y.proven.rawTx);const b=new c.EntityProvenTx(y.proven).getMerklePath();return m.mergeBump(b),m}if(y.rawTx&&y.inputBEEF)if(g==="known")m.mergeTxidOnly(h);else{m.mergeRawTx(y.rawTx),m.mergeBeef(y.inputBEEF);const b=t.Transaction.fromBinary(y.rawTx);for(const x of b.inputs)m.findTxid(x.sourceTXID)||(w&&w.indexOf(x.sourceTXID)>-1?m.mergeTxidOnly(x.sourceTXID):await this.getValidBeefForKnownTxid(x.sourceTXID,m,g,w,v));return m}}async getBeefForTransaction(h,p){return await(0,n.getBeefForTransaction)(this,h,p)}async findMonitorEventById(h,p){return(0,e.verifyOneOrNone)(await this.findMonitorEvents({partial:{id:h},trx:p}))}async relinquishCertificate(h,p){const g=e.sdk.validateRelinquishCertificateArgs(p),w=(0,e.verifyOne)(await this.findCertificates({partial:{certifier:g.certifier,serialNumber:g.serialNumber,type:g.type}}));return await this.updateCertificate(w.certificateId,{isDeleted:!0})}async relinquishOutput(h,p){const g=e.sdk.validateRelinquishOutputArgs(p),{txid:w,vout:v}=e.sdk.parseWalletOutpoint(g.output),m=(0,e.verifyOne)(await this.findOutputs({partial:{txid:w,vout:v}}));return await this.updateOutput(m.outputId,{basketId:void 0})}async processSyncChunk(h,p){const g=(0,e.verifyTruthy)(await this.findUserByIdentityKey(h.identityKey));return await new c.EntitySyncState((0,e.verifyOne)(await this.findSyncStates({partial:{storageIdentityKey:h.fromStorageIdentityKey,userId:g.userId}}))).processSyncChunk(this,h,p)}async updateProvenTxReqWithNewProvenTx(h){const p=await c.EntityProvenTxReq.fromStorageId(this,h.provenTxReqId);let g;if(p.provenTxId)g=new c.EntityProvenTx((0,e.verifyOne)(await this.findProvenTxs({partial:{txid:h.txid}})));else{let v;if({proven:g,isNew:v}=await this.transaction(async m=>{const{proven:y,isNew:b}=await this.findOrInsertProvenTx({created_at:new Date,updated_at:new Date,provenTxId:0,txid:h.txid,height:h.height,index:h.index,merklePath:h.merklePath,rawTx:p.rawTx,blockHash:h.blockHash,merkleRoot:h.merkleRoot},m);return g=new c.EntityProvenTx(y),b&&(p.status="completed",p.provenTxId=g.provenTxId,await p.updateStorageDynamicProperties(this,m)),{proven:g,isNew:b}}),v){const m=p.notify.transactionIds||[];if(m.length>0){for(const y of m)try{await this.updateTransaction(y,{provenTxId:g.provenTxId,status:"completed"}),p.addHistoryNote({what:"notifyTxOfProof",transactionId:y})}catch(b){const x=e.sdk.WalletError.fromUnknown(b);p.addHistoryNote({what:"notifyTxOfProofError",transactionId:y,provenTxId:g.provenTxId,code:x.code,description:x.description})}await p.updateStorageDynamicProperties(this)}}}return{status:p.status,history:p.apiHistory,provenTxId:g.provenTxId}}async confirmSpendableOutputs(){var h;const p=[],g=await this.findUsers({partial:{}});for(const{userId:w}of g){const v=(0,e.verifyOne)(await this.findOutputBaskets({partial:{userId:w,name:"default"}})),m={userId:w,basketId:v.basketId,spendable:!0},y=await this.findOutputs({partial:m});for(let b=y.length-1;b>=0;b--){const x=y[b];if((0,e.verifyId)(x.outputId),x.spendable){let I=!1;if(x.lockingScript&&x.lockingScript.length>0){const k=await this.getServices().getUtxoStatus((0,e.asString)(x.lockingScript),"script");if(k.status==="success"&&k.isUtxo&&((h=k.details)===null||h===void 0?void 0:h.length)>0){const S=await this.findTransactionById(x.transactionId);S&&S.txid&&k.details.some(P=>P.txid===S.txid&&P.satoshis===x.satoshis&&P.index===x.vout)&&(I=!0)}}I||p.push(x)}}}return{invalidSpendableOutputs:p}}async updateProvenTxReqDynamics(h,p,g){const w={};return p.updated_at&&(w.updated_at=p.updated_at),p.provenTxId&&(w.provenTxId=p.provenTxId),p.status&&(w.status=p.status),p.attempts&&(w.attempts=p.attempts),p.notified&&(w.notified=p.notified),p.batch&&(w.batch=p.batch),p.history&&(w.history=p.history),p.notify&&(w.notify=p.notify),await this.updateProvenTxReq(h,w,g)}};os.StorageProvider=u;function d(f){const h={model:"sat/kb",value:1};if(typeof f=="object"){if(f.model!=="sat/kb")throw new e.sdk.WERR_INVALID_PARAMETER("StorageFeeModel.model",'"sat/kb"');typeof f.value=="number"&&(h.value=f.value)}return h}return os}var Vo={},Gw;function XC(){if(Gw)return Vo;Gw=1,Object.defineProperty(Vo,"__esModule",{value:!0}),Vo.StorageSyncReader=void 0;const t=ve();let e=class{constructor(r,i){this.auth=r,this.storage=i}async makeAvailable(){if(await this.storage.makeAvailable(),this.auth.userId===void 0){const r=await this.storage.findUserByIdentityKey(this.auth.identityKey);if(!r)throw new t.sdk.WERR_UNAUTHORIZED;this.auth.userId=r.userId}return this.storage.getSettings()}destroy(){return this.storage.destroy()}async getSyncChunk(r){if(this.auth.userId||await this.makeAvailable(),r.identityKey!==this.auth.identityKey)throw new t.sdk.WERR_UNAUTHORIZED;return await this.storage.getSyncChunk(r)}};return Vo.StorageSyncReader=e,Vo}var ZI={},e2={};Object.defineProperty(e2,"__esModule",{value:!0});var t2={};Object.defineProperty(t2,"__esModule",{value:!0});var n2={};Object.defineProperty(n2,"__esModule",{value:!0});var r2={};Object.defineProperty(r2,"__esModule",{value:!0});var i2={};Object.defineProperty(i2,"__esModule",{value:!0});var s2={};Object.defineProperty(s2,"__esModule",{value:!0});var o2={};Object.defineProperty(o2,"__esModule",{value:!0});var Hd={};Object.defineProperty(Hd,"__esModule",{value:!0});Hd.transactionColumnsWithoutRawTx=void 0;Hd.transactionColumnsWithoutRawTx=["created_at","updated_at","transactionId","userId","provenTxId","status","reference","isOutgoing","satoshis","version","lockTime","description","txid"];var a2={};Object.defineProperty(a2,"__esModule",{value:!0});var qd={};Object.defineProperty(qd,"__esModule",{value:!0});qd.outputColumnsWithoutLockingScript=void 0;qd.outputColumnsWithoutLockingScript=["created_at","updated_at","outputId","userId","transactionId","basketId","spendable","change","vout","satoshis","providedBy","purpose","type","outputDescription","txid","senderIdentityKey","derivationPrefix","derivationSuffix","customInstructions","spentBy","sequenceNumber","spendingDescription","scriptLength","scriptOffset"];var c2={};Object.defineProperty(c2,"__esModule",{value:!0});var l2={};Object.defineProperty(l2,"__esModule",{value:!0});var u2={};Object.defineProperty(u2,"__esModule",{value:!0});var d2={};Object.defineProperty(d2,"__esModule",{value:!0});var f2={};Object.defineProperty(f2,"__esModule",{value:!0});var h2={};Object.defineProperty(h2,"__esModule",{value:!0});(function(t){var e=Ee&&Ee.__createBinding||(Object.create?function(r,i,s,o){o===void 0&&(o=s);var a=Object.getOwnPropertyDescriptor(i,s);(!a||("get"in a?!i.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(r,o,a)}:function(r,i,s,o){o===void 0&&(o=s),r[o]=i[s]}),n=Ee&&Ee.__exportStar||function(r,i){for(var s in r)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,r,s)};Object.defineProperty(t,"__esModule",{value:!0}),n(e2,t),n(t2,t),n(n2,t),n(r2,t),n(i2,t),n(s2,t),n(o2,t),n(Hd,t),n(a2,t),n(qd,t),n(c2,t),n(l2,t),n(u2,t),n(d2,t),n(f2,t),n(h2,t)})(ZI);var Uo={},Xw;function YC(){if(Xw)return Uo;Xw=1,Object.defineProperty(Uo,"__esModule",{value:!0}),Uo.StorageClient=void 0;const t=ve(),e=Xe;let n=class{constructor(i,s){this.nextId=1,this.authClient=new e.AuthFetch(i),this.endpointUrl=s}isStorageProvider(){return!1}async rpcCall(i,s){try{const o=this.nextId++,a={jsonrpc:"2.0",method:i,params:s,id:o};let l;try{l=await this.authClient.fetch(this.endpointUrl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})}catch(u){throw u}if(!l.ok)throw new Error(`WalletStorageClient rpcCall: network error ${l.status} ${l.statusText}`);const c=await l.json();if(c.error){const{code:u,message:d,data:f}=c.error,h=new Error(`RPC Error: ${d}`);throw h.code=u,h.data=f,h}return c.result}catch(o){throw o}}isAvailable(){return!!this.settings}getSettings(){if(!this.settings)throw new t.sdk.WERR_INVALID_OPERATION("call makeAvailable at least once before getSettings");return this.settings}async makeAvailable(){return this.settings||(this.settings=await this.rpcCall("makeAvailable",[])),this.settings}async destroy(){return this.rpcCall("destroy",[])}async migrate(i,s){return this.rpcCall("migrate",[i])}getServices(){throw new t.sdk.WERR_INVALID_OPERATION("getServices() not implemented in remote client. This method typically is not used remotely.")}setServices(i){}async internalizeAction(i,s){return this.rpcCall("internalizeAction",[i,s])}async createAction(i,s){return this.rpcCall("createAction",[i,s])}async processAction(i,s){return this.rpcCall("processAction",[i,s])}async abortAction(i,s){return this.rpcCall("abortAction",[i,s])}async findOrInsertUser(i){return this.rpcCall("findOrInsertUser",[i])}async findOrInsertSyncStateAuth(i,s,o){const a=await this.rpcCall("findOrInsertSyncStateAuth",[i,s,o]);return a.syncState=this.validateEntity(a.syncState,["when"]),a}async insertCertificateAuth(i,s){return await this.rpcCall("insertCertificateAuth",[i,s])}async listActions(i,s){return await this.rpcCall("listActions",[i,s])}async listOutputs(i,s){return await this.rpcCall("listOutputs",[i,s])}async listCertificates(i,s){return await this.rpcCall("listCertificates",[i,s])}async findCertificatesAuth(i,s){const o=await this.rpcCall("findCertificatesAuth",[i,s]);if(this.validateEntities(o),s.includeFields)for(const a of o)a.fields&&this.validateEntities(a.fields);return o}async findOutputBasketsAuth(i,s){const o=await this.rpcCall("findOutputBaskets",[i,s]);return this.validateEntities(o),o}async findOutputsAuth(i,s){const o=await this.rpcCall("findOutputsAuth",[i,s]);return this.validateEntities(o),o}async findProvenTxReqs(i){const s=await this.rpcCall("findProvenTxReqs",[i]);return this.validateEntities(s),s}async relinquishCertificate(i,s){return this.rpcCall("relinquishCertificate",[i,s])}async relinquishOutput(i,s){return this.rpcCall("relinquishOutput",[i,s])}async processSyncChunk(i,s){return await this.rpcCall("processSyncChunk",[i,s])}async getSyncChunk(i){const s=await this.rpcCall("getSyncChunk",[i]);return s.certificateFields&&(s.certificateFields=this.validateEntities(s.certificateFields)),s.certificates&&(s.certificates=this.validateEntities(s.certificates)),s.commissions&&(s.commissions=this.validateEntities(s.commissions)),s.outputBaskets&&(s.outputBaskets=this.validateEntities(s.outputBaskets)),s.outputTagMaps&&(s.outputTagMaps=this.validateEntities(s.outputTagMaps)),s.outputTags&&(s.outputTags=this.validateEntities(s.outputTags)),s.outputs&&(s.outputs=this.validateEntities(s.outputs)),s.provenTxReqs&&(s.provenTxReqs=this.validateEntities(s.provenTxReqs)),s.provenTxs&&(s.provenTxs=this.validateEntities(s.provenTxs)),s.transactions&&(s.transactions=this.validateEntities(s.transactions)),s.txLabelMaps&&(s.txLabelMaps=this.validateEntities(s.txLabelMaps)),s.txLabels&&(s.txLabels=this.validateEntities(s.txLabels)),s.user&&(s.user=this.validateEntity(s.user)),s}async updateProvenTxReqWithNewProvenTx(i){return await this.rpcCall("updateProvenTxReqWithNewProvenTx",[i])}async setActive(i,s){return this.rpcCall("setActive",[i,s])}validateDate(i){let s;return i instanceof Date?s=i:s=new Date(i),s}validateEntity(i,s){if(i.created_at=this.validateDate(i.created_at),i.updated_at=this.validateDate(i.updated_at),s)for(const o of s)i[o]&&(i[o]=this.validateDate(i[o]));for(const o of Object.keys(i)){const a=i[o];a===null?i[o]=void 0:Buffer.isBuffer(a)&&(i[o]=Array.from(a))}return i}validateEntities(i,s){for(let o=0;o<i.length;o++)i[o]=this.validateEntity(i[o],s);return i}};return Uo.StorageClient=n,Uo}var Yw;function p2(){return Yw||(Yw=1,function(t){var e=Ee&&Ee.__createBinding||(Object.create?function(r,i,s,o){o===void 0&&(o=s);var a=Object.getOwnPropertyDescriptor(i,s);(!a||("get"in a?!i.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(r,o,a)}:function(r,i,s,o){o===void 0&&(o=s),r[o]=i[s]}),n=Ee&&Ee.__exportStar||function(r,i){for(var s in r)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,r,s)};Object.defineProperty(t,"__esModule",{value:!0}),n(kC(),t),n(GC(),t),n(XC(),t),n(ZI,t),n(Dt(),t),n(YC(),t)}(wh)),wh}var yi={},jd={};Object.defineProperty(jd,"__esModule",{value:!0});jd.ServiceCollection=void 0;class mm{constructor(e){this.services=e||[],this._index=0}add(e){return this.services.push(e),this}remove(e){this.services=this.services.filter(n=>n.name!==e)}get name(){return this.services[this._index].name}get service(){return this.services[this._index].service}get allServices(){return this.services.map(e=>e.service)}get count(){return this.services.length}get index(){return this._index}reset(){this._index=0}next(){return this._index=(this._index+1)%this.count,this._index}clone(){return new mm([...this.services])}}jd.ServiceCollection=mm;var Ho={},xh={},kh={},qo={},Qw;function m2(){if(Qw)return qo;Qw=1,Object.defineProperty(qo,"__esModule",{value:!0}),qo.ChaintracksServiceClient=void 0;const t=ve();let e=class g2{static createChaintracksServiceClientOptions(){return{useAuthrite:!1}}constructor(r,i,s){this.chain=r,this.serviceUrl=i,this.options=s||g2.createChaintracksServiceClientOptions()}async currentHeight(){return await this.getPresentHeight()}async isValidRootForHeight(r,i){const s=await this.findHeaderForHeight(i);return s?r===(0,t.asString)(s.merkleRoot):!1}async getJsonOrUndefined(r){let i;for(let s=0;s<3;s++){try{const a=await(await fetch(`${this.serviceUrl}${r}`)).json();if(a.status==="success")return a.value;i=new Error(JSON.stringify(a))}catch(o){i=o}if(i&&i.name!=="ECONNRESET")break}if(i)throw i}async getJson(r){const i=await this.getJsonOrUndefined(r);if(i===void 0)throw new Error("Value was undefined. Requested object may not exist.");return i}async postJsonVoid(r,i){const s={};s["Content-Type"]="application/json";const o=await fetch(`${this.serviceUrl}${r}`,{body:JSON.stringify(i),method:"POST",headers:s});try{const a=await o.json();if(a.status==="success")return;throw new Error(JSON.stringify(a))}catch(a){throw console.log(`Exception: ${JSON.stringify(a)}`),new Error(JSON.stringify(a))}}async addHeader(r){const i=await this.postJsonVoid("/addHeaderHex",r);if(typeof i=="string")throw new Error(i)}async startListening(){return await this.getJsonOrUndefined("/startListening")}async listening(){return await this.getJsonOrUndefined("/listening")}async getChain(){return this.chain}async isListening(){return await this.getJson("/isListening")}async isSynchronized(){return await this.getJson("/isSynchronized")}async getPresentHeight(){return await this.getJson("/getPresentHeight")}async findChainTipHeader(){return await this.getJson("/findChainTipHeaderHex")}async findChainTipHashHex(){return await this.getJson("/findChainTipHashHex")}async getHeaders(r,i){return await this.getJson(`/getHeaders?height=${r}&count=${i}`)}async findHeaderForHeight(r){return await this.getJsonOrUndefined(`/findHeaderHexForHeight?height=${r}`)}async findChainWorkForBlockHash(r){return await this.getJsonOrUndefined(`/findChainWorkHexForBlockHash?hash=${(0,t.asString)(r)}`)}async findHeaderForBlockHash(r){return await this.getJsonOrUndefined(`/findHeaderHexForBlockHash?hash=${(0,t.asString)(r)}`)}async findHeaderForMerkleRoot(r,i){return await this.getJsonOrUndefined(`/findHeaderHexForMerkleRoot?root=${(0,t.asString)(r)}&height=${i}`)}};return qo.ChaintracksServiceClient=e,qo}var io={};Object.defineProperty(io,"__esModule",{value:!0});io.isLive=QC;io.isBaseBlockHeader=JC;io.isBlockHeader=ZC;io.isLiveBlockHeader=e9;function QC(t){return t.headerId!==void 0}function JC(t){return typeof t.previousHash=="string"}function ZC(t){return"height"in t&&typeof t.previousHash=="string"}function e9(t){return"chainwork"in t&&typeof t.previousHash=="string"}var Jw;function t9(){return Jw||(Jw=1,function(t){var e=Ee&&Ee.__createBinding||(Object.create?function(r,i,s,o){o===void 0&&(o=s);var a=Object.getOwnPropertyDescriptor(i,s);(!a||("get"in a?!i.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(r,o,a)}:function(r,i,s,o){o===void 0&&(o=s),r[o]=i[s]}),n=Ee&&Ee.__exportStar||function(r,i){for(var s in r)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,r,s)};Object.defineProperty(t,"__esModule",{value:!0}),n(m2(),t),n(io,t)}(kh)),kh}var jo={},Zw;function n9(){if(Zw)return jo;Zw=1,Object.defineProperty(jo,"__esModule",{value:!0}),jo.ChaintracksChainTracker=void 0;const t=ve(),e=m2();let n=class{constructor(i,s,o){i||(i="main"),this.chaintracks=s??new e.ChaintracksServiceClient(i,`https://npm-registry.babbage.systems:808${i==="main"?"4":"3"}`),this.cache={},this.options=o||{}}async currentHeight(){return await this.chaintracks.getPresentHeight()}async isValidRootForHeight(i,s){const o=this.cache[s];if(o)return o===i;let a;const l=this.options.maxRetries||3;let c;for(let u=1;u<=l;u++)try{if(a=await this.chaintracks.findHeaderForHeight(s),!a)return!1;break}catch(d){if(c=t.sdk.WalletError.fromUnknown(d),u>l)throw c;await(0,t.wait)(1e3)}if(!a)throw new t.sdk.WERR_INTERNAL("no header should have returned false or thrown an error.");return this.cache[s]=a.merkleRoot,a.merkleRoot===i}};return jo.ChaintracksChainTracker=n,jo}var e1;function y2(){return e1||(e1=1,function(t){var e=Ee&&Ee.__createBinding||(Object.create?function(r,i,s,o){o===void 0&&(o=s);var a=Object.getOwnPropertyDescriptor(i,s);(!a||("get"in a?!i.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(r,o,a)}:function(r,i,s,o){o===void 0&&(o=s),r[o]=i[s]}),n=Ee&&Ee.__exportStar||function(r,i){for(var s in r)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,r,s)};Object.defineProperty(t,"__esModule",{value:!0}),n(t9(),t),n(n9(),t)}(xh)),xh}var t1;function r9(){if(t1)return Ho;t1=1,Object.defineProperty(Ho,"__esModule",{value:!0}),Ho.createDefaultWalletServicesOptions=n,Ho.arcDefaultUrl=r;const t=ve(),e=y2();function n(i){const s=i==="main"?"mainnet_9596de07e92300c6287e4393594ae39c":"testnet_0e6cf72133b43ea2d7861da2a38684e3";return{chain:i,taalApiKey:s,bsvExchangeRate:{timestamp:new Date("2023-12-13"),base:"USD",rate:47.52},bsvUpdateMsecs:1e3*60*15,fiatExchangeRates:{timestamp:new Date("2023-12-13"),base:"USD",rates:{USD:1,GBP:.8,EUR:.93}},fiatUpdateMsecs:1e3*60*60*24,disableMapiCallback:!0,exchangeratesapiKey:"bd539d2ff492bcb5619d5f27726a766f",chaintracksFiatExchangeRatesUrl:`https://npm-registry.babbage.systems:${i==="main"?8084:8083}/getFiatExchangeRates`,chaintracks:new e.ChaintracksServiceClient(i,`https://npm-registry.babbage.systems:${i==="main"?8084:8083}`),arcUrl:r(i),arcConfig:{apiKey:s,deploymentId:`wallet-toolbox-${(0,t.randomBytesHex)(16)}`}}}function r(i){return i==="main"?"https://api.taal.com/arc":"https://arc-test.taal.com"}return Ho}var Ko={},ym={};Object.defineProperty(ym,"__esModule",{value:!0});const i9=Xe;class s9{constructor(e="main",n={}){const{apiKey:r,httpClient:i}=n;this.network=e,this.URL=`https://api.whatsonchain.com/v1/bsv/${e}`,this.httpClient=i??(0,i9.defaultHttpClient)(),this.apiKey=r??""}async isValidRootForHeight(e,n){const r={method:"GET",headers:this.getHttpHeaders()},i=await this.httpClient.request(`${this.URL}/block/${n}/header`,r);if(i.ok){const{merkleroot:s}=i.data;return s===e}else{if(i.status===404)return!1;throw new Error(`Failed to verify merkleroot for height ${n} because of an error: ${JSON.stringify(i.data)} `)}}async currentHeight(){try{const e={method:"GET",headers:this.getHttpHeaders()},n=await this.httpClient.request(`${this.URL}/block/headers`,e);if(n.ok)return n.data[0].height;throw new Error(`Failed to get current height because of an error: ${JSON.stringify(n.data)} `)}catch(e){throw new Error(`Failed to get current height because of an error: ${e instanceof Error?e.message:String(e)}`)}}getHttpHeaders(){const e={Accept:"application/json"};return typeof this.apiKey=="string"&&this.apiKey.trim()!==""&&(e.Authorization=this.apiKey),e}}ym.default=s9;var n1;function o9(){if(n1)return Ko;n1=1;var t=Ee&&Ee.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(Ko,"__esModule",{value:!0}),Ko.WhatsOnChain=void 0;const e=Xe,n=ve(),r=Wd,i=t(ym);let s=class extends i.default{constructor(a="main",l={}){super(a,l)}async getTxPropagation(a){const l={method:"GET",headers:this.getHttpHeaders()},c=await this.httpClient.request(`${this.URL}/tx/hash/${a}/propagation`,l);if(!c.data||!c.ok||c.status!==200||c.statusText!=="OK")throw new n.sdk.WERR_INVALID_PARAMETER("txid",`valid transaction. '${a}' response ${c.statusText}`);return 0}async getRawTx(a){const l=this.getHttpHeaders();l["Cache-Control"]="no-cache";const c={method:"GET",headers:l};for(let u=0;u<2;u++){const d=await this.httpClient.request(`${this.URL}/tx/${a}/hex`,c);if(d.statusText==="Too Many Requests"&&u<2){await(0,n.wait)(2e3);continue}if(d.status===404&&d.statusText==="Not Found")return;if(!d.data||!d.ok||d.status!==200||d.statusText!=="OK")throw new n.sdk.WERR_INVALID_PARAMETER("txid",`valid transaction. '${a}' response ${d.statusText}`);return d.data}throw new n.sdk.WERR_INTERNAL}async getRawTxResult(a){const l={name:"WoC",txid:(0,n.asString)(a)};try{const c=await this.getRawTx(a);c&&(l.rawTx=(0,n.asArray)(c))}catch(c){l.error=n.sdk.WalletError.fromUnknown(c)}return l}async postBeef(a,l){const c={name:"WoC",status:"success",txidResults:[],notes:[]};let u=!1;const d=()=>({name:"WoCpostBeef",when:new Date().toISOString()}),f=()=>({...d(),beef:a.toHex(),txids:l.join(",")});for(const h of l){const p=e.Utils.toHex(a.findTxid(h).rawTx);u&&await(0,n.wait)(3e3),u=!0;const g=await this.postRawTx(p);if(h!==g.txid)throw new n.sdk.WERR_INTERNAL(`woc returned txid ${g.txid}, expected ${h}`);c.txidResults.push(g),c.status==="success"&&g.status!=="success"&&(c.status="error")}return c.status==="success"?c.notes.push({...d(),what:"postBeefSuccess"}):c.notes.push({...f(),what:"postBeefError"}),c}async postRawTx(a){let l=e.Utils.toHex((0,n.doubleSha256BE)(e.Utils.toArray(a,"hex")));const c={txid:l,status:"success",notes:[]},u=this.getHttpHeaders();u["Content-Type"]="application/json",u.Accept="text/plain";const d={method:"POST",headers:u,data:{txhex:a}},f=`${this.URL}/tx/raw`,h=()=>({name:"WoCpostRawTx",when:new Date().toISOString()}),p=()=>({...h(),rawTx:a,txid:l,url:f}),g=5;for(let w=0;w<g;w++){try{const v=await this.httpClient.request(f,d);if(v.statusText==="Too Many Requests"&&w<2){c.notes.push({...h(),what:"postRawTxRateLimit"}),await(0,n.wait)(2e3);continue}if(v.ok){const m=v.data;c.notes.push({...h(),what:"postRawTxSuccess"})}else{c.status="error";const m={...p(),what:"postRawTxError"};typeof v.data=="string"&&(m.data=v.data.slice(0,128),c.data=v.data),typeof v.statusText=="string"&&(m.statusText=v.data.slice(0,128),c.data=`${c.data||""} ${v.statusText}`),(typeof v.status=="string"||typeof v.status=="number")&&(m.status=v.data.slice(0,128),c.data=`${c.data||""} ${v.status}`),c.notes.push(m)}}catch(v){c.status="error";const m=n.sdk.WalletError.fromUnknown(v);c.notes.push({...p(),what:"postRawTxCatch",code:m.code,description:m.description}),c.data=`${m.code} ${m.description}`}return c}return c.status="error",c.notes.push({...p(),what:"postRawTxRetryLimit",retryLimit:g}),c}async getMerklePath(a,l){const c={name:"WoCTsc",notes:[]},d={method:"GET",headers:this.getHttpHeaders()};for(let f=0;f<2;f++){try{const h=await this.httpClient.request(`${this.URL}/tx/${a}/proof/tsc`,d);if(h.statusText==="Too Many Requests"&&f<2){c.notes.push({what:"getMerklePathRetry",name:c.name,status:h.status,statusText:h.statusText}),await(0,n.wait)(2e3);continue}if(h.status===404&&h.statusText==="Not Found")return c.notes.push({what:"getMerklePathNotFound",name:c.name,status:h.status,statusText:h.statusText}),c;if(!h.ok||h.status!==200||h.statusText!=="OK")throw c.notes.push({what:"getMerklePathBadStatus",name:c.name,status:h.status,statusText:h.statusText}),new n.sdk.WERR_INVALID_PARAMETER("txid",`valid transaction. '${a}' response ${h.statusText}`);if(!h.data)return c.notes.push({what:"getMerklePathNoData",name:c.name,status:h.status,statusText:h.statusText}),c;if(Array.isArray(h.data)||(h.data=[h.data]),h.data.length!=1)return c;const p=h.data[0],g=await l.hashToHeader(p.target);if(g){const w={index:p.index,nodes:p.nodes,height:g.height};c.merklePath=(0,r.convertProofToMerklePath)(a,w),c.header=g,c.notes.push({what:"getMerklePathSuccess",name:c.name,status:h.status,statusText:h.statusText})}else throw c.notes.push({what:"getMerklePathNoHeader",target:p.target,name:c.name,status:h.status,statusText:h.statusText}),new n.sdk.WERR_INVALID_PARAMETER("blockhash","a valid on-chain block hash")}catch(h){const p=n.sdk.WalletError.fromUnknown(h);c.notes.push({what:"getMerklePathError",name:c.name,code:p.code,description:p.description}),c.error=p}return c}throw c.notes.push({what:"getMerklePathInternal",name:c.name}),new n.sdk.WERR_INTERNAL}async updateBsvExchangeRate(a,l){if(a&&(l||(l=1e3*60*15),new Date(Date.now()-l)<a.timestamp))return a;const c={method:"GET",headers:this.getHttpHeaders()};for(let u=0;u<2;u++){const d=await this.httpClient.request(`${this.URL}/exchangerate`,c);if(d.statusText==="Too Many Requests"&&u<2){await(0,n.wait)(2e3);continue}if(!d.data||!d.ok||d.status!==200||d.statusText!=="OK")throw new n.sdk.WERR_INVALID_OPERATION(`WoC exchangerate response ${d.statusText}`);const f=d.data;return f.currency!=="USD"&&(f.rate=NaN),{timestamp:new Date,base:"USD",rate:f.rate}}throw new n.sdk.WERR_INTERNAL}async getUtxoStatus(a,l){const c={name:"WoC",status:"error",error:new n.sdk.WERR_INTERNAL,details:[]};for(let u=0;;u++){let d="";try{const f=(0,n.validateScriptHash)(a,l),h={method:"GET",headers:this.getHttpHeaders()},p=await this.httpClient.request(`${this.URL}/script/${f}/unspent`,h);if(p.statusText==="Too Many Requests"&&u<2){await(0,n.wait)(2e3);continue}if(!p.data||!p.ok||p.status!==200||p.statusText!=="OK")throw new n.sdk.WERR_INVALID_OPERATION(`WoC exchangerate response ${p.statusText}`);if(Array.isArray(p.data)){const g=p.data;if(g.length===0)c.status="success",c.error=void 0,c.isUtxo=!1;else{c.status="success",c.error=void 0,c.isUtxo=!0;for(const w of g)c.details.push({txid:w.tx_hash,satoshis:w.value,height:w.height,index:w.tx_pos})}}else throw new n.sdk.WERR_INTERNAL("data is not an array");return c}catch(f){if(n.sdk.WalletError.fromUnknown(f).code!=="ECONNRESET"||u>2)return c.error=new n.sdk.WERR_INTERNAL(`service failure: ${d}, error: ${JSON.stringify(n.sdk.WalletError.fromUnknown(f))}`),c}}}};return Ko.WhatsOnChain=s,Ko}var as={},vm={exports:{}},v2=function(e,n){return function(){return e.apply(n,arguments)}},a9=v2,wm=Object.prototype.toString,bm=function(t){return function(e){var n=wm.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())}}(Object.create(null));function fi(t){return t=t.toLowerCase(),function(n){return bm(n)===t}}function Kd(t){return Array.isArray(t)}function d0(t){return typeof t>"u"}function c9(t){return t!==null&&!d0(t)&&t.constructor!==null&&!d0(t.constructor)&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}var w2=fi("ArrayBuffer");function l9(t){var e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&w2(t.buffer),e}function u9(t){return typeof t=="string"}function b2(t){return typeof t=="number"}function x2(t){return t!==null&&typeof t=="object"}function bl(t){if(bm(t)!=="object")return!1;var e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function d9(t){return t&&Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}var f9=fi("Date"),h9=fi("File"),p9=fi("Blob"),g9=fi("FileList");function xm(t){return wm.call(t)==="[object Function]"}function m9(t){return x2(t)&&xm(t.pipe)}function y9(t){var e="[object FormData]";return t&&(typeof FormData=="function"&&t instanceof FormData||wm.call(t)===e||xm(t.toString)&&t.toString()===e)}var v9=fi("URLSearchParams");function w9(t){return t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}function b9(){var t;return typeof navigator<"u"&&((t=navigator.product)==="ReactNative"||t==="NativeScript"||t==="NS")?!1:typeof window<"u"&&typeof document<"u"}function km(t,e){if(!(t===null||typeof t>"u"))if(typeof t!="object"&&(t=[t]),Kd(t))for(var n=0,r=t.length;n<r;n++)e.call(null,t[n],n,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(null,t[i],i,t)}function f0(){var t={};function e(i,s){bl(t[s])&&bl(i)?t[s]=f0(t[s],i):bl(i)?t[s]=f0({},i):Kd(i)?t[s]=i.slice():t[s]=i}for(var n=0,r=arguments.length;n<r;n++)km(arguments[n],e);return t}function x9(t,e,n){return km(e,function(i,s){n&&typeof i=="function"?t[s]=a9(i,n):t[s]=i}),t}function k9(t){return t.charCodeAt(0)===65279&&(t=t.slice(1)),t}function I9(t,e,n,r){t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,n&&Object.assign(t.prototype,n)}function S9(t,e,n,r){var i,s,o,a={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),s=i.length;s-- >0;)o=i[s],(!r||r(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=n!==!1&&Object.getPrototypeOf(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e}function E9(t,e,n){t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;var r=t.indexOf(e,n);return r!==-1&&r===n}function T9(t){if(!t)return null;if(Kd(t))return t;var e=t.length;if(!b2(e))return null;for(var n=new Array(e);e-- >0;)n[e]=t[e];return n}var R9=function(t){return function(e){return t&&e instanceof t}}(typeof Uint8Array<"u"&&Object.getPrototypeOf(Uint8Array));function _9(t,e){for(var n=t&&t[Symbol.iterator],r=n.call(t),i;(i=r.next())&&!i.done;){var s=i.value;e.call(t,s[0],s[1])}}function P9(t,e){for(var n,r=[];(n=t.exec(e))!==null;)r.push(n);return r}var O9=fi("HTMLFormElement"),A9=function(e){return function(n,r){return e.call(n,r)}}(Object.prototype.hasOwnProperty),Rt={isArray:Kd,isArrayBuffer:w2,isBuffer:c9,isFormData:y9,isArrayBufferView:l9,isString:u9,isNumber:b2,isObject:x2,isPlainObject:bl,isEmptyObject:d9,isUndefined:d0,isDate:f9,isFile:h9,isBlob:p9,isFunction:xm,isStream:m9,isURLSearchParams:v9,isStandardBrowserEnv:b9,forEach:km,merge:f0,extend:x9,trim:w9,stripBOM:k9,inherits:I9,toFlatObject:S9,kindOf:bm,kindOfTest:fi,endsWith:E9,toArray:T9,isTypedArray:R9,isFileList:g9,forEachEntry:_9,matchAll:P9,isHTMLForm:O9,hasOwnProperty:A9},k2=Rt;function zs(t,e,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}k2.inherits(zs,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var I2=zs.prototype,S2={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(function(t){S2[t]={value:t}});Object.defineProperties(zs,S2);Object.defineProperty(I2,"isAxiosError",{value:!0});zs.from=function(t,e,n,r,i,s){var o=Object.create(I2);return k2.toFlatObject(t,o,function(l){return l!==Error.prototype}),zs.call(o,t.message,e,n,r,i),o.cause=t,o.name=t.name,s&&Object.assign(o,s),o};var Xi=zs,N9=typeof self=="object"?self.FormData:window.FormData,C9=N9,tt=Rt,M9=Xi,B9=C9;function h0(t){return tt.isPlainObject(t)||tt.isArray(t)}function E2(t){return tt.endsWith(t,"[]")?t.slice(0,-2):t}function r1(t,e,n){return t?t.concat(e).map(function(i,s){return i=E2(i),!n&&s?"["+i+"]":i}).join(n?".":""):e}function L9(t){return tt.isArray(t)&&!t.some(h0)}var D9=tt.toFlatObject(tt,{},null,function(e){return/^is[A-Z]/.test(e)});function F9(t){return t&&tt.isFunction(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator]}function $9(t,e,n){if(!tt.isObject(t))throw new TypeError("target must be an object");e=e||new(B9||FormData),n=tt.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(g,w){return!tt.isUndefined(w[g])});var r=n.metaTokens,i=n.visitor||u,s=n.dots,o=n.indexes,a=n.Blob||typeof Blob<"u"&&Blob,l=a&&F9(e);if(!tt.isFunction(i))throw new TypeError("visitor must be a function");function c(p){if(p===null)return"";if(tt.isDate(p))return p.toISOString();if(!l&&tt.isBlob(p))throw new M9("Blob is not supported. Use a Buffer instead.");return tt.isArrayBuffer(p)||tt.isTypedArray(p)?l&&typeof Blob=="function"?new Blob([p]):Buffer.from(p):p}function u(p,g,w){var v=p;if(p&&!w&&typeof p=="object"){if(tt.endsWith(g,"{}"))g=r?g:g.slice(0,-2),p=JSON.stringify(p);else if(tt.isArray(p)&&L9(p)||tt.isFileList(p)||tt.endsWith(g,"[]")&&(v=tt.toArray(p)))return g=E2(g),v.forEach(function(y,b){!(tt.isUndefined(y)||y===null)&&e.append(o===!0?r1([g],b,s):o===null?g:g+"[]",c(y))}),!1}return h0(p)?!0:(e.append(r1(w,g,s),c(p)),!1)}var d=[],f=Object.assign(D9,{defaultVisitor:u,convertValue:c,isVisitable:h0});function h(p,g){if(!tt.isUndefined(p)){if(d.indexOf(p)!==-1)throw Error("Circular reference detected in "+g.join("."));d.push(p),tt.forEach(p,function(v,m){var y=!(tt.isUndefined(v)||v===null)&&i.call(e,v,tt.isString(m)?m.trim():m,g,f);y===!0&&h(v,g?g.concat(m):[m])}),d.pop()}}if(!tt.isObject(t))throw new TypeError("data must be an object");return h(t),e}var zd=$9,W9=zd;function i1(t){var e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'\(\)~]|%20|%00/g,function(r){return e[r]})}function T2(t,e){this._pairs=[],t&&W9(t,this,e)}var R2=T2.prototype;R2.append=function(e,n){this._pairs.push([e,n])};R2.toString=function(e){var n=e?function(r){return e.call(this,r,i1)}:i1;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};var _2=T2,V9=Rt,U9=_2;function H9(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var P2=function(e,n,r){if(!n)return e;var i=e.indexOf("#");i!==-1&&(e=e.slice(0,i));var s=r&&r.encode||H9,o=r&&r.serialize,a;return o?a=o(n,r):a=V9.isURLSearchParams(n)?n.toString():new U9(n,r).toString(s),a&&(e+=(e.indexOf("?")===-1?"?":"&")+a),e},q9=Rt;function gc(){this.handlers=[]}gc.prototype.use=function(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1};gc.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};gc.prototype.clear=function(){this.handlers&&(this.handlers=[])};gc.prototype.forEach=function(e){q9.forEach(this.handlers,function(r){r!==null&&e(r)})};var j9=gc,K9=Rt,O2=function(e,n){K9.forEach(e,function(i,s){s!==n&&s.toUpperCase()===n.toUpperCase()&&(e[n]=i,delete e[s])})},A2={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},z9=_2,G9=typeof URLSearchParams<"u"?URLSearchParams:z9,X9=FormData,Y9={classes:{URLSearchParams:G9,FormData:X9,Blob},protocols:["http","https","file","blob","url","data"]},Im=Y9,Q9=Rt,J9=zd,s1=Im,Z9=function(e,n){return J9(e,new s1.classes.URLSearchParams,Object.assign({visitor:function(r,i,s,o){return s1.isNode&&Q9.isBuffer(r)?(this.append(i,r.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},n))},Hr=Rt;function e7(t){return Hr.matchAll(/\w+|\[(\w*)]/g,t).map(function(e){return e[0]==="[]"?"":e[1]||e[0]})}function t7(t){var e={},n=Object.keys(t),r,i=n.length,s;for(r=0;r<i;r++)s=n[r],e[s]=t[s];return e}function n7(t){function e(r,i,s,o){var a=r[o++];if(a==="__proto__")return!0;var l=Number.isFinite(+a),c=o>=r.length;if(a=!a&&Hr.isArray(s)?s.length:a,c)return Hr.hasOwnProperty(s,a)?s[a]=[s[a],i]:s[a]=i,!l;(!s[a]||!Hr.isObject(s[a]))&&(s[a]=[]);var u=e(r,i,s[a],o);return u&&Hr.isArray(s[a])&&(s[a]=t7(s[a])),!l}if(Hr.isFormData(t)&&Hr.isFunction(t.entries)){var n={};return Hr.forEachEntry(t,function(r,i){e(e7(r),i,n,0)}),n}return null}var N2=n7,Ih,o1;function r7(){if(o1)return Ih;o1=1;var t=Xi;return Ih=function(n,r,i){var s=i.config.validateStatus;!i.status||!s||s(i.status)?n(i):r(new t("Request failed with status code "+i.status,[t.ERR_BAD_REQUEST,t.ERR_BAD_RESPONSE][Math.floor(i.status/100)-4],i.config,i.request,i))},Ih}var Sh,a1;function i7(){if(a1)return Sh;a1=1;var t=Rt;return Sh=t.isStandardBrowserEnv()?function(){return{write:function(r,i,s,o,a,l){var c=[];c.push(r+"="+encodeURIComponent(i)),t.isNumber(s)&&c.push("expires="+new Date(s).toGMTString()),t.isString(o)&&c.push("path="+o),t.isString(a)&&c.push("domain="+a),l===!0&&c.push("secure"),document.cookie=c.join("; ")},read:function(r){var i=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return i?decodeURIComponent(i[3]):null},remove:function(r){this.write(r,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),Sh}var s7=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)},o7=function(e,n){return n?e.replace(/\/?\/$/,"")+"/"+n.replace(/^\/+/,""):e},a7=s7,c7=o7,C2=function(e,n){return e&&!a7(n)?c7(e,n):n},Eh,c1;function l7(){if(c1)return Eh;c1=1;var t=Rt,e=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return Eh=function(r){var i={},s,o,a;return r&&t.forEach(r.split(`
`),function(c){if(a=c.indexOf(":"),s=t.trim(c.slice(0,a)).toLowerCase(),o=t.trim(c.slice(a+1)),s){if(i[s]&&e.indexOf(s)>=0)return;s==="set-cookie"?i[s]=(i[s]?i[s]:[]).concat([o]):i[s]=i[s]?i[s]+", "+o:o}}),i},Eh}var Th,l1;function u7(){if(l1)return Th;l1=1;var t=Rt;return Th=t.isStandardBrowserEnv()?function(){var n=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a"),i;function s(o){var a=o;return n&&(r.setAttribute("href",a),a=r.href),r.setAttribute("href",a),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return i=s(window.location.href),function(a){var l=t.isString(a)?s(a):a;return l.protocol===i.protocol&&l.host===i.host}}():function(){return function(){return!0}}(),Th}var Rh,u1;function Gd(){if(u1)return Rh;u1=1;var t=Xi,e=Rt;function n(r,i,s){t.call(this,r??"canceled",t.ERR_CANCELED,i,s),this.name="CanceledError"}return e.inherits(n,t,{__CANCEL__:!0}),Rh=n,Rh}var _h,d1;function d7(){return d1||(d1=1,_h=function(e){var n=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return n&&n[1]||""}),_h}var Ph,f1;function h1(){if(f1)return Ph;f1=1;var t=Rt,e=r7(),n=i7(),r=P2,i=C2,s=l7(),o=u7(),a=A2,l=Xi,c=Gd(),u=d7(),d=Im;return Ph=function(h){return new Promise(function(g,w){var v=h.data,m=h.headers,y=h.responseType,b=h.withXSRFToken,x;function I(){h.cancelToken&&h.cancelToken.unsubscribe(x),h.signal&&h.signal.removeEventListener("abort",x)}t.isFormData(v)&&t.isStandardBrowserEnv()&&delete m["Content-Type"];var k=new XMLHttpRequest;if(h.auth){var S=h.auth.username||"",P=h.auth.password?unescape(encodeURIComponent(h.auth.password)):"";m.Authorization="Basic "+btoa(S+":"+P)}var R=i(h.baseURL,h.url);k.open(h.method.toUpperCase(),r(R,h.params,h.paramsSerializer),!0),k.timeout=h.timeout;function B(){if(k){var L="getAllResponseHeaders"in k?s(k.getAllResponseHeaders()):null,$=!y||y==="text"||y==="json"?k.responseText:k.response,H={data:$,status:k.status,statusText:k.statusText,headers:L,config:h,request:k};e(function(C){g(C),I()},function(C){w(C),I()},H),k=null}}if("onloadend"in k?k.onloadend=B:k.onreadystatechange=function(){!k||k.readyState!==4||k.status===0&&!(k.responseURL&&k.responseURL.indexOf("file:")===0)||setTimeout(B)},k.onabort=function(){k&&(w(new l("Request aborted",l.ECONNABORTED,h,k)),k=null)},k.onerror=function(){w(new l("Network Error",l.ERR_NETWORK,h,k)),k=null},k.ontimeout=function(){var $=h.timeout?"timeout of "+h.timeout+"ms exceeded":"timeout exceeded",H=h.transitional||a;h.timeoutErrorMessage&&($=h.timeoutErrorMessage),w(new l($,H.clarifyTimeoutError?l.ETIMEDOUT:l.ECONNABORTED,h,k)),k=null},t.isStandardBrowserEnv()&&(b&&t.isFunction(b)&&(b=b(h)),b||b!==!1&&o(R))){var T=h.xsrfHeaderName&&h.xsrfCookieName&&n.read(h.xsrfCookieName);T&&(m[h.xsrfHeaderName]=T)}"setRequestHeader"in k&&t.forEach(m,function($,H){typeof v>"u"&&H.toLowerCase()==="content-type"?delete m[H]:k.setRequestHeader(H,$)}),t.isUndefined(h.withCredentials)||(k.withCredentials=!!h.withCredentials),y&&y!=="json"&&(k.responseType=h.responseType),typeof h.onDownloadProgress=="function"&&k.addEventListener("progress",h.onDownloadProgress),typeof h.onUploadProgress=="function"&&k.upload&&k.upload.addEventListener("progress",h.onUploadProgress),(h.cancelToken||h.signal)&&(x=function(L){k&&(w(!L||L.type?new c(null,h,k):L),k.abort(),k=null)},h.cancelToken&&h.cancelToken.subscribe(x),h.signal&&(h.signal.aborted?x():h.signal.addEventListener("abort",x))),!v&&v!==!1&&v!==0&&v!==""&&(v=null);var N=u(R);if(N&&d.protocols.indexOf(N)===-1){w(new l("Unsupported protocol "+N+":",l.ERR_BAD_REQUEST,h));return}k.send(v)})},Ph}var St=Rt,p1=O2,g1=Xi,f7=A2,h7=zd,p7=Z9,m1=Im,g7=N2,m7={"Content-Type":"application/x-www-form-urlencoded"};function y1(t,e){!St.isUndefined(t)&&St.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}function y7(){var t;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(t=h1()),t}function v7(t,e,n){if(St.isString(t))try{return(e||JSON.parse)(t),St.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}var Xd={transitional:f7,adapter:y7(),transformRequest:[function(e,n){p1(n,"Accept"),p1(n,"Content-Type");var r=n&&n["Content-Type"]||"",i=r.indexOf("application/json")>-1,s=St.isObject(e);s&&St.isHTMLForm(e)&&(e=new FormData(e));var o=St.isFormData(e);if(o)return i?JSON.stringify(g7(e)):e;if(St.isArrayBuffer(e)||St.isBuffer(e)||St.isStream(e)||St.isFile(e)||St.isBlob(e))return e;if(St.isArrayBufferView(e))return e.buffer;if(St.isURLSearchParams(e))return y1(n,"application/x-www-form-urlencoded;charset=utf-8"),e.toString();var a;if(s){if(r.indexOf("application/x-www-form-urlencoded")!==-1)return p7(e,this.formSerializer).toString();if((a=St.isFileList(e))||r.indexOf("multipart/form-data")>-1){var l=this.env&&this.env.FormData;return h7(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return s||i?(y1(n,"application/json"),v7(e)):e}],transformResponse:[function(e){var n=this.transitional||Xd.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(e&&St.isString(e)&&(r&&!this.responseType||i)){var s=n&&n.silentJSONParsing,o=!s&&i;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?g1.from(a,g1.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:m1.classes.FormData,Blob:m1.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};St.forEach(["delete","get","head"],function(e){Xd.headers[e]={}});St.forEach(["post","put","patch"],function(e){Xd.headers[e]=St.merge(m7)});var Sm=Xd,w7=Rt,b7=Sm,x7=function(e,n,r,i){var s=this||b7;return w7.forEach(i,function(a){e=a.call(s,e,n,r)}),e},Oh,v1;function M2(){return v1||(v1=1,Oh=function(e){return!!(e&&e.__CANCEL__)}),Oh}var w1=Rt,Ah=x7,k7=M2(),I7=Sm,S7=Gd(),b1=O2;function Nh(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new S7}var E7=function(e){Nh(e),e.headers=e.headers||{},e.data=Ah.call(e,e.data,e.headers,null,e.transformRequest),b1(e.headers,"Accept"),b1(e.headers,"Content-Type"),e.headers=w1.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),w1.forEach(["delete","get","head","post","put","patch","common"],function(i){delete e.headers[i]});var n=e.adapter||I7.adapter;return n(e).then(function(i){return Nh(e),i.data=Ah.call(e,i.data,i.headers,i.status,e.transformResponse),i},function(i){return k7(i)||(Nh(e),i&&i.response&&(i.response.data=Ah.call(e,i.response.data,i.response.headers,i.response.status,e.transformResponse))),Promise.reject(i)})},zt=Rt,B2=function(e,n){n=n||{};var r={};function i(u,d){return zt.isPlainObject(u)&&zt.isPlainObject(d)?zt.merge(u,d):zt.isEmptyObject(d)?zt.merge({},u):zt.isPlainObject(d)?zt.merge({},d):zt.isArray(d)?d.slice():d}function s(u){if(zt.isUndefined(n[u])){if(!zt.isUndefined(e[u]))return i(void 0,e[u])}else return i(e[u],n[u])}function o(u){if(!zt.isUndefined(n[u]))return i(void 0,n[u])}function a(u){if(zt.isUndefined(n[u])){if(!zt.isUndefined(e[u]))return i(void 0,e[u])}else return i(void 0,n[u])}function l(u){if(u in n)return i(e[u],n[u]);if(u in e)return i(void 0,e[u])}var c={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:l};return zt.forEach(Object.keys(e).concat(Object.keys(n)),function(d){var f=c[d]||s,h=f(d);zt.isUndefined(h)&&f!==l||(r[d]=h)}),r},Ch,x1;function L2(){return x1||(x1=1,Ch={version:"0.29.0"}),Ch}var T7=L2().version,Kr=Xi,Em={};["object","boolean","number","function","string","symbol"].forEach(function(t,e){Em[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});var k1={};Em.transitional=function(e,n,r){function i(s,o){return"[Axios v"+T7+"] Transitional option '"+s+"'"+o+(r?". "+r:"")}return function(s,o,a){if(e===!1)throw new Kr(i(o," has been removed"+(n?" in "+n:"")),Kr.ERR_DEPRECATED);return n&&!k1[o]&&(k1[o]=!0,console.warn(i(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(s,o,a):!0}};function R7(t,e,n){if(typeof t!="object")throw new Kr("options must be an object",Kr.ERR_BAD_OPTION_VALUE);for(var r=Object.keys(t),i=r.length;i-- >0;){var s=r[i],o=e[s];if(o){var a=t[s],l=a===void 0||o(a,s,t);if(l!==!0)throw new Kr("option "+s+" must be "+l,Kr.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Kr("Unknown option "+s,Kr.ERR_BAD_OPTION)}}var _7={assertOptions:R7,validators:Em},Tm=Rt,P7=P2,I1=j9,S1=E7,Yd=B2,O7=C2,p0=_7,Wr=p0.validators;function Gs(t){this.defaults=t,this.interceptors={request:new I1,response:new I1}}Gs.prototype.request=function(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=Yd(this.defaults,n),n.method?n.method=n.method.toLowerCase():this.defaults.method?n.method=this.defaults.method.toLowerCase():n.method="get";var r=n.transitional;r!==void 0&&p0.assertOptions(r,{silentJSONParsing:Wr.transitional(Wr.boolean),forcedJSONParsing:Wr.transitional(Wr.boolean),clarifyTimeoutError:Wr.transitional(Wr.boolean)},!1);var i=n.paramsSerializer;i!=null&&(Tm.isFunction(i)?n.paramsSerializer={serialize:i}:p0.assertOptions(i,{encode:Wr.function,serialize:Wr.function},!0));var s=[],o=!0;this.interceptors.request.forEach(function(p){typeof p.runWhen=="function"&&p.runWhen(n)===!1||(o=o&&p.synchronous,s.unshift(p.fulfilled,p.rejected))});var a=[];this.interceptors.response.forEach(function(p){a.push(p.fulfilled,p.rejected)});var l;if(!o){var c=[S1,void 0];for(Array.prototype.unshift.apply(c,s),c=c.concat(a),l=Promise.resolve(n);c.length;)l=l.then(c.shift(),c.shift());return l}for(var u=n;s.length;){var d=s.shift(),f=s.shift();try{u=d(u)}catch(h){f(h);break}}try{l=S1(u)}catch(h){return Promise.reject(h)}for(;a.length;)l=l.then(a.shift(),a.shift());return l};Gs.prototype.getUri=function(e){e=Yd(this.defaults,e);var n=O7(e.baseURL,e.url);return P7(n,e.params,e.paramsSerializer)};Tm.forEach(["delete","get","head","options"],function(e){Gs.prototype[e]=function(n,r){return this.request(Yd(r||{},{method:e,url:n,data:(r||{}).data}))}});Tm.forEach(["post","put","patch"],function(e){function n(r){return function(s,o,a){return this.request(Yd(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}Gs.prototype[e]=n(),Gs.prototype[e+"Form"]=n(!0)});var A7=Gs,Mh,E1;function N7(){if(E1)return Mh;E1=1;var t=Gd();function e(n){if(typeof n!="function")throw new TypeError("executor must be a function.");var r;this.promise=new Promise(function(o){r=o});var i=this;this.promise.then(function(s){if(i._listeners){for(var o=i._listeners.length;o-- >0;)i._listeners[o](s);i._listeners=null}}),this.promise.then=function(s){var o,a=new Promise(function(l){i.subscribe(l),o=l}).then(s);return a.cancel=function(){i.unsubscribe(o)},a},n(function(o,a,l){i.reason||(i.reason=new t(o,a,l),r(i.reason))})}return e.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},e.prototype.subscribe=function(r){if(this.reason){r(this.reason);return}this._listeners?this._listeners.push(r):this._listeners=[r]},e.prototype.unsubscribe=function(r){if(this._listeners){var i=this._listeners.indexOf(r);i!==-1&&this._listeners.splice(i,1)}},e.source=function(){var r,i=new e(function(o){r=o});return{token:i,cancel:r}},Mh=e,Mh}var Bh,T1;function C7(){return T1||(T1=1,Bh=function(e){return function(r){return e.apply(null,r)}}),Bh}var Lh,R1;function M7(){if(R1)return Lh;R1=1;var t=Rt;return Lh=function(n){return t.isObject(n)&&n.isAxiosError===!0},Lh}var g0=Rt,B7=v2,xl=A7,L7=B2,D7=Sm,F7=N2;function D2(t){var e=new xl(t),n=B7(xl.prototype.request,e);return g0.extend(n,xl.prototype,e),g0.extend(n,e),n.create=function(i){return D2(L7(t,i))},n}var Qt=D2(D7);Qt.Axios=xl;Qt.CanceledError=Gd();Qt.CancelToken=N7();Qt.isCancel=M2();Qt.VERSION=L2().version;Qt.toFormData=zd;Qt.AxiosError=Xi;Qt.Cancel=Qt.CanceledError;Qt.all=function(e){return Promise.all(e)};Qt.spread=C7();Qt.isAxiosError=M7();Qt.formToJSON=function(t){return F7(g0.isHTMLForm(t)?new FormData(t):t)};vm.exports=Qt;vm.exports.default=Qt;var $7=vm.exports,W7=$7,_1;function V7(){if(_1)return as;_1=1;var t=Ee&&Ee.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(as,"__esModule",{value:!0}),as.updateChaintracksFiatExchangeRates=r,as.updateExchangeratesapi=i,as.getExchangeRatesIo=s;const e=ve(),n=t(W7);async function r(o,a){const l=a.chaintracksFiatExchangeRatesUrl;if(!l)throw new e.sdk.WERR_MISSING_PARAMETER("options.chaintracksFiatExchangeRatesUrl");const c=await n.default.get(l);if(c.status!==200||!c.data||c.data.status!="success")throw new e.sdk.WERR_BAD_REQUEST(`${l} returned status ${c.status}`);const u=c.data.value;return u.timestamp=new Date(u.timestamp),u}async function i(o,a){if(!a.exchangeratesapiKey)throw new e.sdk.WERR_MISSING_PARAMETER("options.exchangeratesapiKey");const l=await s(a.exchangeratesapiKey);if(!l.success)throw new e.sdk.WERR_BAD_REQUEST(`getExchangeRatesIo returned success ${l.success}`);if(!l.rates.USD||!l.rates[l.base])throw new e.sdk.WERR_BAD_REQUEST("getExchangeRatesIo missing rates for 'USD' or base");const c={timestamp:new Date(l.timestamp*1e3),base:"USD",rates:{}},u=l.rates[l.base]/l.rates.USD;let d=0;for(const[f,h]of Object.entries(l.rates))o.indexOf(f)>-1&&(c.rates[f]=h*u,d++);if(d!==o.length)throw new e.sdk.WERR_BAD_REQUEST("getExchangeRatesIo failed to update all target currencies");return c}async function s(o){const a=`http://api.exchangeratesapi.io/v1/latest?access_key=${o}`,l=await n.default.get(a);if(l.status!==200||!l.data)throw new e.sdk.WERR_BAD_REQUEST(`getExchangeRatesIo returned status ${l.status}`);return l.data}return as}var zo={},P1;function U7(){if(P1)return zo;P1=1,Object.defineProperty(zo,"__esModule",{value:!0}),zo.ARC=void 0;const t=Xe,e=ve();function n(){return`ts-sdk-${t.Utils.toHex((0,t.Random)(16))}`}let r=class{constructor(s,o){if(this.URL=s,typeof o=="string")this.apiKey=o,this.httpClient=(0,t.defaultHttpClient)(),this.deploymentId=n(),this.callbackToken=void 0,this.callbackUrl=void 0;else{const a=o??{},{apiKey:l,deploymentId:c,httpClient:u,callbackToken:d,callbackUrl:f,headers:h}=a;this.apiKey=l,this.httpClient=u??(0,t.defaultHttpClient)(),this.deploymentId=c??n(),this.callbackToken=d,this.callbackUrl=f,this.headers=h}}requestHeaders(){const s={"Content-Type":"application/json","XDeployment-ID":this.deploymentId};if(this.apiKey!=null&&this.apiKey!==""&&(s.Authorization=`Bearer ${this.apiKey}`),this.callbackUrl!=null&&this.callbackUrl!==""&&(s["X-CallbackUrl"]=this.callbackUrl),this.callbackToken!=null&&this.callbackToken!==""&&(s["X-CallbackToken"]=this.callbackToken),this.headers!=null)for(const o in this.headers)s[o]=this.headers[o];return s}async postRawTx(s,o){let a=t.Utils.toHex((0,e.doubleSha256BE)(t.Utils.toArray(s,"hex")));o?a=o.slice(-1)[0]:o=[a];const l={method:"POST",headers:this.requestHeaders(),data:{rawTx:s}},c={txid:a,status:"success",notes:[]},u=`${this.URL}/v1/tx`,d=()=>({name:"ARCv1tx",when:new Date().toISOString()}),f=()=>({...d(),rawTx:s,txids:o.join(","),url:u});try{const h=await this.httpClient.request(u,l),{txid:p,extraInfo:g,txStatus:w,competingTxs:v}=h.data,m=()=>({txid:p,extraInfo:g,txStatus:w,competingTxs:v==null?void 0:v.join(",")});if(h.ok)c.data=`${w} ${g}`,c.txid!==p&&(c.data+=` txid altered from ${c.txid} to ${p}`),c.txid=p,w==="DOUBLE_SPEND_ATTEMPTED"?(c.status="error",c.doubleSpend=!0,c.competingTxs=v,c.notes.push({...f(),...m(),what:"postRawTxDoubleSpend"})):c.notes.push({...d(),...m(),what:"postRawTxSuccess"});else if(typeof h=="string")c.notes.push({...d(),what:"postRawTxString",response:h});else{c.status="error";const y={...d(),...f(),...m(),what:"postRawTxError"},b={};c.data=b;const x=typeof h.status;x==="number"||x==="string"?(y.status=h.status,b.status=h.status.toString()):(y.status=x,b.status="ERR_UNKNOWN");let I=h.data;if(I&&typeof I=="string"){y.data=h.data.slice(0,128);try{I=JSON.parse(I)}catch{}}else I&&typeof I=="object"&&(b.more=I,b.detail=I.detail,typeof b.detail!="string"&&(b.detail=void 0),b.detail&&(y.detail=b.detail));c.notes.push(y)}}catch(h){const p=e.sdk.WalletError.fromUnknown(h);c.status="error",c.data=`${p.code} ${p.message}`,c.notes.push({...f(),what:"postRawTxCatch",code:p.code,description:p.description})}return c}async postBeef(s,o){const a={name:"ARC",status:"success",txidResults:[],notes:[]},l=()=>({name:"ARCpostBeef",when:new Date().toISOString()});s.version===t.BEEF_V2&&s.txs.every(d=>!d.isTxidOnly)&&(s.version=t.BEEF_V1,a.notes.push({...l(),what:"postBeefV2ToV1"}));const c=s.toHex(),u=await this.postRawTx(c,o);a.status=u.status,a.txidResults=[u];for(const d of o){if(u.txid===d)continue;const f={txid:d,status:"success",notes:[]},h=await this.getTxData(d);h.txid!==d?(f.status="error",f.data="internal error",f.notes.push({...l(),what:"postBeefGetTxDataInternal",txid:d,returnedTxid:h.txid})):h.txStatus==="SEEN_ON_NETWORK"||h.txStatus==="STORED"?(f.data=h.txStatus,f.notes.push({...l(),what:"postBeefGetTxDataSuccess",txid:d,txStatus:h.txStatus})):(f.status="error",f.data=h,f.notes.push({...l(),what:"postBeefGetTxDataError",txid:d,txStatus:h.txStatus})),a.txidResults.push(f),a.status==="success"&&f.status==="error"&&(a.status="error")}return a}async getTxData(s){const o={method:"GET",headers:this.requestHeaders()};return(await this.httpClient.request(`${this.URL}/v1/tx/${s}`,o)).data}};return zo.ARC=r,zo}var Go={},O1;function H7(){if(O1)return Go;O1=1,Object.defineProperty(Go,"__esModule",{value:!0}),Go.Bitails=void 0;const t=Xe,e=ve();let n=class{constructor(i="main",s={}){const{apiKey:o,httpClient:a}=s;this.chain=i,this.URL=i==="main"?"https://api.bitails.io/":"https://test-api.bitails.io/",this.httpClient=a??(0,t.defaultHttpClient)(),this.apiKey=o??""}getHttpHeaders(){const i={Accept:"application/json"};return typeof this.apiKey=="string"&&this.apiKey.trim()!==""&&(i.Authorization=this.apiKey),i}async postBeef(i,s){const o=()=>({name:"BitailsPostBeef",when:new Date().toISOString()}),a=()=>({...o(),beef:i.toHex(),txids:s.join(",")}),l={...o(),what:"postBeef"},c=[];for(const d of s){const f=t.Utils.toHex(i.findTxid(d).rawTx);c.push(f)}const u=await this.postRaws(c);return u.notes.unshift(l),u.status!=="success"?u.notes.push({...a(),what:"postBeefError"}):u.notes.push({...o(),what:"postBeefSuccess"}),u}async postRaws(i){const s={name:"BitailsPostRaws",status:"success",txidResults:[],notes:[]};for(const h of i){const p=t.Utils.toHex((0,e.doubleSha256BE)(t.Utils.toArray(h,"hex")));s.txidResults.push({txid:p,status:"success",notes:[]})}const o=this.getHttpHeaders();o["Content-Type"]="application/json";const l={method:"POST",headers:o,data:{raws:i}},c=`${this.URL}tx/broadcast/multi`,u=()=>({name:"BitailsPostRawTx",when:new Date().toISOString()}),d=()=>({...u(),raws:i.join(","),txids:s.txidResults.map(h=>h.txid).join(","),url:c}),f=5;for(let h=0;h<f;h++){try{const p=await this.httpClient.request(c,l);if(p.statusText==="Too Many Requests"&&h<2){s.notes.push({...u(),what:"postRawsRateLimit"}),await(0,e.wait)(2e3);continue}if(p.ok){const g=p.data;for(const w of s.txidResults){const v=g.find(m=>m.txid=w.txid);v?v.error?(w.status="error",w.notes.push({...d(),what:"postRawsError",txid:w.txid,code:v.error.code,message:v.error.message})):w.notes.push({...u(),what:"postRawsSuccess"}):(w.status="error",w.notes.push({...d(),what:"postRawsMissingResult",txid:w.txid})),w.status!=="success"&&s.status==="success"&&(s.status="error")}}else{s.status="error";const g={...d(),what:"postRawsError"};s.notes.push(g)}}catch(p){s.status="error";const g=e.sdk.WalletError.fromUnknown(p);s.notes.push({...d(),what:"postRawsCatch",code:g.code,description:g.description})}return s}return s.status="error",s.notes.push({...d(),what:"postRawsRetryLimit",retryLimit:f}),s}async getMerklePath(i,s){const o={name:"BitailsTsc",notes:[]},a=`${this.URL}/tx/${i}/proof/tsc`,l=()=>({name:"BitailsProofTsc",when:new Date().toISOString(),txid:i,url:a}),u={method:"GET",headers:this.getHttpHeaders()};for(let d=0;d<2;d++){try{const f=await this.httpClient.request(a,u),h=()=>({...l(),txid:i,url:a,status:f.status,statusText:f.statusText});if(f.statusText==="Too Many Requests"&&d<2){o.notes.push({...h(),what:"getMerklePathRetry"}),await(0,e.wait)(2e3);continue}if(f.status===404&&f.statusText==="Not Found")o.notes.push({...h(),what:"getMerklePathNotFound"});else if(!f.ok||f.status!==200||f.statusText!=="OK")o.notes.push({...h(),what:"getMerklePathBadStatus"});else if(!f.data)o.notes.push({...h(),what:"getMerklePathNoData"});else{const p=f.data,g=await s.hashToHeader(p.target);if(g){const w={index:p.index,nodes:p.nodes,height:g.height};o.merklePath=(0,e.convertProofToMerklePath)(i,w),o.header=g,o.notes.push({...h(),what:"getMerklePathSuccess"})}else o.notes.push({...h(),what:"getMerklePathNoHeader",target:p.target})}}catch(f){const h=e.sdk.WalletError.fromUnknown(f);o.notes.push({...l(),what:"getMerklePathError",code:h.code,description:h.description}),o.error=h}return o}return o.notes.push({...l(),what:"getMerklePathInternal"}),o}};return Go.Bitails=n,Go}var A1;function q7(){if(A1)return yi;A1=1,Object.defineProperty(yi,"__esModule",{value:!0}),yi.Services=void 0,yi.validateScriptHash=u,yi.toBinaryBaseBlockHeader=d;const t=Xe,e=ve(),n=jd,r=r9(),i=y2(),s=o9(),o=V7(),a=U7(),l=H7();let c=class F2{static createDefaultOptions(h){return(0,r.createDefaultWalletServicesOptions)(h)}constructor(h){this.targetCurrencies=["USD","GBP","EUR"],this.chain=typeof h=="string"?h:h.chain,this.options=typeof h=="string"?F2.createDefaultOptions(this.chain):h,this.whatsonchain=new s.WhatsOnChain(this.chain,{apiKey:this.options.taalApiKey}),this.arc=new a.ARC(this.options.arcUrl,this.options.arcConfig),this.bitails=new l.Bitails(this.chain),this.getMerklePathServices=new n.ServiceCollection().add({name:"WhatsOnChain",service:this.whatsonchain.getMerklePath.bind(this.whatsonchain)}),this.getRawTxServices=new n.ServiceCollection().add({name:"WhatsOnChain",service:this.whatsonchain.getRawTxResult.bind(this.whatsonchain)}),this.postBeefServices=new n.ServiceCollection().add({name:"TaalArcBeef",service:this.arc.postBeef.bind(this.arc)}).add({name:"WhatsOnChain",service:this.whatsonchain.postBeef.bind(this.whatsonchain)}),this.getUtxoStatusServices=new n.ServiceCollection().add({name:"WhatsOnChain",service:this.whatsonchain.getUtxoStatus.bind(this.whatsonchain)}),this.updateFiatExchangeRateServices=new n.ServiceCollection().add({name:"ChaintracksService",service:o.updateChaintracksFiatExchangeRates}).add({name:"exchangeratesapi",service:o.updateExchangeratesapi})}async getChainTracker(){if(!this.options.chaintracks)throw new e.sdk.WERR_INVALID_PARAMETER("options.chaintracks","valid to enable 'getChainTracker' service.");return new i.ChaintracksChainTracker(this.chain,this.options.chaintracks)}async getBsvExchangeRate(){return this.options.bsvExchangeRate=await this.whatsonchain.updateBsvExchangeRate(this.options.bsvExchangeRate,this.options.bsvUpdateMsecs),this.options.bsvExchangeRate.rate}async getFiatExchangeRate(h,p){const g=await this.updateFiatExchangeRates(this.options.fiatExchangeRates,this.options.fiatUpdateMsecs);return this.options.fiatExchangeRates=g,p||(p="USD"),g.rates[h]/g.rates[p]}get getProofsCount(){return this.getMerklePathServices.count}get getRawTxsCount(){return this.getRawTxServices.count}get postBeefServicesCount(){return this.postBeefServices.count}get getUtxoStatsCount(){return this.getUtxoStatusServices.count}async getUtxoStatus(h,p,g){const w=this.getUtxoStatusServices;g&&w.next();let v={name:"<noservices>",status:"error",error:new e.sdk.WERR_INTERNAL("No services available."),details:[]};for(let m=0;m<2;m++){for(let y=0;y<w.count;y++){const b=w.service,x=await b(h,p);if(x.status==="success"){v=x;break}w.next()}if(v.status==="success")break;await(0,e.wait)(2e3)}return v}async postBeef(h,p){return await Promise.all(this.postBeefServices.allServices.map(async w=>await w(h,p)))}async getRawTx(h,p){p&&this.getRawTxServices.next();const g={txid:h};for(let w=0;w<this.getRawTxServices.count;w++){const v=this.getRawTxServices.service,m=await v(h,this.chain);if(m.rawTx){const y=(0,e.asString)((0,e.doubleSha256BE)(m.rawTx));if(y===(0,e.asString)(h)){g.rawTx=m.rawTx,g.name=m.name,g.error=void 0;break}m.error=new e.sdk.WERR_INTERNAL(`computed txid ${y} doesn't match requested value ${h}`),m.rawTx=void 0}m.error&&!g.error&&!g.rawTx&&(g.error=m.error),this.getRawTxServices.next()}return g}async invokeChaintracksWithRetry(h){if(!this.options.chaintracks)throw new e.sdk.WERR_INVALID_PARAMETER("options.chaintracks","valid for this service operation.");for(let p=0;p<3;p++)try{return await h()}catch(g){if(e.sdk.WalletError.fromUnknown(g).code!="ECONNRESET")throw g}throw new e.sdk.WERR_INVALID_OPERATION("hashToHeader service unavailable")}async getHeaderForHeight(h){const p=async()=>{const g=await this.options.chaintracks.findHeaderForHeight(h);if(!g)throw new e.sdk.WERR_INVALID_PARAMETER("hash",`valid height '${h}' on mined chain ${this.chain}`);return d(g)};return this.invokeChaintracksWithRetry(p)}async getHeight(){const h=async()=>await this.options.chaintracks.currentHeight();return this.invokeChaintracksWithRetry(h)}async hashToHeader(h){const p=async()=>{const g=await this.options.chaintracks.findHeaderForBlockHash(h);if(!g)throw new e.sdk.WERR_INVALID_PARAMETER("hash",`valid blockhash '${h}' on mined chain ${this.chain}`);return g};return this.invokeChaintracksWithRetry(p)}async getMerklePath(h,p){p&&this.getMerklePathServices.next();const g={notes:[]};for(let w=0;w<this.getMerklePathServices.count;w++){const v=this.getMerklePathServices.service,m=await v(h,this);if(m.notes&&g.notes.push(...m.notes),g.name||(g.name=m.name),m.merklePath){g.merklePath=m.merklePath,g.header=m.header,g.name=m.name,g.error=void 0;break}else m.error&&!g.error&&(g.error=m.error);this.getMerklePathServices.next()}return g}async updateFiatExchangeRates(h,p){p||(p=1e3*60*15);const g=new Date(Date.now()-p);if(h&&(p||(p=1e3*60*15),h.timestamp>g))return h;const w=this.updateFiatExchangeRateServices.clone();let v;for(let m=0;m<w.count;m++){const y=w.service;try{const b=await y(this.targetCurrencies,this.options);if(this.targetCurrencies.every(x=>typeof b.rates[x]=="number")){v=b;break}}catch(b){const x=e.sdk.WalletError.fromUnknown(b);console.error(`updateFiatExchangeRates servcice name ${y.name} error ${x.message}`)}w.next()}if(!v){if(console.error("Failed to update fiat exchange rates."),!h)throw new e.sdk.WERR_INTERNAL;return h}return v}async nLockTimeIsFinal(h){let w;if(typeof h=="number")w=h;else if(typeof h=="string"?h=t.Transaction.fromHex(h):Array.isArray(h)&&(h=t.Transaction.fromBinary(h)),h instanceof t.Transaction){if(h.inputs.every(m=>m.sequence===4294967295))return!0;w=h.lockTime}else throw new e.sdk.WERR_INTERNAL("Should be either @bsv/sdk Transaction or babbage-bsv Transaction");if(w>=5e8){const m=Math.floor(Date.now()/1e3);return w<m}const v=await this.getHeight();return w<v}};yi.Services=c;function u(f,h){let p=(0,e.asArray)(f);switch(h||(p.length===32?h="hashLE":h="script"),h){case"hashBE":break;case"hashLE":p=p.reverse();break;case"script":p=(0,e.sha256Hash)(p).reverse();break;default:throw new e.sdk.WERR_INVALID_PARAMETER("outputFormat",`not be ${h}`)}return(0,e.asString)(p)}function d(f){const h=new t.Utils.Writer;return h.writeUInt32BE(f.version),h.writeReverse((0,e.asArray)(f.previousHash)),h.writeReverse((0,e.asArray)(f.merkleRoot)),h.writeUInt32BE(f.time),h.writeUInt32BE(f.bits),h.writeUInt32BE(f.nonce),h.toArray()}return yi}var Xo={},Qd={},nr={};Object.defineProperty(nr,"__esModule",{value:!0});nr.WalletMonitorTask=void 0;class j7{constructor(e,n){this.monitor=e,this.name=n,this.lastRunMsecsSinceEpoch=0,this.storage=e.storage}async asyncSetup(){}}nr.WalletMonitorTask=j7;Object.defineProperty(Qd,"__esModule",{value:!0});Qd.TaskPurge=void 0;const K7=nr;class Mi extends K7.WalletMonitorTask{constructor(e,n,r=0){super(e,Mi.taskName),this.params=n,this.triggerMsecs=r}trigger(e){return{run:Mi.checkNow||this.triggerMsecs>0&&e-this.lastRunMsecsSinceEpoch>this.triggerMsecs}}async runTask(){let e="";Mi.checkNow=!1;const n=await this.storage.runAsStorageProvider(async r=>await r.purgeData(this.params));return n.count>0&&(e=`${n.count} records updated or deleted.
${n.log}`),e}}Qd.TaskPurge=Mi;Mi.taskName="Purge";Mi.checkNow=!1;var Jd={};Object.defineProperty(Jd,"__esModule",{value:!0});Jd.TaskReviewStatus=void 0;const z7=nr;class mc extends z7.WalletMonitorTask{constructor(e,n=1e3*60*15,r=1e3*60*5){super(e,mc.taskName),this.triggerMsecs=n,this.agedMsecs=r}trigger(e){return{run:this.triggerMsecs>0&&e-this.lastRunMsecsSinceEpoch>this.triggerMsecs}}async runTask(){let e="";const n=new Date(Date.now()-this.agedMsecs),r=await this.storage.runAsStorageProvider(async i=>await i.reviewStatus({agedLimit:n}));return r.log.length>0&&(e+=`${r.log}`),e}}Jd.TaskReviewStatus=mc;mc.taskName="ReviewStatus";mc.checkNow=!1;var Zd={};Object.defineProperty(Zd,"__esModule",{value:!0});Zd.TaskSyncWhenIdle=void 0;const G7=nr;class ef extends G7.WalletMonitorTask{constructor(e,n=1e3*60*1){super(e,ef.taskName),this.triggerMsecs=n}trigger(e){return this.storage,{run:!1}}async runTask(){return""}}Zd.TaskSyncWhenIdle=ef;ef.taskName="SyncWhenIdle";var tf={};Object.defineProperty(tf,"__esModule",{value:!0});tf.TaskFailAbandoned=void 0;const X7=nr;class nf extends X7.WalletMonitorTask{constructor(e,n=1e3*60*5){super(e,nf.taskName),this.triggerMsecs=n}trigger(e){return{run:e>this.lastRunMsecsSinceEpoch+this.triggerMsecs}}async runTask(){let e="",r=0;for(;;){const i=new Date,s=new Date(i.getTime()-this.monitor.options.abandonedMsecs);if(await this.storage.runAsStorageProvider(async a=>{const c=(await a.findTransactions({partial:{},status:["unprocessed","unsigned"],paged:{limit:100,offset:r}})).filter(u=>u.updated_at&&u.updated_at<s);for(const u of c)await a.updateTransactionStatus("failed",u.transactionId),e+=`updated tx ${u.transactionId} status to 'failed'
`;return c.length<100}))break;r+=100}return e}}tf.TaskFailAbandoned=nf;nf.taskName="FailAbandoned";var Yo={},N1;function Y7(){if(N1)return Yo;N1=1,Object.defineProperty(Yo,"__esModule",{value:!0}),Yo.TaskCheckForProofs=void 0;const t=ve(),e=nr;let n=class sa extends e.WalletMonitorTask{constructor(i,s=0){super(i,sa.taskName),this.triggerMsecs=s}trigger(i){return{run:sa.checkNow||this.triggerMsecs>0&&i-this.lastRunMsecsSinceEpoch>this.triggerMsecs}}async runTask(){let i="";const s=sa.checkNow;sa.checkNow=!1;const o=100;let a=0;for(;;){const l=await this.storage.findProvenTxReqs({partial:{},status:["callback","unmined","nosend","sending","unknown","unconfirmed"],paged:{limit:o,offset:a}});if(l.length===0)break;i+=`${l.length} reqs with status 'callback', 'unmined', 'nosend', 'sending', 'unknown', or 'unconfirmed'
`;const c=await this.getProofs(l,2,s);if(i+=`${c.log}
`,l.length<o)break;a+=o}return i}async getProofs(i,s=0,o=!1,a=!1){const l=[],c=[];let u="";for(const d of i){if(u+=" ".repeat(s),u+=`reqId ${d.provenTxReqId} txid ${d.txid}: `,!a&&d.status!=="callback"&&d.status!=="unmined"&&d.status!=="unknown"&&d.status!=="unconfirmed"&&d.status!=="nosend"&&d.status!=="sending"){u+=`status of '${d.status}' is not ready to be proven.
`;continue}const f=new t.EntityProvenTxReq(d);if(Number.isInteger(f.provenTxId)){u+=`Already linked to provenTxId ${f.provenTxId}.
`,f.notified=!1,f.status="completed",await f.updateStorageDynamicProperties(this.storage),l.push(d);continue}u+=`
`;let h=!1;if(f.rawTx&&(0,t.asString)((0,t.doubleSha256BE)(f.rawTx))===f.txid&&(h=!0),!h){u+=` rawTx doesn't hash to txid. status => invalid.
`,f.notified=!1,f.status="invalid",await f.updateStorageDynamicProperties(this.storage),c.push(d);continue}const p=this.monitor.chain==="main"?this.monitor.options.unprovenAttemptsLimitMain:this.monitor.options.unprovenAttemptsLimitTest;if(!a&&f.attempts>p){u+=` too many failed attempts ${f.attempts}
`,f.notified=!1,f.status="invalid",await f.updateStorageDynamicProperties(this.storage),c.push(d);continue}const g=new Date;let w,v;if(w=await this.monitor.services.getMerklePath(f.txid),v=await t.EntityProvenTx.fromReq(f,w,o&&f.status!=="nosend"),v){await f.updateStorageDynamicProperties(this.storage),await f.refreshFromStorage(this.storage);const{provenTxReqId:m,status:y,txid:b,attempts:x,history:I}=f.toApi(),{index:k,height:S,blockHash:P,merklePath:R,merkleRoot:B}=v.toApi(),T=await this.storage.runAsStorageProvider(async N=>await N.updateProvenTxReqWithNewProvenTx({provenTxReqId:m,status:y,txid:b,attempts:x,history:I,index:k,height:S,blockHash:P,merklePath:R,merkleRoot:B}));f.status=T.status,f.apiHistory=T.history,f.provenTxId=T.provenTxId,f.notified=!0}else o&&f.status!=="nosend"&&f.attempts++;await f.updateStorageDynamicProperties(this.storage),await f.refreshFromStorage(this.storage),u+=f.historyPretty(g,s+2)+`
`,f.status==="completed"&&l.push(f.api),f.status==="invalid"&&c.push(f.api)}return{proven:l,invalid:c,log:u}}};return Yo.TaskCheckForProofs=n,n.taskName="CheckForProofs",n.checkNow=!1,Yo}var Qo={},C1;function Q7(){if(C1)return Qo;C1=1,Object.defineProperty(Qo,"__esModule",{value:!0}),Qo.TaskSendWaiting=void 0;const t=p2(),e=fm(),n=nr,r=QI();let i=class $2 extends n.WalletMonitorTask{constructor(o,a=1e3*60*5,l=0){super(o,$2.taskName),this.triggerMsecs=a,this.agedMsecs=l}trigger(o){return{run:o>this.lastRunMsecsSinceEpoch+this.triggerMsecs}}async runTask(){let o="",l=0;const c=new Date(Date.now()-this.agedMsecs);for(;;){const u=await this.storage.findProvenTxReqs({partial:{},status:["unsent"],paged:{limit:100,offset:l}});if(u.length===0)break;o+=`${u.length} reqs with status 'unsent'
`;const d=u.filter(f=>(0,e.verifyTruthy)(f.updated_at)<c);if(o+=`  Of those reqs, ${d.length} where last updated before ${c.toISOString()}.
`,o+=await this.processUnsent(d,2),u.length<100)break;l+=100}return o}async processUnsent(o,a=0){let l="";for(let c=0;c<o.length;c++){const u=o[c];if(l+=" ".repeat(a),l+=`${c} reqId=${u.provenTxReqId} attempts=${u.attempts} txid=${u.txid}: 
`,u.status!=="unsent"){l+=`  status now ${u.status}
`;continue}const d=new t.EntityProvenTxReq(u),f=[];if(d.batch){const p=await this.storage.findProvenTxReqs({partial:{batch:d.batch,status:"unsent"}});for(const g of p){const w=o.findIndex(v=>v.provenTxReqId===g.provenTxReqId);w>-1&&o.slice(w,w+1),f.push(new t.EntityProvenTxReq(g))}}else f.push(d);const h=await this.storage.runAsStorageProvider(async p=>(0,r.attemptToPostReqsToNetwork)(p,f));l+=h.log}return l}};return Qo.TaskSendWaiting=i,i.taskName="SendWaiting",Qo}var rf={};Object.defineProperty(rf,"__esModule",{value:!0});rf.TaskClock=void 0;const J7=nr;class sf extends J7.WalletMonitorTask{constructor(e,n=1*e.oneSecond){super(e,sf.taskName),this.triggerMsecs=n,this.nextMinute=this.getNextMinute()}trigger(e){return this.storage,{run:Date.now()>this.nextMinute}}async runTask(){const e=`${new Date(this.nextMinute).toISOString()}`;return this.nextMinute=this.getNextMinute(),e}getNextMinute(){return Math.ceil(Date.now()/this.monitor.oneMinute)*this.monitor.oneMinute}}rf.TaskClock=sf;sf.taskName="Clock";var of={};Object.defineProperty(of,"__esModule",{value:!0});of.TaskNewHeader=void 0;const Z7=nr;class af extends Z7.WalletMonitorTask{constructor(e,n=1*e.oneMinute){super(e,af.taskName),this.triggerMsecs=n}async getHeader(){return await this.monitor.chaintracks.findChainTipHeader()}trigger(e){return{run:!0}}async runTask(){let e="";const n=this.header;this.header=await this.getHeader();let r=!0;if(!n)e=`first header: ${this.header.height} ${this.header.hash}`;else if(n.height<this.header.height){const i=this.header.height-n.height-1,s=i>0?` SKIPPED ${i}`:"";e=`new header: ${this.header.height} ${this.header.hash}${s}`}else n.height===this.header.height&&n.hash!=this.header.hash?e=`reorg header: ${this.header.height} ${this.header.hash}`:r=!1;return r&&this.monitor.processNewBlockHeader(this.header),e}}of.TaskNewHeader=af;af.taskName="NewHeader";var M1;function eM(){if(M1)return Xo;M1=1,Object.defineProperty(Xo,"__esModule",{value:!0}),Xo.Monitor=void 0;const t=ve(),e=Qd,n=Jd,r=Zd,i=tf,s=Y7(),o=Q7(),a=rf,l=of;let c=class{static createDefaultWalletMonitorOptions(d,f,h){if(h||(h=new t.Services(d)),!h.options.chaintracks)throw new t.sdk.WERR_INVALID_PARAMETER("services.options.chaintracks","valid");return{chain:d,services:h,storage:f,msecsWaitPerMerkleProofServiceReq:500,taskRunWaitMsecs:5e3,abandonedMsecs:1e3*60*5,unprovenAttemptsLimitTest:10,unprovenAttemptsLimitMain:144,chaintracks:h.options.chaintracks}}constructor(d){this.oneSecond=1e3,this.oneMinute=60*this.oneSecond,this.oneHour=60*this.oneMinute,this.oneDay=24*this.oneHour,this.oneWeek=7*this.oneDay,this._tasks=[],this._otherTasks=[],this._tasksRunning=!1,this.defaultPurgeParams={purgeSpent:!1,purgeCompleted:!1,purgeFailed:!0,purgeSpentAge:2*this.oneWeek,purgeCompletedAge:2*this.oneWeek,purgeFailedAge:5*this.oneDay},this._runAsyncSetup=!0,this.options={...d},this.services=d.services,this.chain=this.services.chain,this.storage=d.storage,this.chaintracks=d.chaintracks}addAllTasksToOther(){this._otherTasks.push(new a.TaskClock(this)),this._otherTasks.push(new l.TaskNewHeader(this)),this._otherTasks.push(new e.TaskPurge(this,this.defaultPurgeParams)),this._otherTasks.push(new n.TaskReviewStatus(this)),this._otherTasks.push(new o.TaskSendWaiting(this)),this._otherTasks.push(new s.TaskCheckForProofs(this)),this._otherTasks.push(new i.TaskFailAbandoned(this)),this._otherTasks.push(new r.TaskSyncWhenIdle(this))}addDefaultTasks(){this._tasks.push(new a.TaskClock(this)),this._tasks.push(new l.TaskNewHeader(this)),this._tasks.push(new o.TaskSendWaiting(this,8*this.oneSecond,7*this.oneSecond)),this._tasks.push(new s.TaskCheckForProofs(this,2*this.oneHour)),this._tasks.push(new i.TaskFailAbandoned(this,8*this.oneMinute)),this._tasks.push(new e.TaskPurge(this,this.defaultPurgeParams,6*this.oneHour)),this._tasks.push(new n.TaskReviewStatus(this))}addMultiUserTasks(){this._tasks.push(new a.TaskClock(this)),this._tasks.push(new l.TaskNewHeader(this)),this._tasks.push(new o.TaskSendWaiting(this,8*this.oneSecond,7*this.oneSecond)),this._tasks.push(new s.TaskCheckForProofs(this,2*this.oneHour)),this._tasks.push(new i.TaskFailAbandoned(this,8*this.oneMinute)),this._tasks.push(new e.TaskPurge(this,this.defaultPurgeParams,6*this.oneHour)),this._tasks.push(new n.TaskReviewStatus(this))}addTask(d){if(this._tasks.some(f=>f.name===d.name))throw new t.sdk.WERR_BAD_REQUEST(`task ${d.name} has already been added.`);this._tasks.push(d)}removeTask(d){this._tasks=this._tasks.filter(f=>f.name!==d)}async setupChaintracksListeners(){}async runTask(d){let f=this._tasks.find(p=>p.name===d),h="";return f||(f=this._otherTasks.find(p=>p.name===d)),f&&(await f.asyncSetup(),h=await f.runTask()),h}async runOnce(){if(this._runAsyncSetup){for(const d of this._tasks){try{await d.asyncSetup()}catch(f){const h=t.sdk.WalletError.fromUnknown(f),p=`monitor task ${d.name} asyncSetup error ${h.code} ${h.description}`;console.log(p),await this.logEvent("error0",p)}if(!this._tasksRunning)break}this._runAsyncSetup=!1}if(this.storage.getActive().isStorageProvider()){const d=[],f=new Date().getTime();for(const h of this._tasks)try{h.trigger(f).run&&d.push(h)}catch(p){const g=t.sdk.WalletError.fromUnknown(p),w=`monitor task ${h.name} trigger error ${g.code} ${g.description}`;console.log(w),await this.logEvent("error0",w)}for(const h of d)try{if(this.storage.getActive().isStorageProvider()){const p=await h.runTask();p&&p.length>0&&(console.log(`Task${h.name} ${p}`),await this.logEvent(h.name,p))}}catch(p){const g=t.sdk.WalletError.fromUnknown(p),w=`monitor task ${h.name} runTask error ${g.code} ${g.description}
${g.stack}`;console.log(w),await this.logEvent("error1",w)}finally{h.lastRunMsecsSinceEpoch=new Date().getTime()}}}async startTasks(){if(this._tasksRunning)throw new t.sdk.WERR_BAD_REQUEST("monitor tasks are already runnining.");for(this._tasksRunning=!0;this._tasksRunning;)await this.runOnce(),await(0,t.wait)(this.options.taskRunWaitMsecs)}async logEvent(d,f){await this.storage.runAsStorageProvider(async h=>{await h.insertMonitorEvent({created_at:new Date,updated_at:new Date,id:0,event:d,details:f})})}stopTasks(){this._tasksRunning=!1}processNewBlockHeader(d){const f=d;this.lastNewHeader=f,this.lastNewHeaderWhen=new Date,console.log(`WalletMonitor notified of new block header ${f.height}`),s.TaskCheckForProofs.checkNow=!0}processReorg(d,f,h){}};return Xo.Monitor=c,Xo}var B1;function ve(){return B1||(B1=1,function(t){var e=Ee&&Ee.__createBinding||(Object.create?function(s,o,a,l){l===void 0&&(l=a);var c=Object.getOwnPropertyDescriptor(o,a);(!c||("get"in c?!o.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return o[a]}}),Object.defineProperty(s,l,c)}:function(s,o,a,l){l===void 0&&(l=a),s[l]=o[a]}),n=Ee&&Ee.__setModuleDefault||(Object.create?function(s,o){Object.defineProperty(s,"default",{enumerable:!0,value:o})}:function(s,o){s.default=o}),r=Ee&&Ee.__importStar||function(){var s=function(o){return s=Object.getOwnPropertyNames||function(a){var l=[];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(l[l.length]=c);return l},s(o)};return function(o){if(o&&o.__esModule)return o;var a={};if(o!=null)for(var l=s(o),c=0;c<l.length;c++)l[c]!=="default"&&e(a,o,l[c]);return n(a,o),a}}(),i=Ee&&Ee.__exportStar||function(s,o){for(var a in s)a!=="default"&&!Object.prototype.hasOwnProperty.call(o,a)&&e(o,s,a)};Object.defineProperty(t,"__esModule",{value:!0}),t.sdk=void 0,t.sdk=r(iC()),i(fm(),t),i(bC(),t),i(Ud,t),i(p2(),t),i(q7(),t),i(eM(),t)}(ph)),ph}var tM=ve();const nM="1ToDoDtKreEzbHYKFjmoBuduFmSXXUGZG",rM=cc("div")({height:"4em"}),iM=cc(Hp)({margin:"auto",textAlign:"center",marginTop:"5em"}),sM=cc(tI)({position:"fixed",right:"1em",bottom:"1em",zIndex:10}),Dh=cc(uO)({margin:"1em"}),oM=cc(iP)({color:"#ffffff"}),Vr=new lm,aM=()=>{const[t,e]=A.useState(!1),[n,r]=A.useState(!1),[i,s]=A.useState(""),[o,a]=A.useState(1e3),[l,c]=A.useState(!1),[u,d]=A.useState(!0),[f,h]=A.useState([]),[p,g]=A.useState(!1),[w,v]=A.useState(null),[m,y]=A.useState(!1);lA(()=>{const k=setInterval(()=>{UN().then(S=>{S===0?e(!0):(e(!1),clearInterval(k))}).catch(S=>{console.error("Error checking for MetaNet Client:",S)})},1e3);return()=>{clearInterval(k)}},[]);const b=async k=>{k.preventDefault();try{if(i===""){De.error("Enter a task to complete!");return}if(o===0||isNaN(o)){De.error("Enter an amount for the new task!");return}if(o<1){De.error("The amount must be more than 1 satoshis!");return}c(!0);const S=(await Vr.encrypt({plaintext:U(i,"utf8"),protocolID:[0,"todo list"],keyID:"1"})).ciphertext,R=await new Cs(Vr).lock([U(nM,"utf8"),S],[0,"todo list"],"1","self"),B=await Vr.createAction({outputs:[{lockingScript:R.toHex(),satoshis:Number(o),basket:"todo tokens",outputDescription:"New ToDo list item"}],options:{randomizeOutputs:!1,acceptDelayedBroadcast:!1},description:`Create a TODO task: ${i}`});De.dark("Task successfully created!"),h([{task:i,sats:Number(o),outpoint:`${B.txid}.0`,lockingScript:R.toHex(),beef:B.tx},...f]),s(""),a(1e3),r(!1)}catch(S){De.error(S.message),console.error(S)}finally{c(!1)}},x=async k=>{k.preventDefault();try{if(y(!0),w===null)throw new Error("selectedTask does not exist");let S=`Complete a TODO task: "${w.task}"`;S.length>128&&(S=S.substring(0,128));const P=w.outpoint.split(".")[0],R=Qn.fromBinary(w.beef),B=await R.verify(await new tM.Services("main").getChainTracker(),!0),{signableTransaction:T}=await Vr.createAction({description:S,inputBEEF:R.toBinary(),inputs:[{inputDescription:"Complete a ToDo list item",outpoint:w.outpoint,unlockingScriptLength:73}],options:{randomizeOutputs:!1}});if(T===void 0)throw new Error("Failed to create signable transaction");const N=wr.fromBEEF(T.tx),$=await new Cs(Vr).unlock([0,"todo list"],"1","self","all",!1,w.sats,vr.fromHex(w.lockingScript)).sign(N,0),H=await Vr.signAction({reference:T.reference,spends:{0:{unlockingScript:$.toHex()}}});console.log(H),De.dark("Congrats! Task complete 🎉"),h(W=>{const C=W.findIndex(V=>V===w);return C>-1&&W.splice(C,1),[...W]}),v(null),g(!1)}catch(S){De.error(`Error completing task: ${S.message}`),console.error(S)}finally{y(!1)}};A.useEffect(()=>{(async()=>{try{const k=await Vr.listOutputs({basket:"todo tokens",include:"entire transactions"});let S;const R=(await Promise.all(k.outputs.map(async(B,T)=>{try{S=k.outputs[T].outpoint.split(".")[0];const L=wr.fromBEEF(k.BEEF,B.outpoint.split(".")[0]).outputs[0].lockingScript,H=Cs.decode(L).fields[1],W=await Vr.decrypt({ciphertext:H,protocolID:[0,"todo list"],keyID:"1"}),C=re(W.plaintext);return{lockingScript:L.toHex(),outpoint:`${S}.0`,sats:B.satoshis??0,task:C,beef:k.BEEF}}catch(N){return console.error("Error decrypting task:",N),null}}))).filter(B=>B!==null);h(R.reverse())}catch(k){k.code!=="ERR_NO_METANET_IDENTITY"&&(De.error(`Failed to load ToDo tasks! Error: ${k.message}`),console.error(k))}finally{d(!1)}})()},[]);const I=k=>()=>{v(k),g(!0)};return F.jsxs(F.Fragment,{children:[F.jsx(dA,{open:t,onClose:()=>{e(!1)}}),F.jsx(gI,{position:"top-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0}),F.jsx(gP,{position:"static",children:F.jsxs(L5,{children:[F.jsx(Jn,{variant:"h6",component:"div",sx:{flexGrow:1},children:"ToDo List — Get Rewarded!"}),F.jsx(oM,{onClick:()=>window.open("https://github.com/p2ppsr/todo-react","_blank"),children:F.jsx(yI,{})})]})}),F.jsx(rM,{}),f.length>=1&&F.jsx(sM,{color:"primary",onClick:()=>{r(!0)},children:F.jsx(Gp,{})}),u?F.jsx(Dh,{}):F.jsxs(iI,{children:[f.length===0&&F.jsxs(iM,{container:!0,direction:"column",justifyContent:"center",alignItems:"center",children:[F.jsxs(Hp,{item:!0,justifyContent:"center",alignItems:"center",children:[F.jsx(Jn,{variant:"h4",children:"No ToDo Items"}),F.jsx(Jn,{color:"textSecondary",children:"Use the button below to start a task"})]}),F.jsx(Hp,{item:!0,justifyContent:"center",alignItems:"center",sx:{paddingTop:"2.5em",marginBottom:"1em"},children:F.jsx(tI,{color:"primary",onClick:()=>{r(!0)},children:F.jsx(Gp,{})})})]}),f.map((k,S)=>F.jsxs(RO,{button:!0,onClick:I(k),children:[F.jsx(NO,{children:F.jsx(u8,{checked:!1})}),F.jsx(DO,{primary:k.task,secondary:`${k.sats} satoshis`})]},S))]}),F.jsx(xv,{open:n,onClose:()=>{r(!1)},children:F.jsxs("form",{onSubmit:k=>{k.preventDefault(),(async()=>{try{await b(k)}catch(S){console.error("Error in form submission:",S)}})()},children:[F.jsx(Ev,{children:"Create a Task"}),F.jsxs(Iv,{children:[F.jsx(Sv,{paragraph:!0,children:"Describe your task and set aside some satoshis you'll get back once it's done."}),F.jsx(qv,{multiline:!0,rows:3,fullWidth:!0,autoFocus:!0,label:"Task to complete",onChange:k=>{s(k.target.value)},value:i}),F.jsx("br",{}),F.jsx("br",{}),F.jsx(qv,{fullWidth:!0,type:"number",inputProps:{min:1},label:"Completion amount",onChange:k=>{a(Number(k.target.value))},value:o})]}),l?F.jsx(Dh,{}):F.jsxs(kv,{children:[F.jsx(Vc,{onClick:()=>{r(!1)},children:"Cancel"}),F.jsx(Vc,{type:"submit",children:"OK"})]})]})}),F.jsx(xv,{open:p,onClose:()=>{g(!1)},children:F.jsxs("form",{onSubmit:k=>{k.preventDefault(),(async()=>{try{await x(k)}catch(S){console.error("Error in form submission:",S)}})()},children:[F.jsxs(Ev,{children:['Complete "',w==null?void 0:w.task,'"?']}),F.jsx(Iv,{children:F.jsxs(Sv,{paragraph:!0,children:["By marking this task as complete, you'll receive back your ",w==null?void 0:w.sats," satoshis."]})}),m?F.jsx(Dh,{}):F.jsxs(kv,{children:[F.jsx(Vc,{onClick:()=>{g(!1)},children:"Cancel"}),F.jsx(Vc,{type:"submit",children:"Complete Task"})]})]})})]})},cM=t=>`${8*t}px`,lM=Ng({palette:{mode:"dark",primary:{main:"#00d1b2"},secondary:{main:"#7e57c2"},background:{default:"#121212",paper:"#242424"},error:{main:"#ff3860"}},typography:{fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif',h4:{fontWeight:700},button:{textTransform:"none"}},spacing:cM}),W2=document.getElementById("root");if(W2===null)throw new Error("Failed to find the root element");const uM=$h.createRoot(W2);uM.render(F.jsxs(w_,{theme:lM,children:[F.jsx(gI,{position:"top-center",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0}),F.jsx(p8,{}),F.jsx(aM,{})]}));
